{% extends "%s/2019/base_chapter.html" % lang %}

<!--{# IMPORTANT!

- `chapter.html` is a "template for templates" used by the `generate_chapters.js` script, hence the strange template syntax (eg, mixing ejs and jinja syntax)
- if you want to modify `chapter.html`, you must also:
  - translate the corresponding language-specific templates (eg `src/templates/<lang>/<year>/chapter.html`)
  - run the generation script to update each chapter template
- if you want to modify the chapter templates (eg `src/templates/<lang>/<year>/chapters/<chapter>.html`):
  - make changes to the markdown content directly (`src/content/<lang>/<year>/<chapter>.md`) because any changes to the chapter templates will be overwritten by the generation script
#}-->

{% set metadata = {"part_number":"II","chapter_number":5,"title":"サードパーティ","description":"2019 Web Almanacのサードパーティの章。サードパーティの使用目的、パフォーマンスへの影響、プライバシーへの影響について説明しています。","authors":["patrickhulce"],"reviewers":["zcorpan","obto","jasti"],"translators":["ksakae"],"discuss":"1760","results":"https://docs.google.com/spreadsheets/d/1iC4WkdadDdkqkrTY32g7hHKhXs9iHrr3Bva8CuPjVrQ/","queries":"05_Third_Parties","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-05-14T00:00:00.000Z","chapter":"third-parties"} %} {% block index %}
<ul>
  <li>
    <a href="#導入">導入</a>
  </li>

  <li>
    <a href="#定義">定義</a>

    <ul>
      <li>
        <a href="#サードパーティ">&#34;サードパーティ&#34;</a>
      </li>

      <li>
        <a href="#プロバイダーカテゴリー">プロバイダーカテゴリー</a>
      </li>

      <li>
        <a href="#警告事項">警告事項</a>
      </li>
    </ul>
  </li>

  <li>
    <a href="#データ">データ</a>

    <ul>
      <li>
        <a href="#カテゴリー">カテゴリー</a>
      </li>

      <li>
        <a href="#プロバイダー">プロバイダー</a>
      </li>

      <li>
        <a href="#リソースの種類">リソースの種類</a>
      </li>

      <li>
        <a href="#リクエスト数">リクエスト数</a>
      </li>

      <li>
        <a href="#バイトの重さ">バイトの重さ</a>
      </li>

      <li>
        <a href="#スクリプトの実行">スクリプトの実行</a>
      </li>
    </ul>
  </li>

  <li>
    <a href="#使用パターン">使用パターン</a>

    <ul>
      <li>
        <a href="#データの生成と消費">データの生成と消費</a>
      </li>

      <li>
        <a href="#ウェブトラフィックの収益化">ウェブトラフィックの収益化</a>
      </li>

      <li>
        <a href="#開発の簡素化">開発の簡素化</a>
      </li>
    </ul>
  </li>

  <li>
    <a href="#反響">反響</a>

    <ul>
      <li>
        <a href="#パフォーマンス">パフォーマンス</a>
      </li>

      <li>
        <a href="#プライバシー">プライバシー</a>
      </li>

      <li>
        <a href="#セキュリティ">セキュリティ</a>
      </li>
    </ul>
  </li>

  <li>
    <a href="#結論">結論</a>
  </li>
</ul>

{% endblock %} {% block main_content %}
<h2 id="導入"><a href="#導入" class="anchor-link">導入</a></h2>
<p>オープンWebは広大で、リンク可能で、設計により相互運用可能です。他の誰かの複雑なライブラリを取得し、単一の<code>&lt;link&gt;</code>または<code>&lt;script&gt;</code>要素を使用してサイトで使用する機能により開発者の生産性が大幅に向上し、素晴らしく新しいWeb体験を実現しました。反対に、一部のサードパーティプロバイダーが非常に人気があるため、パフォーマンス、プライバシー、およびセキュリティに関する重要な懸念が生じています。この章では、2019年のWebに対するサードパーティコードの普及と影響、サードパーティソリューションの人気につながる使用パターンと、Web体験の将来への影響の可能性について検討します。</p>
<h2 id="定義"><a href="#定義" class="anchor-link">定義</a></h2>
<h3 id="サードパーティ"><a href="#サードパーティ" class="anchor-link">"サードパーティ"</a></h3>
<p>サードパーティとは、サイトとユーザーの主要な関係の外にあるエンティティです。つまり、サイトの側面はサイトの所有者の直接の管理下になく、承認を得て存在します。たとえば、Googleアナリティクススクリプトは、一般的なサードパーティリソースの例です。</p>
<p>サードパーティのリソースは次のとおりです。</p>
<ul>
  <li>共有および公開オリジンでホストされています</li>
  <li>さまざまなサイトで広く使用されています</li>
  <li>個々のサイト所有者の影響を受けない</li>
</ul>
<p>これらの目標を可能な限り正確に一致させるために、この章で使用されるサードパーティリソースの正式な定義は、HTTP Archiveデータセット内の少なくとも50のユニークなページにリソースを見つけることができるドメインに由来するリソースです。</p>
<p>これらの定義を使用して、ファーストパーティ・ドメインから提供されたサードパーティ・コンテンツはファーストパーティ・コンテンツとしてカウントされることに注意してください。例えば、セルフホスティングのGoogle Fontsやbootstrap.cssは、ファースト・パーティ・コンテンツとしてカウントされます。同様に、サードパーティのドメインから提供されたファーストパーティのコンテンツは、サードパーティのコンテンツとしてカウントされます。たとえば、サードパーティ・ドメインでCDNを介して提供されるファーストパーティの画像は、サードパーティ・コンテンツとみなされます。</p>
<h3 id="プロバイダーカテゴリー"><a href="#プロバイダーカテゴリー" class="anchor-link">プロバイダーカテゴリー</a></h3>
<p>この章では、サードパーティプロバイダをこれらの大まかなカテゴリのいずれかに分類しています。以下に簡単な説明を記載し、ドメインとカテゴリのマッピングについては、<a href="https://github.com/patrickhulce/third-party-web/blob/8afa2d8cadddec8f0db39e7d715c07e85fb0f8ec/data/entities.json5">サードパーティ・ウェブ・リポジトリ</a>を参照してください。</p>
<ul>
  <li><strong>Ad</strong> - 広告の表示と測定</li>
  <li><strong>Analytics</strong> - トラッキングサイト訪問者の行動</li>
  <li><strong>CDN</strong> - 公共の共有ユーティリティやユーザーのプライベートコンテンツを提供</li>
  <li><strong>Content</strong> - 公開を容易にし、シンジゲートされたコンテンツを提供</li>
  <li><strong>Customer Success</strong> - サポートと顧客関係管理の機能</li>
  <li><strong>Hosting</strong> - ユーザー任意のコンテンツを提供</li>
  <li><strong>Marketing</strong> - 営業、見込み客獲得、メールマーケティング機能</li>
  <li><strong>Social</strong> - ソーシャルネットワークとその連携</li>
  <li><strong>Tag Manager</strong> - 他の第三者の包含を管理することを唯一の役割を提供</li>
  <li><strong>Utility</strong> - 開発を補助するためのコード</li>
  <li><strong>Video</strong> - ユーザーの任意の動画コンテンツ</li>
  <li><strong>Other</strong> - 未分類、上記に分類されないカテゴリ</li>
</ul>
<p class="note"><strong>CDNについての注意事項</strong>: ここでのCDNカテゴリには、<strong>パブリック</strong>CDNドメイン（例：bootstrapcdn.com、cdnjs.cloudflare.comなど）上でリソースを提供するプロバイダが含まれており、単にCDN上で提供されるリソースは含まれて<strong>いません</strong>。</p>
<h3 id="警告事項"><a href="#警告事項" class="anchor-link">警告事項</a></h3>
<ul>
  <li>ここで提示されているデータはすべて、非インタラクティブなコールドロードに基づいています。これらの値は、ユーザーとのインタラクションの後では、かなり異なって見えるようになる可能性があります。</li>
  <li>リクエスト量別のサードパーティドメインの約84％が特定され、分類されています。残りの16％は「その他」のカテゴリーに分類されています。</li>
</ul>
<h2 id="データ"><a href="#データ" class="anchor-link">データ</a></h2>
<figure id="fig-1">
  <div class="big-number">93.59%</div>
  <figcaption><a href="#fig-1" class="anchor-link">図 1.</a> 少なくとも1つのサードパーティ製リソースを含むデスクトップページの割合。</figcaption>
</figure>
<p>サードパーティのコードは至る所にあります。ページの93％が少なくとも1つのサードパーティリソースを含み、ページの76％がアナリティクスドメインへのリクエストを発行しています。中央のページでは、ネットワークアクティビティ全体の35％を占める少なくとも9つのユニークサードパーティドメインからコンテンツをリクエストしており、最もアクティブな10％のページでは175以上のサードパーティリクエストを発行しています。サードパーティはウェブの不可欠な部分であると言っても過言ではありません。</p>
<figure id="fig-2">
  <div class="big-number">55.63%</div>
  <figcaption><a href="#fig-2" class="anchor-link">図 2.</a> 少なくとも1つの広告リソースを含むデスクトップページの割合。</figcaption>
</figure>
<h3 id="カテゴリー"><a href="#カテゴリー" class="anchor-link">カテゴリー</a></h3>
<p>サードパーティ製コンテンツの普及が驚くに値しないとすれば、おそらくもっと興味深いのは、サードパーティ製コンテンツのプロバイダタイプ別の内訳です。</p>
<p>ウェブ上でのサードパーティの存在は広告が最もユーザーの目につきやすい例かもしれませんが、アナリティクスプロバイダーが最も一般的なサードパーティのカテゴリーであり、76％のサイトで少なくとも1つのアナリティクスリクエストが含まれています。CDNが63％、広告が57％、Sentry、Stripe、Google Maps SDKなどの開発者向けユーティリティが56％で、最も多くのウェブプロパティに表示されているのは僅差の2位、3位、4位と続いています。これらのカテゴリの人気は、本章で後述するウェブ利用パターンの基礎を形成しています。</p>
<h3 id="プロバイダー"><a href="#プロバイダー" class="anchor-link">プロバイダー</a></h3>
<p>プロバイダーの比較的小さなセットがサードパーティの状況を支配しています：トップ100ドメインは、ウェブ全体のネットワーク要求の30％を占めています。Google、Facebook、YouTubeのような大企業は、それぞれのシェアの完全なパーセンテージポイントでここの見出しを作るが、WixやShopifyのような小さな事業体は同様にサードパーティの人気のかなりの部分を指揮します。</p>
<p>個々のプロバイダの人気とパフォーマンスへの影響については、多くのことが言えるかもしれませんが、このより意見の多い分析は読者や<a href="https://thirdpartyweb.today">サードパーティ製Web</a>のような他の目的のために構築されたツールの練習として残されています。</p>
<figure id="fig-3">
  <div class="table-wrap">
    <div class="table-wrap-container">
      <table>
        <thead>
          <tr>
            <th>ランク</th>
            <th>サードパーティドメイン</th>
            <th>リクエストの割合</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td><code>fonts.gstatic.com</code></td>
            <td>2.53%</td>
          </tr>
          <tr>
            <td>2</td>
            <td><code>www.facebook.com</code></td>
            <td>2.38%</td>
          </tr>
          <tr>
            <td>3</td>
            <td><code>www.google-analytics.com</code></td>
            <td>1.71%</td>
          </tr>
          <tr>
            <td>4</td>
            <td><code>www.google.com</code></td>
            <td>1.17%</td>
          </tr>
          <tr>
            <td>5</td>
            <td><code>fonts.googleapis.com</code></td>
            <td>1.05%</td>
          </tr>
          <tr>
            <td>6</td>
            <td><code>www.youtube.com</code></td>
            <td>0.99%</td>
          </tr>
          <tr>
            <td>7</td>
            <td><code>connect.facebook.net</code></td>
            <td>0.97%</td>
          </tr>
          <tr>
            <td>8</td>
            <td><code>googleads.g.doubleclick.net</code></td>
            <td>0.93%</td>
          </tr>
          <tr>
            <td>9</td>
            <td><code>cdn.shopify.com</code></td>
            <td>0.76%</td>
          </tr>
          <tr>
            <td>10</td>
            <td><code>maps.googleapis.com</code></td>
            <td>0.75%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <figcaption><a href="#fig-3" class="anchor-link">図 3.</a> サードパーティドメインの人気トップ10</figcaption>
</figure>
<figure id="fig-4">
  <div class="table-wrap">
    <div class="table-wrap-container">
      <table>
        <thead>
          <tr>
            <th>ランク</th>
            <th>サードパーティURL</th>
            <th>リクエストの割合</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td><code>https://www.google-analytics.com/analytics.js</code></td>
            <td>0.64%</td>
          </tr>
          <tr>
            <td>2</td>
            <td><code>https://connect.facebook.net/en_US/fbevents.js</code></td>
            <td>0.20%</td>
          </tr>
          <tr>
            <td>3</td>
            <td><code>https://connect.facebook.net/signals/plugins/inferredEvents.js?v=2.8.51</code></td>
            <td>0.19%</td>
          </tr>
          <tr>
            <td>4</td>
            <td><code>https://staticxx.facebook.com/connect/xd_arbiter.php?version=44</code></td>
            <td>0.16%</td>
          </tr>
          <tr>
            <td>5</td>
            <td><code>https://fonts.gstatic.com/s/opensans/v16/mem8YaGs126MiZpBA-UFVZ0b.woff2</code></td>
            <td>0.13%</td>
          </tr>
          <tr>
            <td>6</td>
            <td><code>https://www.googletagservices.com/activeview/js/current/osd.js?cb=%2Fr20100101</code></td>
            <td>0.12%</td>
          </tr>
          <tr>
            <td>7</td>
            <td><code>https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2</code></td>
            <td>0.11%</td>
          </tr>
          <tr>
            <td>8</td>
            <td><code>https://googleads.g.doubleclick.net/pagead/id</code></td>
            <td>0.11%</td>
          </tr>
          <tr>
            <td>9</td>
            <td><code>https://fonts.gstatic.com/s/roboto/v19/KFOmCnqEu92Fr1Mu4mxK.woff2</code></td>
            <td>0.10%</td>
          </tr>
          <tr>
            <td>10</td>
            <td><code>https://www.googleadservices.com/pagead/conversion_async.js</code></td>
            <td>0.10%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <figcaption><a href="#fig-4" class="anchor-link">図 4.</a> サードパーティからのリクエストが多いトップ10</figcaption>
</figure>
<h3 id="リソースの種類"><a href="#リソースの種類" class="anchor-link">リソースの種類</a></h3>
<p>サードパーティコンテンツのリソースタイプの内訳を見ると、サードパーティのコードがWeb全体でどのように使用されているかを知ることができます。ファーストパーティのリクエストが、56％の画像、23％のスクリプト、14％のCSS、4％のHTMLにすぎないのに対し、サードパーティのリクエストはスクリプトとHTMLの割合が高く32％のスクリプト、34％の画像、12％のHTML、6％のCSSとなっています。このことは、サードパーティのコードがデザインを支援するために使用される頻度が低く代わりにファーストパーティのコードよりもインタラクションを促進したり観察したりするために使用される頻度が高いことを示唆していますがパーティの状態別のリソースタイプの内訳を見ると、よりニュアンスのあるストーリーがわかります。CSSと画像がそれぞれ70％、64％と圧倒的にファーストパーティであるのに対し、フォントはほとんどがサードパーティのプロバイダによって提供されており、ファーストパーティのソースから提供されているのは28％ にすぎません。この使用パターンの概念については、この章で後ほど詳しく説明します。</p>
<figure id="fig-5">
  <a href="/static/images/2019/third-parties/fig5.png">
    <img src="/static/images/2019/third-parties/fig5.png" alt="図5. カテゴリーとコンテンツタイプ別の第三者リクエストの割合。" aria-labelledby="fig5-caption" aria-describedby="fig5-description" width="600" height="387" data-width="600" data-height="387" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRO5jS8JpjYdTr9poYmpyw-BL1LPQtfzHx_1hLRk9lgwkHQERuyELgF_rQ-4CpTbdbAyI9u1ggtPlLQ/pubchart?oid=488955458&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
  <div id="fig5-description" class="visually-hidden">サードパーティの各カテゴリのコンテンツタイプの内訳を示すグラフ。画像とスクリプトが各カテゴリのリクエストの大半を占めています。CDNリクエストでは、特にフォントの割合が高いです。</div>
  <figcaption id="fig5-caption"><a href="#fig-5" class="anchor-link">図 5.</a> カテゴリーとコンテンツタイプ別の第三者リクエストの割合。</figcaption>
</figure>
<p>このデータからは、他にもいくつかの興味深い事実が飛び出してきます。トラッキングピクセル（解析ドメインへの画像リクエスト）は全ネットワークリクエストの1.6％を占め、FacebookやTwitterなどのソーシャルネットワークへの動画リクエストの数は、YouTubeやVimeoなどの専用動画プロバイダーの6倍にもなります（YouTubeのデフォルトの埋め込みはHTMLとプレビューサムネイルで構成されていて自動再生動画ではないためと思われます）。</p>
<h3 id="リクエスト数"><a href="#リクエスト数" class="anchor-link">リクエスト数</a></h3>
<p>全リクエストの49％がサードパーティです。ファーストパーティは2019年にも、51％と、ウェブリソースの大部分を占めるという王座にあと一歩まで迫ることができます。全リクエストの半分弱がサードパーティ製であるにもかかわらず、まったく含まれていないページが少数であることを考えると最もアクティブなサードパーティ製ユーザーは、自分の公平なシェアよりもかなり多くのことをしているに違いありません。実際、75％、90％、99％の割合で、ほぼすべてのページがサードパーティのコンテンツで構成されていることがわかります。実際、WixやSquareSpaceのような分散型WYSIWYGプラットフォームに大きく依存しているサイトでは、ルートドキュメントが唯一のファーストパーティのリクエストになっているかもしれません。</p>
<!-- insert graphic of metric 05_11 -->
<p>各サードパーティプロバイダーが発行するリクエストの数も、カテゴリーによって大きく異なります。アナリティクスはウェブサイトで最も普及しているサードパーティのカテゴリーですが、サードパーティのネットワークリクエスト全体のわずか7％にすぎません。一方、広告は、サイト数が20％近く少ないにもかかわらず、サードパーティのネットワークリクエスト全体の25％を占めています。彼らの人気に比べてリソースへの影響が桁違いに大きいことは、残りのデータからも明らかにしていくテーマになるでしょう。</p>
<h3 id="バイトの重さ"><a href="#バイトの重さ" class="anchor-link">バイトの重さ</a></h3>
<p>リクエストの49％がサードパーティ製のものであるのに対し、ウェブのバイト数でのシェアは28％とかなり低くなっています。複数のリソースタイプ別の内訳も同様です。サードパーティのフォントはフォント全体の72％を占めていますが、フォントのバイト数に占める割合は53％にすぎません。これらはすべて、サードパーティのプロバイダがレスポンスサイズを低く抑える責任ある管理人であることを示唆しているように見えます。</p>
<p>スクリプトの57％を提供しているにもかかわらず、サードパーティはスクリプトバイトの64％を占めています。つまり、サードパーティのスクリプトはファーストパーティのスクリプトよりも平均で大きくなっています。これは、次のいくつかのセクションで述べるパフォーマンスへの影響を示す早期警告の兆候です。</p>
<figure id="fig-7">
  <a href="/static/images/2019/third-parties/fig7.png">
    <img src="/static/images/2019/third-parties/fig7.png" alt="図7. サードパーティカテゴリ毎のリソースバイトの分布。" aria-labelledby="fig7-caption" aria-describedby="fig7-description" width="600" height="387" data-width="600" data-height="387" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRO5jS8JpjYdTr9poYmpyw-BL1LPQtfzHx_1hLRk9lgwkHQERuyELgF_rQ-4CpTbdbAyI9u1ggtPlLQ/pubchart?oid=1167032693&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
  <div id="fig7-description" class="visually-hidden">サードパーティのカテゴリ毎でコンテンツタイプ毎のバイト数の内訳を示すグラフ。画像とスクリプトはカテゴリ間で比較的均等に分布しています。フォントの80%はCDNから来ています。動画は「コンテンツ」サードパーティからのものです。</div>
  <figcaption id="fig7-caption"><a href="#fig-7" class="anchor-link">図 7.</a> サードパーティカテゴリ毎のリソースバイトの分布。</figcaption>
</figure>
<!--

```<insert graphic of metric 05_12>```
-->
<p>具体的なサードパーティプロバイダについては、リクエスト数リーダーボードの上位にいる大手プロバイダがバイト数でも登場しています。注目すべき動きは、YouTube、Shopify、Twitterのようなメディアを中心とした大手プロバイダがバイトインパクトチャートの上位にランクインしていることくらいです。</p>
<!--```<insert table of metric 05_07>```-->
<h3 id="スクリプトの実行"><a href="#スクリプトの実行" class="anchor-link">スクリプトの実行</a></h3>
<p>スクリプトの実行時間の57％はサードパーティ製のスクリプトによるもので、トップ100のドメインはすでにウェブ上のスクリプト実行時間の48％を占めています。このことは、少数のエンティティがウェブのパフォーマンスに与える影響が実際にどれほど大きいかを明確に示しています。このトピックについては、<a href="#パフォーマンス">反響 &gt; パフォーマンス</a>セクションで詳しく説明しています。</p>
<!--```<insert graphic of metric 05_05>```-->
<!--```<insert graphic of metric 05_13>```-->
<p>スクリプト実行の間のカテゴリの内訳は、主にリソース数の内訳に従っています。ここでも広告が最大の割合を占めています。広告スクリプトはサードパーティのスクリプト実行時間の25％を占めており、ホスティングとソーシャルプロバイダーは12％で2位と大きく引き離されています。</p>
<!--```<insert table of metric 05_08>```-->
<!--```<insert table of metric 05_10>```-->
<p>個々のプロバイダの人気とパフォーマンスの影響については、多くのことが言えるかもしれませんが、より意見の多い分析は読者のための演習として残されていますし先に述べた <a href="https://thirdpartyweb.today">サードパーティウェブ</a> のような他の目的のために構築されたツールもあります。</p>
<h2 id="使用パターン"><a href="#使用パターン" class="anchor-link">使用パターン</a></h2>
<p>サイトオーナーはなぜサードパーティのコードを使うのか？　サードパーティのコンテンツがネットワークリクエストの半分近くを占めるようになったのはなぜでしょうか？　これらのリクエストは何をしているのか？　これらの疑問に対する答えは、サードパーティのリソースの3つの主要な使用パターンにあります。大まかに言えば、サイト所有者はユーザーからデータを生成して消費し、サイト体験を収益化しWeb開発を簡素化するためにサードパーティを利用しています。</p>
<h3 id="データの生成と消費"><a href="#データの生成と消費" class="anchor-link">データの生成と消費</a></h3>
<p>アナリティクスは、ウェブ上で最も人気のあるサードパーティのカテゴリですが、ユーザーの目に触れることはほとんどありません。ユーザーのコンテキスト、デバイス、ブラウザ、接続品質、ロケーション、ページのインタラクション、セッションの長さ、再訪問者のステータスなどが継続的に生成されています。このような大規模な時系列データをウェアハウスし、正規化し分析するツールを維持するのは困難で面倒で、コストがかかります。アナリティクスがサードパーティプロバイダーの領域に入ることを明確に必要とするものはありませんが、ユーザーを理解することの魅力、問題空間の複雑さ、データを尊重し責任を持って管理することの重要性が増していることから、アナリティクスはサードパーティの人気のある使用パターンとして自然に表面化しています。</p>
<p>しかし、ユーザーデータには消費という裏返しの側面もあります。アナリティクスはサイトの訪問者からデータを生成することですが、他のサードパーティのリソースは、他の人しか知らない訪問者に関するデータを消費することに重点を置いています。ソーシャルプロバイダーは、この利用パターンにぴったりと当てはまります。サイト所有者は、訪問者のFacebookプロフィールからの情報をサイトに統合したい場合、Facebookのリソースを使用する必要があります。サイトオーナーがソーシャルネットワークのウィジェットを使って体験をパーソナライズし、訪問者のソーシャルネットワークを活用してリーチを増やすことに興味がある限り、ソーシャル統合はサードパーティの領域であり続けると思われます。</p>
<h3 id="ウェブトラフィックの収益化"><a href="#ウェブトラフィックの収益化" class="anchor-link">ウェブトラフィックの収益化</a></h3>
<p>ウェブのオープンモデルは、コンテンツ制作者の金銭的利益を必ずしも満足させるものではなく、多くのサイト所有者は広告でサイトを収益化することに頼っています。広告主との直接の関係を構築し、価格契約を交渉するのは比較的難しく時間のかかるプロセスであるため、この懸念はターゲット広告とリアルタイム入札を行うサードパーティのプロバイダーによって主に処理されています。否定的な世論の広がり、広告ブロッキング技術の普及、ヨーロッパなどの主要な世界市場での規制措置は、収益化のためにサードパーティのプロバイダを継続的に使用する最大の脅威となっています。サイト所有者が突然独自の広告契約を結んだり特注の広告ネットワークを構築したりすることは考えにくいですが、ペイウォールやBraveの<a href="https://basicattentiontoken.org/">Basic Attention Token</a>のような実験のような代替的なマネタイズモデルは、将来のサードパーティの広告業界を揺るがす可能性を秘めています。</p>
<h3 id="開発の簡素化"><a href="#開発の簡素化" class="anchor-link">開発の簡素化</a></h3>
<p>何よりもサードパーティのリソースは、ウェブ開発の経験を単純化するために使用されます。以前の使用パターンでさえも、おそらくこのパターンに当てはまる可能性があります。ユーザーの行動分析、広告主とのコミュニケーション、ユーザー体験のパーソナライズなど、サードパーティのリソースはファーストパーティの開発を容易にするため使用されます。</p>
<p>ホスティングプロバイダは、このパターンの最も極端な例です。これらのプロバイダーの中には、技術的な専門知識がなくても、地球上の誰もがサイトのオーナーになれるようしているところもあります。これらのプロバイダーは、資産のホスティング、コーディングの経験がなくてもサイトを構築できるツール、ドメイン登録サービスを提供しています。</p>
<p>サードパーティ・プロバイダの残りの部分も、この使用パターンに当てはまる傾向がある。フロントエンド開発者が使用するためのjQueryなどのユーティリティライブラリのホスティングであれ、Cloudflareのエッジサーバーにキャッシュされているものであれ人気の高いGoogleCDNから提供されている一般的なフォントの膨大なライブラリであれサードパーティのコンテンツはサイトオーナーが心配することを1つ減らし、もしかしたら素晴らしい体験を提供する仕事を少しだけ楽にしてくれるもう1つの方法です。</p>
<h2 id="反響"><a href="#反響" class="anchor-link">反響</a></h2>
<h3 id="パフォーマンス"><a href="#パフォーマンス" class="anchor-link">パフォーマンス</a></h3>
<p>サードパーティコンテンツの<a href="./performance">パフォーマンス</a>の影響は、カテゴリ的に良い悪いはありません。善良な行為者と悪良な行為者が存在し、カテゴリーの種類によって影響力のレベルが異なります。</p>
<p>良い点：サードパーティ製のフォントやスタイルシートの共有ユーティリティは、平均的にファーストパーティ製のものよりも効率的に提供されます。</p>
<p>ユーティリティ、CDN、およびコンテンツの各カテゴリーは、サードパーティのパフォーマンスにおいて最も輝かしい存在です。これらのカテゴリは、ファーストパーティのソースから提供されるコンテンツと同じ種類のコンテンツの最適化されたバージョンを提供しています。GoogleFontsとTypekitはファーストパーティのフォントよりも平均的に小さい最適化されたフォントを提供し、CloudflareCDNはサイト所有者によっては開発モードで誤って提供されてしまう可能性のあるオープンソースのライブラリをミニ化したバージョンを提供し、GoogleMapsSDKはそうでなければ素朴に大きな画像として提供されてしまう複雑な地図を効率的に配信します。</p>
<p>悪い：非常に小さなエンティティのセットは、ページ上の機能の狭いセットを実行するJavaScriptの実行時間の非常に大きなチャンクを表しています。</p>
<p>広告、ソーシャル、ホスティング、および特定の分析プロバイダーは、ウェブパフォーマンスへの最大の悪影響を表します。ホスティングプロバイダはサイトのコンテンツの大部分を提供しており、他のサードパーティのカテゴリよりもパフォーマンスへの影響が大きいのは当然ですが、ほとんどの場合、JavaScriptをほとんど必要としない静的なサイトを提供していてスクリプトの実行時間を正当化することはできません。しかし、パフォーマンスに影響を与える他のカテゴリーは言い訳できません。これらのカテゴリは、それぞれのページに表示される役割が非常に狭いにもかかわらず、すぐにリソースの大部分を占有してしまいます。例えば、Facebookの「いいね！」ボタンと関連するソーシャルウィジェットは、画面の面積が非常に小さく、ほとんどのウェブ体験の何分の1かしか占めていませんがソーシャルサードパーティのあるページへの影響の中央値はJavaScriptの総実行時間の20％近くになります。状況はアナリティクスについても同様です。トラッキングライブラリは知覚されたユーザー体験に直接貢献しませんが、アナリティクスのサードパーティがあるページへの影響度は90パーセンタイルで、JavaScriptの総実行時間の44％です。</p>
<p>このような少数の事業体がこれほど大きな市場シェアを享受していることの裏には、非常に限られた集中的な努力がウェブ全体に大きな影響を与えることができるということがあります。上位数社のホスティングプロバイダのパフォーマンスを改善するだけで、全ウェブリクエストの2～3％を改善できます。</p>
<h3 id="プライバシー"><a href="#プライバシー" class="anchor-link">プライバシー</a></h3>
<p>サードパーティの最大の利用例は、サイト所有者がユーザーを追跡することであり、一握りの企業がウェブトラフィックの大部分に関する情報を受け取っています。</p>
<p>ユーザーの行動を理解して分析することに対するサイト所有者の関心、それ自体は悪意のあるものではありませんが、ウェブ解析の普及した比較的裏方的な性質は有効な懸念を引き起こし、ヨーロッパの<a href="https://ja.wikipedia.org/wiki/EU%E4%B8%80%E8%88%AC%E3%83%87%E3%83%BC%E3%82%BF%E4%BF%9D%E8%AD%B7%E8%A6%8F%E5%89%87">GDPR</a>やカリフォルニア州の<a href="https://en.wikipedia.org/wiki/California_Consumer_Privacy_Act">CCPA</a>などのプライバシー規制によりユーザー、企業、法律家は近年注目を集めています。開発者がユーザーデータを責任を持って扱い、ユーザーを尊重して扱い、収集されたデータが透明であることを保証することは、アナリティクスを最も人気のあるサードパーティのカテゴリーとして維持し、将来のユーザー価値を提供するためにユーザーの行動を分析するという共生的な性質を維持するための鍵となります。</p>
<p>スクリプトの実行が上位に集中していることは、パフォーマンス向上の潜在的な影響を考えると素晴らしいことですが、プライバシーへの影響を考えるとあまり刺激的ではありません。ウェブ上の全スクリプト実行時間の29％は、GoogleやFacebookが所有するドメイン上のスクリプトだけです。これは、たった2つの事業体によって制御されているCPU時間の非常に大きな割合です。アナリティクスプロバイダーに適用されているのと同じプライバシー保護が、他の広告、ソーシャル、開発者向けユーティリティカテゴリにも適用されるようにすることが重要です。</p>
<h3 id="セキュリティ"><a href="#セキュリティ" class="anchor-link">セキュリティ</a></h3>
<p>セキュリティのトピックについては <a href="./security">セキュリティ</a> の章で詳しく説明していますが、サイトに外部の依存関係を導入することによるセキュリティへの影響は、プライバシーへの懸念と密接に関連しています。第三者が任意のJavaScriptを実行できるようにすることは、あなたのページを完全に制御できます。スクリプトがDOMと<code>window</code>を制御できれば、すべてのことができるようになります。たとえコードにセキュリティ上の懸念がなくても、単一の障害点を導入できます<a href="https://www.stevesouders.com/blog/2010/06/01/frontend-spof/">これは以前から潜在的な問題として認識されていました</a>。</p>
<p><a href="https://csswizardry.com/2019/05/self-host-your-static-assets/">サードパーティのコンテンツをセルフホスティングする</a> は、ここで述べた懸念事項のいくつかとその他の懸念事項に対応しています。さらに、ブラウザが <a href="https://chromestatus.com/feature/5730772021411840">HTTPキャッシュのパーティショニング</a> を増やしていることから、サードパーティから直接読み込むことのメリットはますます疑問視されています。おそらく多くのユースケースでサードパーティのコンテンツを利用するには、その影響を測定することが難しくなってもこの方法の方が良いでしょう。</p>
<h2 id="結論"><a href="#結論" class="anchor-link">結論</a></h2>
<p>サードパーティのコンテンツはどこにでもあります。これは驚くべきことでありません。ウェブの基本は、相互接続とリンクを可能にすることです。この章では、メインドメインから離れてホストされている資産という観点から、サードパーティコンテンツを調べてみました。もし、自己ホスト型のサードパーティ・コンテンツ（例えば、メイン・ドメインにホストされている一般的なオープンソース・ライブラリなど）を含めるとサードパーティの利用率はさらに高まっていたでしょう。</p>
<p><a href="https://en.wikipedia.org/wiki/Code_reuse">コンピュータ技術での再利用</a>は一般的にベストプラクティスですが、ウェブ上のサードパーティは、ページのパフォーマンス、プライバシー、セキュリティにかなりの影響を与える依存関係を導入します。セルフホスティングと慎重なプロバイダの選択は、これらの影響を軽減するために長い道のりを歩むことができます。</p>
<p>第三者のコンテンツがどのようにページに追加されるかという重要な問題に関わらず、結論は同じです。サードパーティはWebの不可欠な部分です！</p>
{% endblock %}
