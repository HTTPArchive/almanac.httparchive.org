{% extends "%s/2019/base_chapter.html" % lang %}

<!--{# IMPORTANT!

- `chapter.html` is a "template for templates" used by the `generate_chapters.js` script, hence the strange template syntax (eg, mixing ejs and jinja syntax)
- if you want to modify `chapter.html`, you must also:
  - translate the corresponding language-specific templates (eg `src/templates/<lang>/<year>/chapter.html`)
  - run the generation script to update each chapter template
- if you want to modify the chapter templates (eg `src/templates/<lang>/<year>/chapters/<chapter>.html`):
  - make changes to the markdown content directly (`src/content/<lang>/<year>/<chapter>.md`) because any changes to the chapter templates will be overwritten by the generation script
#}-->

{% set metadata = {"part_number":"I","chapter_number":1,"title":"JavaScript","description":"Chapitre JavaScript du Web Almanac 2019 couvrant la quantité de JavaScript que nous utilisons sur le web, la compression, les bibliothèques et les frameworks, le chargement et les cartographies de code source (source maps).","authors":["housseindjirdeh"],"reviewers":["obto","paulcalvano","mathiasbynens"],"translators":["borisschapira"],"discuss":"1756","results":"https://docs.google.com/spreadsheets/d/1kBTglETN_V9UjKqK_EFmFjRexJnQOmLLr-I2Tkotvic/","queries":"01_JavaScript","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-08-23T00:00:00.000Z","chapter":"javascript"} %} {% block index %}
<ul>
  <li>
    <a href="#introduction">Introduction</a>
  </li>

  <li>
    <a href="#combien-de-javascript-utilisons-nousnbsp">Combien de JavaScript utilisons-nous ?</a>

    <ul>
      <li>
        <a href="#durée-de-traitement">Durée de traitement</a>
      </li>

      <li>
        <a href="#nombre-de-requêtes">Nombre de requêtes</a>
      </li>

      <li>
        <a href="#domaine-principal-vs-parties-tierces">Domaine principal vs parties tierces</a>
      </li>
    </ul>
  </li>

  <li>
    <a href="#compression-des-ressources">Compression des ressources</a>
  </li>

  <li>
    <a href="#bibliothèques-et-frameworks-ouverts">Bibliothèques et frameworks ouverts</a>

    <ul>
      <li>
        <a href="#frameworks-et-bibliothèques-dinterface">Frameworks et bibliothèques d&#39;interface</a>
      </li>
    </ul>
  </li>

  <li>
    <a href="#chargement-différentiel">Chargement différentiel</a>
  </li>

  <li>
    <a href="#preload-et-prefetch">Preload et prefetch</a>
  </li>

  <li>
    <a href="#api-plus-récentes">API plus récentes</a>
  </li>

  <li>
    <a href="#cartographies-de-code-source-source-maps">Cartographies de code source (source maps)</a>
  </li>

  <li>
    <a href="#conclusion">Conclusion</a>
  </li>
</ul>

{% endblock %} {% block main_content %}
<h2 id="introduction"><a href="#introduction" class="anchor-link">Introduction</a></h2>
<p>JavaScript est un langage de script qui permet de construire des expériences interactives et complexes sur le web. Il permet notamment de répondre aux interactions des utilisateurs et utilisatrices, de mettre à jour le contenu dynamique d’une page, etc. Le JavaScript est utilisé partout où il est question de la façon dont une page web doit se comporter lorsqu’un événement se produit.</p>
<p>La spécification du langage elle-même, ainsi que les nombreuses bibliothèques et <span lang="en">frameworks</span> communautaires utilisés par les développeurs du monde entier, ont changé et évolué depuis la création du langage en 1995. Les implémentations et les interpréteurs JavaScript ont également continué à progresser, rendant le langage utilisable dans de nombreux environnements, et pas seulement dans les navigateurs web.</p>
<p><a href="https://httparchive.org/">HTTP Archive</a> parcourt <a href="https://httparchive.org/reports/state-of-the-web#numUrls">des millions de pages</a> chaque mois et les soumet à une instance privée de <a href="https://webpagetest.org/">WebPageTest</a> pour stocker les informations clés de chaque page (vous pouvez en savoir plus à ce sujet dans notre <a href="./methodology">méthodologie</a>). Dans le contexte de JavaScript, HTTP Archive fournit des informations détaillées sur l’utilisation du langage pour l’ensemble du web. Ce chapitre regroupe et analyse un grand nombre de ces tendances.</p>
<h2 id="combien-de-javascript-utilisons-nousnbsp"><a href="#combien-de-javascript-utilisons-nousnbsp" class="anchor-link">Combien de JavaScript utilisons-nous&nbsp;?</a></h2>
<p>JavaScript est la ressource la plus consommatrice que nous envoyons aux navigateurs&nbsp;: il doit être téléchargé, analysé, compilé et enfin exécuté. Bien que les navigateurs aient considérablement réduit le temps nécessaire pour analyser et compiler les scripts, <a href="https://v8.dev/blog/cost-of-javascript-2019">le téléchargement et l’exécution sont devenus les étapes les plus coûteuses</a> lorsque JavaScript est traité par une page web.</p>
<p>Envoyer de plus petits paquets de JavaScript au navigateur est le meilleur moyen de réduire les temps de téléchargement et d’améliorer ainsi les performances des pages. Mais quelle quantité de JavaScript utilisons-nous réellement&nbsp;?</p>
<figure id="fig-1">
  <a href="/static/images/2019/javascript/fig1.png">
    <img src="/static/images/2019/javascript/fig1.png" alt="Figure 1. Répartition des octets de JavaScript par page." aria-labelledby="fig1-caption" aria-describedby="fig1-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1974602890&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
  <div id="fig1-description" class="visually-hidden">Diagramme à barres montrant que 70 octets de JavaScript sont utilisés dans le percentile p10, 174 octets pour p25, 373 octets pour p50, 693 octets pour p75 et 1093 octets pour p90</div>
  <figcaption id="fig1-caption"><a href="#fig-1" class="anchor-link">Figure 1.</a> Répartition des octets de JavaScript par page.</figcaption>
</figure>
<p>La Figure 1 ci-dessus montre que nous utilisons 373&nbsp;Ko de JavaScript au 50ᵉ percentile (aussi appelé médiane). En d’autres termes, 50&nbsp;% des sites envoient plus que cette quantité de JavaScript à leurs utilisateurs.</p>
<p>En regardant ces chiffres, il est naturel de se demander si ce n’est pas trop de JavaScript. Cependant, en termes de performances des pages, l’impact dépend entièrement des connexions réseau et des appareils utilisés. Ce qui nous amène à notre prochaine question&nbsp;: quelle quantité de JavaScript envoyons-nous lorsque nous comparons les tests sur mobiles et sur ordinateurs de bureau&nbsp;?</p>
<figure id="fig-2">
  <a href="/static/images/2019/javascript/fig2.png">
    <img src="/static/images/2019/javascript/fig2.png" alt="Figure 2. Distribution de JavaScript par page et par type d’appareil." aria-labelledby="fig2-caption" aria-describedby="fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1914565673&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
  <div id="fig2-description" class="visually-hidden">Un diagramme à barres montrant que 76 octets / 65 octets de JavaScript sont utilisés dans le percentile p10 sur ordinateur de bureau et mobile respectivement, 186 / 164 octets pour p25, 391 / 359 octets pour p50, 721 / 668 octets pour p75, et 1 131 / 1 060 octets pour p90.</div>
  <figcaption id="fig2-caption"><a href="#fig-2" class="anchor-link">Figure 2.</a> Distribution de JavaScript par page et par type d’appareil.</figcaption>
</figure>
<p>À chaque centile, nous envoyons un peu plus de JavaScript aux ordinateurs de bureau qu’aux mobiles.</p>
<h3 id="durée-de-traitement"><a href="#durée-de-traitement" class="anchor-link">Durée de traitement</a></h3>
<p>Après avoir été analysé et compilé, le JavaScript récupéré par le navigateur doit être traité (ou exécuté) avant de pouvoir être utilisé. Les appareils varient, et leur puissance de calcul peut affecter de manière significative la vitesse à laquelle JavaScript peut être traité sur une page. Quels sont les temps de traitement actuels sur le web&nbsp;?</p>
<p>Nous pouvons nous faire une idée en analysant les temps de traitement du fil d’exécution principal pour V8 à différents percentiles&nbsp;:</p>
<figure id="fig-3">
  <a href="/static/images/2019/javascript/fig3.png">
    <img src="/static/images/2019/javascript/fig3.png" alt="Figure 3. Temps de traitement du fil d’exécution principal V8 par appareil." aria-labelledby="fig3-caption" aria-describedby="fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=924000517&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
  <div id="fig3-description" class="visually-hidden">Un diagramme à barres indiquant que 141&nbsp;ms / 377&nbsp;ms de temps de traitement sont utilisés dans le percentile p10 sur le bureau et le mobile respectivement, 352 / 988&nbsp;ms pour p25, 849 / 2 437&nbsp;ms pour p50, 1 850 / 5 518&nbsp;ms pour p75, et 3 543 / 10 735&nbsp;ms pour p90.</div>
  <figcaption id="fig3-caption"><a href="#fig-3" class="anchor-link">Figure 3.</a> Temps de traitement du fil d’exécution principal V8 par appareil.</figcaption>
</figure>
<p>À chaque centile, les délais de traitement sont plus longs pour les pages web testées sur mobiles que pour les pages testées sur ordinateurs de bureau. Le temps total médian du fil d’exécution principal sur ordinateurs de bureau est de 849&nbsp;ms, tandis que sur mobiles, il est plus important&nbsp;: 2 437&nbsp;ms.</p>
<p>Bien que ces données montrent combien de temps il peut falloir à un appareil mobile pour traiter JavaScript par rapport à un ordinateur de bureau plus puissant, les appareils mobiles varient également en termes de puissance de calcul. Le tableau suivant montre comment les temps de traitement d’une seule page web peuvent varier considérablement selon la catégorie d’appareil mobile.</p>
<figure id="fig-4">
  <a href="/static/images/2019/javascript/js-processing-reddit.png">
    <img src="/static/images/2019/javascript/js-processing-reddit.png" alt="Délais de traitement de JavaScript pour Reddit.com." aria-labelledby="fig4-caption" aria-describedby="fig4-description" width="600" height="363" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
  <div id="fig4-description" class="visually-hidden">Diagramme à barres montrant 3 appareils différents&nbsp;: en haut, un Pixel 3 présentant une petite portion à la fois sur le fil principal et le fil secondaire de moins de 400&nbsp;ms. Dans le cas du Moto G4, cela représente environ 900&nbsp;ms sur le fil principal et 300&nbsp;ms sur le fil secondaire. La dernière barre est celle d’un Alcatel 1X 5059D avec plus de 2 000&nbsp;ms sur le fil principal et plus de 500&nbsp;ms sur le fil secondaire.</div>
  <figcaption id="fig4-caption">
    <a href="#fig-4" class="anchor-link">Figure 4.</a> Délais de traitement de JavaScript pour Reddit.com, issus de <a href="https://v8.dev/blog/cost-of-javascript-2019"><i lang="en">The cost of JavaScript in 2019</i> (en anglais)</a>.
  </figcaption>
</figure>
<h3 id="nombre-de-requêtes"><a href="#nombre-de-requêtes" class="anchor-link">Nombre de requêtes</a></h3>
<p>Une piste à explorer pour analyser la quantité de JavaScript utilisée par les pages web est le nombre de requêtes envoyées. Avec <a href="./http2">HTTP/2</a>, l’envoi de plusieurs petits paquets peut améliorer le chargement des pages par rapport à l’envoi d’un paquet monolithique plus important. Si nous ventilons également par type de matériel, combien de ressources sont récupérées&nbsp;?</p>
<figure id="fig-5">
  <a href="/static/images/2019/javascript/fig5.png">
    <img src="/static/images/2019/javascript/fig5.png" alt="Figure 5. Répartition de l’ensemble des requêtes JavaScript." aria-labelledby="fig5-caption" aria-describedby="fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1632335480&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
  <div id="fig5-description" class="visually-hidden">Le diagramme à barres montrant 4 / 4 requêtes sur ordinateurs de bureau et mobiles respectivement sont utilisés dans le percentile p10, 10 / 9 en p25, 19 / 18 en p50, 33 / 32 en p75 et 53 / 52 en p90.</div>
  <figcaption id="fig5-caption"><a href="#fig-5" class="anchor-link">Figure 5.</a> Répartition de l’ensemble des requêtes JavaScript.</figcaption>
</figure>
<p>À la médiane, 19 requêtes sont envoyées pour les ordinateurs de bureau et 18 pour les mobiles.</p>
<h3 id="domaine-principal-vs-parties-tierces"><a href="#domaine-principal-vs-parties-tierces" class="anchor-link">Domaine principal vs parties tierces</a></h3>
<p>Parmi les résultats analysés jusqu’à présent, la totalité du poids des ressources JavaScript et des requêtes ont été considérés. Cependant, dans la majorité des sites web, une partie significative du code JavaScript récupéré et utilisé provient de <a href="./third-parties">parties tierces</a>.</p>
<p>Le JavaScript tiers peut provenir de n’importe quelle source externe, en tierce partie. Les publicités, les outils de télémétrie et les services de médias sociaux sont tous des cas d’utilisation courants dans lesquels des scripts tiers sont utilisés. Cela nous amène naturellement à la question suivante&nbsp;: parmi les requêtes envoyées, combien proviennent de tierces parties et non du domaine principal&nbsp;?</p>
<figure id="fig-6">
  <a href="/static/images/2019/javascript/fig6.png">
    <img src="/static/images/2019/javascript/fig6.png" alt="Figure 6. Distribution des scripts entre domaine principal et tiers, sur ordinateurs de bureau." aria-labelledby="fig6-caption" aria-describedby="fig6-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1108490&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
  <div id="fig6-description" class="visually-hidden">Diagramme à barres montrant 0 / 1 requêtes sur ordinateurs de bureau pour le domaine principal et les domaines tiers respectivement en percentile p10, 2 / 4 en p25, 6 / 10 en p50, 13 / 21 en p75, et 24 / 38 en p90.</div>
  <figcaption id="fig6-caption"><a href="#fig-6" class="anchor-link">Figure 6.</a> Distribution des scripts entre domaine principal et tiers, sur ordinateurs de bureau.</figcaption>
</figure>
<figure id="fig-7">
  <a href="/static/images/2019/javascript/fig7.png">
    <img src="/static/images/2019/javascript/fig7.png" alt="Figure 7. Distribution des scripts entre domaine principal et tiers, sur mobiles." aria-labelledby="fig7-caption" aria-describedby="fig7-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=998640509&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
  <div id="fig7-description" class="visually-hidden">Diagramme à barres montrant 0 / 1 requêtes sur mobile pour le domaine principal et les domaines tiers respectivement en percentile p10, 2 / 3 en p25, 5 / 9 en p50, 13 / 20 en p75, et 23 / 36 en p90.</div>
  <figcaption id="fig7-caption"><a href="#fig-7" class="anchor-link">Figure 7.</a> Distribution des scripts entre domaine principal et tiers, sur mobile</figcaption>
</figure>
<p>Tant sur les mobiles que sur les ordinateurs de bureau, les requêtes vers des tierces parties sont plus nombreuses que les requêtes sur le domaine principal, à chaque centile. Si cela vous semble surprenant, découvrons quelle quantité de code téléchargé provient de fournisseurs tiers.</p>
<figure id="fig-8">
  <a href="/static/images/2019/javascript/fig8.png">
    <img src="/static/images/2019/javascript/fig8.png" alt="Figure 8. Répartition de l’ensemble du JavaScript téléchargé sur ordinateurs de bureau." aria-labelledby="fig8-caption" aria-describedby="fig8-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=633945705&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
  <div id="fig8-description" class="visually-hidden">Diagramme à barres montrant 0 / 17 octets de JavaScript téléchargés sur ordinateurs de bureau issus de requêtes vers le domaine principal et, respectivement, vers des domaines tiers, dans le percentile p10, 11 / 62 en p25, 89 / 232 en p50, 200 / 525 en p75, et 404 / 900 en p90.</div>
  <figcaption id="fig8-caption"><a href="#fig-8" class="anchor-link">Figure 8.</a> Répartition de l’ensemble du JavaScript téléchargé sur ordinateurs de bureau.</figcaption>
</figure>
<figure id="fig-9">
  <a href="/static/images/2019/javascript/fig9.png">
    <img src="/static/images/2019/javascript/fig9.png" alt="Figure 9. Répartition de l’ensemble du JavaScript téléchargé sur mobile." aria-labelledby="fig9-caption" aria-describedby="fig9-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1611383649&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
  <div id="fig9-description" class="visually-hidden">Diagramme à barres montrant 0 / 17 octets de JavaScript téléchargés sur mobiles issus de requêtes vers le domaine principal et, respectivement, vers des domaines tiers, dans le percentile p10, 6 / 54 en p25, 83 / 217 en p50, 189 / 477 en p75, et 380 / 827 en p90.</div>
  <figcaption id="fig9-caption"><a href="#fig-9" class="anchor-link">Figure 9.</a> Répartition de l’ensemble du JavaScript téléchargé sur mobile.</figcaption>
</figure>
<p>À la médiane, on utilise 89&nbsp;% plus de code tiers que de code du domaine principal rédigé par l’équipe de développement, tant sur mobiles que sur ordinateurs de bureau. Cela montre clairement que le code tiers peut être un des principaux facteurs de lourdeur d’une page web. Pour plus d’informations sur l’impact des tiers, consultez le chapitre <a href="./third-parties">«&nbsp;Tierces Parties&nbsp;»</a>.</p>
<h2 id="compression-des-ressources"><a href="#compression-des-ressources" class="anchor-link">Compression des ressources</a></h2>
<p>Dans le contexte des interactions entre navigateur et serveur, la compression des ressources fait référence au code qui a été transformé à l’aide d’un algorithme de compression des données. Les ressources peuvent être compressées statiquement à l’avance ou à la volée, au moment où le navigateur en fait la demande. Dans les deux cas, la taille de la ressource transférée est considérablement réduite, ce qui améliore les performances de la page.</p>
<p>Il existe de nombreux algorithmes de compression de texte, mais seuls deux sont principalement utilisés pour la compression (et la décompression) des requêtes sur le réseau HTTP&nbsp;:</p>
<ul>
  <li><a href="https://www.gzip.org/">Gzip</a> (gzip)&nbsp;: le format de compression le plus utilisé pour les interactions entre serveurs et clients&nbsp;;</li>
  <li><a href="https://github.com/google/brotli">Brotli</a> (br)&nbsp;: un algorithme de compression plus récent visant à améliorer encore les taux de compression. <a href="https://caniuse.com/#feat=brotli">90&nbsp;% des navigateurs</a> supportent la compression Brotli.</li>
</ul>
<p>Les scripts compressés devront toujours être décompressés par le navigateur une fois transférés. Cela signifie que son contenu reste le même et que les temps d’exécution ne sont pas du tout optimisés. Cependant, la compression des ressources améliorera toujours leur temps de téléchargement, qui est également l’une des étapes les plus coûteuses du traitement JavaScript. S’assurer que les fichiers JavaScript sont correctement compressés peut constituer un des principaux facteurs d’amélioration des performances pour un site web.</p>
<p>Combien de sites compressent leurs ressources JavaScript&nbsp;?</p>
<figure id="fig-10">
  <a href="/static/images/2019/javascript/fig10.png">
    <img src="/static/images/2019/javascript/fig10.png" alt="Figure 10. Pourcentage de sites compressant des ressources JavaScript avec gzip ou brotli." aria-labelledby="fig10-caption" aria-describedby="fig10-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=241928028&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
  <div id="fig10-description" class="visually-hidden">Diagramme à barres montrant que 67&nbsp;% / 65&nbsp;% des ressources JavaScript sont compressées avec gzip sur les ordinateurs de bureau et les mobiles respectivement, et 15&nbsp;% / 14&nbsp;% sont compressées en utilisant Brotli.</div>
  <figcaption id="fig10-caption"><a href="#fig-10" class="anchor-link">Figure 10.</a> Pourcentage de sites compressant des ressources JavaScript avec gzip ou brotli.</figcaption>
</figure>
<p>La majorité des sites compressent leurs ressources JavaScript. L’encodage Gzip est utilisé sur ~64-67&nbsp;% des sites et Brotli sur ~14&nbsp;%. Les taux de compression sont similaires sur ordinateurs de bureau et mobiles.</p>
<p>Pour une analyse plus approfondie sur la compression, reportez-vous au chapitre <a href="./compression">«&nbsp;Compression&nbsp;»</a>.</p>
<h2 id="bibliothèques-et-frameworks-ouverts"><a href="#bibliothèques-et-frameworks-ouverts" class="anchor-link">Bibliothèques et frameworks ouverts</a></h2>
<p>Parlons ici du code source ouvert (<i lang="en">open source</i>), ou du code sous licence permissive, qui peut être consulté, visualisé et modifié par n’importe qui. Des minuscules bibliothèques aux navigateurs complets, tels que <a href="https://www.chromium.org/Home">Chromium</a> et <a href="https://www.openhub.net/p/firefox">Firefox</a>, le code source <i lang="en">open source</i> joue un rôle crucial dans le monde du développement web. Dans le contexte de JavaScript, les équipes de développement s’appuient sur des outils <i lang="en">open source</i> pour inclure tous types de fonctionnalités dans leur page web. Qu’un développeur ou une développeuse décide d’utiliser une petite bibliothèque d’utilitaires ou un énorme <i lang="en">framework</i> qui dicte l’architecture de toute son application, le fait de s’appuyer sur du code <i lang="en">open source</i> peut rendre le développement de fonctionnalités plus facile et plus rapide. Quelles sont donc les bibliothèques JavaScript <i lang="en">open source</i> les plus utilisées&nbsp;?</p>
<figure id="fig-11">
  <div class="table-wrap">
    <div class="table-wrap-container">
      <table>
        <thead>
          <tr>
            <th scope="col">Librairie</th>
            <th scope="col">Ordinateur de bureau</th>
            <th scope="col">Mobile</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>jQuery</td>
            <td class="numeric">85,03&nbsp;%</td>
            <td class="numeric">83,46&nbsp;%</td>
          </tr>
          <tr>
            <td>jQuery Migrate</td>
            <td class="numeric">31,26&nbsp;%</td>
            <td class="numeric">31,68&nbsp;%</td>
          </tr>
          <tr>
            <td>jQuery UI</td>
            <td class="numeric">23,60&nbsp;%</td>
            <td class="numeric">21,75&nbsp;%</td>
          </tr>
          <tr>
            <td>Modernizr</td>
            <td class="numeric">17,80&nbsp;%</td>
            <td class="numeric">16,76&nbsp;%</td>
          </tr>
          <tr>
            <td>FancyBox</td>
            <td class="numeric">7,04&nbsp;%</td>
            <td class="numeric">6,61&nbsp;%</td>
          </tr>
          <tr>
            <td>Lightbox</td>
            <td class="numeric">6,02&nbsp;%</td>
            <td class="numeric">5,93&nbsp;%</td>
          </tr>
          <tr>
            <td>Slick</td>
            <td class="numeric">5,53&nbsp;%</td>
            <td class="numeric">5,24&nbsp;%</td>
          </tr>
          <tr>
            <td>Moment.js</td>
            <td class="numeric">4,92&nbsp;%</td>
            <td class="numeric">4,29&nbsp;%</td>
          </tr>
          <tr>
            <td>Underscore.js</td>
            <td class="numeric">4,20&nbsp;%</td>
            <td class="numeric">3,82&nbsp;%</td>
          </tr>
          <tr>
            <td>prettyPhoto</td>
            <td class="numeric">2,89&nbsp;%</td>
            <td class="numeric">3,09&nbsp;%</td>
          </tr>
          <tr>
            <td>Select2</td>
            <td class="numeric">2,78&nbsp;%</td>
            <td class="numeric">2,48&nbsp;%</td>
          </tr>
          <tr>
            <td>Lodash</td>
            <td class="numeric">2,65&nbsp;%</td>
            <td class="numeric">2,68&nbsp;%</td>
          </tr>
          <tr>
            <td>Hammer.js</td>
            <td class="numeric">2,28&nbsp;%</td>
            <td class="numeric">2,70&nbsp;%</td>
          </tr>
          <tr>
            <td>YUI</td>
            <td class="numeric">1,84&nbsp;%</td>
            <td class="numeric">1,50&nbsp;%</td>
          </tr>
          <tr>
            <td>Lazy.js</td>
            <td class="numeric">1,26&nbsp;%</td>
            <td class="numeric">1,56&nbsp;%</td>
          </tr>
          <tr>
            <td>Fingerprintjs</td>
            <td class="numeric">1,21&nbsp;%</td>
            <td class="numeric">1,32&nbsp;%</td>
          </tr>
          <tr>
            <td>script.aculo.us</td>
            <td class="numeric">0,98&nbsp;%</td>
            <td class="numeric">0,85&nbsp;%</td>
          </tr>
          <tr>
            <td>Polyfill</td>
            <td class="numeric">0,97&nbsp;%</td>
            <td class="numeric">1,00&nbsp;%</td>
          </tr>
          <tr>
            <td>Flickity</td>
            <td class="numeric">0,83&nbsp;%</td>
            <td class="numeric">0,92&nbsp;%</td>
          </tr>
          <tr>
            <td>Zepto</td>
            <td class="numeric">0,78&nbsp;%</td>
            <td class="numeric">1,17&nbsp;%</td>
          </tr>
          <tr>
            <td>Dojo</td>
            <td class="numeric">0,70&nbsp;%</td>
            <td class="numeric">0,62&nbsp;%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <figcaption><a href="#fig-11" class="anchor-link">Figure 11.</a> Principales bibliothèques JavaScript sur ordinateurs de bureau et mobiles.</figcaption>
</figure>
<p><a href="https://jquery.com/">jQuery</a>, la bibliothèque JavaScript la plus populaire jamais créée, est utilisée dans 85,03&nbsp;% des pages sur ordinateurs de bureau et 83,46&nbsp;% des pages mobiles. L’avènement de nombreuses API et fonctionnalités de navigateurs, comme <a href="https://developer.mozilla.org/fr/docs/Web/API/Fetch_API">Fetch</a> et <a href="https://developer.mozilla.org/fr/docs/Web/API/Document/querySelector">querySelector</a>, a standardisé une grande partie des fonctionnalités fournies par la bibliothèque dans une forme native. Bien que la popularité de jQuery semble en déclin, pourquoi est-il encore utilisé dans la grande majorité du web&nbsp;?</p>
<p>Il y a plusieurs raisons possibles&nbsp;:</p>
<ul>
  <li><a href="https://wordpress.org/">WordPress</a>, qui est utilisé par plus de 30&nbsp;% des sites, inclut jQuery par défaut.</li>
  <li>Passer de jQuery à une bibliothèque plus récente côté client peut prendre du temps en fonction de la taille de l’application, et de nombreux sites peuvent utiliser jQuery en plus de bibliothèques plus récentes côté client.</li>
</ul>
<p>Les autres bibliothèques JavaScript les plus utilisées comprennent les variantes de jQuery (jQuery migrate, jQuery UI), <a href="https://modernizr.com/">Modernizr</a>, <a href="https://momentjs.com/">Moment.js</a>, <a href="https://underscorejs.org/">Underscore.js</a> et ainsi de suite.</p>
<h3 id="frameworks-et-bibliothèques-dinterface"><a href="#frameworks-et-bibliothèques-dinterface" class="anchor-link">Frameworks et bibliothèques d'interface</a></h3>
<p class="note">
  Comme mentionné dans notre <a href="./methodology#wappalyzer">méthodologie</a>, la bibliothèque de détection tierce utilisée dans HTTP Archive (Wappalyzer) a un certain nombre de limitations en ce qui concerne la manière dont elle détecte certains outils. Un ticket est ouvert concernant <a href="https://github.com/AliasIO/wappalyzer/issues/2450">l’amélioration de la détection des bibliothèques et <span lang="en">frameworks</span> JavaScript</a>, ce qui aura eu un impact sur les résultats présentés ici.
</p>
<p>Au cours des dernières années, l’écosystème JavaScript a connu une augmentation du nombre de bibliothèques et <span lang="en">frameworks</span> open-source pour faciliter la création d’applications monopages (SPA). Une application monopage se caractérise par une page web qui charge une seule page HTML et utilise JavaScript pour modifier la page lors de l’interaction avec l’utilisateur au lieu de télécharger de nouvelles pages depuis le serveur. Bien que cela reste la principale prémisse des applications monopages, différentes approches de rendu du serveur peuvent encore être utilisées pour améliorer l’expérience de ces sites. Combien de sites utilisent ces types de <span lang="en">frameworks</span>&nbsp;?</p>
<figure id="fig-12">
  <a href="/static/images/2019/javascript/fig12.png">
    <img src="/static/images/2019/javascript/fig12.png" alt="Figure 12. Frameworks les plus fréquemment utilisés sur ordinateurs de bureau." aria-labelledby="fig12-caption" aria-describedby="fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1699359221&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
  <div id="fig12-description" class="visually-hidden">Diagramme à barres montrant que 4,6&nbsp;% des sites utilisent React, 2,0&nbsp;% AngularJS, 1,8&nbsp;% Backbone.js, 0,8&nbsp;% Vue.js, 0,4&nbsp;% Knockout.js, 0,3&nbsp;% Zone.js, 0,3&nbsp;% Angular, 0,1&nbsp;% AMP, 0,1&nbsp;% Ember.js.</div>
  <figcaption id="fig12-caption"><a href="#fig-12" class="anchor-link">Figure 12.</a> <span lang="en">Frameworks</span> les plus fréquemment utilisés sur ordinateurs de bureau.</figcaption>
</figure>
<p>Seul un sous-ensemble de <span lang="en">frameworks</span> populaires est analysé ici, mais il est important de noter que tous suivent l’une ou l’autre de ces deux approches&nbsp;:</p>
<ul>
  <li>Une architecture <a href="https://developer.chrome.com/apps/app_frameworks">modèle-vue-contrôleur</a> (ou modèle-vue-vue/modèle)</li>
  <li>Une architecture orientée composants</li>
</ul>
<p>Bien qu’il y ait eu une évolution vers un modèle basé sur les composants, de nombreux <span lang="en">frameworks</span> plus anciens suivent le paradigme MVC. (<a href="https://angularjs.org/">AngularJS</a>, <a href="https://backbonejs.org/">Backbone.js</a>, <a href="https://emberjs.com/">Ember</a>) sont toujours utilisées dans des milliers de pages. Cependant, <a href="https://reactjs.org/">React</a>, <a href="https://vuejs.org/">Vue</a> et <a href="https://angular.io/">Angular</a> sont les <span lang="en">frameworks</span> à base de composants les plus populaires. (<a href="https://github.com/angular/zone.js">Zone.js</a> est un module qui fait maintenant partie du noyau Angular).</p>
<h2 id="chargement-différentiel"><a href="#chargement-différentiel" class="anchor-link">Chargement différentiel</a></h2>
<p><a href="https://v8.dev/features/modules">Les modules JavaScript</a>, ou modules ES, sont supportés par <a href="https://caniuse.com/#feat=es6-module">tous les navigateurs principaux</a>. Les modules offrent la possibilité de créer des scripts qui peuvent être importés et exportés à partir d’autres modules. Cela permet à quiconque de construire ses applications architecturées de manière modulaire, en les important et en les exportant partout où cela est nécessaire, sans avoir recours à des chargeurs de modules en tierce partie.</p>
<p>Pour déclarer un script comme module, la balise script doit avoir l’attribut <code>type="module"</code>&nbsp;:</p>
<pre><code class="html language-html">&lt;script type="module" src="main.mjs"&gt;&lt;/script&gt;</code></pre>
<p>Combien de site utilisent <code>type="module"</code> sur des scripts dans leurs pages&nbsp;?</p>
<figure id="fig-13">
  <a href="/static/images/2019/javascript/fig13.png">
    <img src="/static/images/2019/javascript/fig13.png" alt="Figure 13. Pourcentage de sites utilisant type=module." aria-labelledby="fig13-caption" aria-describedby="fig13-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1409239029&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
  <div id="fig13-description" class="visually-hidden">Diagramme à barres montrant que 0,6&nbsp;% des sites sur ordinateurs de bureau utilisent <code>type=module</code>, et 0,8&nbsp;% des sites sur mobiles.</div>
  <figcaption id="fig13-caption"><a href="#fig-13" class="anchor-link">Figure 13.</a> Pourcentage de sites utilisant <code>type=module</code>.</figcaption>
</figure>
<p>La prise en charge des modules au niveau du navigateur est encore relativement récente, et les chiffres montrent que très peu de sites utilisent actuellement le <code>type="module"</code> pour leurs scripts. De nombreux sites s’appuient encore sur des chargeurs de modules (2,37&nbsp;% de tous les sites sur ordinateurs de bureau utilisent <a href="https://github.com/requirejs/requirejs">RequireJS</a> par exemple) et des <i lang="en">bundlers</i> (<a href="https://webpack.js.org/">webpack</a> par exemple) pour définir des modules au sein de leur base de code.</p>
<p>Si des modules natifs sont utilisés, il est important de s’assurer qu’un script de recours approprié est utilisé pour les navigateurs qui ne supportent pas encore les modules. Cela peut être fait en incluant un script supplémentaire avec un attribut <code>nomodule</code>.</p>
<pre><code class="html language-html">&lt;script nomodule src="fallback.js"&gt;&lt;/script&gt;</code></pre>
<p>Lorsqu’ils sont utilisés ensemble, les navigateurs qui prennent en charge les modules ignorent complètement tout script contenant l’attribut <code>nomodule</code>. En revanche, les navigateurs qui ne supportent pas encore les modules ne téléchargeront aucun script avec l’attribut <code>type="module"</code>. Comme ils ne reconnaissent pas non plus <code>nomodule</code>, ils téléchargeront normalement les scripts ayant cet attribut. L’utilisation de cette approche peut permettre aux développeurs <a href="https://web.dev/serve-modern-code-to-modern-browsers/">d’envoyer du code moderne à des navigateurs modernes pour un chargement plus rapide des pages</a>. Alors, combien de sites utilisent <code>nomodule</code> pour des scripts sur leur page&nbsp;?</p>
<figure id="fig-14">
  <a href="/static/images/2019/javascript/fig14.png">
    <img src="/static/images/2019/javascript/fig14.png" alt="Figure 14. Pourcentage de sites utilisant nomodule." aria-labelledby="fig14-caption" aria-describedby="fig14-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=781034243&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig14-description" data-show-text="{{ show_description(14) }}" data-hide-text="{{ hide_description(14) }}">{{ show_description(14) }}</button>
  <div id="fig14-description" class="visually-hidden">Diagramme à barres montrant que 0,8&nbsp;% des sites sur ordinateurs de bureau utilisent "nomodule", et 0,5&nbsp;% des sites sur mobile.</div>
  <figcaption id="fig14-caption"><a href="#fig-14" class="anchor-link">Figure 14.</a> Pourcentage de sites utilisant nomodule.</figcaption>
</figure>
<p>De même, très peu de sites (0,50&nbsp;%-0,80&nbsp;%) utilisent l’attribut <code>nomodule</code> pour leurs scripts.</p>
<h2 id="preload-et-prefetch"><a href="#preload-et-prefetch" class="anchor-link">Preload et prefetch</a></h2>
<p><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Pr%C3%A9charger_du_contenu">Preload</a> et <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/FAQ_sur_le_pr%C3%A9chargement_des_liens">prefetch</a> sont des <a href="./resource-hints">Indices de Ressources</a> qui permettent d’aider le navigateur à déterminer quelles ressources doivent être téléchargées.</p>
<ul>
  <li>Le préchargement d’une ressource avec <code>&lt;link rel="preload"&gt;</code> indique au navigateur de télécharger cette ressource dès que possible. C’est particulièrement utile pour les ressources critiques qui sont découvertes tard dans le processus de chargement de la page (par exemple, du JavaScript situé au bas de votre HTML) et qui seraient, sinon, téléchargées en dernier.</li>
  <li>L’utilisation de <code>&lt;link rel="prefetch"&gt;</code> indique au navigateur de profiter de tout le temps d’inactivité dont il dispose pour aller chercher ces ressources nécessaires aux navigations futures.</li>
</ul>
<p>Alors, combien de sites utilisent les directives <code>preload</code> et <code>prefetch</code>&nbsp;?</p>
<figure id="fig-15">
  <a href="/static/images/2019/javascript/fig15.png">
    <img src="/static/images/2019/javascript/fig15.png" alt="Figure 15. Pourcentage de sites utilisant rel=preload pour les scripts." aria-labelledby="fig15-caption" aria-describedby="fig15-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=2007534370&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig15-description" data-show-text="{{ show_description(15) }}" data-hide-text="{{ hide_description(15) }}">{{ show_description(15) }}</button>
  <div id="fig15-description" class="visually-hidden">Diagramme à barres montrant que 14&nbsp;% des sites sur ordinateurs de bureau utilisent <code>rel=preload</code> pour les scripts, et 15&nbsp;% des sites sur mobiles.</div>
  <figcaption id="fig15-caption"><a href="#fig-15" class="anchor-link">Figure 15.</a> Pourcentage de sites utilisant <code>rel=preload</code> pour les scripts.</figcaption>
</figure>
<p>Sur tous les sites mesurés par HTTP Archive, 14,33&nbsp;% des sites sur ordinateurs de bureau et 14,84&nbsp;% des sites sur mobiles utilisent <code>&lt;link rel="preload"&gt;</code> pour des scripts de leur page.</p>
<p>Pour <code>prefetch</code>, les chiffres sont les suivants&nbsp;:</p>
<figure id="fig-16">
  <a href="/static/images/2019/javascript/fig16.png">
    <img src="/static/images/2019/javascript/fig16.png" alt="Figure 16. Pourcentage de sites utilisant rel=prefetch pour les scripts." aria-labelledby="fig16-caption" aria-describedby="fig16-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=547807937&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig16-description" data-show-text="{{ show_description(16) }}" data-hide-text="{{ hide_description(16) }}">{{ show_description(16) }}</button>
  <div id="fig16-description" class="visually-hidden">Diagramme à barres montrant que 0,08&nbsp;% des sites sur ordinateurs de bureau utilisent <code>rel=prefetch</code>, et 0,08&nbsp;% des sites sur mobiles.</div>
  <figcaption id="fig16-caption"><a href="#fig-16" class="anchor-link">Figure 16.</a> Pourcentage de sites utilisant <code>rel=prefetch</code> pour les scripts.</figcaption>
</figure>
<p>Sur mobiles comme sur ordinateurs de bureau, 0,08&nbsp;% des pages utilisent la directive <code>prefetch</code> pour au moins un de leurs scripts.</p>
<h2 id="api-plus-récentes"><a href="#api-plus-récentes" class="anchor-link">API plus récentes</a></h2>
<p>JavaScript continue d’évoluer en tant que langage. Une nouvelle version de la norme de langage elle-même, connue sous le nom d’ECMAScript, est publiée chaque année avec de nouvelles API et comprend des fonctionnalités qui franchissent les étapes de proposition pour devenir une partie du langage lui-même.</p>
<p>Grâce à HTTP Archive, nous pouvons examiner toute nouvelle API prise en charge (ou sur le point de l’être) et voir à quel point son utilisation est répandue. Ces API peuvent déjà être utilisées dans les navigateurs qui les prennent en charge <em>ou</em> avec un <i lang="en">polyfill</i> d’accompagnement pour s’assurer qu’elles fonctionnent quel que soit le navigateur.</p>
<p>Combien de sites utilisent les API suivantes&nbsp;?</p>
<ul>
  <li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Atomics">Atomics</a></li>
  <li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Intl">Intl</a></li>
  <li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Proxy">Proxy</a></li>
  <li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/SharedArrayBuffer">SharedArrayBuffer</a></li>
  <li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/WeakMap">WeakMap</a></li>
  <li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/WeakSet">WeakSet</a></li>
</ul>
<figure id="fig-17">
  <a href="/static/images/2019/javascript/fig17.png">
    <img src="/static/images/2019/javascript/fig17.png" alt="Figure 17. Utilisation de nouvelles API JavaScript." aria-labelledby="fig17-caption" aria-describedby="fig17-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=594315296&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig17-description" data-show-text="{{ show_description(17) }}" data-hide-text="{{ hide_description(17) }}">{{ show_description(17) }}</button>
  <div id="fig17-description" class="visually-hidden">Diagramme à barres montrant que 25,5&nbsp;% / 36,2&nbsp;% des sites sur ordinateurs de bureau et, respectivement, sur mobile, utilisent WeakMap, 6,1&nbsp;% / 17,2&nbsp;% utilisent WeakSet, 3,9&nbsp;% / 14,0&nbsp;% utilisent Intl, 3,9&nbsp;% / 4,4&nbsp;% utilisent Proxy, 0,4&nbsp;% / 0,4&nbsp;% utilisent Atomics, et 0,2&nbsp;% / 0,2&nbsp;% utilisent SharedArrayBuffer.</div>
  <figcaption id="fig17-caption"><a href="#fig-17" class="anchor-link">Figure 17.</a> Utilisation de nouvelles API JavaScript.</figcaption>
</figure>
<p>Atomics (0,38&nbsp;%) et SharedArrayBuffer (0,20&nbsp;%) sont à peine visibles sur ce graphique dans la mesure où ils sont utilisés sur un très petit nombre de pages.</p>
<p>Il est important de noter que les chiffres indiqués ici sont des approximations et qu’ils ne s’appuient pas sur <a href="https://chromium.googlesource.com/chromium/src.git/+/master/docs/use_counter_wiki.md">UseCounter</a> pour mesurer l’utilisation des fonctionnalités.</p>
<h2 id="cartographies-de-code-source-source-maps"><a href="#cartographies-de-code-source-source-maps" class="anchor-link">Cartographies de code source (source maps)</a></h2>
<p>Dans de nombreux moteurs de compilation, les fichiers JavaScript subissent une minification afin de minimiser leur taille et une transpilation pour les nouvelles fonctionnalités du langage qui ne sont pas encore prises en charge par de nombreux navigateurs. Par ailleurs, les surensembles de langage comme <a href="https://www.typescriptlang.org/">TypeScript</a> se compilent en un résultat qui peut être sensiblement différent du code source original. Pour toutes ces raisons, le code final servi au navigateur peut être illisible et difficile à déchiffrer.</p>
<p>Une cartographie de code source, ou <strong>sourcemap</strong> est un fichier supplémentaire accompagnant un fichier JavaScript qui permet à un navigateur de faire correspondre la version finale à sa source d’origine. Cela peut rendre le débogage et l’analyse des <i lang="en">bundles</i> de production beaucoup plus simples.</p>
<p>Bien qu’utile, il existe un certain nombre de raisons pour lesquelles de nombreux sites peuvent ne pas vouloir inclure de cartographie des sources dans leur site de production final, par exemple en choisissant de ne pas exposer le code source complet au public. Combien de sites incluent donc réellement des sourcemaps&nbsp;?</p>
<figure id="fig-18">
  <a href="/static/images/2019/javascript/fig18.png">
    <img src="/static/images/2019/javascript/fig18.png" alt="Figure 18. Pourcentage de sites utilisant des source maps." aria-labelledby="fig18-caption" aria-describedby="fig18-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=906754154&amp;format=interactive" loading="lazy" />
  </a>
  <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig18-description" data-show-text="{{ show_description(18) }}" data-hide-text="{{ hide_description(18) }}">{{ show_description(18) }}</button>
  <div id="fig18-description" class="visually-hidden">Diagramme à barres montrant que 18&nbsp;% des sites sur ordinateurs de bureau et 17&nbsp;% des sites sur mobiles utilisent des <i lang="en">source maps</i>.</div>
  <figcaption id="fig18-caption"><a href="#fig-18" class="anchor-link">Figure 18.</a> Pourcentage de sites utilisant des <i lang="en">source maps</i>.</figcaption>
</figure>
<p>Les résultats sont à peu près les mêmes pour les pages sur ordinateurs de bureau et les pages sur mobiles. 17-18&nbsp;% incluent un sourcemap pour au moins un script sur la page (détecté comme un script du domaine principal avec <code>sourceMappingURL</code>).</p>
<h2 id="conclusion"><a href="#conclusion" class="anchor-link">Conclusion</a></h2>
<p>L’écosystème JavaScript continue de changer et d’évoluer chaque année. Nous verront toujours apparaitre des API plus récentes, des moteurs de navigation améliorés, de nouvelles bibliothèques ou <span lang="en">frameworks</span>. HTTP Archive nous fournit des informations précieuses sur la façon dont les sites utilisent le langage sur le terrain.</p>
<p>Sans JavaScript, le web ne serait pas là où il est aujourd’hui, et toutes les données recueillies pour cet article ne font que le prouver.</p>
{% endblock %}
