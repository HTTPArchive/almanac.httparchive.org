{% extends "en/2019/base_chapter.html" %}

<!--{# IMPORTANT!

- `chapter.html` is a "template for templates" used by the `generate_chapters.js` script, hence the strange template syntax (eg, mixing ejs and jinja syntax)
- if you want to modify `chapter.html`, you must also:
  - translate the corresponding language-specific templates (eg `src/templates/<lang>/<year>/chapter.html`)
  - run the generation script to update each chapter template
- if you want to modify the chapter templates (eg `src/templates/<lang>/<year>/chapters/<chapter>.html`):
  - make changes to the markdown content directly (`src/content/<lang>/<year>/<chapter>.md`) because any changes to the chapter templates will be overwritten by the generation script
#}-->

{% set metadata = {"part_number":"IV","chapter_number":18,"title":"Page Weight","description":"Page Weight chapter of the 2019 Web Almanac covering why page weight matters, bandwidth, complex pages, page weight over time, page requests, and file formats.","authors":["tammyeverts","khempenius"],"reviewers":["paulcalvano"],"translators":null,"discuss":"1773","published":"2019-11-11T00:00:00.000Z","last_updated":"2019-11-23T00:00:00.000Z"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % get_chapter_image_dir(metadata)) %} {% block description %}{{ metadata.get('description',metadata.get('title') + ' chapter of the ' + year + ' Web Almanac probing into the use of ' + metadata.get('description',metadata.get('title')) + ' on the web.') }}{% endblock %} {% block meta %}
<meta name="description" content="{{ self.description() }}" />
<meta property="og:title" content="{{ self.title() }}" />
<meta property="og:url" content="https://almanac.httparchive.org{{  url_for(request.endpoint, **get_view_args(lang=language.lang_code, year=year)) }}" />
<meta property="og:image" content="https://almanac.httparchive.org{{ chapter_image_dir }}/hero_lg.jpg" />
<meta property="og:image:height" content="433" />
<meta property="og:image:width" content="866" />
<meta property="og:type" content="article" />
<meta property="og:description" content="{{ self.description() }}" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@HTTPArchive" />
<meta name="twitter:title" content="{{ self.title() }}" />
<meta name="twitter:image" content="https://almanac.httparchive.org{{ chapter_image_dir }}/hero_lg.jpg" />
<meta name="twitter:image:alt" content="Chapter image for the {{ metadata.get('title') }} chapter of the {{ year }} Web Almanac" />
<meta name="twitter:description" content="{{ self.description() }}" />

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
    	  "@type": "WebPage",
    	  "@id": "https://almanac.httparchive.org{{  url_for(request.endpoint, **get_view_args(lang=language.lang_code, year=year)) }}"
    },
    "headline": "{{ metadata.get('title') }}",
    "image": {
    	  "@type": "ImageObject",
    	  "url": "https://almanac.httparchive.org{{ chapter_image_dir }}/hero_lg.jpg",
    	  "height": 433,
    	  "width": 866
    },
    "publisher": {
    	  "@type": "Organization",
    	  "name": "HTTP Archive",
    	  "logo": {
    	      "@type": "ImageObject",
    	      "url": "https://almanac.httparchive.org/static/images/ha.png",
    	      "height": 160,
    	      "width": 320
    	  }
       },
    "author":
       {% for author in metadata.get('authors') %}{% if loop.length > 1 and loop.index == 1 %}[{% endif -%}
       {% set authordata = config.contributors[author] if author in config.contributors else None -%}
       {% if authordata -%}
    {
    	  "@type": "Person",
           "sameas": [
             "https://almanac.httparchive.org{{ url_for('contributors', year=year, lang=lang, _anchor=author) }}"
             {% if authordata.twitter %},"https://twitter.com/{{ authordata.twitter }}"{% endif %}
             {% if authordata.github %},"https://github.com/{{ authordata.github }}"{% endif %}
             ],
    	  "name": "{{ authordata.name if authordata.name else author }}"
       }{% if loop.index < loop.length %},{% endif %}
       {%- endif %}{% if loop.index > 1 and loop.index == loop.length %}]{% endif -%}
       {% endfor %},
       "description": "{{ self.description() }}",
       "datePublished": "{{ metadata.get('published','2019-11-04') + 'T12:00:00+00:00:00' }}",
       "dateModified": "{{ metadata.get('last_updated','2019-11-04') + 'T12:00:00+00:00:00' }}"
  }
</script>
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "{{ year }} Home ({{ language }})",
        "item": "https://almanac.httparchive.org{{  url_for('home', year=year, lang=lang) }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "{{ metadata.get('title') }}",
        "item": "https://almanac.httparchive.org{{  url_for(request.endpoint, **get_view_args(lang=language.lang_code, year=year)) }}"
      }
    ]
  }
</script>
{% endblock %} {% block main %}
<article id="chapter" class="main">
  <nav class="index">
    <div class="index-box floating-card">
      <h2 class="header">Index</h2>
      <ul>
        <li>
          <a href="#introduction">Introduction</a>

          <ul>
            <li>
              <a href="#myth-page-size-doesnt-matter">Myth: Page size doesn&#39;t matter</a>
            </li>

            <li>
              <a href="#more-bandwidth-isnt-a-magic-bullet-for-web-performance">More bandwidth isn&#39;t a magic bullet for web performance</a>
            </li>

            <li>
              <a href="#what-types-of-assets-does-the-http-archive-track-and-how-much-do-they-matter">What types of assets does the HTTP Archive track, and how much do they matter?</a>
            </li>

            <li>
              <a href="#bigger-complex-pages-can-be-bad-for-your-business">Bigger, complex pages can be bad for your business</a>
            </li>
          </ul>
        </li>

        <li>
          <a href="#analysis">Analysis</a>

          <ul>
            <li>
              <a href="#page-weight">Page weight</a>

              <ul>
                <li>
                  <a href="#mobile">Mobile</a>
                </li>

                <li>
                  <a href="#desktop">Desktop</a>
                </li>
              </ul>
            </li>

            <li>
              <a href="#page-weight-over-time">Page weight over time</a>

              <ul>
                <li>
                  <a href="#mobile-1">Mobile</a>
                </li>

                <li>
                  <a href="#desktop-1">Desktop</a>
                </li>
              </ul>
            </li>

            <li>
              <a href="#page-requests">Page requests</a>

              <ul>
                <li>
                  <a href="#mobile-2">Mobile</a>
                </li>

                <li>
                  <a href="#desktop-2">Desktop</a>
                </li>
              </ul>
            </li>

            <li>
              <a href="#file-formats">File formats</a>

              <ul>
                <li>
                  <a href="#file-size-by-image-format-mobile">File size by image format (mobile)</a>
                </li>

                <li>
                  <a href="#file-size-by-image-format-for-images--100-bytes">File size by image format for images &gt; 100 bytes</a>
                </li>

                <li>
                  <a href="#file-size-by-image-format-for-images--1024-bytes">File size by image format for images &gt; 1024 bytes</a>
                </li>

                <li>
                  <a href="#file-size-by-media-format">File size by media format</a>

                  <ul>
                    <li>
                      <a href="#mobile-3">Mobile</a>
                    </li>

                    <li>
                      <a href="#desktop-3">Desktop</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>

        <li>
          <a href="#conclusion">Conclusion</a>
        </li>
      </ul>
    </div>
  </nav>

  <section class="content">
    <section class="body">
      <div class="subtitle">
        Part {{ metadata.get('part_number') }} Chapter {{ metadata.get('chapter_number') }}
      </div>
      <h1 class="title title-lg">
        {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
        <span class="chapter-unedited">[Unedited]</span>
        {% endif %}
      </h1>
      <!-- Show large image for large screens and high density screens and use webp when supported -->
      <picture>
        <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
        <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
        <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
        <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
        <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
        <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
        <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" loading="eager" />
      </picture>
      {{ render_byline() }}
      <h2 id="introduction">Introduction</h2>
      <p>The median web page is around 1900KB in size and contains 74 requests. That doesn't sound too bad, right?</p>
      <p>Here's the issue with medians: they mask problems. By definition, they focus only on the middle of the distribution. We need to consider percentiles at both extremes to get an understanding of the bigger picture.</p>
      <p>Looking at the 90th percentile exposes the unpleasant stuff. Roughly 10% of the pages we're pushing at the unsuspecting public are in excess of 6 MB and contain 179 requests. This is, frankly, terrible. If this doesn't seem terrible to you, then you definitely need to read this chapter.</p>
      <h3 id="myth-page-size-doesnt-matter">Myth: Page size doesn't matter</h3>
      <p>The common argument as to why page size doesn't matter anymore is that, thanks to high-speed internet and our souped-up devices, we can serve massive, complex (and massively complex) pages to the general population. This assumption works fine, as long as you're okay with ignoring the vast swathe of internet users who don't have access to said high-speed internet and souped-up devices.</p>
      <p>Yes, you can build large robust pages that feel fast… to some users. But you should care about page bloat in terms of how it affects all your users, especially mobile-only users who deal with bandwidth constraints or data limits.</p>
      <aside class="note" markdown="">
        <p>Check out Tim Kadlec's fascinating online calculator, <a href="https://whatdoesmysitecost.com/">What Does My Site Cost?</a>, which calculates the cost—in dollars and Gross National Income per capita—of your pages in countries around the world. It's an eye-opener. For instance, Amazon's home page, which at the time of writing weighs 2.79MB, costs 1.89% of the daily per capita GNI of Mauritania. How global is the world wide web when people in some parts of the world would have to give up a day's wages just to visit a few dozen pages?</p>
      </aside>
      <h3 id="more-bandwidth-isnt-a-magic-bullet-for-web-performance">More bandwidth isn't a magic bullet for web performance</h3>
      <p>Even if more people had access to better devices and cheaper connections, that wouldn't be a complete solution. Double the bandwidth doesn't mean twice as fast. In fact, <a href="https://developer.akamai.com/blog/2015/06/09/heres-why-more-bandwidth-isnt-magic-bullet-web-performance">it has been demonstrated</a> that increasing bandwidth by up to 1,233% only made pages 55% faster.</p>
      <p>The problem is latency. Most of our networking protocols require a lot of round-trips, and each of those round trips imposes a latency penalty. For as long as latency continues to be a performance problem (which is to say, for the foreseeable future), the major performance culprit will continue to be that a typical web page today contains a hundred or so assets hosted on dozens of different servers. Many of these assets are unoptimized, unmeasured, unmonitored—and therefore unpredictable.</p>
      <h3 id="what-types-of-assets-does-the-http-archive-track-and-how-much-do-they-matter">What types of assets does the HTTP Archive track, and how much do they matter?</h3>
      <p>Here's a quick glossary of the page composition metrics that the HTTP Archive tracks, and how much they matter in terms of performance and user experience:</p>
      <ul>
        <li>
          <p>The <strong>total size</strong> is the total weight in bytes of the page. It matters especially to mobile users who have limited and/or metered data.</p>
        </li>
        <li>
          <p><strong>HTML</strong> is typically the smallest resource on the page. Its performance risk is negligible.</p>
        </li>
        <li>
          <p>Unoptimized <strong>images</strong> are often the greatest contributor to page bloat. Looking at the 90th percentile of the distribution of page weight, images account for a whopping 5.2 MB of a roughly 7 MB page. In other words, images comprise almost 75% of the total page weight. And if that already wasn't enough, the number of images on a page has been linked to lower conversion rates on retail sites. (More on that later.)</p>
        </li>
        <li>
          <p><strong>JavaScript</strong> matters. A page can have a relatively low JavaScript weight but still suffer from JavaScript-inflicted performance problems. Even a single 100 KB third-party script can wreak havoc with your page. The more scripts on your page, the greater the risk.</p>
          <p>It's not enough to focus solely on blocking JavaScript. It's possible for your pages to contain zero blocking resources and still have less-than-optimal performance because of how your JavaScript is rendered. That's why it's so important to understand CPU usage on your pages, because JavaScript consumes more CPU than all other browser activities combined. While JavaScript blocks the CPU, the browser can't respond to user input. This creates what's commonly called "jank": that annoying feeling of jittery, unstable page rendering.</p>
        </li>
        <li>
          <p><strong>CSS</strong> is an incredible boon for modern web pages. It solves a myriad of design problems, from browser compatibility to design maintenance and updating. Without CSS, we wouldn't have great things like responsive design. But, like JavaScript, CSS doesn't have to be bulky to cause problems. Poorly executed stylesheets can create a host of performance problems, ranging from stylesheets taking too long to download and parse, to improperly placed stylesheets that block the rest of the page from rendering. And, similarly to JavaScript, more CSS files equals more potential trouble.</p>
        </li>
      </ul>
      <h3 id="bigger-complex-pages-can-be-bad-for-your-business">Bigger, complex pages can be bad for your business</h3>
      <p>Let's assume you're not a heartless monster who doesn't care about your site's visitors. But if you are, you should know that serving bigger, more complex pages hurts you, too. That was one of the findings of a <a href="https://www.thinkwithgoogle.com/marketing-resources/experience-design/mobile-page-speed-load-time/">Google-led machine learning study</a> that gathered over a million beacons' worth of real user data from retail sites.</p>
      <p>There were three really important takeaways from this research:</p>
      <ol>
        <li>
          <p><strong>The total number of elements on a page was the greatest predictor of conversions.</strong> Hopefully this doesn't come as a huge surprise to you, given what we've just covered about the performance risks imposed by the various assets that make up a modern web page.</p>
        </li>
        <li>
          <p><strong>The number of images on a page was the second greatest predictor of conversions.</strong> Sessions in which users converted had 38% fewer images than in sessions that didn't convert.</p>
        </li>
      </ol>
      <figure id="fig-1">
        <a href="/static/images/2019/18_Page_Weight/ch18_fig1_conversion_difference.png">
          <img src="/static/images/2019/18_Page_Weight/ch18_fig1_conversion_difference.png" alt="Figure 1. Converted sessions vs non-converted sessions." aria-labelledby="fig1-caption" aria-describedby="fig1-description" loading="lazy" />
        </a>
        <div id="fig1-description" class="visually-hidden">Chart showing 19 converted sessions vs. 31 non-converted sessions</div>
        <figcaption id="fig1-caption">Figure 1. Converted sessions vs non-converted sessions.</figcaption>
      </figure>
      <ol start="3">
        <li><strong>Sessions with more scripts were less likely to convert.</strong> What's really fascinating about this chart isn't just the sharp drop-off in conversion probability after about 240 scripts. It's the long tail that demonstrates how many retail sessions contained up to 1,440 scripts!</li>
      </ol>
      <figure id="fig-2">
        <a href="/static/images/2019/18_Page_Weight/ch18_fig2_conversion_graph.jpg">
          <img src="/static/images/2019/18_Page_Weight/ch18_fig2_conversion_graph.jpg" alt="" aria-labelledby="fig2-caption" aria-describedby="fig2-description" loading="lazy" />
        </a>
        <div id="fig2-description" class="visually-hidden">Chart showing conversion rate climbing up until 80 scripts, and then dropping off as scripts increase up to 1440 scripts.</div>
        <figcaption id="fig2-caption">Figure 2. Conversion rate dropping off as scripts increase.</figcaption>
      </figure>
      <p>Now that we've covered why page size and complexity matter, let's get into some juicy HTTP Archive stats so we can better understand the current state of the web and the impact of page bloat.</p>
      <h2 id="analysis">Analysis</h2>
      <p>The statistics in this section are all based on the <em>transfer size</em> of a page and its resources. Not all resources on the web are compressed before sending, but if they are, this analysis uses the compressed size.</p>
      <h3 id="page-weight">Page weight</h3>
      <p>Roughly speaking, mobile sites are about 10% smaller than their desktop counterparts. The majority of the difference is due to mobile sites loading fewer image bytes than their desktop counterparts.</p>
      <h4 id="mobile">Mobile</h4>
      <figure id="fig-3">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>Total (KB)</th>
                  <th>HTML (KB)</th>
                  <th>JS (KB)</th>
                  <th>CSS (KB)</th>
                  <th>Image (KB)</th>
                  <th>Document (KB)</th>
                </tr>
                <tr>
                  <td>90</td>
                  <td>6226</td>
                  <td>107</td>
                  <td>1060</td>
                  <td>234</td>
                  <td>4746</td>
                  <td>49</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>3431</td>
                  <td>56</td>
                  <td>668</td>
                  <td>122</td>
                  <td>2270</td>
                  <td>25</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>1745</td>
                  <td>26</td>
                  <td>360</td>
                  <td>56</td>
                  <td>893</td>
                  <td>13</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>800</td>
                  <td>11</td>
                  <td>164</td>
                  <td>22</td>
                  <td>266</td>
                  <td>7</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>318</td>
                  <td>6</td>
                  <td>65</td>
                  <td>5</td>
                  <td>59</td>
                  <td>4</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 3. Page weight on mobile broken down by resource type.</figcaption>
      </figure>
      <h4 id="desktop">Desktop</h4>
      <figure id="fig-4">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>Total (KB)</th>
                  <th>HTML (KB)</th>
                  <th>JS (KB)</th>
                  <th>CSS (KB)</th>
                  <th>Image (KB)</th>
                  <th>Document (KB)</th>
                </tr>
                <tr>
                  <td>90</td>
                  <td>6945</td>
                  <td>110</td>
                  <td>1131</td>
                  <td>240</td>
                  <td>5220</td>
                  <td>52</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>3774</td>
                  <td>58</td>
                  <td>721</td>
                  <td>129</td>
                  <td>2434</td>
                  <td>26</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>1934</td>
                  <td>27</td>
                  <td>391</td>
                  <td>62</td>
                  <td>983</td>
                  <td>14</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>924</td>
                  <td>12</td>
                  <td>186</td>
                  <td>26</td>
                  <td>319</td>
                  <td>8</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>397</td>
                  <td>6</td>
                  <td>76</td>
                  <td>8</td>
                  <td>78</td>
                  <td>4</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 4. Page weight on desktop broken down by resource type</figcaption>
      </figure>
      <h3 id="page-weight-over-time">Page weight over time</h3>
      <p>Over the past year the median size of a desktop site increased by 434 KB, and the median size of a mobile site increased by 179 KB. Images are overwhelmingly driving this increase.</p>
      <h4 id="mobile-1">Mobile</h4>
      <figure id="fig-5">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>Total (KB)</th>
                  <th>HTML (KB)</th>
                  <th>JS (KB)</th>
                  <th>CSS (KB)</th>
                  <th>Image (KB)</th>
                  <th>Document (KB)</th>
                </tr>
                <tr>
                  <td>90</td>
                  <td>+376</td>
                  <td>-50</td>
                  <td>+46</td>
                  <td>+36</td>
                  <td>+648</td>
                  <td>+2</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>+304</td>
                  <td>-7</td>
                  <td>+34</td>
                  <td>+21</td>
                  <td>+281</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>+179</td>
                  <td>-1</td>
                  <td>+27</td>
                  <td>+10</td>
                  <td>+106</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>+110</td>
                  <td>-1</td>
                  <td>+16</td>
                  <td>+5</td>
                  <td>+36</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>+72</td>
                  <td>0</td>
                  <td>+13</td>
                  <td>+2</td>
                  <td>+20</td>
                  <td>+1</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 5. Change in mobile page weight since 2018.</figcaption>
      </figure>
      <h4 id="desktop-1">Desktop</h4>
      <figure id="fig-6">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>Total (KB)</th>
                  <th>HTML (KB)</th>
                  <th>JS (KB)</th>
                  <th>CSS (KB)</th>
                  <th>Image (KB)</th>
                  <th>Document (KB)</th>
                </tr>
                <tr>
                  <td>90</td>
                  <td>+1106</td>
                  <td>-75</td>
                  <td>+22</td>
                  <td>+45</td>
                  <td>+1291</td>
                  <td>+5</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>+795</td>
                  <td>-12</td>
                  <td>+9</td>
                  <td>+32</td>
                  <td>+686</td>
                  <td>+1</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>+434</td>
                  <td>-1</td>
                  <td>+10</td>
                  <td>+15</td>
                  <td>+336</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>+237</td>
                  <td>0</td>
                  <td>+12</td>
                  <td>+7</td>
                  <td>+138</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>+120</td>
                  <td>0</td>
                  <td>+10</td>
                  <td>+2</td>
                  <td>+39</td>
                  <td>+1</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 6. Change in desktop page weight since 2018.</figcaption>
      </figure>
      <p>For a longer-term perspective on how page weight has changed over time, check out <a href="https://httparchive.org/reports/page-weight#bytesTotal">this timeseries graph</a> from HTTP Archive. Median page size has grown at a fairly constant rate since the HTTP Archive started tracking this metric in November 2010 and the increase in page weight observed over the past year is consistent with this.</p>
      <h3 id="page-requests">Page requests</h3>
      <p>The median desktop page makes 74 requests, and the median mobile page makes 69. Images and JavaScript account for the majority of these requests. There was no significant change in the quantity or distribution of requests over the last year.</p>
      <h4 id="mobile-2">Mobile</h4>
      <figure id="fig-7">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>Total</th>
                  <th>HTML</th>
                  <th>JS</th>
                  <th>CSS</th>
                  <th>Image</th>
                  <th>Document</th>
                </tr>
                <tr>
                  <td>90</td>
                  <td>168</td>
                  <td>15</td>
                  <td>52</td>
                  <td>20</td>
                  <td>79</td>
                  <td>7</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>111</td>
                  <td>7</td>
                  <td>32</td>
                  <td>12</td>
                  <td>49</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>69</td>
                  <td>3</td>
                  <td>18</td>
                  <td>6</td>
                  <td>28</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>40</td>
                  <td>2</td>
                  <td>9</td>
                  <td>3</td>
                  <td>15</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>22</td>
                  <td>1</td>
                  <td>4</td>
                  <td>1</td>
                  <td>7</td>
                  <td>0</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 7. Mobile page requests broken down by resource type.</figcaption>
      </figure>
      <h4 id="desktop-2">Desktop</h4>
      <figure id="fig-8">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>Total</th>
                  <th>HTML</th>
                  <th>JS</th>
                  <th>CSS</th>
                  <th>Image</th>
                  <th>Document</th>
                </tr>
                <tr>
                  <td>90</td>
                  <td>179</td>
                  <td>14</td>
                  <td>53</td>
                  <td>20</td>
                  <td>90</td>
                  <td>6</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>118</td>
                  <td>7</td>
                  <td>33</td>
                  <td>12</td>
                  <td>54</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>74</td>
                  <td>4</td>
                  <td>19</td>
                  <td>6</td>
                  <td>31</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>44</td>
                  <td>2</td>
                  <td>10</td>
                  <td>3</td>
                  <td>16</td>
                  <td>0</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>24</td>
                  <td>1</td>
                  <td>4</td>
                  <td>1</td>
                  <td>7</td>
                  <td>0</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 8. Desktop page requests broken down by resource type.</figcaption>
      </figure>
      <h3 id="file-formats">File formats</h3>
      <p>The preceding analysis has focused on analyzing page weight through the lens of resource types. However, in the case of images and media, it's possible to dive a level deeper and look at the differences in resource sizes between specific file formats.</p>
      <h4 id="file-size-by-image-format-mobile">File size by image format (mobile)</h4>
      <figure id="fig-9">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>GIF (KB)</th>
                  <th>ICO (KB)</th>
                  <th>JPG (KB)</th>
                  <th>PNG (KB)</th>
                  <th>SVG (KB)</th>
                  <th>WEBP (KB)</th>
                </tr>
                <tr>
                  <td>10</td>
                  <td>0</td>
                  <td>0</td>
                  <td>3.08</td>
                  <td>0.37</td>
                  <td>0.25</td>
                  <td>2.54</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>0.03</td>
                  <td>0.26</td>
                  <td>7.96</td>
                  <td>1.14</td>
                  <td>0.43</td>
                  <td>4.89</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>0.04</td>
                  <td>1.12</td>
                  <td>21</td>
                  <td>4.31</td>
                  <td>0.88</td>
                  <td>13</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>0.06</td>
                  <td>2.72</td>
                  <td>63</td>
                  <td>22</td>
                  <td>2.41</td>
                  <td>33</td>
                </tr>
                <tr>
                  <td>90</td>
                  <td>2.65</td>
                  <td>13</td>
                  <td>155</td>
                  <td>90</td>
                  <td>7.91</td>
                  <td>78</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 9. Images file sizes on mobile broken down by image format.</figcaption>
      </figure>
      <p>Some of these results, particularly those for GIFs, are really surprising. If GIFs are so small, then why are they being replaced by formats like JPG, PNG, and WEBP?</p>
      <p>The data above obscures the fact that the vast majority of GIFs on the web are actually tiny 1x1 pixels. These pixels are typically used as "tracking pixels", but can also be used as a hack to generate various CSS effects. While these 1x1 pixels are images in the literal sense, the spirit of their usage is probably closer to what we'd associate with scripts or CSS.</p>
      <p>Further investigation into the data set revealed that 62% of GIFs are 43 bytes or smaller (43 bytes is the size of a transparent, 1x1 pixel GIF) and 84% of GIFs are 1 KB or smaller.</p>
      <figure id="fig-10">
        <a href="/static/images/2019/18_Page_Weight/ch18_fig3_gif_cdf.png">
          <img src="/static/images/2019/18_Page_Weight/ch18_fig3_gif_cdf.png" alt="Figure 10. Cumulative distribution function of GIF file sizes." aria-labelledby="fig10-caption" aria-describedby="fig10-description" loading="lazy" />
        </a>
        <div id="fig10-description" class="visually-hidden">Chart showing 25% of GIFs are 35 bytes or smaller (which is the optimal size of a 1x1 white GIF) and 62% of GIFs are 43 bytes or smaller (which is the optimal size of a 1x1 transparent GIF). This increases to just over 75% of GIFs being 100 bytes or less.</div>
        <figcaption id="fig10-caption">Figure 10. Cumulative distribution function of GIF file sizes.</figcaption>
      </figure>
      <p>The tables below show two different approaches to removing these tiny images from the data set: the first one is based on images with a file size greater than 100 bytes, the second is based on images with a file size greater than 1024 bytes.</p>
      <h4 id="file-size-by-image-format-for-images--100-bytes">File size by image format for images &gt; 100 bytes</h4>
      <figure id="fig-11">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>GIF (KB)</th>
                  <th>ICO (KB)</th>
                  <th>JPG (KB)</th>
                  <th>PNG (KB)</th>
                  <th>SVG (KB)</th>
                  <th>WEBP (KB)</th>
                </tr>
                <tr>
                  <td>10</td>
                  <td>0.27</td>
                  <td>0.31</td>
                  <td>3.08</td>
                  <td>0.4</td>
                  <td>0.28</td>
                  <td>2.1</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>0.75</td>
                  <td>0.6</td>
                  <td>7.7</td>
                  <td>1.17</td>
                  <td>0.46</td>
                  <td>4.4</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>2.14</td>
                  <td>1.12</td>
                  <td>20.47</td>
                  <td>4.35</td>
                  <td>0.95</td>
                  <td>11.54</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>7.34</td>
                  <td>4.19</td>
                  <td>61.13</td>
                  <td>21.39</td>
                  <td>2.67</td>
                  <td>31.21</td>
                </tr>
                <tr>
                  <td>90</td>
                  <td>35</td>
                  <td>14.73</td>
                  <td>155.46</td>
                  <td>91.02</td>
                  <td>8.26</td>
                  <td>76.43</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 11. File size by image format for images &gt; 100 bytes.</figcaption>
      </figure>
      <h4 id="file-size-by-image-format-for-images--1024-bytes">File size by image format for images &gt; 1024 bytes</h4>
      <figure id="fig-12">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>GIF (KB)</th>
                  <th>ICO (KB)</th>
                  <th>JPG (KB)</th>
                  <th>PNG (KB)</th>
                  <th>SVG (KB)</th>
                  <th>WEBP (KB)</th>
                </tr>
                <tr>
                  <td>10</td>
                  <td>1.28</td>
                  <td>1.12</td>
                  <td>3.4</td>
                  <td>1.5</td>
                  <td>1.2</td>
                  <td>3.08</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>1.9</td>
                  <td>1.12</td>
                  <td>8.21</td>
                  <td>2.88</td>
                  <td>1.52</td>
                  <td>5</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>4.01</td>
                  <td>2.49</td>
                  <td>21.19</td>
                  <td>8.33</td>
                  <td>2.81</td>
                  <td>12.52</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>11.92</td>
                  <td>7.87</td>
                  <td>62.54</td>
                  <td>33.17</td>
                  <td>6.88</td>
                  <td>32.83</td>
                </tr>
                <tr>
                  <td>90</td>
                  <td>67.15</td>
                  <td>22.13</td>
                  <td>157.96</td>
                  <td>127.15</td>
                  <td>19.06</td>
                  <td>79.53</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 12. File size by image format for images &gt; 1024 bytes.</figcaption>
      </figure>
      <p>The low file size of PNG images compared to JPEG images may seem surprising. JPEG uses <a href="https://en.wikipedia.org/wiki/Lossy_compression">lossy compression</a>. Lossy compression results in data loss, which makes it possible to achieve smaller file sizes. Meanwhile, PNG uses <a href="https://en.wikipedia.org/wiki/Lossless_compression">lossless compression</a>. This does not result in data loss, which this produces higher-quality, but larger images. However, this difference in file sizes is probably a reflection of the popularity of PNGs for iconography due to their transparency support, rather than differences in their encoding and compression.</p>
      <h4 id="file-size-by-media-format">File size by media format</h4>
      <p>MP4 is overwhelmingly the most popular video format on the web today. In terms of popularity, it is followed by WebM and MPEG-TS respectively.</p>
      <p>Unlike some of the other tables in this data set, this one has mostly happy takeaways. Videos are consistently smaller on mobile, which is great to see. In addition, the median size of an MP4 video is a very reasonable 18 KB on mobile and 39 KB on desktop. The median numbers for WebM are even better but they should be taken with a grain of salt: the duplicate measurement of 0.29 KB across multiple clients and percentiles is a little bit suspicious. One possible explanation is that identical copies of one very tiny WebM video is included on many pages. Of the three formats, MPEG-TS consistently has the highest file size across all percentiles. This may be related to the fact that it was released in 1995, making it the oldest of these three media formats.</p>
      <h5 id="mobile-3">Mobile</h5>
      <figure id="fig-13">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>MP4 (KB)</th>
                  <th>WebM (KB)</th>
                  <th>MPEG-TS (KB)</th>
                </tr>
                <tr>
                  <td>10</td>
                  <td>0.89</td>
                  <td>0.29</td>
                  <td>0.01</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>2.07</td>
                  <td>0.29</td>
                  <td>55</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>18</td>
                  <td>1.44</td>
                  <td>153</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>202</td>
                  <td>223</td>
                  <td>278</td>
                </tr>
                <tr>
                  <td>90</td>
                  <td>928</td>
                  <td>390</td>
                  <td>475</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 13. Video size by media format on mobile.</figcaption>
      </figure>
      <h5 id="desktop-3">Desktop</h5>
      <figure id="fig-14">
        <div class="table-wrap">
          <div class="table-wrap-container">
            <table>
              <tbody>
                <tr>
                  <th>Percentile</th>
                  <th>MP4 (KB)</th>
                  <th>WebM (KB)</th>
                  <th>MPEG-TS (KB)</th>
                </tr>
                <tr>
                  <td>10</td>
                  <td>0.27</td>
                  <td>0.29</td>
                  <td>34</td>
                </tr>
                <tr>
                  <td>25</td>
                  <td>1.05</td>
                  <td>0.29</td>
                  <td>121</td>
                </tr>
                <tr>
                  <td>50</td>
                  <td>39</td>
                  <td>17</td>
                  <td>286</td>
                </tr>
                <tr>
                  <td>75</td>
                  <td>514</td>
                  <td>288</td>
                  <td>476</td>
                </tr>
                <tr>
                  <td>90</td>
                  <td>2142</td>
                  <td>896</td>
                  <td>756</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <figcaption>Figure 14. Video size by media format on desktop.</figcaption>
      </figure>
      <h2 id="conclusion">Conclusion</h2>
      <p>Over the past year, pages increased in size by roughly 10%. Brotli, performance budgets, and basic image optimization best practices are probably the three techniques which show the most promise for maintaining or improving page weight while also being widely applicable and fairly easy to implement. That being said, in recent years, improvements in page weight have been more constrained by the low adoption of best practices than by the technology itself. In other words, although there are many existing techniques for improving page weight, they won't make a difference if they aren't put to use.</p>
    </section>
    {{ render_actions() }}
    <section class="authors">
      {{ render_authors() }}
    </section>

    <nav id="chapter-navigation">
      {{ render_prevnext() }}
    </nav>
  </section>
</article>
{% endblock %}
