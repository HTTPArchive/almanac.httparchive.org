{% extends "%s/2019/base_ebook.html" % lang %} {% set metadata = {} %} {% block chapters %} {% set metadata = {"part_number":"I","chapter_number":1,"title":"JavaScript","description":"JavaScript chapter of the 2019 Web Almanac covering how much JavaScript we use on the web, compression, libraries and frameworks, loading, and source maps.","authors":["housseindjirdeh"],"reviewers":["obto","paulcalvano","mathiasbynens"],"translators":null,"discuss":"1756","results":"https://docs.google.com/spreadsheets/d/1kBTglETN_V9UjKqK_EFmFjRexJnQOmLLr-I2Tkotvic/","queries":"01_JavaScript","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-06-30T00:00:00.000Z","chapter":"javascript"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="javascript-introduction"><a href="#javascript-introduction" class="anchor-link">Introduction</a></h2>
    <p>JavaScript is a scripting language that makes it possible to build interactive and complex experiences on the web. This includes responding to user interactions, updating dynamic content on a page, and so forth. Anything involving how a web page should behave when an event occurs is what JavaScript is used for.</p>
    <p>The language specification itself, along with many community-built libraries and frameworks used by developers around the world, has changed and evolved ever since the language was created in 1995. JavaScript implementations and interpreters have also continued to progress, making the language usable in many environments, not only web browsers.</p>
    <p>
      The <a href="https://httparchive.org/">HTTP Archive<span class="fn">https://httparchive.org/</span></a> crawls <a href="https://httparchive.org/reports/state-of-the-web#numUrls">millions of pages<span class="fn">https://httparchive.org/reports/state-of-the-web#numUrls</span></a> every month and runs them through a private instance of <a href="https://webpagetest.org/">WebPageTest<span class="fn">https://webpagetest.org/</span></a> to store key information of every page. (You can learn more about this in our <a href="#methodology">methodology</a>). In the context of JavaScript, HTTP Archive provides extensive information on the usage of the language for the entire web. This chapter consolidates and analyzes many of these trends.
    </p>
    <h2 id="javascript-how-much-javascript-do-we-use"><a href="#javascript-how-much-javascript-do-we-use" class="anchor-link">How much JavaScript do we use?</a></h2>
    <p>
      JavaScript is the most costly resource we send to browsers; having to be downloaded, parsed, compiled, and finally executed. Although browsers have significantly decreased the time it takes to parse and compile scripts, <a href="https://v8.dev/blog/cost-of-javascript-2019">download and execution have become the most expensive stages<span class="fn">https://v8.dev/blog/cost-of-javascript-2019</span></a> when JavaScript is processed by a web page.
    </p>
    <p>Sending smaller JavaScript bundles to the browser is the best way to reduce download times, and in turn improve page performance. But how much JavaScript do we really use?</p>
    <figure id="javascript-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig1.png">
        <img src="/static/images/2019/javascript/fig1.png" alt="Figure 1. Distribution of JavaScript bytes per page." aria-labelledby="javascript-fig1-caption" aria-describedby="javascript-fig1-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1974602890&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="javascript-fig1-description" class="visually-hidden">Bar chart showing 70 bytes of JavaScript are used in the p10 percentile, 174 bytes for p25, 373 bytes for p50, 693 bytes for p75, and 1,093 bytes for p90</div>
      <figcaption id="javascript-fig1-caption"><a href="#javascript-fig-1" class="anchor-link">Figure 1.</a> Distribution of JavaScript bytes per page.</figcaption>
    </figure>
    <p>Figure 1 above shows that we use 373 KB of JavaScript at the 50th percentile, or median. In other words, 50% of all sites ship more than this much JavaScript to their users.</p>
    <p>Looking at these numbers, it's only natural to wonder if this is too much JavaScript. However in terms of page performance, the impact entirely depends on network connections and devices used. Which brings us to our next question: how much JavaScript do we ship when we compare mobile and desktop clients?</p>
    <figure id="javascript-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig2.png">
        <img src="/static/images/2019/javascript/fig2.png" alt="Figure 2. Distribution of JavaScript per page by device." aria-labelledby="javascript-fig2-caption" aria-describedby="javascript-fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1914565673&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="javascript-fig2-description" class="visually-hidden">Bar chart showing 76 bytes/65 bytes of JavaScript are used in the p10 percentile on desktop and mobile respectively, 186/164 bytes for p25, 391/359 bytes for p50, 721/668 bytes for p75, and 1,131/1,060 bytes for p90.</div>
      <figcaption id="javascript-fig2-caption"><a href="#javascript-fig-2" class="anchor-link">Figure 2.</a> Distribution of JavaScript per page by device.</figcaption>
    </figure>
    <p>At every percentile, we're sending slightly more JavaScript to desktop devices than we are to mobile.</p>
    <h3 id="javascript-processing-time"><a href="#javascript-processing-time" class="anchor-link">Processing time</a></h3>
    <p>After being parsed and compiled, JavaScript fetched by the browser needs to processed (or executed) before it can be utilized. Devices vary, and their computing power can significantly affect how fast JavaScript can be processed on a page. What are the current processing times on the web?</p>
    <p>We can get an idea by analyzing main thread processing times for V8 at different percentiles:</p>
    <figure id="javascript-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig3.png">
        <img src="/static/images/2019/javascript/fig3.png" alt="Figure 3. V8 Main thread processing times by device." aria-labelledby="javascript-fig3-caption" aria-describedby="javascript-fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=924000517&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="javascript-fig3-description" class="visually-hidden">Bar chart showing 141 ms/377 ms of processing time is used in the p10 percentile on desktop and mobile respectively, 352/988 ms for p25, 849/2,437 ms for p50, 1,850/5,518 ms for p75, and 3,543/10,735 ms for p90.</div>
      <figcaption id="javascript-fig3-caption"><a href="#javascript-fig-3" class="anchor-link">Figure 3.</a> V8 Main thread processing times by device.</figcaption>
    </figure>
    <p>At every percentile, processing times are longer for mobile web pages than on desktop. The median total main thread time on desktop is 849 ms, while mobile is at a larger number: 2,437 ms.</p>
    <p>Although this data shows how much longer it can take for a mobile device to process JavaScript compared to a more powerful desktop machine, mobile devices also vary in terms of computing power. The following chart shows how processing times on a single web page can vary significantly depending on the mobile device class.</p>
    <figure id="javascript-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/js-processing-reddit.png">
        <img src="/static/images/2019/javascript/js-processing-reddit.png" alt="JavaScript processing times for Reddit.com" aria-labelledby="javascript-fig4-caption" aria-describedby="javascript-fig4-description" width="600" height="363" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="javascript-fig4-description" class="visually-hidden">Bar chart showing 3 different devices: at the top a Pixel 3 has small amount on both the main thread and the worker thread of less than 400ms. For a Moto G4 it is approximately 900 ms on main thread and a further 300 ms on worker thread. And the final bar is an Alcatel 1X 5059D with over 2,000 ms on the main thread and over 500 ms on worker thread.</div>
      <figcaption id="javascript-fig4-caption">
        <a href="#javascript-fig-4" class="anchor-link">Figure 4.</a> JavaScript processing times for reddit.com. From <a href="https://v8.dev/blog/cost-of-javascript-2019">The cost of JavaScript in 2019<span class="fn">https://v8.dev/blog/cost-of-javascript-2019</span></a
        >.
      </figcaption>
    </figure>
    <h3 id="javascript-number-of-requests"><a href="#javascript-number-of-requests" class="anchor-link">Number of requests</a></h3>
    <p>One avenue worth exploring when trying to analyze the amount of JavaScript used by web pages is the number of requests shipped. With <a href="#http2">HTTP/2</a>, sending multiple smaller chunks can improve page load over sending a larger, monolithic bundle. If we also break it down by device client, how many requests are being fetched?</p>
    <figure id="javascript-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig5.png">
        <img src="/static/images/2019/javascript/fig5.png" alt="Figure 5. Distribution of total JavaScript requests." aria-labelledby="javascript-fig5-caption" aria-describedby="javascript-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1632335480&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="javascript-fig5-description" class="visually-hidden">Bar chart showing 4/4 requests for desktop and mobile respectively are used in the p10 percentile, 10/9 in p25, 19/18 in p50, 33/32 in p75 and 53/52 in p90.</div>
      <figcaption id="javascript-fig5-caption"><a href="#javascript-fig-5" class="anchor-link">Figure 5.</a> Distribution of total JavaScript requests.</figcaption>
    </figure>
    <p>At the median, 19 requests are sent for desktop and 18 for mobile.</p>
    <h3 id="javascript-first-party-vs-third-party"><a href="#javascript-first-party-vs-third-party" class="anchor-link">First-party vs. third-party</a></h3>
    <p>Of the results analyzed so far, the entire size and number of requests were being considered. In a majority of websites however, a significant portion of the JavaScript code fetched and used comes from <a href="#third-parties">third-party</a> sources.</p>
    <p>Third-party JavaScript can come from any external, third-party source. Ads, analytics and social media embeds are all common use-cases for fetching third-party scripts. So naturally, this brings us to our next question: how many requests sent are third-party instead of first-party?</p>
    <figure id="javascript-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig6.png">
        <img src="/static/images/2019/javascript/fig6.png" alt="Figure 6. Distribution of first and third-party scripts on desktop." aria-labelledby="javascript-fig6-caption" aria-describedby="javascript-fig6-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1108490&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="javascript-fig6-description" class="visually-hidden">Bar chart showing 0/1 request on desktop are first-party and third-party respectively in p10 percentile, 2/4 in p25, 6/10 in p50, 13/21 in p75, and 24/38 in p90.</div>
      <figcaption id="javascript-fig6-caption"><a href="#javascript-fig-6" class="anchor-link">Figure 6.</a> Distribution of first and third-party scripts on desktop.</figcaption>
    </figure>
    <figure id="javascript-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig7.png">
        <img src="/static/images/2019/javascript/fig7.png" alt="Figure 7. Distribution of first and third party scripts on mobile." aria-labelledby="javascript-fig7-caption" aria-describedby="javascript-fig7-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=998640509&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="javascript-fig7-description" class="visually-hidden">Bar chart showing 0/1 request on mobile are first-party and third-party respectively in p10 percentile, 2/3 in p25, 5/9 in p50, 13/20 in p75, and 23/36 in p90.</div>
      <figcaption id="javascript-fig7-caption"><a href="#javascript-fig-7" class="anchor-link">Figure 7.</a> Distribution of first and third party scripts on mobile.</figcaption>
    </figure>
    <p>For both mobile and desktop clients, more third-party requests are sent than first-party at every percentile. If this seems surprising, let's find out how much actual code shipped comes from third-party vendors.</p>
    <figure id="javascript-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig8.png">
        <img src="/static/images/2019/javascript/fig8.png" alt="Figure 8. Distribution of total JavaScript downloaded on desktop." aria-labelledby="javascript-fig8-caption" aria-describedby="javascript-fig8-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=633945705&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="javascript-fig8-description" class="visually-hidden">Bar chart showing 0/17 bytes of JavaScript are downloaded on desktop for first-party and third-party requests respectively in the p10 percentile, 11/62 in p25, 89/232 in p50, 200/525 in p75, and 404/900 in p90.</div>
      <figcaption id="javascript-fig8-caption"><a href="#javascript-fig-8" class="anchor-link">Figure 8.</a> Distribution of total JavaScript downloaded on desktop.</figcaption>
    </figure>
    <figure id="javascript-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig9.png">
        <img src="/static/images/2019/javascript/fig9.png" alt="Figure 9. Distribution of total JavaScript downloaded on mobile." aria-labelledby="javascript-fig9-caption" aria-describedby="javascript-fig9-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1611383649&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="javascript-fig9-description" class="visually-hidden">Bar chart showing 0/17 bytes of JavaScript are downloaded on mobile for first-party and third-party requests respectively in the p10 percentile, 6/54 in p25, 83/217 in p50, 189/477 in p75, and 380/827 in p90.</div>
      <figcaption id="javascript-fig9-caption"><a href="#javascript-fig-9" class="anchor-link">Figure 9.</a> Distribution of total JavaScript downloaded on mobile.</figcaption>
    </figure>
    <p>At the median, 89% more third-party code is used than first-party code authored by the developer for both mobile and desktop. This clearly shows that third-party code can be one of the biggest contributors to bloat. For more information on the impact of third parties, refer to the <a href="#third-parties">"Third Parties"</a> chapter.</p>
    <h2 id="javascript-resource-compression"><a href="#javascript-resource-compression" class="anchor-link">Resource compression</a></h2>
    <p>In the context of browser-server interactions, resource compression refers to code that has been modified using a data compression algorithm. Resources can be compressed statically ahead of time or on-the-fly as they are requested by the browser, and for either approach the transferred resource size is significantly reduced which improves page performance.</p>
    <p>There are multiple text-compression algorithms, but only two are mostly used for the compression (and decompression) of HTTP network requests:</p>
    <ul>
      <li>
        <a href="https://www.gzip.org/">Gzip<span class="fn">https://www.gzip.org/</span></a> (gzip): The most widely used compression format for server and client interactions
      </li>
      <li>
        <a href="https://github.com/google/brotli">Brotli<span class="fn">https://github.com/google/brotli</span></a> (br): A newer compression algorithm aiming to further improve compression ratios. <a href="https://caniuse.com/#feat=brotli">90% of browsers<span class="fn">https://caniuse.com/#feat=brotli</span></a> support Brotli encoding.
      </li>
    </ul>
    <p>Compressed scripts will always need to be uncompressed by the browser once transferred. This means its content remains the same and execution times are not optimized whatsoever. Resource compression, however, will always improve download times which also is one of the most expensive stages of JavaScript processing. Ensuring JavaScript files are compressed correctly can be one of the most significant factors in improving site performance.</p>
    <p>How many sites are compressing their JavaScript resources?</p>
    <figure id="javascript-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig10.png">
        <img src="/static/images/2019/javascript/fig10.png" alt="Figure 10. Percentage of sites compressing JavaScript resources with gzip or brotli." aria-labelledby="javascript-fig10-caption" aria-describedby="javascript-fig10-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=241928028&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="javascript-fig10-description" class="visually-hidden">Bar chart showing 67%/65% of JavaScript resources are compressed with gzip on desktop and mobile respectively, and 15%/14% are compressed using Brotli.</div>
      <figcaption id="javascript-fig10-caption"><a href="#javascript-fig-10" class="anchor-link">Figure 10.</a> Percentage of sites compressing JavaScript resources with gzip or brotli.</figcaption>
    </figure>
    <p>The majority of sites are compressing their JavaScript resources. Gzip encoding is used on ~64-67% of sites and Brotli on ~14%. Compression ratios are similar for both desktop and mobile.</p>
    <p>For a deeper analysis on compression, refer to the <a href="#compression">"Compression"</a> chapter.</p>
    <h2 id="javascript-open-source-libraries-and-frameworks"><a href="#javascript-open-source-libraries-and-frameworks" class="anchor-link">Open source libraries and frameworks</a></h2>
    <p>
      Open source code, or code with a permissive license that can be accessed, viewed and modified by anyone. From tiny libraries to entire browsers, such as <a href="https://www.chromium.org/Home">Chromium<span class="fn">https://www.chromium.org/Home</span></a> and <a href="https://www.openhub.net/p/firefox">Firefox<span class="fn">https://www.openhub.net/p/firefox</span></a
      >, open source code plays a crucial role in the world of web development. In the context of JavaScript, developers rely on open source tooling to include all types of functionality into their web page. Regardless of whether a developer decides to use a small utility library or a massive framework that dictates the architecture of their entire application, relying on open-source packages can make feature development easier and faster. So which JavaScript open-source libraries are used the most?
    </p>
    <figure id="javascript-fig-11">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Library</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>jQuery</td>
                <td class="numeric">85.03%</td>
                <td class="numeric">83.46%</td>
              </tr>
              <tr>
                <td>jQuery Migrate</td>
                <td class="numeric">31.26%</td>
                <td class="numeric">31.68%</td>
              </tr>
              <tr>
                <td>jQuery UI</td>
                <td class="numeric">23.60%</td>
                <td class="numeric">21.75%</td>
              </tr>
              <tr>
                <td>Modernizr</td>
                <td class="numeric">17.80%</td>
                <td class="numeric">16.76%</td>
              </tr>
              <tr>
                <td>FancyBox</td>
                <td class="numeric">7.04%</td>
                <td class="numeric">6.61%</td>
              </tr>
              <tr>
                <td>Lightbox</td>
                <td class="numeric">6.02%</td>
                <td class="numeric">5.93%</td>
              </tr>
              <tr>
                <td>Slick</td>
                <td class="numeric">5.53%</td>
                <td class="numeric">5.24%</td>
              </tr>
              <tr>
                <td>Moment.js</td>
                <td class="numeric">4.92%</td>
                <td class="numeric">4.29%</td>
              </tr>
              <tr>
                <td>Underscore.js</td>
                <td class="numeric">4.20%</td>
                <td class="numeric">3.82%</td>
              </tr>
              <tr>
                <td>prettyPhoto</td>
                <td class="numeric">2.89%</td>
                <td class="numeric">3.09%</td>
              </tr>
              <tr>
                <td>Select2</td>
                <td class="numeric">2.78%</td>
                <td class="numeric">2.48%</td>
              </tr>
              <tr>
                <td>Lodash</td>
                <td class="numeric">2.65%</td>
                <td class="numeric">2.68%</td>
              </tr>
              <tr>
                <td>Hammer.js</td>
                <td class="numeric">2.28%</td>
                <td class="numeric">2.70%</td>
              </tr>
              <tr>
                <td>YUI</td>
                <td class="numeric">1.84%</td>
                <td class="numeric">1.50%</td>
              </tr>
              <tr>
                <td>Lazy.js</td>
                <td class="numeric">1.26%</td>
                <td class="numeric">1.56%</td>
              </tr>
              <tr>
                <td>Fingerprintjs</td>
                <td class="numeric">1.21%</td>
                <td class="numeric">1.32%</td>
              </tr>
              <tr>
                <td>script.aculo.us</td>
                <td class="numeric">0.98%</td>
                <td class="numeric">0.85%</td>
              </tr>
              <tr>
                <td>Polyfill</td>
                <td class="numeric">0.97%</td>
                <td class="numeric">1.00%</td>
              </tr>
              <tr>
                <td>Flickity</td>
                <td class="numeric">0.83%</td>
                <td class="numeric">0.92%</td>
              </tr>
              <tr>
                <td>Zepto</td>
                <td class="numeric">0.78%</td>
                <td class="numeric">1.17%</td>
              </tr>
              <tr>
                <td>Dojo</td>
                <td class="numeric">0.70%</td>
                <td class="numeric">0.62%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#javascript-fig-11" class="anchor-link">Figure 11.</a> Top JavaScript libraries on desktop and mobile.</figcaption>
    </figure>
    <p>
      <a href="https://jquery.com/">jQuery<span class="fn">https://jquery.com/</span></a
      >, the most popular JavaScript library ever created, is used in 85.03% of desktop pages and 83.46% of mobile pages. The advent of many Browser APIs and methods, such as <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch<span class="fn">https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API</span></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector">querySelector<span class="fn">https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector</span></a
      >, standardized much of the functionality provided by the library into a native form. Although the popularity of jQuery may seem to be declining, why is it still used in the vast majority of the web?
    </p>
    <p>There are a number of possible reasons:</p>
    <ul>
      <li>
        <a href="https://wordpress.org/">WordPress<span class="fn">https://wordpress.org/</span></a
        >, which is used in more than 30% of sites, includes jQuery by default.
      </li>
      <li>Switching from jQuery to a newer client-side library can take time depending on how large an application is, and many sites may consist of jQuery in addition to newer client-side libraries.</li>
    </ul>
    <p>
      Other top used JavaScript libraries include jQuery variants (jQuery migrate, jQuery UI), <a href="https://modernizr.com/">Modernizr<span class="fn">https://modernizr.com/</span></a
      >, <a href="https://momentjs.com/">Moment.js<span class="fn">https://momentjs.com/</span></a
      >, <a href="https://underscorejs.org/">Underscore.js<span class="fn">https://underscorejs.org/</span></a> and so on.
    </p>
    <h3 id="javascript-frameworks-and-ui-libraries"><a href="#javascript-frameworks-and-ui-libraries" class="anchor-link">Frameworks and UI libraries</a></h3>
    <p class="note">
      As mentioned in our <a href="#methodology-wappalyzer">methodology</a>, the third-party detection library used in HTTP Archive (Wappalyzer) has a number of limitations with regards to how it detects certain tools. There is an open issue <a href="https://github.com/AliasIO/wappalyzer/issues/2450">to improve detection of JavaScript libraries and frameworks<span class="fn">https://github.com/AliasIO/wappalyzer/issues/2450</span></a
      >, which will have impacted the results presented here.
    </p>
    <p>In the past number of years, the JavaScript ecosystem has seen a rise in open-source libraries and frameworks to make building <strong>single-page applications</strong> (SPAs) easier. A single-page application is characterized as a web page that loads a single HTML page and uses JavaScript to modify the page on user interaction instead of fetching new pages from the server. Although this remains to be the main premise of single-page applications, different server-rendering approaches can still be used to improve the experience of such sites. How many sites use these types of frameworks?</p>
    <figure id="javascript-fig-12">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig12.png">
        <img src="/static/images/2019/javascript/fig12.png" alt="Figure 12. Most frequently used frameworks on desktop." aria-labelledby="javascript-fig12-caption" aria-describedby="javascript-fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1699359221&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="javascript-fig12-description" class="visually-hidden">Bar chart showing 4.6% of sites use React, 2.0% AngularJS, 1.8% Backbone.js, 0.8% Vue.js, 0.4% Knockout.js, 0.3% Zone.js, 0.3% Angular, 0.1% AMP, 0.1% Ember.js.</div>
      <figcaption id="javascript-fig12-caption"><a href="#javascript-fig-12" class="anchor-link">Figure 12.</a> Most frequently used frameworks on desktop.</figcaption>
    </figure>
    <p>Only a subset of popular frameworks are being analyzed here, but it's important to note that all of them either follow one of these two approaches:</p>
    <ul>
      <li>
        A <a href="https://developer.chrome.com/apps/app_frameworks">model-view-controller<span class="fn">https://developer.chrome.com/apps/app_frameworks</span></a> (or model-view-viewmodel) architecture
      </li>
      <li>A component-based architecture</li>
    </ul>
    <p>
      Although there has been a shift towards a component-based model, many older frameworks that follow the MVC paradigm (<a href="https://angularjs.org/">AngularJS<span class="fn">https://angularjs.org/</span></a
      >, <a href="https://backbonejs.org/">Backbone.js<span class="fn">https://backbonejs.org/</span></a
      >, <a href="https://emberjs.com/">Ember<span class="fn">https://emberjs.com/</span></a
      >) are still being used in thousands of pages. However, <a href="https://reactjs.org/">React<span class="fn">https://reactjs.org/</span></a
      >, <a href="https://vuejs.org/">Vue<span class="fn">https://vuejs.org/</span></a> and <a href="https://angular.io/">Angular<span class="fn">https://angular.io/</span></a> are the most popular component-based frameworks (<a href="https://github.com/angular/zone.js">Zone.js<span class="fn">https://github.com/angular/zone.js</span></a> is a package that is now part of Angular core).
    </p>
    <h2 id="javascript-differential-loading"><a href="#javascript-differential-loading" class="anchor-link">Differential loading</a></h2>
    <p>
      <a href="https://v8.dev/features/modules">JavaScript modules<span class="fn">https://v8.dev/features/modules</span></a
      >, or ES modules, are supported in <a href="https://caniuse.com/#feat=es6-module">all major browsers<span class="fn">https://caniuse.com/#feat=es6-module</span></a
      >. Modules provide the capability to create scripts that can import and export from other modules. This allows anyone to build their applications architected in a module pattern, importing and exporting wherever necessary, without relying on third-party module loaders.
    </p>
    <p>To declare a script as a module, the script tag must get the <code>type="module"</code> attribute:</p>
    <pre><code class="html language-html">&lt;script type="module" src="main.mjs"&gt;&lt;/script&gt;</code></pre>
    <p>How many sites use <code>type="module"</code> for scripts on their page?</p>
    <figure id="javascript-fig-13">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig13.png">
        <img src="/static/images/2019/javascript/fig13.png" alt="Figure 13. Percentage of sites utilizing type=module." aria-labelledby="javascript-fig13-caption" aria-describedby="javascript-fig13-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=1409239029&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
      <div id="javascript-fig13-description" class="visually-hidden">Bar chart showing 0.6% of sites on desktop use 'type=module', and 0.8% of sites on mobile.</div>
      <figcaption id="javascript-fig13-caption"><a href="#javascript-fig-13" class="anchor-link">Figure 13.</a> Percentage of sites utilizing type=module.</figcaption>
    </figure>
    <p>
      Browser-level support for modules is still relatively new, and the numbers here show that very few sites currently use <code>type="module"</code> for their scripts. Many sites are still relying on module loaders (2.37% of all desktop sites use <a href="https://github.com/requirejs/requirejs">RequireJS<span class="fn">https://github.com/requirejs/requirejs</span></a> for example) and bundlers (<a href="https://webpack.js.org/">webpack<span class="fn">https://webpack.js.org/</span></a> for example) to define modules within their codebase.
    </p>
    <p>If native modules are used, it's important to ensure that an appropriate fallback script is used for browsers that do not yet support modules. This can be done by including an additional script with a <code>nomodule</code> attribute.</p>
    <pre><code class="html language-html">&lt;script nomodule src="fallback.js"&gt;&lt;/script&gt;</code></pre>
    <p>
      When used together, browsers that support modules will completely ignore any scripts containing the <code>nomodule</code> attribute. On the other hand, browsers that do not yet support modules will not download any scripts with <code>type="module"</code>. Since they do not recognize <code>nomodule</code> either, they will download scripts with the attribute normally. Using this approach can allow developers to <a href="https://web.dev/serve-modern-code-to-modern-browsers/">send modern code to modern browsers for faster page loads<span class="fn">https://web.dev/serve-modern-code-to-modern-browsers/</span></a
      >. So, how many sites use <code>nomodule</code> for scripts on their page?
    </p>
    <figure id="javascript-fig-14">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig14.png">
        <img src="/static/images/2019/javascript/fig14.png" alt="Figure 14. Percentage of sites using nomodule." aria-labelledby="javascript-fig14-caption" aria-describedby="javascript-fig14-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=781034243&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig14-description" data-show-text="{{ show_description(14) }}" data-hide-text="{{ hide_description(14) }}">{{ show_description(14) }}</button>
      <div id="javascript-fig14-description" class="visually-hidden">Bar chart showing 0.8% of sites on desktop use 'nomobule', and 0.5% of sites on mobile.</div>
      <figcaption id="javascript-fig14-caption"><a href="#javascript-fig-14" class="anchor-link">Figure 14.</a> Percentage of sites using nomodule.</figcaption>
    </figure>
    <p>Similarly, very few sites (0.50%-0.80%) use the <code>nomodule</code> attribute for any scripts.</p>
    <h2 id="javascript-preload-and-prefetch"><a href="#javascript-preload-and-prefetch" class="anchor-link">Preload and prefetch</a></h2>
    <p>
      <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content">Preload<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content</span></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Link_prefetching_FAQ">prefetch<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Link_prefetching_FAQ</span></a> are <a href="#resource-hints">resource hints</a> which enable you to aid the browser in determining what resources need to be downloaded.
    </p>
    <ul>
      <li>Preloading a resource with <code>&lt;link rel="preload"&gt;</code> tells the browser to download this resource as soon as possible. This is especially helpful for critical resources which are discovered late in the page loading process (e.g., JavaScript located at the bottom of your HTML) and are otherwise downloaded last.</li>
      <li>Using <code>&lt;link rel="prefetch"&gt;</code> tells the browser to take advantage of any idle time it has to fetch these resources needed for future navigations</li>
    </ul>
    <p>So, how many sites use preload and prefetch directives?</p>
    <figure id="javascript-fig-15">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig15.png">
        <img src="/static/images/2019/javascript/fig15.png" alt="Figure 15. Percentage of sites using rel=preload for scripts." aria-labelledby="javascript-fig15-caption" aria-describedby="javascript-fig15-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=2007534370&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig15-description" data-show-text="{{ show_description(15) }}" data-hide-text="{{ hide_description(15) }}">{{ show_description(15) }}</button>
      <div id="javascript-fig15-description" class="visually-hidden">Bar chart showing 14% of sites on desktop use rel=preload' for scripts, and 15% of sites on mobile.</div>
      <figcaption id="javascript-fig15-caption"><a href="#javascript-fig-15" class="anchor-link">Figure 15.</a> Percentage of sites using rel=preload for scripts.</figcaption>
    </figure>
    <p>For all sites measured in HTTP Archive, 14.33% of desktop sites and 14.84% of mobile sites use <code>&lt;link rel="preload"&gt;</code> for scripts on their page.</p>
    <p>For prefetch, we have the following:</p>
    <figure id="javascript-fig-16">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig16.png">
        <img src="/static/images/2019/javascript/fig16.png" alt="Figure 16. Percentage of sites using rel=prefetch for scripts." aria-labelledby="javascript-fig16-caption" aria-describedby="javascript-fig16-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=547807937&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig16-description" data-show-text="{{ show_description(16) }}" data-hide-text="{{ hide_description(16) }}">{{ show_description(16) }}</button>
      <div id="javascript-fig16-description" class="visually-hidden">Bar chart showing 0.08% of sites on desktop use 'rel=prefetch', and 0.08% of sites on mobile.</div>
      <figcaption id="javascript-fig16-caption"><a href="#javascript-fig-16" class="anchor-link">Figure 16.</a> Percentage of sites using rel=prefetch for scripts.</figcaption>
    </figure>
    <p>For both mobile and desktop, 0.08% of pages leverage prefetch for any of their scripts.</p>
    <h2 id="javascript-newer-apis"><a href="#javascript-newer-apis" class="anchor-link">Newer APIs</a></h2>
    <p>JavaScript continues to evolve as a language. A new version of the language standard itself, known as ECMAScript, is released every year with new APIs and features passing proposal stages to become a part of the language itself.</p>
    <p>With HTTP Archive, we can take a look at any newer API that is supported (or is about to be) and see how widespread its usage is. These APIs may already be used in browsers that support them <em>or</em> with an accompanying polyfill to make sure they still work for every user.</p>
    <p>How many sites use the following APIs?</p>
    <ul>
      <li>
        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics">Atomics<span class="fn">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics</span></a>
      </li>
      <li>
        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl">Intl<span class="fn">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl</span></a>
      </li>
      <li>
        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy<span class="fn">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy</span></a>
      </li>
      <li>
        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer">SharedArrayBuffer<span class="fn">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer</span></a>
      </li>
      <li>
        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap">WeakMap<span class="fn">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap</span></a>
      </li>
      <li>
        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet">WeakSet<span class="fn">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet</span></a>
      </li>
    </ul>
    <figure id="javascript-fig-17">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig17.png">
        <img src="/static/images/2019/javascript/fig17.png" alt="Figure 17. Usage of new JavaScript APIs." aria-labelledby="javascript-fig17-caption" aria-describedby="javascript-fig17-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=594315296&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig17-description" data-show-text="{{ show_description(17) }}" data-hide-text="{{ hide_description(17) }}">{{ show_description(17) }}</button>
      <div id="javascript-fig17-description" class="visually-hidden">Bar chart showing 25.5%/36.2% of sites on desktop and mobile respectivdely use WeakMap, 6.1%/17.2% use WeakSet, 3.9%/14.0% use Intl, 3.9%/4.4% use Proxy, 0.4%/0.4% use Atomics, and 0.2%/0.2% use SharedArrayBuffer.</div>
      <figcaption id="javascript-fig17-caption"><a href="#javascript-fig-17" class="anchor-link">Figure 17.</a> Usage of new JavaScript APIs.</figcaption>
    </figure>
    <p>Atomics (0.38%) and SharedArrayBuffer (0.20%) are barely visible on this chart since they are used on such few pages.</p>
    <p>
      It is important to note that the numbers here are approximations and they do not leverage <a href="https://chromium.googlesource.com/chromium/src.git/+/master/docs/use_counter_wiki.md">UseCounter<span class="fn">https://chromium.googlesource.com/chromium/src.git/+/master/docs/use_counter_wiki.md</span></a> to measure feature usage.
    </p>
    <h2 id="javascript-source-maps"><a href="#javascript-source-maps" class="anchor-link">Source maps</a></h2>
    <p>
      In many build systems, JavaScript files undergo minification to minimize its size and transpilation for newer language features that are not yet supported in many browsers. Moreover, language supersets like <a href="https://www.typescriptlang.org/">TypeScript<span class="fn">https://www.typescriptlang.org/</span></a> compile to an output that can look noticeably different from the original source code. For all these reasons, the final code served to the browser can be unreadable and hard to decipher.
    </p>
    <p>A <strong>source map</strong> is an additional file accompanying a JavaScript file that allows a browser to map the final output to its original source. This can make debugging and analyzing production bundles much simpler.</p>
    <p>Although useful, there are a number of reasons why many sites may not want to include source maps in their final production site, such as choosing not to expose complete source code to the public. So how many sites actually include sourcemaps?</p>
    <figure id="javascript-fig-18">
      <a href="https://almanac.httparchive.org/static/images/2019/javascript/fig18.png">
        <img src="/static/images/2019/javascript/fig18.png" alt="Figure 18. Percentage of sites using source maps." aria-labelledby="javascript-fig18-caption" aria-describedby="javascript-fig18-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTpzDb9HGbdVvin6YPTOmw11qBVGGysltxmH545fUfnqIThAq878F_b-KxUo65IuXaeFVSnlmJ5K1Dm/pubchart?oid=906754154&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig18-description" data-show-text="{{ show_description(18) }}" data-hide-text="{{ hide_description(18) }}">{{ show_description(18) }}</button>
      <div id="javascript-fig18-description" class="visually-hidden">Bar chart showing 18% of desktop sites and 17% of mobile sites use source maps.</div>
      <figcaption id="javascript-fig18-caption"><a href="#javascript-fig-18" class="anchor-link">Figure 18.</a> Percentage of sites using source maps.</figcaption>
    </figure>
    <p>For both desktop and mobile pages, the results are about the same. 17-18% include a source map for at least one script on the page (detected as a first-party script with <code>sourceMappingURL</code>).</p>
    <h2 id="javascript-conclusion"><a href="#javascript-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>The JavaScript ecosystem continues to change and evolve every year. Newer APIs, improved browser engines, and fresh libraries and frameworks are all things we can expect to happen indefinitely. HTTP Archive provides us with valuable insight on how sites in the wild use the language.</p>
    <p>Without JavaScript, the web would not be where it is today, and all the data gathered for this article only proves this.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"I","chapter_number":2,"title":"CSS","description":"CSS chapter of the 2019 Web Almanac covering color, units, selectors, layout, typography and fonts, spacing, decoration, animation, and media queries.","authors":["una","argyleink"],"reviewers":["meyerweb","huijing"],"translators":null,"discuss":"1757","results":"https://docs.google.com/spreadsheets/d/1uFlkuSRetjBNEhGKWpkrXo4eEIsgYelxY-qR9Pd7QpM/","queries":"02_CSS","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-07-06T00:00:00.000Z","chapter":"css"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="css-introduction"><a href="#css-introduction" class="anchor-link">Introduction</a></h2>
    <p>Cascading Style Sheets (CSS) are used to paint, format, and layout web pages. Their capabilities span concepts as simple as text color to 3D perspective. It also has hooks to empower developers to handle varying screen sizes, viewing contexts, and printing. CSS helps developers wrangle content and ensure it's adapting properly to the user.</p>
    <p>When describing CSS to those not familiar with web technology, it can be helpful to think of it as the language to paint the walls of the house; describing the size and position of windows and doors, as well as flourishing decorations such as wallpaper or plant life. The fun twist to that story is that depending on the user walking through the house, a developer can adapt the house to that specific user's preferences or contexts!</p>
    <p>In this chapter, we'll be inspecting, tallying, and extracting data about how CSS is used across the web. Our goal is to holistically understand what features are being used, how they're used, and how CSS is growing and being adopted.</p>
    <p>Ready to dig into the fascinating data?! Many of the following numbers may be small, but don't mistake them as insignificant! It can take many years for new things to saturate the web.</p>
    <h2 id="css-color"><a href="#css-color" class="anchor-link">Color</a></h2>
    <p>Color is an integral part of theming and styling on the web. Let's take a look at how websites tend to use color.</p>
    <h3 id="css-color-types"><a href="#css-color-types" class="anchor-link">Color types</a></h3>
    <p>
      Hex is the most popular way to describe color by far, with 93% usage, followed by RGB, and then HSL. Interestingly, developers are taking full advantage of the alpha-transparency argument when it comes to these color types: HSLA and RGBA are far more popular than HSL and RGB, with almost double the usage! Even though the alpha-transparency was added later to the web spec, HSLA and RGBA are supported <a href="https://caniuse.com/#feat=css3-colors">as far back as IE9<span class="fn">https://caniuse.com/#feat=css3-colors</span></a
      >, so you can go ahead and use them, too!
    </p>
    <figure id="css-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig1.png">
        <img src="/static/images/2019/css/fig1.png" alt="Figure 1. Popularity of color formats." aria-labelledby="css-fig1-caption" aria-describedby="css-fig1-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1946838030&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="css-fig1-description" class="visually-hidden">Bar chart showing the adoption of HSL, HSLA, RGB, RGBA, and hex color formats. Hex is used on 93% of desktop pages, RGBA on 83%, RGB on 22%, HSLA 19%, and HSL 1%. Desktop and mobile adoption is similar for all color formats except HSL, for which mobile adoption is 9% (9 times higher).</div>
      <figcaption id="css-fig1-caption"><a href="#css-fig-1" class="anchor-link">Figure 1.</a> Popularity of color formats.</figcaption>
    </figure>
    <h3 id="css-color-selection"><a href="#css-color-selection" class="anchor-link">Color selection</a></h3>
    <p>
      There are <a href="https://www.w3.org/TR/css-color-4/#named-colors">148 named CSS colors<span class="fn">https://www.w3.org/TR/css-color-4/#named-colors</span></a
      >, not including the special values <code>transparent</code> and <code>currentcolor</code>. You can use these by their string name for more readable styling. The most popular named colors are <code>black</code> and <code>white</code>, unsurprisingly, followed by <code>red</code> and <code>blue</code>.
    </p>
    <figure id="css-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig2.png">
        <img src="/static/images/2019/css/fig2.png" alt="Figure 2. Top named colors." aria-labelledby="css-fig2-caption" aria-describedby="css-fig2-description" width="600" height="415" data-width="600" data-height="415" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1985913808&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="css-fig2-description" class="visually-hidden">Pie chart showing the most popular named colors. White is the most popular at 40%, then black at 22%, red 11%, and blue 5%.</div>
      <figcaption id="css-fig2-caption"><a href="#css-fig-2" class="anchor-link">Figure 2.</a> Top named colors.</figcaption>
    </figure>
    <p>
      Language is interestingly inferred via color as well. There are more instances of the American-style "gray" than the British-style "grey". Almost every instance of <a href="https://www.rapidtables.com/web/color/gray-color.html">gray colors<span class="fn">https://www.rapidtables.com/web/color/gray-color.html</span></a> (<code>gray</code>, <code>lightgray</code>, <code>darkgray</code>, <code>slategray</code>, etc.) had nearly double the usage when spelled with an "a" instead of an "e". If gr[a/e]ys were combined, they would rank higher than blue, solidifying themselves in the #4 spot. This could be why <code>silver</code> is ranked higher than <code>grey</code> with an "e" in the charts!
    </p>
    <h3 id="css-color-count"><a href="#css-color-count" class="anchor-link">Color count</a></h3>
    <p>How many different font colors are used across the web? So this isn't the total number of unique colors; rather, it's how many different colors are used just for text. The numbers in this chart are quite high, and from experience, we know that without CSS variables, spacing, sizes and colors can quickly get away from you and fragment into lots of tiny values across your styles. These numbers reflect a difficulty of style management, and we hope this helps create some perspective for you to bring back to your teams or projects. How can you reduce this number into a manageable and reasonable amount?</p>
    <figure id="css-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig3.png">
        <img src="/static/images/2019/css/fig3.png" alt="igure 3. Distribution of colors per page." aria-labelledby="css-fig3-caption" aria-describedby="css-fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1361184636&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="css-fig3-description" class="visually-hidden">Distribution showing the 10, 25, 50, 75, and 90th percentiles of colors per desktop and mobile page. On desktop the distribution is 8, 22, 48, 83, and 131. Mobile pages tend to have more colors by 1-10.</div>
      <figcaption id="css-fig3-caption"><a href="#css-fig-3" class="anchor-link">Figure 3.</a> Distribution of colors per page.</figcaption>
    </figure>
    <h3 id="css-color-duplication"><a href="#css-color-duplication" class="anchor-link">Color duplication</a></h3>
    <p>Well, we got curious here and wanted to inspect how many duplicate colors are present on a page. Without a tightly managed reusable class CSS system, duplicates are quite easy to create. It turns out that the median has enough duplicates that it could be worth doing a pass to unify them with custom properties.</p>
    <figure id="css-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig4.png">
        <img src="/static/images/2019/css/fig4.png" alt="Figure 4. Distribution of duplicate colors per page." aria-labelledby="css-fig4-caption" aria-describedby="css-fig4-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=326531498&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="css-fig4-description" class="visually-hidden">Bar chart showing the distribution of colors per page. The median desktop page has 24 duplicate colors. The 10th percentile is 4 duplicate colors and the 90th percentile is 62. Desktop and mobile distributions are similar.</div>
      <figcaption id="css-fig4-caption"><a href="#css-fig-4" class="anchor-link">Figure 4.</a> Distribution of duplicate colors per page.</figcaption>
    </figure>
    <h2 id="css-units"><a href="#css-units" class="anchor-link">Units</a></h2>
    <p>In CSS, there are many different ways to achieve the same visual result using different unit types: <code>rem</code>, <code>px</code>, <code>em</code>, <code>ch</code>, or even <code>cm</code>! So which unit types are most popular?</p>
    <figure id="css-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig5.png">
        <img src="/static/images/2019/css/fig5.png" alt="Figure 5. Popularity of unit types." aria-labelledby="css-fig5-caption" aria-describedby="css-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=540111393&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="css-fig5-description" class="visually-hidden">Bar chart of the popularity of various unit types. px and em are used on at over 90% of pages. rem is the next most popular unit type on 40% of pages and the popularity quickly falls for the remaining unit types.</div>
      <figcaption id="css-fig5-caption"><a href="#css-fig-5" class="anchor-link">Figure 5.</a> Popularity of unit types.</figcaption>
    </figure>
    <h3 id="css-length-and-sizing"><a href="#css-length-and-sizing" class="anchor-link">Length and sizing</a></h3>
    <p>Unsurprisingly, In Figure 5 above, <code>px</code> is the most used unit type, with about 95% of web pages using pixels in some form or another (this could be element sizing, font size, and so on). However, the <code>em</code> unit is almost as popular, with about 90% usage. This is over 2x more popular than the <code>rem</code> unit, which has only 40% frequency in web pages. If you're wondering what the difference is, <code>em</code> is based on the parent font size, while <code>rem</code> is based on the base font size set to the page. It doesn't change per-component like <code>em</code> could, and thus allows for adjustment of all spacing evenly.</p>
    <p>When it comes to units based on physical space, the <code>cm</code> (or centimeter) unit is the most popular by far, followed by <code>in</code> (inches), and then <code>Q</code>. We know these types of units are specifically useful for print stylesheets, but we didn't even know the <code>Q</code> unit existed until this survey! Did you?</p>
    <p class="note">
      An earlier version of this chapter discussed the unexpected popularity of the <code>Q</code> unit. Thanks to the <a href="https://discuss.httparchive.org/t/chapter-2-css/1757/6">community discussion<span class="fn">https://discuss.httparchive.org/t/chapter-2-css/1757/6</span></a> surrounding this chapter, we've identified that this was a bug in our analysis and have updated Figure 5 accordingly.
    </p>
    <h3 id="css-viewport-based-units"><a href="#css-viewport-based-units" class="anchor-link">Viewport-based units</a></h3>
    <p>We saw larger differences in unit types when it comes to mobile and desktop usage for viewport-based units. 36.8% of mobile sites use <code>vh</code> (viewport height), while only 31% of desktop sites do. We also found that <code>vh</code> is more common than <code>vw</code> (viewport width) by about 11%. <code>vmin</code> (viewport minimum) is more popular than <code>vmax</code> (viewport maximum), with about 8% usage of <code>vmin</code> on mobile while <code>vmax</code> is only used by 1% of websites.</p>
    <h3 id="css-custom-properties"><a href="#css-custom-properties" class="anchor-link">Custom properties</a></h3>
    <p>Custom properties are what many call CSS variables. They're more dynamic than a typical static variable though! They're very powerful and as a community we're still discovering their potential.</p>
    <figure id="css-fig-6">
      <div class="big-number">5%</div>
      <figcaption><a href="#css-fig-6" class="anchor-link">Figure 6.</a> Percent of pages using custom properties.</figcaption>
    </figure>
    <p>We felt like this was exciting information, since it shows healthy growth of one of our favorite CSS additions. They were available in all major browsers since 2016 or 2017, so it's fair to say they're fairly new. Many folks are still transitioning from their CSS preprocessor variables to CSS custom properties. We estimate it'll be a few more years until custom properties are the norm.</p>
    <h2 id="css-selectors"><a href="#css-selectors" class="anchor-link">Selectors</a></h2>
    <h3 id="css-id-vs-class-selectors"><a href="#css-id-vs-class-selectors" class="anchor-link">ID vs class selectors</a></h3>
    <p>CSS has a few ways to find elements on the page for styling, so let's put IDs and classes against each other to see which is more prevalent! The results shouldn't be too surprising: classes are more popular!</p>
    <figure id="css-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig7.png">
        <img src="/static/images/2019/css/fig7.png" alt="Figure 7. Popularity of selector types per page." aria-labelledby="css-fig7-caption" aria-describedby="css-fig7-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1216272563&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="css-fig7-description" class="visually-hidden">Bar chart showing the adoption of ID and class selector types. Classes are used on 95% of desktop and mobile pages. IDs are used on 89% of desktop and 87% of mobile pages.</div>
      <figcaption id="css-fig7-caption"><a href="#css-fig-7" class="anchor-link">Figure 7.</a> Popularity of selector types per page.</figcaption>
    </figure>
    <p>A nice follow up chart is this one, showing that classes take up 93% of the selectors found in a stylesheet.</p>
    <figure id="css-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig8.png">
        <img src="/static/images/2019/css/fig8.png" alt="Figure 8. Popularity of selector types per selector." aria-labelledby="css-fig8-caption" aria-describedby="css-fig8-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=351006989&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="css-fig8-description" class="visually-hidden">Bar chart showing that 94% of selectors include the class selector for desktop and mobile, while 7% of desktop selectors include the ID selector (8% for mobile).</div>
      <figcaption id="css-fig8-caption"><a href="#css-fig-8" class="anchor-link">Figure 8.</a> Popularity of selector types per selector.</figcaption>
    </figure>
    <h3 id="css-attribute-selectors"><a href="#css-attribute-selectors" class="anchor-link">Attribute selectors</a></h3>
    <p>CSS has some very powerful comparison selectors. These are selectors like <code>[target="_blank"]</code>, <code>[attribute^="value"]</code>, <code>[title~="rad"]</code>, <code>[attribute$="-rad"]</code> or <code>[attribute*="value"]</code>. Do you use them? Think they're used a lot? Let's compare how those are used with IDs and classes across the web.</p>
    <figure id="css-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig9.png">
        <img src="/static/images/2019/css/fig9.png" alt="Figure 9. Popularity of operators per ID attribute selector." aria-labelledby="css-fig9-caption" aria-describedby="css-fig9-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=695879874&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="css-fig9-description" class="visually-hidden">Bar chart showing the popularity of operators used by ID attribute selectors. About 4% of desktop and mobile pages use star-equals and caret-equals. 1% of pages use equals and dollar-equals. 0% use tilde-equals.</div>
      <figcaption id="css-fig9-caption"><a href="#css-fig-9" class="anchor-link">Figure 9.</a> Popularity of operators per ID attribute selector.</figcaption>
    </figure>
    <figure id="css-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig10.png">
        <img src="/static/images/2019/css/fig10.png" alt="Figure 10. Popularity of operators per class attribute selector." aria-labelledby="css-fig10-caption" aria-describedby="css-fig10-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=377805296&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="css-fig10-description" class="visually-hidden">Bar chart showing the popularity of operators used by class attribute selectors. 57% of pages use star-equals. 36% use caret-equals. 1% use equals and dollar-equals. 0% use tilde-equals.</div>
      <figcaption id="css-fig10-caption"><a href="#css-fig-10" class="anchor-link">Figure 10.</a> Popularity of operators per class attribute selector.</figcaption>
    </figure>
    <p>These operators are much more popular with class selectors than IDs, which feels natural since a stylesheet usually has fewer ID selectors than class selectors, but still neat to see the uses of all these combinations.</p>
    <h3 id="css-classes-per-element"><a href="#css-classes-per-element" class="anchor-link">Classes per element</a></h3>
    <p>With the rise of OOCSS, atomic, and functional CSS strategies which can compose 10 or more classes on an element to achieve a design look, perhaps we'd see some interesting results. The query came back quite unexciting, with the median on mobile and desktop being 1 class per element.</p>
    <figure id="css-fig-11">
      <div class="big-number">1</div>
      <figcaption><a href="#css-fig-11" class="anchor-link">Figure 11.</a> The median number of class names per class attribute (desktop and mobile).</figcaption>
    </figure>
    <h2 id="css-layout"><a href="#css-layout" class="anchor-link">Layout</a></h2>
    <h3 id="css-flexbox"><a href="#css-flexbox" class="anchor-link">Flexbox</a></h3>
    <p>
      <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox">Flexbox<span class="fn">https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox</span></a> is a container style that directs and aligns its children; that is, it helps with layout in a constraint-based way. It had a quite rocky beginning on the web, as its specification went through two or three quite drastic changes between 2010 and 2013. Fortunately, it settled and was implemented across all browsers by 2014. Given that history, it had a slow adoption rate, but it's been a few years since then! It's quite popular now and has many articles about it and how to leverage it, but it's still new in comparison to other layout tactics.
    </p>
    <figure id="css-fig-12">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig12.png">
        <img src="/static/images/2019/css/fig12.png" alt="Figure 12. Adoption of flexbox." aria-labelledby="css-fig12-caption" aria-describedby="css-fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=2021161093&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="css-fig12-description" class="visually-hidden">Bar chart showing 49% of desktop pages and 52% of mobile pages using flexbox.</div>
      <figcaption id="css-fig12-caption"><a href="#css-fig-12" class="anchor-link">Figure 12.</a> Adoption of flexbox.</figcaption>
    </figure>
    <p>Quite the success story shown here, as nearly 50% of the web has flexbox usage in its stylesheets.</p>
    <h3 id="css-grid"><a href="#css-grid" class="anchor-link">Grid</a></h3>
    <p>
      Like flexbox, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout">grid<span class="fn">https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout</span></a> too went through a few spec alternations early on in its lifespan, but without changing implementations in publicly-deployed browsers. Microsoft had grid in the first versions of Windows 8, as the primary layout engine for its horizontally scrolling design style. It was vetted there first, transitioned to the web, and then hardened by the other browsers until its final release in 2017. It had a very successful launch in that nearly all browsers released their implementations at the same time, so web developers just woke up one day to superb grid support. Today, at the end of 2019, grid still feels like a new kid on the block, as folks are still awakening to its power and capabilities.
    </p>
    <figure id="css-fig-13">
      <div class="big-number">2%</div>
      <figcaption><a href="#css-fig-13" class="anchor-link">Figure 13.</a> Percent of websites using grid.</figcaption>
    </figure>
    <p>This shows just how little the web development community has exercised and explored their latest layout tool. We look forward to the eventual takeover of grid as the primary layout engine folks lean on when building a site. For us authors, we love writing grid: we typically reach for it first, then dial our complexity back as we realize and iterate on layout. It remains to be seen what the rest of the world will do with this powerful CSS feature over the next few years.</p>
    <h3 id="css-writing-modes"><a href="#css-writing-modes" class="anchor-link">Writing modes</a></h3>
    <p>The web and CSS are international platform features, and writing modes offer a way for HTML and CSS to indicate a user's preferred reading and writing direction within our elements.</p>
    <figure id="css-fig-14">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig14.png">
        <img src="/static/images/2019/css/fig14.png" alt="Figure 14. Popularity of direction values." aria-labelledby="css-fig14-caption" aria-describedby="css-fig14-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=136847988&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig14-description" data-show-text="{{ show_description(14) }}" data-hide-text="{{ hide_description(14) }}">{{ show_description(14) }}</button>
      <div id="css-fig14-description" class="visually-hidden">Bar chart showing the popularity of direction values ltr and rtl. ltr is used by 32% of desktop pages and 40% of mobile pages. rtl is used by 32% of desktop pages and 36% of mobile pages.</div>
      <figcaption id="css-fig14-caption"><a href="#css-fig-14" class="anchor-link">Figure 14.</a> Popularity of direction values.</figcaption>
    </figure>
    <h2 id="css-typography"><a href="#css-typography" class="anchor-link">Typography</a></h2>
    <h3 id="css-web-fonts-per-page"><a href="#css-web-fonts-per-page" class="anchor-link">Web fonts per page</a></h3>
    <p>How many web fonts are you loading on your web page: 0? 10? The median number of web fonts per page is 3!</p>
    <figure id="css-fig-15">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig15.png">
        <img src="/static/images/2019/css/fig15.png" alt="Figure 15. Distribution of the number of web fonts loaded per page." aria-labelledby="css-fig15-caption" aria-describedby="css-fig15-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1453570774&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig15-description" data-show-text="{{ show_description(15) }}" data-hide-text="{{ hide_description(15) }}">{{ show_description(15) }}</button>
      <div id="css-fig15-description" class="visually-hidden">Distribution of the number of web fonts loaded per page. On desktop the 10, 25, 50, 75, and 90th percentiles are: 0, 1, 3, 6, and 9. This slightly higher than the mobile distribution which is one fewer font in the 75th and 90th percentiles.</div>
      <figcaption id="css-fig15-caption"><a href="#css-fig-15" class="anchor-link">Figure 15.</a> Distribution of the number of web fonts loaded per page.</figcaption>
    </figure>
    <h3 id="css-popular-font-families"><a href="#css-popular-font-families" class="anchor-link">Popular font families</a></h3>
    <p>A natural follow up to the inquiry of total number of fonts per page, is: what fonts are they?! Designers, tune in, because you'll now get to see if your choices are in line with what's popular or not.</p>
    <figure id="css-fig-16">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig16.png">
        <img src="/static/images/2019/css/fig16.png" alt="Figure 16. Top web fonts." aria-labelledby="css-fig16-caption" aria-describedby="css-fig16-description" width="600" height="450" data-width="600" data-height="450" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1883567922&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig16-description" data-show-text="{{ show_description(16) }}" data-hide-text="{{ hide_description(16) }}">{{ show_description(16) }}</button>
      <div id="css-fig16-description" class="visually-hidden">Bar chart of the most popular fonts. Among desktop pages, they are Open Sans (24%), Roboto (15%), Montserrat (5%), Source Sans Pro (4%), Noto Sans JP (3%), and Lato (3%). On mobile the most notable differences are that Open Sans is used 22% of the time (down from 24%) and Roboto is used 19% of the time (up from 15%).</div>
      <figcaption id="css-fig16-caption"><a href="#css-fig-16" class="anchor-link">Figure 16.</a> Top web fonts.</figcaption>
    </figure>
    <p>Open Sans is a huge winner here, with nearly 1 in 4 CSS <code>@font-family</code> declarations specifying it. We've definitely used Open Sans in projects at agencies.</p>
    <p>It's also interesting to note the differences between desktop and mobile adoption. For example, mobile pages use Open Sans slightly less often than desktop. Meanwhile, they also use Roboto slightly more often.</p>
    <h3 id="css-font-sizes"><a href="#css-font-sizes" class="anchor-link">Font sizes</a></h3>
    <p>This is a fun one, because if you asked a user how many font sizes they feel are on a page, they'd generally return a number of 5 or definitely less than 10. Is that reality though? Even in a design system, how many font sizes are there? We queried the web and found the median to be 40 on mobile and 38 on desktop. Might be time to really think hard about custom properties or creating some reusable classes to help you distribute your type ramp.</p>
    <figure id="css-fig-17">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig17.png">
        <img src="/static/images/2019/css/fig17.png" alt="Figure 17. Distribution of the number of distinct font sizes per page." aria-labelledby="css-fig17-caption" aria-describedby="css-fig17-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1695270216&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig17-description" data-show-text="{{ show_description(17) }}" data-hide-text="{{ hide_description(17) }}">{{ show_description(17) }}</button>
      <div id="css-fig17-description" class="visually-hidden">Bar chart showing the distribution of distinct font sizes per page. For desktop pages the 10, 25, 50, 75, and 90th percentiles are: 8, 20, 40, 66, and 92 font sizes. The desktop distribution diverges from mobile at the 75th percentile, where it is larger by 7 to 13 distinct sizes.</div>
      <figcaption id="css-fig17-caption"><a href="#css-fig-17" class="anchor-link">Figure 17.</a> Distribution of the number of distinct font sizes per page.</figcaption>
    </figure>
    <h2 id="css-spacing"><a href="#css-spacing" class="anchor-link">Spacing</a></h2>
    <h3 id="css-margins"><a href="#css-margins" class="anchor-link">Margins</a></h3>
    <p>A margin is the space outside of elements, like the space you demand when you push your arms out from yourself. This often looks like the spacing between elements, but is not limited to that effect. In a website or app, spacing plays a huge role in UX and design. Let's see how much margin spacing code goes into a stylesheet, shall we?</p>
    <figure id="css-fig-18">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig18.png">
        <img src="/static/images/2019/css/fig18.png" alt="Figure 18. Distribution of the number of distinct margin values per page." aria-labelledby="css-fig18-caption" aria-describedby="css-fig18-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=4233531&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig18-description" data-show-text="{{ show_description(18) }}" data-hide-text="{{ hide_description(18) }}">{{ show_description(18) }}</button>
      <div id="css-fig18-description" class="visually-hidden">Bar chart showing the distribution of distinct margin values per page. For desktop pages the 10, 25, 50, 75, and 90th percentiles are: 12, 47, 96, 167, and 248 distinct margin values. The desktop distribution diverges from mobile at the 75th percentile, where it is smaller by 12 to 31 distinct values.</div>
      <figcaption id="css-fig18-caption"><a href="#css-fig-18" class="anchor-link">Figure 18.</a> Distribution of the number of distinct margin values per page.</figcaption>
    </figure>
    <p>Quite a lot, it seems! The median desktop page has 96 distinct margin values and 104 on mobile. That makes for a lot of unique spacing moments in your design. Curious how many margins you have in your site? How can we make all this whitespace more manageable?</p>
    <h3 id="css-logical-properties"><a href="#css-logical-properties" class="anchor-link">Logical properties</a></h3>
    <figure id="css-fig-19">
      <div class="big-number">0.6%</div>
      <figcaption><a href="#css-fig-19" class="anchor-link">Figure 19.</a> Percent of desktop and mobile pages that include logical properties.</figcaption>
    </figure>
    <p>We estimate that the hegemony of <code>margin-left</code> and <code>padding-top</code> is of limited duration, soon to be supplemented by their writing direction agnostic, successive, logical property syntax. While we're optimistic, current usage is quite low at 0.67% usage on desktop pages. To us, this feels like a habit change we'll need to develop as an industry, while hopefully training new developers to use the new syntax.</p>
    <h3 id="css-z-index"><a href="#css-z-index" class="anchor-link">z-index</a></h3>
    <p>Vertical layering, or stacking, can be managed with <code>z-index</code> in CSS. We were curious how many different values folks use in their sites. The range of what <code>z-index</code> accepts is theoretically infinite, bounded only by a browser's variable size limitations. Are all those stack positions used? Let's see!</p>
    <figure id="css-fig-20">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig20.png">
        <img src="/static/images/2019/css/fig20.png" alt="Figure 20. Distribution of the number of distinct 'z-index' values per page." aria-labelledby="css-fig20-caption" aria-describedby="css-fig20-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1320871189&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig20-description" data-show-text="{{ show_description(20) }}" data-hide-text="{{ hide_description(20) }}">{{ show_description(20) }}</button>
      <div id="css-fig20-description" class="visually-hidden">Bar chart showing the distribution of distinct z-index values per page. For desktop pages the 10, 25, 50, 75, and 90th percentiles are: 1, 7, 16, 26, and 36 distinct z-index values. The desktop distribution is much higher than mobile, by as many as 16 distinct values at the 90th percentile.</div>
      <figcaption id="css-fig20-caption"><a href="#css-fig-20" class="anchor-link">Figure 20.</a> Distribution of the number of distinct <code>z-index</code> values per page.</figcaption>
    </figure>
    <h3 id="css-popular-z-index-values"><a href="#css-popular-z-index-values" class="anchor-link">Popular z-index values</a></h3>
    <p>From our work experience, any number of 9's seemed to be the most popular choice. Even though we taught ourselves to use the lowest number possible, that's not the communal norm. So what is then?! If folks need things on top, what are the most popular <code>z-index</code> numbers to pass in? Put your drink down; this one is funny enough you might lose it.</p>
    <figure id="css-fig-21">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig21.png">
        <img src="/static/images/2019/css/fig21.png" alt="Figure 21. Most frequently used 'z-index' values." aria-labelledby="css-fig21-caption" aria-describedby="css-fig21-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1169148473&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig21-description" data-show-text="{{ show_description(21) }}" data-hide-text="{{ hide_description(21) }}">{{ show_description(21) }}</button>
      <div id="css-fig21-description" class="visually-hidden">Scatterplot of all known z-index values and the number of times they're used, for both desktop and mobile. 1 and 2 are the most frequently used, but the rest of the popular values explode in orders of magnitude: 10, 100, 1,000, and so on all the way to numbers with hundreds of digits.</div>
      <figcaption id="css-fig21-caption"><a href="#css-fig-21" class="anchor-link">Figure 21.</a> Most frequently used <code>z-index</code> values.</figcaption>
    </figure>
    <figure id="css-fig-22">
      <div class="really-big-number">
        999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999 !important
      </div>
      <figcaption><a href="#css-fig-22" class="anchor-link">Figure 22.</a> The largest known <code>z-index</code> value.</figcaption>
    </figure>
    <h2 id="css-decoration"><a href="#css-decoration" class="anchor-link">Decoration</a></h2>
    <h3 id="css-filters"><a href="#css-filters" class="anchor-link">Filters</a></h3>
    <p>Filters are a fun and great way to modify the pixels the browser intends to draw to the screen. It's a post-processing effect that is done against a flat version of the element, node, or layer that it's being applied to. Photoshop made them easy to use, then Instagram made them accessible to the masses through bespoke, stylized combinations. They've been around since about 2012, there are 10 of them, and they can be combined to create unique effects.</p>
    <figure id="css-fig-23">
      <div class="big-number">78%</div>
      <figcaption><a href="#css-fig-23" class="anchor-link">Figure 23.</a> Percent of pages that include a stylesheet with the <code>filter</code> property.</figcaption>
    </figure>
    <p>We were excited to see that 78% of stylesheets contain the <code>filter</code> property! That number was also so high it seemed a little fishy, so we dug in and sought to explain the high number. Because let's be honest, filters are neat, but they don't make it into all of our applications and projects. Unless!</p>
    <p>
      Upon further investigation, we discovered <a href="https://fontawesome.com">FontAwesome<span class="fn">https://fontawesome.com</span></a
      >'s stylesheet comes with some <code>filter</code> usage, as well as a <a href="https://youtube.com">YouTube<span class="fn">https://youtube.com</span></a> embed. Therefore, we believe <code>filter</code> snuck in the back door by piggybacking onto a couple very popular stylesheets. We also believe that <code>-ms-filter</code> presence could have been included as well, contributing to the high percent of use.
    </p>
    <h3 id="css-blend-modes"><a href="#css-blend-modes" class="anchor-link">Blend modes</a></h3>
    <p>Blend modes are similar to filters in that they are a post-processing effect that are run against a flat version of their target elements, but are unique in that they are concerned with pixel convergence. Said another way, blend modes are how 2 pixels <em>should</em> impact each other when they overlap. Whichever element is on the top or the bottom will affect the way that the blend mode manipulates the pixels. There are 16 blend modes -- let's see which ones are the most popular.</p>
    <figure id="css-fig-24">
      <div class="big-number">8%</div>
      <figcaption><a href="#css-fig-24" class="anchor-link">Figure 24.</a> Percent of pages that include a stylesheet with the <code>*-blend-mode</code> property.</figcaption>
    </figure>
    <p>Overall, usage of blend modes is much lower than of filters, but is still enough to be considered moderately used.</p>
    <p>In a future edition of the Web Almanac, it would be great to drill down into blend mode usage to get an idea of the exact modes developers are using, like multiply, screen, color-burn, lighten, etc.</p>
    <h2 id="css-animation"><a href="#css-animation" class="anchor-link">Animation</a></h2>
    <h3 id="css-transitions"><a href="#css-transitions" class="anchor-link">Transitions</a></h3>
    <p>CSS has this awesome interpolation power that can be simply used by just writing a single rule on how to transition those values. If you're using CSS to manage states in your app, how often are you employing transitions to do the task? Let's query the web!</p>
    <figure id="css-fig-25">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig25.png">
        <img src="/static/images/2019/css/fig25.png" alt="Figure 25. Distribution of the number of transitions per page." aria-labelledby="css-fig25-caption" aria-describedby="css-fig25-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=419145172&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig25-description" data-show-text="{{ show_description(25) }}" data-hide-text="{{ hide_description(25) }}">{{ show_description(25) }}</button>
      <div id="css-fig25-description" class="visually-hidden">Bar chart showing the distribution of transitions per page. For desktop pages the 10, 25, 50, 75, and 90th percentiles are: 0, 2, 16, 49, and 118 transitions. The desktop distribution is much lower than mobile, by as many as 77 transitions at the 90th percentile.</div>
      <figcaption id="css-fig25-caption"><a href="#css-fig-25" class="anchor-link">Figure 25.</a> Distribution of the number of transitions per page.</figcaption>
    </figure>
    <p>That's pretty good! We did see <code>animate.css</code> as a popular library to include, which brings in a ton of transition animations, but it's still nice to see folks are considering transitioning their UIs.</p>
    <h3 id="css-keyframe-animations"><a href="#css-keyframe-animations" class="anchor-link">Keyframe animations</a></h3>
    <p>CSS keyframe animations are a great solution for your more complex animations or transitions. They allow you to be more explicit which provides higher control over the effects. They can be small, like one keyframe effect, or be large with many many keyframe effects composed into a robust animation. The median number of keyframe animations per page is much lower than CSS transitions.</p>
    <figure id="css-fig-26">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig26.png">
        <img src="/static/images/2019/css/fig26.png" alt="Figure 26. Distribution of the number of keyframes per page." aria-labelledby="css-fig26-caption" aria-describedby="css-fig26-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=11848448&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig26-description" data-show-text="{{ show_description(26) }}" data-hide-text="{{ hide_description(26) }}">{{ show_description(26) }}</button>
      <div id="css-fig26-description" class="visually-hidden">Bar chart showing the distribution of keyframes per page. For mobile pages the 10, 25, 50, 75, and 90th percentiles are: 0, 0, 3, 18, and 76 keyframes. The mobile distribution is slightly higher than desktop by 6 keyframes at the 75th and 90th percentiles.</div>
      <figcaption id="css-fig26-caption"><a href="#css-fig-26" class="anchor-link">Figure 26.</a> Distribution of the number of keyframes per page.</figcaption>
    </figure>
    <h2 id="css-media-queries"><a href="#css-media-queries" class="anchor-link">Media queries</a></h2>
    <p>Media queries let CSS hook into various system-level variables in order to adapt appropriately for the visiting user. Some of these queries could handle print styles, projector screen styles, and viewport/screen size. For a long time, media queries were primarily leveraged for their viewport knowledge. Designers and developers could adapt their layouts for small screens, large screens, and so forth. Later, the web started bringing more and more capabilities and queries, meaning media queries can now manage accessibility features on top of viewport features.</p>
    <p>A good place to start with Media Queries, is just about how many are used per page? How many different moments or contexts does the typical page feel they want to respond to?</p>
    <figure id="css-fig-27">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig27.png">
        <img src="/static/images/2019/css/fig27.png" alt="Figure 27. Distribution of the number of media queries per page." aria-labelledby="css-fig27-caption" aria-describedby="css-fig27-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1892465673&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig27-description" data-show-text="{{ show_description(27) }}" data-hide-text="{{ hide_description(27) }}">{{ show_description(27) }}</button>
      <div id="css-fig27-description" class="visually-hidden">Bar chart showing the distribution of media queries per page. For desktop pages the 10, 25, 50, 75, and 90th percentiles are: 0, 3, 14, 27, and 43 keyframes. The desktop distribution is similar to the mobile distribution.</div>
      <figcaption id="css-fig27-caption"><a href="#css-fig-27" class="anchor-link">Figure 27.</a> Distribution of the number of media queries per page.</figcaption>
    </figure>
    <h3 id="css-popular-media-query-breakpoint-sizes"><a href="#css-popular-media-query-breakpoint-sizes" class="anchor-link">Popular media query breakpoint sizes</a></h3>
    <p>For viewport media queries, any type of CSS unit can be passed into the query expression for evaluation. In earlier days, folks would pass <code>em</code> and <code>px</code> into the query, but more units were added over time, making us very curious about what types of sizes were commonly found across the web. We assume most media queries will follow popular device sizes, but instead of assuming, let's look at the data!</p>
    <figure id="css-fig-28">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig28.png">
        <img src="/static/images/2019/css/fig28.png" alt="Figure 28. Most frequently used snap points used in media queries." aria-labelledby="css-fig28-caption" aria-describedby="css-fig28-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1353707515&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig28-description" data-show-text="{{ show_description(28) }}" data-hide-text="{{ hide_description(28) }}">{{ show_description(28) }}</button>
      <div id="css-fig28-description" class="visually-hidden">Bar chart of the most popular media query snap points. 768px and 767px are the most popular at 23% and 16%, respectively. The list drops off quickly after that, with 992px used 6% of the time and 1200px used 4% of the time. Desktop and mobile have similar usage.</div>
      <figcaption id="css-fig28-caption"><a href="#css-fig-28" class="anchor-link">Figure 28.</a> Most frequently used snap points used in media queries.</figcaption>
    </figure>
    <p>Figure 28 above shows that part of our assumptions were correct: there's certainly a high amount of phone specific sizes in there, but there's also some that aren't. It's interesting also how it's very pixel dominant, with a few trickling entries using <code>em</code> beyond the scope of this chart.</p>
    <h3 id="css-portrait-vs-landscape-usage"><a href="#css-portrait-vs-landscape-usage" class="anchor-link">Portrait vs landscape usage</a></h3>
    <p>The most popular query value from the popular breakpoint sizes looks to be <code>768px</code>, which made us curious. Was this value primarily used to switch to a portrait layout, since it could be based on an assumption that <code>768px</code> represents the typical mobile portrait viewport? So we ran a follow up query to see the popularity of using the portrait and landscape modes:</p>
    <figure id="css-fig-29">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig29.png">
        <img src="/static/images/2019/css/fig29.png" alt="Figure 29. Adoption of media query orientation modes." aria-labelledby="css-fig29-caption" aria-describedby="css-fig29-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=295845630&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig29-description" data-show-text="{{ show_description(29) }}" data-hide-text="{{ hide_description(29) }}">{{ show_description(29) }}</button>
      <div id="css-fig29-description" class="visually-hidden">Bar chart showing the adoption of portrait and landscape orientation modes of media queries. 31% of pages specify landscape, 8% specify portrait, and 7% specify both. Adoption is the same for desktop and mobile pages.</div>
      <figcaption id="css-fig29-caption"><a href="#css-fig-29" class="anchor-link">Figure 29.</a> Adoption of media query orientation modes.</figcaption>
    </figure>
    <p>Interestingly, <code>portrait</code> isn't used very much, whereas <code>landscape</code> is used much more. We can only assume that <code>768px</code> has been reliable enough as the portrait layout case that it's reached for much less. We also assume that folks on a desktop computer, testing their work, can't trigger portrait to see their mobile layout as easily as they can just squish the browser. Hard to tell, but the data is fascinating.</p>
    <h3 id="css-most-popular-unit-types"><a href="#css-most-popular-unit-types" class="anchor-link">Most popular unit types</a></h3>
    <p>In the width and height media queries we've seen so far, pixels look like the dominant unit of choice for developers looking to adapt their UI to viewports. We wanted to exclusively query this though, and really take a look at the types of units folks use. Here's what we found.</p>
    <figure id="css-fig-30">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig30.png">
        <img src="/static/images/2019/css/fig30.png" alt="Figure 30. Adoption of units in media query snap points." aria-labelledby="css-fig30-caption" aria-describedby="css-fig30-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=305563768&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig30-description" data-show-text="{{ show_description(30) }}" data-hide-text="{{ hide_description(30) }}">{{ show_description(30) }}</button>
      <div id="css-fig30-description" class="visually-hidden">Bar chart showing 75% of media query snap points specifying pixels, 8% specifying ems, and 1% specifying rems.</div>
      <figcaption id="css-fig30-caption"><a href="#css-fig-30" class="anchor-link">Figure 30.</a> Adoption of units in media query snap points.</figcaption>
    </figure>
    <h3 id="css-min-width-vs-max-width">
      <a href="#css-min-width-vs-max-width" class="anchor-link"><code>min-width</code> vs <code>max-width</code></a>
    </h3>
    <p>When folks write a media query, are they typically checking for a viewport that's over or under a specific range, <em>or</em> both, checking if it's between a range of sizes? Let's ask the web!</p>
    <figure id="css-fig-31">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig31.png">
        <img src="/static/images/2019/css/fig31.png" alt="Figure 31. Adoption of properties used in media query snap points." aria-labelledby="css-fig31-caption" aria-describedby="css-fig31-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=2091525146&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig31-description" data-show-text="{{ show_description(31) }}" data-hide-text="{{ hide_description(31) }}">{{ show_description(31) }}</button>
      <div id="css-fig31-description" class="visually-hidden">Bar chart showing 74% of desktop pages using max-width, 70% using min-width, and 68% using both properties. Adoption is similar for mobile pages.</div>
      <figcaption id="css-fig31-caption"><a href="#css-fig-31" class="anchor-link">Figure 31.</a> Adoption of properties used in media query snap points.</figcaption>
    </figure>
    <p>No clear winners here; <code>max-width</code> and <code>min-width</code> are nearly equally used.</p>
    <h3 id="css-print-and-speech"><a href="#css-print-and-speech" class="anchor-link">Print and speech</a></h3>
    <p>Websites feel like digital paper, right? As users, it's generally known that you can just hit print from your browser and turn that digital content into physical content. A website isn't required to change itself for that use case, but it can if it wants to! Lesser known is the ability to adjust your website in the use case of it being read by a tool or robot. So just how often are these features taken advantage of?</p>
    <figure id="css-fig-32">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig32.png">
        <img src="/static/images/2019/css/fig32.png" alt="Figure 32. Adoption of the all, print, screen, and speech types of media queries." aria-labelledby="css-fig32-caption" aria-describedby="css-fig32-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=939890574&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig32-description" data-show-text="{{ show_description(32) }}" data-hide-text="{{ hide_description(32) }}">{{ show_description(32) }}</button>
      <div id="css-fig32-description" class="visually-hidden">Bar chart showing 35% of desktop pages using the "all" media query type, 46% using print, 72% using screen, and 0% using speech. Adoption is lower by about 5 percentage points for desktop compared to mobile.</div>
      <figcaption id="css-fig32-caption"><a href="#css-fig-32" class="anchor-link">Figure 32.</a> Adoption of the all, print, screen, and speech types of media queries.</figcaption>
    </figure>
    <h2 id="css-page-level-stats"><a href="#css-page-level-stats" class="anchor-link">Page-level stats</a></h2>
    <h3 id="css-stylesheets"><a href="#css-stylesheets" class="anchor-link">Stylesheets</a></h3>
    <p>How many stylesheets do you reference from your home page? How many from your apps? Do you serve more or less to mobile vs desktop? Here's a chart of everyone else!</p>
    <figure id="css-fig-33">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig33.png">
        <img src="/static/images/2019/css/fig33.png" alt="Figure 33. Distribution of the number of stylesheets loaded per page." aria-labelledby="css-fig33-caption" aria-describedby="css-fig33-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1377313548&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig33-description" data-show-text="{{ show_description(33) }}" data-hide-text="{{ hide_description(33) }}">{{ show_description(33) }}</button>
      <div id="css-fig33-description" class="visually-hidden">Distribution of the number of stylesheets loaded per page. Desktop and mobile have identical distributions with 10, 25, 50, 75, and 90th percentiles: 1, 3, 6, 12, and 20 stylesheets per page.</div>
      <figcaption id="css-fig33-caption"><a href="#css-fig-33" class="anchor-link">Figure 33.</a> Distribution of the number of stylesheets loaded per page.</figcaption>
    </figure>
    <h3 id="css-stylesheet-names"><a href="#css-stylesheet-names" class="anchor-link">Stylesheet names</a></h3>
    <p>What do you name your stylesheets? Have you been consistent throughout your career? Have you slowly converged or consistently diverged? This chart shows a small glimpse into library popularity, but also a large glimpse into popular names of CSS files.</p>
    <figure id="css-fig-34">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Stylesheet name</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>style.css</td>
                <td class="numeric">2.43%</td>
                <td class="numeric">2.55%</td>
              </tr>
              <tr>
                <td>font-awesome.min.css</td>
                <td class="numeric">1.86%</td>
                <td class="numeric">1.92%</td>
              </tr>
              <tr>
                <td>bootstrap.min.css</td>
                <td class="numeric">1.09%</td>
                <td class="numeric">1.11%</td>
              </tr>
              <tr>
                <td>BfWyFJ2Rl5s.css</td>
                <td class="numeric">0.67%</td>
                <td class="numeric">0.66%</td>
              </tr>
              <tr>
                <td>style.min.css?ver=5.2.2</td>
                <td class="numeric">0.64%</td>
                <td class="numeric">0.67%</td>
              </tr>
              <tr>
                <td>styles.css</td>
                <td class="numeric">0.54%</td>
                <td class="numeric">0.55%</td>
              </tr>
              <tr>
                <td>style.css?ver=5.2.2</td>
                <td class="numeric">0.41%</td>
                <td class="numeric">0.43%</td>
              </tr>
              <tr>
                <td>main.css</td>
                <td class="numeric">0.43%</td>
                <td class="numeric">0.39%</td>
              </tr>
              <tr>
                <td>bootstrap.css</td>
                <td class="numeric">0.40%</td>
                <td class="numeric">0.42%</td>
              </tr>
              <tr>
                <td>font-awesome.css</td>
                <td class="numeric">0.37%</td>
                <td class="numeric">0.38%</td>
              </tr>
              <tr>
                <td>style.min.css</td>
                <td class="numeric">0.37%</td>
                <td class="numeric">0.37%</td>
              </tr>
              <tr>
                <td>styles__ltr.css</td>
                <td class="numeric">0.38%</td>
                <td class="numeric">0.35%</td>
              </tr>
              <tr>
                <td>default.css</td>
                <td class="numeric">0.36%</td>
                <td class="numeric">0.36%</td>
              </tr>
              <tr>
                <td>reset.css</td>
                <td class="numeric">0.33%</td>
                <td class="numeric">0.37%</td>
              </tr>
              <tr>
                <td>styles.css?ver=5.1.3</td>
                <td class="numeric">0.32%</td>
                <td class="numeric">0.35%</td>
              </tr>
              <tr>
                <td>custom.css</td>
                <td class="numeric">0.32%</td>
                <td class="numeric">0.33%</td>
              </tr>
              <tr>
                <td>print.css</td>
                <td class="numeric">0.32%</td>
                <td class="numeric">0.28%</td>
              </tr>
              <tr>
                <td>responsive.css</td>
                <td class="numeric">0.28%</td>
                <td class="numeric">0.31%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#css-fig-34" class="anchor-link">Figure 34.</a> Most frequently used stylesheet names.</figcaption>
    </figure>
    <p>Look at all those creative file names! style, styles, main, default, all. One stood out though, do you see it? <code>BfWyFJ2Rl5s.css</code> takes the number four spot for most popular. We went researching it a bit and our best guess is that it's related to Facebook "like" buttons. Do you know what that file is? Leave a comment, because we'd love to hear the story.</p>
    <h3 id="css-stylesheet-size"><a href="#css-stylesheet-size" class="anchor-link">Stylesheet size</a></h3>
    <p>How big are these stylesheets? Is our CSS size something to worry about? Judging by this data, our CSS is not a main offender for page bloat.</p>
    <figure id="css-fig-35">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig35.png">
        <img src="/static/images/2019/css/fig35.png" alt="Figure 35. Distribution of the number of stylesheet bytes (KB) loaded per page." aria-labelledby="css-fig35-caption" aria-describedby="css-fig35-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=2132635319&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig35-description" data-show-text="{{ show_description(35) }}" data-hide-text="{{ hide_description(35) }}">{{ show_description(35) }}</button>
      <div id="css-fig35-description" class="visually-hidden">Distribution of the number of stylesheet bytes loaded per page. The desktop page's 10, 25, 50, 75, and 90th percentiles are: 8, 26, 62, 129, and 240 KB. The desktop distribution is slightly higher than the mobile distribution by 5 to 10 KB.</div>
      <figcaption id="css-fig35-caption"><a href="#css-fig-35" class="anchor-link">Figure 35.</a> Distribution of the number of stylesheet bytes (KB) loaded per page.</figcaption>
    </figure>
    <p>See the <a href="#page-weight">Page Weight</a> chapter for a more in-depth look at the number of bytes websites are loading for each content type.</p>
    <h3 id="css-libraries"><a href="#css-libraries" class="anchor-link">Libraries</a></h3>
    <p>It's common, popular, convenient, and powerful to reach for a CSS library to kick start a new project. While you may not be one to reach for a library, we've queried the web in 2019 to see which are leading the pack. If the results astound you, like they did us, I think it's an interesting clue to just how small of a developer bubble we can live in. Things can feel massively popular, but when the web is inquired, reality is a bit different.</p>
    <figure id="css-fig-36">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Library</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Bootstrap</td>
                <td class="numeric">27.8%</td>
                <td class="numeric">26.9%</td>
              </tr>
              <tr>
                <td>animate.css</td>
                <td class="numeric">6.1%</td>
                <td class="numeric">6.4%</td>
              </tr>
              <tr>
                <td>ZURB Foundation</td>
                <td class="numeric">2.5%</td>
                <td class="numeric">2.6%</td>
              </tr>
              <tr>
                <td>UIKit</td>
                <td class="numeric">0.5%</td>
                <td class="numeric">0.6%</td>
              </tr>
              <tr>
                <td>Material Design Lite</td>
                <td class="numeric">0.3%</td>
                <td class="numeric">0.3%</td>
              </tr>
              <tr>
                <td>Materialize CSS</td>
                <td class="numeric">0.2%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td>Pure CSS</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.1%</td>
              </tr>
              <tr>
                <td>Angular Material</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.1%</td>
              </tr>
              <tr>
                <td>Semantic-ui</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.1%</td>
              </tr>
              <tr>
                <td>Bulma</td>
                <td class="numeric">0.0%</td>
                <td class="numeric">0.0%</td>
              </tr>
              <tr>
                <td>Ant Design</td>
                <td class="numeric">0.0%</td>
                <td class="numeric">0.0%</td>
              </tr>
              <tr>
                <td>tailwindcss</td>
                <td class="numeric">0.0%</td>
                <td class="numeric">0.0%</td>
              </tr>
              <tr>
                <td>Milligram</td>
                <td class="numeric">0.0%</td>
                <td class="numeric">0.0%</td>
              </tr>
              <tr>
                <td>Clarity</td>
                <td class="numeric">0.0%</td>
                <td class="numeric">0.0%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#css-fig-36" class="anchor-link">Figure 36.</a> Percent of pages that include a given CSS library.</figcaption>
    </figure>
    <p>
      This chart suggests that <a href="https://getbootstrap.com/">Bootstrap<span class="fn">https://getbootstrap.com/</span></a> is a valuable library to know to assist with getting a job. Look at all the opportunity there is to help! It's also worth noting that this is a positive signal chart only: the math doesn't add up to 100% because not all sites are using a CSS framework. A little bit over half of all sites <em>are not</em> using a known CSS framework. Very interesting, no?!
    </p>
    <h3 id="css-reset-utilities"><a href="#css-reset-utilities" class="anchor-link">Reset utilities</a></h3>
    <p>CSS reset utilities intend to normalize or create a baseline for native web elements. In case you didn't know, each browser serves its own stylesheet for all HTML elements, and each browser gets to make their own unique decisions about how those elements look or behave. Reset utilities have looked at these files, found their common ground (or not), and ironed out any differences so you as a developer can style in one browser and have reasonable confidence it will look the same in another.</p>
    <p>So let's take a peek at how many sites are using one! Their existence seems quite reasonable, so how many folks agree with their tactics and use them in their sites?</p>
    <figure id="css-fig-37">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig37.png">
        <img src="/static/images/2019/css/fig37.png" alt="Figure 37. Adoption of CSS reset utilities." aria-labelledby="css-fig37-caption" aria-describedby="css-fig37-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1318910215&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig37-description" data-show-text="{{ show_description(37) }}" data-hide-text="{{ hide_description(37) }}">{{ show_description(37) }}</button>
      <div id="css-fig37-description" class="visually-hidden">Bar chart showing the adoption of three CSS reset utilities: Normalize.css (33%), Reset CSS (3%), and Pure CSS (0%). There is no difference in adoption across desktop and mobile pages.</div>
      <figcaption id="css-fig37-caption"><a href="#css-fig-37" class="anchor-link">Figure 37.</a> Adoption of CSS reset utilities.</figcaption>
    </figure>
    <p>
      Turns out that about one-third of the web is using <a href="https://necolas.github.io/normalize.css"><code>normalize.css</code><span class="fn">https://necolas.github.io/normalize.css</span></a
      >, which could be considered a more gentle approach to the task then a reset is. We looked a little deeper, and it turns out that Bootstrap includes <code>normalize.css</code>, which likely accounts for a massive amount of its usage. It's worth noting as well that <code>normalize.css</code> has more adoption than Bootstrap, so there are plenty of folks using it on its own.
    </p>
    <h3 id="css-supports-and-import">
      <a href="#css-supports-and-import" class="anchor-link"><code>@supports</code> and <code>@import</code></a>
    </h3>
    <p>CSS <code>@supports</code> is a way for the browser to check whether a particular property-value combination is parsed as valid, and then apply styles if the check returns as true.</p>
    <figure id="css-fig-38">
      <a href="https://almanac.httparchive.org/static/images/2019/css/fig38.png">
        <img src="/static/images/2019/css/fig38.png" alt="Figure 38. Popularity of CSS 'at' rules" aria-labelledby="css-fig38-caption" aria-describedby="css-fig38-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQO5CabwLwQ5Lj1_9bbEFnFM1qEqCorymaBHrcaNiMSJ7sYDKHUI5iish5VAS-SxN447UTW-1-5-OjE/pubchart?oid=1739611283&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig38-description" data-show-text="{{ show_description(38) }}" data-hide-text="{{ hide_description(38) }}">{{ show_description(38) }}</button>
      <div id="css-fig38-description" class="visually-hidden">Bar chart showing the popularity of @import and @supports "at" rules. On desktop, @import is used on 28% of pages and @supports is used on 31%. For mobile @import is used on 26% of pages and @supports is used on 29%.</div>
      <figcaption id="css-fig38-caption"><a href="#css-fig-38" class="anchor-link">Figure 38.</a> Popularity of CSS "at" rules.</figcaption>
    </figure>
    <p>Considering <code>@supports</code> was implemented across most browsers in 2013, it's not too surprising to see a high amount of usage and adoption. We're impressed at the mindfulness of developers here. This is considerate coding! 30% of all websites are checking for some display related support before using it.</p>
    <p>An interesting follow up to this is that there's more usage of <code>@supports</code> than <code>@imports</code>! We did not expect that! <code>@import</code> has been in browsers since 1994.</p>
    <h2 id="css-conclusion"><a href="#css-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>There is so much more here to datamine! Many of the results surprised us, and we can only hope that they've surprised you as well. This surprising data set made the summarizing very fun, and left us with lots of clues and trails to investigate if we want to hunt down the reasons <em>why</em> some of the results are the way they are.</p>
    <p>Which results did you find the most alarming? Which results make you head to your codebase for a quick query?</p>
    <p>
      We felt the biggest takeaway from these results is that custom properties offer the most bang for your buck in terms of performance, DRYness, and scalability of your stylesheets. We look forward to scrubbing the internet's stylesheets again, hunting for new datums and provocative chart treats. Reach out to <a href="https://twitter.com/una">@una<span class="fn">https://twitter.com/una</span></a> or <a href="https://twitter.com/argyleink">@argyleink<span class="fn">https://twitter.com/argyleink</span></a> in the comments with your queries, questions, and assertions. We'd love to hear them!
    </p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"I","chapter_number":3,"title":"Markup","description":"Markup chapter of the 2019 Web Almanac covering elements used, custom elements, value, products, and common use cases.","authors":["bkardell"],"reviewers":["zcorpan","tomhodgins","matthewp"],"translators":null,"discuss":"1758","results":"https://docs.google.com/spreadsheets/d/1WnDKLar_0Btlt9UgT53Giy2229bpV4IM2D_v6OM_WzA/","queries":"03_Markup","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-06-30T00:00:00.000Z","chapter":"markup"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="markup-introduction"><a href="#markup-introduction" class="anchor-link">Introduction</a></h2>
    <p>
      In 2005, Ian "Hixie" Hickson posted <a href="https://web.archive.org/web/20060203035414/http://code.google.com/webstats/index.html">some analysis of markup data<span class="fn">https://web.archive.org/web/20060203035414/http://code.google.com/webstats/index.html</span></a> building upon various previous work. Much of this work aimed to investigate class names to see if there were common informal semantics that were being adopted by developers which it might make sense to standardize upon. Some of this research helped inform new elements in HTML5.
    </p>
    <p>
      14 years later, it's time to take a fresh look. Since then, we've also had the introduction of <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements">Custom Elements<span class="fn">https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements</span></a> and the <a href="https://extensiblewebmanifesto.org/">Extensible Web Manifesto<span class="fn">https://extensiblewebmanifesto.org/</span></a> encouraging that we find better ways to pave the cowpaths by allowing developers to explore the space of elements themselves and allow standards bodies to <a href="https://bkardell.com/blog/Dropping-The-F-Bomb-On-Standards.html">act more like dictionary editors<span class="fn">https://bkardell.com/blog/Dropping-The-F-Bomb-On-Standards.html</span></a
      >. Unlike CSS class names, which might be used for anything, we can be far more certain that authors who used a non-standard <em>element</em> really intended this to be an element.
    </p>
    <p>
      As of July 2019, the HTTP Archive has begun collecting all used <em>element</em> names in the DOM for about 4.4 million desktop home pages, and about 5.3 million mobile home pages which we can now begin to research and dissect. <em>(Learn more about our <a href="#methodology">Methodology</a>.)</em>
    </p>
    <p>This crawl encountered <em>over 5,000 distinct non-standard element names</em> in these pages, so we capped the total distinct number of elements that we count to the 'top' (explained below) 5,048.</p>
    <h2 id="markup-methodology"><a href="#markup-methodology" class="anchor-link">Methodology</a></h2>
    <p>Names of elements on each page were collected from the DOM itself, after the initial run of JavaScript.</p>
    <p>
      Looking at a raw frequency count isn't especially helpful, even for standard elements: About 25% of all elements encountered are <code>&lt;div&gt;</code>. About 17% are <code>&lt;a&gt;</code>, about 11% are <code>&lt;span&gt;</code> -- and those are the only elements that account for more than 10% of occurrences. Languages are <a href="https://www.youtube.com/watch?v=fCn8zs912OE">generally like this<span class="fn">https://www.youtube.com/watch?v=fCn8zs912OE</span></a
      >; a small number of terms are astoundingly used by comparison. Further, when we start looking at non-standard elements for uptake, this would be very misleading as one site could use a certain element a thousand times and thus make it look artificially very popular.
    </p>
    <p>Instead, as in Hixie's original study, what we will look at is how many sites include each element at least once in their homepage.</p>
    <p class="note">Note: This is, itself, not without some potential biases. Popular products can be used by several sites, which introduce non-standard markup, even "invisibly" to individual authors. Thus, care must be taken to acknowledge that usage doesn't necessarily imply direct author knowledge and conscious adoption as much as it does the servicing of a common need, in a common way. During our research, we found several examples of this, some we will call out.</p>
    <h2 id="markup-top-elements-and-general-info"><a href="#markup-top-elements-and-general-info" class="anchor-link">Top elements and general info</a></h2>
    <p>In 2005, Hixie's survey listed the top few most commonly used elements on pages. The top 3 were <code>html</code>, <code>head</code> and <code>body</code> which he noted as interesting because they are optional and created by the parser if omitted. Given that we use the post-parsed DOM, they'll show up universally in our data. Thus, we'll begin with the 4th most used element. Below is a comparison of the data from then to now (I've included the frequency comparison here as well just for fun).</p>
    <figure id="markup-fig1" data-markdown="1">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>2005 (per site)</th>
                <th>2019 (per site)</th>
                <th>2019 (frequency)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>title</td>
                <td>title</td>
                <td>div</td>
              </tr>
              <tr>
                <td>a</td>
                <td>meta</td>
                <td>a</td>
              </tr>
              <tr>
                <td>img</td>
                <td>a</td>
                <td>span</td>
              </tr>
              <tr>
                <td>meta</td>
                <td>div</td>
                <td>li</td>
              </tr>
              <tr>
                <td>br</td>
                <td>link</td>
                <td>img</td>
              </tr>
              <tr>
                <td>table</td>
                <td>script</td>
                <td>script</td>
              </tr>
              <tr>
                <td>td</td>
                <td>img</td>
                <td>p</td>
              </tr>
              <tr>
                <td>tr</td>
                <td>span</td>
                <td>option</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#markup-fig1" class="anchor-link">Figure 1.</a> Comparison of the top elements from 2005 to 2019.</figcaption>
    </figure>
    <h3 id="markup-elements-per-page"><a href="#markup-elements-per-page" class="anchor-link">Elements per page</a></h3>
    <figure id="markup-fig2">
      <img src="/static/images/2019/markup/hixie_elements_per_page.png" alt="Distribution of Hixie's 2005 analysis of element frequencies" aria-labelledby="markup-fig2-caption" aria-describedby="markup-fig2-description" width="600" height="318" />
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="markup-fig2-description" class="visually-hidden">Graph showing a decreasing distribution of relative frequency as the number of elements increases</div>
      <figcaption id="markup-fig2-caption"><a href="#markup-fig2" class="anchor-link">Figure 2.</a> Distribution of Hixie's 2005 analysis of element frequencies.</figcaption>
    </figure>
    <figure id="markup-fig3">
      <a href="https://almanac.httparchive.org/static/images/2019/markup/fig3.png">
        <img src="/static/images/2019/markup/fig3.png" alt="Figure 3. Element frequencies as of 2019" aria-labelledby="markup-fig3-caption" aria-describedby="markup-fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTbHgqcSepZye6DrCTpifFAUYxKT1hEO56585awyMips8oiPMLYu20GETuIE8mALkm814ObJyktEe2P/pubchart?oid=2141583176&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="markup-fig3-description" class="visually-hidden">Graph showing about 2,500 pages start with approximately 30 elements, this increases peaking at 6,876 pages have 283 elements, before trailing fairly linearly to 327 pages having 2,000 elements.</div>
      <figcaption id="markup-fig3-caption"><a href="#markup-fig3" class="anchor-link">Figure 3.</a> Element frequencies as of 2019.</figcaption>
    </figure>
    <p>Comparing the latest data in Figure 3 to that of Hixie's report from 2005 in Figure 2, we can see that the average size of DOM trees has gotten bigger.</p>
    <figure id="markup-fig4">
      <img src="/static/images/2019/markup/hixie_element_types_per_page.png" alt="Histogram of Hixie's 2005 analysis of element types per page" aria-labelledby="markup-fig4-caption" aria-describedby="markup-fig4-description" width="600" height="320" />
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="markup-fig4-description" class="visually-hidden">Graph that relative frequency is a bell curve around the 19 elements point.</div>
      <figcaption id="markup-fig4-caption"><a href="#markup-fig4" class="anchor-link">Figure 4.</a> Histogram of Hixie's 2005 analysis of element types per page.</figcaption>
    </figure>
    <figure id="markup-fig5">
      <a href="https://almanac.httparchive.org/static/images/2019/markup/fig5.png">
        <img src="/static/images/2019/markup/fig5.png" alt="Figure 5. Histogram of element types per page as of 2019." aria-labelledby="markup-fig5-caption" aria-describedby="markup-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTbHgqcSepZye6DrCTpifFAUYxKT1hEO56585awyMips8oiPMLYu20GETuIE8mALkm814ObJyktEe2P/pubchart?oid=1500675289&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="markup-fig5-description" class="visually-hidden">Graph showing the average number of elements is a bell curve around the 30 elements marked, as used by 308,168 thousand sites.</div>
      <figcaption id="markup-fig5-caption"><a href="#markup-fig5" class="anchor-link">Figure 5.</a> Histogram of element types per page as of 2019.</figcaption>
    </figure>
    <p>We can see that both the average number of types of elements per page has increased, as well as the maximum numbers of unique elements that we encounter.</p>
    <h2 id="markup-custom-elements"><a href="#markup-custom-elements" class="anchor-link">Custom elements</a></h2>
    <p>Most of the elements we recorded are custom (as in simply 'not standard'), but discussing which elements are and are not custom can get a little challenging. Written down in some spec or proposal somewhere are, actually, quite a few elements. For purposes here, we considered 244 elements as standard (though, some of them are deprecated or unsupported):</p>
    <ul>
      <li>145 Elements from HTML</li>
      <li>68 Elements from SVG</li>
      <li>31 Elements from MathML</li>
    </ul>
    <p>In practice, we encountered only 214 of these:</p>
    <ul>
      <li>137 from HTML</li>
      <li>54 from SVG</li>
      <li>23 from MathML</li>
    </ul>
    <p>In the desktop dataset we collected data for the top 4,834 non-standard elements that we encountered. Of these:</p>
    <ul>
      <li>155 (3%) are identifiable as very probable markup or escaping errors (they contain characters in the parsed tag name which imply that the markup is broken)</li>
      <li>341 (7%) use XML-style colon namespacing (though, as HTML, they don't use actual XML namespaces)</li>
      <li>3,207 (66%) are valid custom element names</li>
      <li>1,211 (25%) are in the global namespace (non-standard, having neither dash, nor colon)</li>
      <li>216 of these we have flagged as <em>possible</em> typos as they are longer than 2 characters and have a Levenshtein distance of 1 from some standard element name like <code>&lt;cript&gt;</code>,<code>&lt;spsn&gt;</code> or <code>&lt;artice&gt;</code>. Some of these (like <code>&lt;jdiv&gt;</code>), however, are certainly intentional.</li>
    </ul>
    <p>Additionally, 15% of desktop pages and 16% of mobile pages contain deprecated elements.</p>
    <p class="note">Note: A lot of this is very likely due to the use of products rather than individual authors continuing to manually create this markup.</p>
    <figure id="markup-fig6">
      <a href="https://almanac.httparchive.org/static/images/2019/markup/fig6.png">
        <img src="/static/images/2019/markup/fig6.png" alt="Figure 6. Most frequently used deprecated elements." aria-labelledby="markup-fig6-caption" aria-describedby="markup-fig6-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTbHgqcSepZye6DrCTpifFAUYxKT1hEO56585awyMips8oiPMLYu20GETuIE8mALkm814ObJyktEe2P/pubchart?oid=1304237557&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="markup-fig6-description" class="visually-hidden">Bar chart showing 'center' in use by 8.31% of desktop sites (7.96% of mobile), 'font' in use by 8.01% of desktop sites (7.38% of mobile), 'marquee' in use by 1.07% of desktop sites (1.20% of mobile), 'nobr' in use by 0.71% of desktop sites (0.55% of mobile), 'big' in use by 0.53% of desktop sites (0.47% of mobile), 'frameset' in use by 0.39% of desktop sites (0.35% of mobile), 'frame' in use by 0.39% of desktop sites (0.35% of mobile), 'strike' in use by 0.33% of desktop sites (0.27% of mobile), and 'noframes' in use by 0.25% of desktop sites (0.27% of mobile).</div>
      <figcaption id="markup-fig6-caption"><a href="#markup-fig6" class="anchor-link">Figure 6.</a> Most frequently used deprecated elements.</figcaption>
    </figure>
    <p>Figure 6 above shows the top 10 most frequently used deprecated elements. Most of these can seem like very small numbers, but perspective matters.</p>
    <h2 id="markup-perspective-on-value-and-usage"><a href="#markup-perspective-on-value-and-usage" class="anchor-link">Perspective on value and usage</a></h2>
    <p>In order to discuss numbers about the use of elements (standard, deprecated or custom), we first need to establish some perspective.</p>
    <figure id="markup-fig7">
      <a href="https://almanac.httparchive.org/static/images/2019/markup/fig7_full.png">
        <img src="/static/images/2019/markup/fig7.png" alt="Figure 7. Top 150 elements." aria-labelledby="markup-fig7-caption" aria-describedby="markup-fig7-description" width="600" height="778" data-width="600" data-height="778" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTbHgqcSepZye6DrCTpifFAUYxKT1hEO56585awyMips8oiPMLYu20GETuIE8mALkm814ObJyktEe2P/pubchart?oid=1694360298&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="markup-fig7-description" class="visually-hidden">Bar chart showing a decreasing used of elements in descending order: html, head, body, title at above 99% usage, meta, a, div above 98% usage, link, script, img, span above 90% usage, ul, li , p, style, input, br, form above 70% usage, h2, h1, iframe, h3, button, footer, header, nav above 50% usage and other less well-known tags trailing down from below 50% to almost 0% usage.</div>
      <figcaption id="markup-fig7-caption"><a href="#markup-fig7" class="anchor-link">Figure 7.</a> Top 150 elements (<a href="https://almanac.httparchive.org/static/images/2019/markup/fig7_full.png">full detail</a>).</figcaption>
    </figure>
    <p>In Figure 7 above, the top 150 element names, counting the number of pages where they appear, are shown. Note how quickly use drops off.</p>
    <p>Only 11 elements are used on more than 90% of pages:</p>
    <ul>
      <li><code>&lt;html&gt;</code></li>
      <li><code>&lt;head&gt;</code></li>
      <li><code>&lt;body&gt;</code></li>
      <li><code>&lt;title&gt;</code></li>
      <li><code>&lt;meta&gt;</code></li>
      <li><code>&lt;a&gt;</code></li>
      <li><code>&lt;div&gt;</code></li>
      <li><code>&lt;link&gt;</code></li>
      <li><code>&lt;script&gt;</code></li>
      <li><code>&lt;img&gt;</code></li>
      <li><code>&lt;span&gt;</code></li>
    </ul>
    <p>There are only 15 other elements that occur on more than 50% of pages:</p>
    <ul>
      <li><code>&lt;ul&gt;</code></li>
      <li><code>&lt;li&gt;</code></li>
      <li><code>&lt;p&gt;</code></li>
      <li><code>&lt;style&gt;</code></li>
      <li><code>&lt;input&gt;</code></li>
      <li><code>&lt;br&gt;</code></li>
      <li><code>&lt;form&gt;</code></li>
      <li><code>&lt;h2&gt;</code></li>
      <li><code>&lt;h1&gt;</code></li>
      <li><code>&lt;iframe&gt;</code></li>
      <li><code>&lt;h3&gt;</code></li>
      <li><code>&lt;button&gt;</code></li>
      <li><code>&lt;footer&gt;</code></li>
      <li><code>&lt;header&gt;</code></li>
      <li><code>&lt;nav&gt;</code></li>
    </ul>
    <p>And there are only 40 other elements&nbsp;that occur on more than 5% of pages.</p>
    <p>Even <code>&lt;video&gt;</code>, for example, doesn't make that cut. It appears on only 4% of desktop pages in the dataset (3% on mobile). While these numbers sound very low, 4% is actually <em>quite</em> popular by comparison. In fact, only 98 elements occur on more than 1% of pages.</p>
    <p>It's interesting, then, to see what the distribution of these elements looks like and which ones have more than 1% use.</p>
    <figure id="markup-fig8">
      <a href="https://rainy-periwinkle.glitch.me/scatter/html">
        <img src="/static/images/2019/markup/element_categories.png" alt="Figure 8. Element popularity categorized by standardization" aria-labelledby="markup-fig8-caption" width="600" height="1065" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="markup-fig8-description" class="visually-hidden">Scatter graph showing HTML, SVG, and Math ML use relatively few tags while non-standard elements (split into "in global ns", "dasherized" and "colon") are much more spread out.</div>
      <figcaption id="markup-fig8-caption"><a href="#markup-fig8" class="anchor-link">Figure 8.</a> Element popularity categorized by standardization.</figcaption>
    </figure>
    <p>Figure 8 shows the rank of each element and which category they fall into. I've separated the data points into discrete sets simply so that they can be viewed (otherwise there just aren't enough pixels to capture all that data), but they represent a single 'line' of popularity; the bottom-most being the most common, the top-most being the least common. The arrow points to the end of elements that appear in more than 1% of the pages.</p>
    <p>You can observe two things here. First, the set of elements that have more than 1% use are not exclusively HTML. In fact, <em>27 of the most popular 100 elements aren't even HTML</em> - they are SVG! And there are <em>non-standard tags at or very near that cutoff too</em>! Second, note that a whole lot of HTML elements are used by less than 1% of pages.</p>
    <p>
      So, are all of those elements used by less than 1% of pages "useless"? Definitely not. This is why establishing perspective matters. There are around <a href="https://www.websitehostingrating.com/internet-statistics-facts/">two billion web sites on the web<span class="fn">https://www.websitehostingrating.com/internet-statistics-facts/</span></a
      >. If something appears on 0.1% of all websites in our dataset, we can extrapolate that this represents perhaps <em>two million web sites</em> in the whole web. Even 0.01% extrapolates to <em>two hundred thousand sites</em>. This is also why removing support for elements, even very old ones which we think aren't great ideas, is a very rare occurrence. Breaking hundreds of thousands or millions of sites just isn't a thing that browser vendors can do lightly.
    </p>
    <p>Many elements, even the native ones, appear on fewer than 1% of pages and are still very important and successful. <code>&lt;code&gt;</code>, for example, is an element that I both use and encounter a lot. It's definitely useful and important, and yet it is used on only 0.57% of these pages. Part of this is skewed based on what we are measuring; home pages are generally <em>less likely</em> to include certain kinds of things (like <code>&lt;code&gt;</code> for example). Home pages serve a less general purpose than, for example, headings, paragraphs, links and lists. However, the data is generally useful.</p>
    <p>We also collected information about which pages contained an author-defined (not native) <code>.shadowRoot</code>. About 0.22% of desktop pages and 0.15% of mobile pages had a shadow root. This might not sound like a lot, but it is roughly 6.5k sites in the mobile dataset and 10k sites on the desktop and is more than several HTML elements. <code>&lt;summary&gt;</code> for example, has about equivalent use on the desktop and it is the 146th most popular element. <code>&lt;datalist&gt;</code> appears on 0.04% of homepages and it's the 201st most popular element.</p>
    <p>In fact, over 15% of elements we're counting as defined by HTML are outside the top 200 in the desktop dataset . <code>&lt;meter&gt;</code> is the least popular "HTML5 era" element, which we can define as 2004-2011, before HTML moved to a Living Standard model. It is around the 1,000th most popular element. <code>&lt;slot&gt;</code>, the most recently introduced element (April 2016), is only around the 1,400th most popular element.</p>
    <h2 id="markup-lots-of-data-real-dom-on-the-real-web"><a href="#markup-lots-of-data-real-dom-on-the-real-web" class="anchor-link">Lots of data: real DOM on the real web</a></h2>
    <p>With this perspective in mind about what use of native/standard features looks like in the dataset, let's talk about the non-standard stuff.</p>
    <p>You might expect that many of the elements we measured are used only on a single web page, but in fact all of the 5,048 elements appear on more than one page. The fewest pages an element in our dataset appears on is 15. About a fifth of them occur on more than 100 pages. About 7% occur on more than 1,000 pages.</p>
    <p>
      To help analyze the data, I hacked together a <a href="https://rainy-periwinkle.glitch.me">little tool with Glitch<span class="fn">https://rainy-periwinkle.glitch.me</span></a
      >. You can use this tool yourself, and please share a permalink back with the <a href="https://twitter.com/HTTPArchive">@HTTPArchive<span class="fn">https://twitter.com/HTTPArchive</span></a> along with your observations. (Tommy Hodgins has also built a similar <a href="https://github.com/tomhodgins/hade">CLI tool<span class="fn">https://github.com/tomhodgins/hade</span></a> which you can use to explore.)
    </p>
    <p>Let's look at some data.</p>
    <h3 id="markup-products-and-libraries-and-their-custom-markup"><a href="#markup-products-and-libraries-and-their-custom-markup" class="anchor-link">Products (and libraries) and their custom markup</a></h3>
    <p>
      For several non-standard elements, their prevalence may have more to do with their inclusion in popular third-party tools than first-party adoption. For example, the <code>&lt;fb:like&gt;</code> element is found on 0.3% of pages not because site owners are explicitly writing it out but because they include the Facebook widget. Many of the elements <a href="https://web.archive.org/web/20060203031245/http://code.google.com/webstats/2005-12/editors.html">Hixie mentioned 14 years ago<span class="fn">https://web.archive.org/web/20060203031245/http://code.google.com/webstats/2005-12/editors.html</span></a> seem to have dwindled, but others are still pretty huge:
    </p>
    <ul>
      <li>
        Popular elements created by <a href="https://en.wikipedia.org/wiki/Claris_Home_Page">Claris Home Page<span class="fn">https://en.wikipedia.org/wiki/Claris_Home_Page</span></a> (whose last stable release was 21 years ago) <em>still</em> appear on over 100 pages. <a href="https://rainy-periwinkle.glitch.me/permalink/28b0b7abb3980af793a2f63b484e7815365b91c04ae625dd4170389cc1ab0a52.html"><code>&lt;x-claris-window&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/28b0b7abb3980af793a2f63b484e7815365b91c04ae625dd4170389cc1ab0a52.html</span></a
        >, for example, appears on 130 pages.
      </li>
      <li>
        Some of the <code>&lt;actinic:*&gt;</code> elements from British ecommerce provider <a href="https://www.oxatis.co.uk">Oxatis<span class="fn">https://www.oxatis.co.uk</span></a> appear on even more pages. For example, <a href="https://rainy-periwinkle.glitch.me/permalink/30dfca0fde9fad9b2ec58b12cb2b0271a272fb5c8970cd40e316adc728a09d19.html"><code>&lt;actinic:basehref&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/30dfca0fde9fad9b2ec58b12cb2b0271a272fb5c8970cd40e316adc728a09d19.html</span></a> still shows up on 154 pages in the desktop data.
      </li>
      <li>
        Macromedia's elements seem to have largely disappeared. Only one element, <a href="https://rainy-periwinkle.glitch.me/permalink/836d469b8c29e5892dedfd43556ed1b0e28a5647066858ca1c395f5b30f8485c.html"><code>&lt;mm:endlock&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/836d469b8c29e5892dedfd43556ed1b0e28a5647066858ca1c395f5b30f8485c.html</span></a
        >, appears on our list and on only 22 pages.
      </li>
      <li>
        Adobe Go-Live's <a href="https://rainy-periwinkle.glitch.me/permalink/579abc77652df3ac2db1338d17aab0a8dc737b9d945510b562085d8522b18799.html"><code>&lt;csscriptdict&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/579abc77652df3ac2db1338d17aab0a8dc737b9d945510b562085d8522b18799.html</span></a> still appears on 640 pages in the desktop dataset.
      </li>
      <li>Microsoft Office's <code>&lt;o:p&gt;</code> element still appears on 0.5% of desktop pages, over 20k pages.</li>
    </ul>
    <p>But there are plenty of newcomers that weren't in Hixie's original report too, and with even bigger numbers.</p>
    <ul>
      <li>
        <a href="https://rainy-periwinkle.glitch.me/permalink/e8bf0130c4f29b28a97b3c525c09a9a423c31c0c813ae0bd1f227bd74ddec03d.html"><code>&lt;ym-measure&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/e8bf0130c4f29b28a97b3c525c09a9a423c31c0c813ae0bd1f227bd74ddec03d.html</span></a> is a tag injected by Yandex's <a href="https://www.npmjs.com/package/yandex-metrica-watch">Metrica analytics package<span class="fn">https://www.npmjs.com/package/yandex-metrica-watch</span></a
        >. It's used on more than 1% of desktop and mobile pages, solidifying its place in the top 100 most used elements. That's huge!
      </li>
      <li>
        <a href="https://rainy-periwinkle.glitch.me/permalink/a532f18bbfd1b565b460776a64fa9a2cdd1aa4cd2ae0d37eb2facc02bfacb40c.html"><code>&lt;g:plusone&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/a532f18bbfd1b565b460776a64fa9a2cdd1aa4cd2ae0d37eb2facc02bfacb40c.html</span></a> from the now-defunct Google Plus occurs on over 21k pages.
      </li>
      <li>
        Facebook's <a href="https://rainy-periwinkle.glitch.me/permalink/2e2f63858f7715ef84d28625344066480365adba8da8e6ca1a00dfdde105669a.html"><code>&lt;fb:like&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/2e2f63858f7715ef84d28625344066480365adba8da8e6ca1a00dfdde105669a.html</span></a> occurs on 14k mobile pages.
      </li>
      <li>
        Similarly, <a href="https://rainy-periwinkle.glitch.me/permalink/5a964079ac2a3ec1b4f552503addd406d02ec4ddb4955e61f54971c27b461984.html"><code>&lt;fb:like-box&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/5a964079ac2a3ec1b4f552503addd406d02ec4ddb4955e61f54971c27b461984.html</span></a> occurs on 7.8k mobile pages.
      </li>
      <li>
        <a href="https://rainy-periwinkle.glitch.me/permalink/6997d689f56fe77e5ce345cfb570adbd42d802393f4cc175a1b974833a0e3cb5.html"><code>&lt;app-root&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/6997d689f56fe77e5ce345cfb570adbd42d802393f4cc175a1b974833a0e3cb5.html</span></a
        >, which is generally included in frameworks like Angular, appears on 8.2k mobile pages.
      </li>
    </ul>
    <p>Let's compare these to a few of the native HTML elements that are below the 5% bar, for perspective.</p>
    <figure id="markup-fig9">
      <a href="https://almanac.httparchive.org/static/images/2019/markup/fig9.png">
        <img src="/static/images/2019/markup/fig9.png" alt="Figure 9. Popularity of product-specific and native elements under 5% adoption." aria-labelledby="markup-fig9-caption" aria-describedby="markup-fig9-description" width="600" height="370" data-width="600" data-height="370" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTbHgqcSepZye6DrCTpifFAUYxKT1hEO56585awyMips8oiPMLYu20GETuIE8mALkm814ObJyktEe2P/pubchart?oid=962404708&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="markup-fig9-description" class="visually-hidden">Bar chart showing video is used by 184,149 sites, canvas by 108,355, ym-measure (a product-specific tag) by 52,146, code by 25,075, g:plusone (a product-specific tag) by 21,098, fb:like (a product-specific tag) by 12,773, fb:like-box (a product-specific tag) by 6,792, app-root (a product-specific tag) by 8,468, summary by 6,578, template by 5,913, and meter by 0.</div>
      <figcaption id="markup-fig9-caption"><a href="#markup-fig9" class="anchor-link">Figure 9.</a> Popularity of product-specific and native elements under 5% adoption.</figcaption>
    </figure>
    <p>You could discover interesting insights like these all day long.</p>
    <p>Here's one that's a little different: popular elements could be caused by outright errors in products. For example, <code>&lt;pclass="ddc-font-size-large"&gt;</code> occurs on over 1,000 sites. This was thanks to a missing space in a popular "as-a-service" kind of product. Happily, we reported this error during our research and it was quickly fixed.</p>
    <p>In his original paper, Hixie mentions that:</p>
    <blockquote>The good thing, if we can be forgiven for trying to remain optimistic in the face of all this non-standard markup, is that at least these elements are all clearly using vendor-specific names. This massively reduces the likelihood that standards bodies will invent elements and attributes that clash with any of them.</blockquote>
    <p>
      However, as mentioned above, this is not universal. Over 25% of the non-standard elements that we captured don't use any kind of namespacing strategy to avoid polluting the global namespace. For example, here is <a href="https://rainy-periwinkle.glitch.me/permalink/53567ec94b328de965eb821010b8b5935b0e0ba316e833267dc04f1fb3b53bd5.html">a list of 1157 elements like that from the mobile dataset<span class="fn">https://rainy-periwinkle.glitch.me/permalink/53567ec94b328de965eb821010b8b5935b0e0ba316e833267dc04f1fb3b53bd5.html</span></a
      >. Many of those, as you can see, are likely to be non-problematic as they have obscure names, misspellings and so on. But at least a few probably present some challenges. You'll note, for example, that <code>&lt;toast&gt;</code> (which Googlers <a href="https://www.chromestatus.com/feature/5674896879255552">recently tried to propose as <code>&lt;std-toast&gt;</code><span class="fn">https://www.chromestatus.com/feature/5674896879255552</span></a
      >) appears in this list.
    </p>
    <p>There are some popular elements that are probably not so challenging:</p>
    <ul>
      <li>
        <a href="https://rainy-periwinkle.glitch.me/permalink/2ba66fb067dce29ecca276201c37e01aa7fe7c191e6be9f36dd59224f9a36e16.html"><code>&lt;ymaps&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/2ba66fb067dce29ecca276201c37e01aa7fe7c191e6be9f36dd59224f9a36e16.html</span></a> from Yahoo Maps appears on ~12.5k mobile pages.
      </li>
      <li>
        <a href="https://rainy-periwinkle.glitch.me/permalink/5cfe2db53aadf5049e32cf7db0f7f6d8d2f1d4926d06467d9bdcd0842d943a17.html"><code>&lt;cufon&gt;</code> and <code>&lt;cufontext&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/5cfe2db53aadf5049e32cf7db0f7f6d8d2f1d4926d06467d9bdcd0842d943a17.html</span></a> from a font replacement library from 2008, appear on ~10.5k mobile pages.
      </li>
      <li>
        The <a href="https://rainy-periwinkle.glitch.me/permalink/976b0cf78c73d125644d347be9e93e51d3a9112e31a283259c35942bda06e989.html"><code>&lt;jdiv&gt;</code><span class="fn">https://rainy-periwinkle.glitch.me/permalink/976b0cf78c73d125644d347be9e93e51d3a9112e31a283259c35942bda06e989.html</span></a> element, which appears to be injected by the Jivo chat product, appears on ~40.3k mobile pages,
      </li>
    </ul>
    <p>Placing these into our same chart as above for perspective looks something like this (again, it varies slightly based on the dataset)</p>
    <figure id="markup-fig10">
      <a href="https://almanac.httparchive.org/static/images/2019/markup/fig10.png">
        <img src="/static/images/2019/markup/fig10.png" alt="Figure 10. Other popular elements in the context of product-specific and native elements with under 5% adoption." aria-labelledby="markup-fig10-caption" aria-describedby="markup-fig10-description" width="600" height="370" data-width="600" data-height="370" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vTbHgqcSepZye6DrCTpifFAUYxKT1hEO56585awyMips8oiPMLYu20GETuIE8mALkm814ObJyktEe2P/pubchart?oid=468373762&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="markup-fig10-description" class="visually-hidden">A bar chart showing video is used by 184,149 sites, canvas by 108,355, ym-measure by 52,416, code by 25,075, g:plusone by 21,098, db:like by 12,773, cufon by 10,523, ymaps by 8,303, fb:like-box by 6,972, app-root by 8,468, summary by 6,578, template by 5,913, and meter by 0</div>
      <figcaption id="markup-fig10-caption"><a href="#markup-fig10" class="anchor-link">Figure 10.</a> Other popular elements in the context of product-specific and native elements with under 5% adoption.</figcaption>
    </figure>
    <p>The interesting thing about these results is that they also introduce a few other ways that our tool can come in very handy. If we're interested in exploring the space of the data, a very specific tag name is just one possible measure. It's definitely the strongest indicator if we can find good "slang" developing. However, what if that's not all we're interested in?</p>
    <h3 id="markup-common-use-cases-and-solutions"><a href="#markup-common-use-cases-and-solutions" class="anchor-link">Common use cases and solutions</a></h3>
    <p>
      What if, for example, we were interested in people solving common use cases? This could be because we're looking for solutions to use cases that we currently have ourselves, or for researching more broadly what common use cases people are solving with an eye toward incubating some standardization effort. Let's take a common example: tabs. Over the years there have been a lot of requests for things like tabs. We can use a fuzzy search here and find that there are <a href="https://rainy-periwinkle.glitch.me/permalink/c6d39f24d61d811b55fc032806cade9f0be437dcb2f5735a4291adb04aa7a0ea.html">many variants of tabs<span class="fn">https://rainy-periwinkle.glitch.me/permalink/c6d39f24d61d811b55fc032806cade9f0be437dcb2f5735a4291adb04aa7a0ea.html</span></a
      >. It's a little harder to count usage here since we can't as easily distinguish if two elements appear on the same page, so the count provided there conservatively simply takes the one with the largest count. In most cases the real number of pages is probably significantly larger.
    </p>
    <p>
      There are also lots of <a href="https://rainy-periwinkle.glitch.me/permalink/e573cf279bf1d2f0f98a90f0d7e507ac8dbd3e570336b20c6befc9370146220b.html">accordions<span class="fn">https://rainy-periwinkle.glitch.me/permalink/e573cf279bf1d2f0f98a90f0d7e507ac8dbd3e570336b20c6befc9370146220b.html</span></a
      >, <a href="https://rainy-periwinkle.glitch.me/permalink/0bb74b808e7850a441fc9b93b61abf053efc28f05e0a1bc2382937e3b78695d9.html">dialogs<span class="fn">https://rainy-periwinkle.glitch.me/permalink/0bb74b808e7850a441fc9b93b61abf053efc28f05e0a1bc2382937e3b78695d9.html</span></a
      >, at least 65 variants of <a href="https://rainy-periwinkle.glitch.me/permalink/651e592cb2957c14cdb43d6610b6acf696272b2fbd0d58a74c283e5ad4c79a12.html">carousels<span class="fn">https://rainy-periwinkle.glitch.me/permalink/651e592cb2957c14cdb43d6610b6acf696272b2fbd0d58a74c283e5ad4c79a12.html</span></a
      >, lots of stuff about <a href="https://rainy-periwinkle.glitch.me/permalink/981967b19a9346ac466482c51b35c49fc1c1cc66177ede440ab3ee51a7912187.html">popups<span class="fn">https://rainy-periwinkle.glitch.me/permalink/981967b19a9346ac466482c51b35c49fc1c1cc66177ede440ab3ee51a7912187.html</span></a
      >, at least 27 variants of <a href="https://rainy-periwinkle.glitch.me/permalink/2e6827af7c9d2530cb3d2f39a3f904091c523c2ead14daccd4a41428f34da5e8.html">toggles and switches<span class="fn">https://rainy-periwinkle.glitch.me/permalink/2e6827af7c9d2530cb3d2f39a3f904091c523c2ead14daccd4a41428f34da5e8.html</span></a
      >, and so on.
    </p>
    <p>
      Perhaps we could research why we need <a href="https://rainy-periwinkle.glitch.me/permalink/5ae67c941395ca3125e42909c2c3881e27cb49cfa9aaf1cf59471e3779435339.html">92 variants of button related elements that aren't a native button<span class="fn">https://rainy-periwinkle.glitch.me/permalink/5ae67c941395ca3125e42909c2c3881e27cb49cfa9aaf1cf59471e3779435339.html</span></a
      >, for example, and try to fill the native gap.
    </p>
    <p>
      If we notice popular things pop up (like <code>&lt;jdiv&gt;</code>, solving chat) we can take knowledge of things we know (like, that is what <code>&lt;jdiv&gt;</code> is about, or <code>&lt;olark&gt;</code>) and try to look <a href="https://rainy-periwinkle.glitch.me/permalink/db8fc0e58d2d46d2e2a251ed13e3daab39eba864e46d14d69cc114ab5d684b00.html">at at least 43 things we've built for tackling that<span class="fn">https://rainy-periwinkle.glitch.me/permalink/db8fc0e58d2d46d2e2a251ed13e3daab39eba864e46d14d69cc114ab5d684b00.html</span></a> and follow connections to survey the space.
    </p>
    <h2 id="markup-conclusion"><a href="#markup-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>So, there's lots of data here, but to summarize:</p>
    <ul>
      <li>Pages have more elements than they did 14 years ago, both on average and max.</li>
      <li>The lifetime of things on home pages is <em>very</em> long. Deprecating or discontinuing things doesn't make them go away, and it might never.</li>
      <li>There is a lot of broken markup out there in the wild (misspelled tags, missing spaces, bad escaping, misunderstandings).</li>
      <li>Measuring what "useful" means is tricky. Lots of native elements don't pass the 5% bar, or even the 1% bar, but lots of custom ones do, and for lots of reasons. Passing 1% should definitely grab our attention at least, but perhaps so should 0.5% because that is, according to the data, comparatively <em>very</em> successful.</li>
      <li>There is already a ton of custom markup out there. It comes in a lot of forms, but elements containing a dash definitely seem to have taken off.</li>
      <li>We need to increasingly study this data and come up with good observations to help find and pave the cowpaths.</li>
    </ul>
    <p>
      That last one is where you come in. We'd love to tap into the creativity and curiosity of the larger community to help explore this data using some of the tools (like <a href="https://rainy-periwinkle.glitch.me/">https://rainy-periwinkle.glitch.me/<span class="fn">https://rainy-periwinkle.glitch.me/</span></a
      >). Please share your interesting observations and help build our commons of knowledge and understanding.
    </p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"I","chapter_number":4,"title":"Media","description":"Media chapter of the 2019 Web Almanac covering image file sizes and formats, responsive images, client hints, lazy loading, accessibility and video.","authors":["colinbendell","dougsillars"],"reviewers":["ahmadawais","eeeps"],"translators":null,"discuss":"1759","results":"https://docs.google.com/spreadsheets/d/1hj9bY6JJZfV9yrXHsoCRYuG8t8bR-CHuuD98zXV7BBQ/","queries":"04_Media","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-08-04T00:00:00.000Z","chapter":"media"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="media-introduction"><a href="#media-introduction" class="anchor-link">Introduction</a></h2>
    <p>Images, animations, and videos are an important part of the web experience. They are important for many reasons: they help tell stories, engage audiences, and provide artistic expression in ways that often cannot be easily produced with other web technologies. The importance of these media resources can be demonstrated in two ways: by the sheer volume of bytes required to download for a page, and also the volume of pixels painted with media.</p>
    <p>
      From a pure bytes perspective, HTTP Archive has <a href="https://legacy.httparchive.org/interesting.php#bytesperpage">historically reported<span class="fn">https://legacy.httparchive.org/interesting.php#bytesperpage</span></a> an average of two-thirds of resource bytes associated from media. From a distribution perspective, we can see that virtually every web page depends on images and videos. Even at the tenth percentile, we see that 44% of the bytes are from media and can rise to 91% of the total bytes at the 90th percentile of pages.
    </p>
    <figure id="media-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig1_bytes_images_and_video_versus_other.png">
        <img src="/static/images/2019/media/fig1_bytes_images_and_video_versus_other.png" alt="Figure 1. Web page bytes: image and video versus other." aria-labelledby="media-fig1-caption" aria-describedby="media-fig1-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=1189524305&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="media-fig1-description" class="visually-hidden">Bar chart showing in the p10 percentile 44.1% of page bytes are media, in the p25 percentile 52.7% is media, in the p50 percentile 67.0% is media, in the p75 percentile 81.7% is media, and in the p90 percentile 91.2% is media.</div>
      <figcaption id="media-fig1-caption"><a href="#media-fig-1" class="anchor-link">Figure 1.</a> Web page bytes: image and video versus other.</figcaption>
    </figure>
    <p>While media are critical for the visual experience, the impact of this high volume of bytes has two side effects.</p>
    <p>First, the network overhead required to download these bytes can be large and in cellular or slow network environments (like coffee shops or tethering when in an Uber) can dramatically slow down the page <a href="#performance">performance</a>. Images are a lower priority request by the browser but can easily block CSS and JavaScript in the download. This by itself can delay the page rendering. Yet at other times, the image content is the visual cue to the user that the page is ready. Slow transfers of visual content, therefore, can give the perception of a slow web page.</p>
    <p>
      The second impact is on the financial cost to the user. This is often an ignored aspect since it is not a burden on the website owner but a burden to the end-user. Anecdotally, it has been shared that some markets, <a href="https://twitter.com/yoavweiss/status/1195036487538003968?s=20">like Japan<span class="fn">https://twitter.com/yoavweiss/status/1195036487538003968?s=20</span></a
      >, see a drop in purchases by students near the end of the month when data caps are reached, and users cannot see the visual content.
    </p>
    <p>
      Further, the financial cost of visiting these websites in different parts of the world is disproportionate. At the median and 90th percentile, the volume of image bytes is 1 MB and 1.9 MB respectively. Using <a href="https://whatdoesmysitecost.com/#gniCost">WhatDoesMySiteCost.com<span class="fn">https://whatdoesmysitecost.com/#gniCost</span></a> we can see that the gross national income (GNI) per capita cost to a user in Madagascar a single web page load at the 90th percentile would cost 2.6% of the daily gross income. By contrast, in Germany this would be 0.3% of the daily gross income.
    </p>
    <figure id="media-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig2_total_image_bytes_per_web_page_mobile.png">
        <img src="/static/images/2019/media/fig2_total_image_bytes_per_web_page_mobile.png" alt="Figure 2. Total image bytes per web page (mobile)." aria-labelledby="media-fig2-caption" aria-describedby="media-fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=2025280105&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="media-fig2-description" class="visually-hidden">The median web page on mobile requires 1 MB of images and 4.9 MB at the 90th percentile.</div>
      <figcaption id="media-fig2-caption"><a href="#media-fig-2" class="anchor-link">Figure 2.</a> Total image bytes per web page (mobile).</figcaption>
    </figure>
    <p>Looking at bytes per page results in just looking at the coststo page performance and the userbut it overlooks the benefits. These bytes are important to render pixels on the screen. As such, we can see the importance of the images and video resources by also looking at the number of media pixels used per page.</p>
    <p>There are three metrics to consider when looking at pixel volume: CSS pixels, natural pixels, and screen pixels:</p>
    <ul>
      <li>
        <p><em>CSS pixel volume</em> is from the CSS perspective of layout. This measure focuses on the bounding boxes for which an image or video could be stretched or squeezed into. It also does not take into the actual file pixels nor the screen display pixels</p>
      </li>
      <li>
        <p><em>Natural pixels</em> refer to the logical pixels represented in a file. If you were to load this image in GIMP or Photoshop, the pixel file dimensions would be the natural pixels.</p>
      </li>
      <li>
        <p><em>Screen pixels</em> refer to the physical electronics on the display. Prior to mobile phones and modern high-resolution displays, there was a 1:1 relationship between CSS pixels and LED points on a screen. However, because mobile devices are held closer to the eye, and laptop screens are closer than the old mainframe terminals, modern screens have a higher ratio of physical pixels to traditional CSS pixels. This ratio is referred to as Device-Pixel-Ratio or colloquially referred to as Retina displays.</p>
      </li>
    </ul>
    <figure id="media-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig3_image_pixel_per_page_mobile_css_v_actual.png">
        <img src="/static/images/2019/media/fig3_image_pixel_per_page_mobile_css_v_actual.png" alt="Figure 3. Image pixels per page (mobile): CSS versus actual." aria-labelledby="media-fig3-caption" aria-describedby="media-fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=2027393897&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="media-fig3-description" class="visually-hidden">A comparison of the CSS pixels allocated to image content compared to the actual image pixels for mobile, showing p10 (0.07 MP actual, 0.04 MP CSS), p25 (0.38 MP actual, 0.18 MP CSS), p50 (1.6 MP actual, 0.65 MP CSS), p75 (5.1 MP actual, 1.8 MP CSS), and p90 (12 MP actual, 4.6 MP CSS)</div>
      <figcaption id="media-fig3-caption"><a href="#media-fig-3" class="anchor-link">Figure 3.</a> Image pixels per page (mobile): CSS versus actual.</figcaption>
    </figure>
    <figure id="media-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig4_image_pixel_per_page_desktop_css_v_actual.png">
        <img src="/static/images/2019/media/fig4_image_pixel_per_page_desktop_css_v_actual.png" alt="Figure 4. Image pixels per page (desktop): CSS versus actual." aria-labelledby="media-fig4-caption" aria-describedby="media-fig4-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=1364487787&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="media-fig4-description" class="visually-hidden">A comparison of the CSS pixels allocated to image content compared to the actual image pixels for desktop, showing p10 (0.09 MP actual, 0.05 MP CSS), p25 (0.52 MP actual, 0.29 MP CSS), p50 (2.1 MP actual, 1.1 MP CSS), p75 (6.0 MP actual, 2.8 MP CSS), and p90 (14 MP actual, 6.3 MP CSS)</div>
      <figcaption id="media-fig4-caption"><a href="#media-fig-4" class="anchor-link">Figure 4.</a> Image pixels per page (desktop): CSS versus actual.</figcaption>
    </figure>
    <p>Looking at the CSS pixel and the natural pixel volume we can see that the median website has a layout that displays one megapixel (MP) of media content. At the 90th percentile, the CSS layout pixel volume grows to 4.6 MP and 6.3 MP mobile and desktop respectively. This is interesting not only because the responsive layout is likely different, but also because the form factor is different. In short, the mobile layout has less space allocated for media compared to the desktop.</p>
    <p>In contrast, the natural, or file, pixel volume is between 2 and 2.6 times the layout volume. The median desktop web page sends 2.1MP of pixel content that is displayed in 1.1 MP of layout space. At the 90th percentile for mobile we see 12 MP squeezed into 4.6 MP.</p>
    <p>Of course, the form factor for a mobile device is different than a desktop. A mobile device is smaller and usually held in portrait mode while the desktop is larger and used predominantly in landscape mode. As mentioned earlier, a mobile device also typically has a higher device pixel ratio (DPR) because it is held much closer to the eye, requiring more pixels per inch compared to what you would need on a billboard in Times Square. These differences force layout changes and users on mobile more commonly scroll through a site to consume the entirety of content.</p>
    <p>Megapixels are a challenging metric because it is a largely abstract metric. A useful way to express this volume of pixels being used on a web page is to represent it as a ratio relative to the display size.</p>
    <p>For the mobile device used in the web page crawl, we have a display of <code>512 x 360</code> which is 0.18 MP of CSS content. (Not to be confused with the physical screen which is <code>3x</code> or 3^2 more pixels, which is 1.7MP). Dividing this viewer pixel volume by the number of CSS pixels allocated to images we get a relative pixel volume.</p>
    <p>If we had one image that filled the entire screen perfectly, this would be a 1x pixel fill rate. Of course, rarely does a website fill the entire canvas with a single image. Media content tends to be mixed in with the design and other content. A value greater than 1x implies that the layout requires the user to scroll to see the additional image content.</p>
    <p class="note">Note: this is only looking at the CSS layout for both the viper and the volume of layout content. It is not evaluating the effectiveness of the responsive images or the effectiveness of providing high DPR content.</p>
    <figure id="media-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig5_image_pixel_volume_v_css_pixels.png">
        <img src="/static/images/2019/media/fig5_image_pixel_volume_v_css_pixels.png" alt="Figure 5. Image pixel volume versus screen size (CSS pixels)." aria-labelledby="media-fig5-caption" aria-describedby="media-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=1889020047&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="media-fig5-description" class="visually-hidden">A comparison of the pixel volume required per page relative to the actual screen size CSS pixels, showing p10 (20% mobile, 2% desktop), p25 (97% mobile, 13% desktop), p50 (354% mobile, 46% desktop), p75 (1003% mobile, 123% desktop), and p90 (2477% mobile, 273% desktop).</div>
      <figcaption id="media-fig5-caption"><a href="#media-fig-5" class="anchor-link">Figure 5.</a> Image pixel volume versus screen size (CSS pixels).</figcaption>
    </figure>
    <p>For the median web page on desktop, only 46% of the display would have layout containing images and video. In contrast, on mobile, the volume of media pixels fills 3.5 times the actual viewport size. The layout has more content than can be filled in a single screen, requiring the user to scroll. At a minimum, there is 3.5 scrolling pages of content per site (assuming 100% saturation). At the 90th percentile for mobile, this grows substantially to 25x the viewport size!</p>
    <p>Media resources are critical for the user experience.</p>
    <h2 id="media-images"><a href="#media-images" class="anchor-link">Images</a></h2>
    <p>Much has already been written on the subject of managing and optimizing images to help reduce the bytes and optimize the user experience. It is an important and critical topic for many because it is the creative media that define a brand experience. Therefore, optimizing image and video content is a balancing act between applying best practices that can help reduce the bytes transferred over the network while preserving the fidelity of the intended experience.</p>
    <p>While the strategies that are utilized for images, videos, and animations arein broad strokessimilar, the specific approaches can be very different. In general, these strategies boil down to:</p>
    <ul>
      <li><strong>File formats</strong> - utilizing the optimal file format</li>
      <li><strong>Responsive</strong> - applying responsive images techniques to transfer only the pixels that will be shown on screen</li>
      <li><strong>Lazy loading</strong> - to transfer content only when a human will see it</li>
      <li><strong>Accessibility</strong> - ensuring a consistent experience for all humans</li>
    </ul>
    <p class="note">A word of caution when interpreting these results. The web pages crawled for the Web Almanac were crawled on a Chrome browser. This implies that any content negotiation that might better apply for Safari or Firefox might not be represented in this dataset. For example, the use of file formats like JPEG2000, JPEG-XR, HEVC and HEIC are absent because these are not supported natively by Chrome. This does not mean that the web does not contain these other formats or experiences. Likewise, Chrome has native support for lazy loading (since v76) which is not yet available in other browsers. Read more about these caveats in our <a href="#methodology">Methodology</a>.</p>
    <p>It is rare to find a web page that does not utilize images. Over the years, many different file formats have emerged to help present content on the web, each addressing a different problem. Predominantly, there are 4 main universal image formats: JPEG, PNG, GIF, and SVG. In addition, Chrome has enhanced the media pipeline and added support for a fifth image format: WebP. Other browsers have likewise added support for JPEG2000 (Safari), JPEG-XL (IE and Edge) and HEIC (WebView only in Safari).</p>
    <p>Each format has its own merits and has ideal uses for the web. A very simplified summary would break down as:</p>
    <figure id="media-fig-6">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Format</th>
                <th class="width-45">Highlights</th>
                <th class="width-45">Drawbacks</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>JPEG</td>
                <td>
                  <ul>
                    <li>Ubiquitously supported</li>
                    <li>Ideal for photographic content</li>
                  </ul>
                </td>
                <td>
                  <ul>
                    <li>There is always quality loss</li>
                    <li>Most decoders cannot handle high bit depth photographs from modern cameras (&gt; 8 bits per channel)</li>
                    <li>No support for transparency</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td>PNG</td>
                <td>
                  <ul>
                    <li>Like JPEG and GIF, shares wide support</li>
                    <li>It is lossless</li>
                    <li>Supports transparency, animation, and high bit depth</li>
                  </ul>
                </td>
                <td>
                  <ul>
                    <li>Much bigger files compared to JPEG</li>
                    <li>Not ideal for photographic content</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td>GIF</td>
                <td>
                  <ul>
                    <li>The predecessor to PNG, is most known for animations</li>
                    <li>Lossless</li>
                  </ul>
                </td>
                <td>
                  <ul>
                    <li>Because of the limitation of 256 colors, there is always visual loss from conversion</li>
                    <li>Very large files for animations</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td>SVG</td>
                <td>
                  <ul>
                    <li>A vector based format that can be resized without increasing file size</li>
                    <li>It is based on math rather than pixels and creates smooth lines</li>
                  </ul>
                </td>
                <td>
                  <ul>
                    <li>Not useful for photographic or other raster content</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td>WebP</td>
                <td>
                  <ul>
                    <li>A newer file format that can produce lossless images like PNG and lossy images like JPEG</li>
                    <li>
                      It <a href="https://developers.google.com/speed/webp/faq">boasts a 30% average file reduction compared<span class="fn">https://developers.google.com/speed/webp/faq</span></a> to JPEG, while other data suggests that median file reduction is <a href="https://cloudinary.com/state-of-visual-media-report/">between 10-28% based on pixel volume<span class="fn">https://cloudinary.com/state-of-visual-media-report/</span></a
                      >.
                    </li>
                  </ul>
                </td>
                <td>
                  <ul>
                    <li>Unlike JPEG, it is limited to chroma-subsampling which will make some images appear blurry.</li>
                    <li>Not universally supported. Only Chrome, Firefox and Android ecosystems.</li>
                    <li>Fragmented feature support depending on browser versions</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <figcaption><a href="#media-fig-6" class="anchor-link">Figure 6.</a> Explanation of the mainstream file formats.</figcaption>
    </figure>
    <h3 id="media-image-formats"><a href="#media-image-formats" class="anchor-link">Image formats</a></h3>
    <p>In aggregate, across all page, we indeed see the prevalence of these formats. JPEG, one of the oldest formats on the web, is by far the most commonly used image formats at 60% of the image requests and 65% of all image bytes. Interestingly, PNG is the second most commonly used image format 28% of image requests and bytes. The ubiquity of support along with the precision of color and creative content are likely explanations for its wide use. In contrast SVG, GIF, and WebP share nearly the same usage at 4%.</p>
    <figure id="media-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig7_image_format_usage.png">
        <img alt="Most frequent Image types used on web pages" aria-labelledby="media-fig7-caption" aria-describedby="media-fig7-description" src="/static/images/2019/media/fig7_image_format_usage.png" width="600" height="376" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="media-fig7-description" class="visually-hidden">A tree map showing that JPEGs are used 60.27% of the time, PNGs 28.2%, WebP 4.2%, GIF 3.67%, and SVG 3.63%.</div>
      <figcaption id="media-fig7-caption"><a href="#media-fig-7" class="anchor-link">Figure 7.</a> Image format usage.</figcaption>
    </figure>
    <p>Of course, web pages are not uniform in their use of image content. Some depend on images more than others. Look no further than the home page of <code>google.com</code> and you will see very little imagery compared to a typical news website. Indeed, the median website has 13 images, 61 images at the 90th percentile, and a whopping 229 images at the 99th percentile.</p>
    <figure id="media-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig8_image_format_usage_per_page.png">
        <img src="/static/images/2019/media/fig8_image_format_usage_per_page.png" alt="Figure 8. Image format usage per page." aria-labelledby="media-fig8-caption" aria-describedby="media-fig8-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=294858455&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="media-fig8-description" class="visually-hidden">A bar chart showing in p10 percentile no image formats are used at all, in the p25 percentile three JPGs and four PNGs are used, in the p50 percentile nine JPGs, four PNGs, and one GIF are used, in the p75 percentile 39 JPEGs, 18 PNGs, two SVGs, and two GIFs are used and in the p99 percentile, 119 JPGs, 49 PNGs, 28 WebPs, 19 SVGs and 14 GIFs are used.</div>
      <figcaption id="media-fig8-caption"><a href="#media-fig-8" class="anchor-link">Figure 8.</a> Image format usage per page.</figcaption>
    </figure>
    <p>While the median page has nine JPEGs and four PNGs, and only in the top 25% pages GIFs were used, this doesn't report the adoption rate. The use and frequency of each format per page doesn't provide insight into the adoption of the more modern formats. Specifically, what percent of pages include at least one image in each format?</p>
    <figure id="media-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig9_pages_using_at_least_1_image.png">
        <img src="/static/images/2019/media/fig9_pages_using_at_least_1_image.png" alt="Figure 9. % of pages using at least 1 image." aria-labelledby="media-fig9-caption" aria-describedby="media-fig9-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=1024386063&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="media-fig9-description" class="visually-hidden">A bar chart showing JPEGs are used on 90% of pages, PNGs on 89%, WebP on 9%, GIF on 37%, and SVG on 22%.</div>
      <figcaption id="media-fig9-caption"><a href="#media-fig-9" class="anchor-link">Figure 9.</a> Percent of pages using at least one image.</figcaption>
    </figure>
    <p>This helps explain whyeven at the 90th percentile of pagesthe frequency of WebP is still zero; only 9% of web pages have even one resource. There are many reasons that WebP might not be the right choice for an image, but adoption of media best practices, like adoption of WebP itself, still remain nascent.</p>
    <h3 id="media-image-file-sizes"><a href="#media-image-file-sizes" class="anchor-link">Image file sizes</a></h3>
    <p>There are two ways to look at image file sizes: absolute bytes per resource and bytes-per-pixel.</p>
    <figure id="media-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig10_image_format_size.png">
        <img alt="A comparison of image formats by file size" aria-labelledby="media-fig10-caption" aria-describedby="media-fig10-description" src="/static/images/2019/media/fig10_image_format_size.png" width="600" height="371" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="media-fig10-description" class="visually-hidden">A chart showing in p10 percentile 4 KB of JPEGs, 2 KB of PNG and 2 KB of GIFs are used, in the p25 percentile 9 KB JPGs, 4 KB of PNGs, 7 KB of WebP, and 3 KB of GIFs are used, in the p50 percentile 24 KB of JPGs, 11 KB of PNGs, 17 KB of WebP, 6 KB of GIFs, and 1 KB of SVGs are used, in the p75 percentile 68 KB of JPEGs, 43 KB of PNGs, 41 KB of WebPs, 17 KB of GIFs and 2 KB of SVGs are used and in the p90 percentile, 116 KB of JPGs, 152 KB of PNGs, 90 KB of WebPs, 87 KB of GIFs, and 8 KB of SVGs are used.</div>
      <figcaption id="media-fig10-caption"><a href="#media-fig-10" class="anchor-link">Figure 10.</a> File size (KB) by image format.</figcaption>
    </figure>
    <p>From this we can start to get a sense of how large or small a typical resource is on the web. However, this doesn't give us a sense of the volume of pixels represented on screen for these file distributions. To do this we can divide each resource bytes by the natural pixel volume of the image. A lower bytes-per-pixel indicates a more efficient transmission of visual content.</p>
    <figure id="media-fig-11">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig11_bytes_per_pixel.png">
        <img src="/static/images/2019/media/fig11_bytes_per_pixel.png" alt="Figure 11. Bytes per pixel." aria-labelledby="media-fig11-caption" aria-describedby="media-fig11-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=1379541850&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig11-description" data-show-text="{{ show_description(11) }}" data-hide-text="{{ hide_description(11) }}">{{ show_description(11) }}</button>
      <div id="media-fig11-description" class="visually-hidden">A candlestick chart showing in p10 percentile we have 0.1175 bytes-per-pixel for JPEG, 0.1197 for PNG, 0.1702 for GIF, 0.0586 for WebP, and 0.0293 for SVG. In the p25 percentile we have 0.1848 bytes-per-pixel for JPEGs, 0.2874 for PNG, 0.3641 for GIF, 0.1025 for WebP, and 0.174 for SVG. In the p50 percentile we have 0.2997 bytes-per-pixel for JPEGs, 0.6918 for PNG, 0.7967 for GIF, 0.183 for WebP, and 0.6766 for SVG. In the p75 percentile we have 0.5456 bytes-per-pixel for JPEGs, 1.4548 for PNG, 2.515 for GIF, 0.3272 for WebP, and 1.9261 for SVG. In the p90 percentile we have 0.9822 bytes-per-pixel for JPEGs, 2.5026 for PNG, 8.5151 for GIF, 0.6474 for WebP, and 4.1075 for SVG</div>
      <figcaption id="media-fig11-caption"><a href="#media-fig-11" class="anchor-link">Figure 11.</a> Bytes per pixel.</figcaption>
    </figure>
    <p>While previously it appeared that GIF files were smaller than JPEG, we can now clearly see that the cause of the larger JPEG resources is due to the pixel volume. It is probably not a surprise that GIF shows a very low pixel density compared to the other formats. Additionally, while PNG can handle high bit depth and doesn't suffer from chroma subsampling blurriness, it is about twice the size of JPG or WebP for the same pixel volume.</p>
    <p>Of note, the pixel volume used for SVG is the size of the DOM element on screen (in CSS pixels). While considerably smaller for file sizes, this hints that SVGs are generally used in smaller portions of the layout. This is why the bytes-per-pixel appears worse than PNG.</p>
    <p>Again, it is worth emphasizing, this comparison of pixel density is not comparing equivalent images. Rather it is reporting typical user experience. As we will discuss next, even in each of these formats there are techniques that can be used to further optimize and reduce the bytes-per-pixel.</p>
    <h3 id="media-image-format-optimization"><a href="#media-image-format-optimization" class="anchor-link">Image format optimization</a></h3>
    <p>Selecting the best format for an experience is an art of balancing capabilities of the format and reducing the total bytes. For web pages one goal is to help improve web performance through optimizing images. Yet within each format there are additional features that can help reduce bytes.</p>
    <p>Some features can impact the total experience. For example, JPEG and WebP can utilize <em>quantization</em> (commonly referred to as <em>quality levels</em>) and <em>chroma subsampling</em>, which can reduce the bits stored in the image without impacting the visual experience. Like MP3s for music, this technique depends on a bug in the human eye and allows for the same experience despite the loss of color data. However, not all images are good candidates for these techniques since this can create blocky or blurry images and may distort colors or make text overlays become unreadable.</p>
    <p>Other format features simply organize the content and sometimes require contextual knowledge. For example, applying progressive encoding of a JPEG reorganizes the pixels into scan layers that allows the browser to complete layout sooner and coincidently reduces pixel volume.</p>
    <p>One <a href="#methodology-lighthouse">Lighthouse</a> test is an A/B comparing baseline with a progressively encoded JPEG. This provides a smell to indicate whether the images overall can be further optimized with lossless techniques and potentially with lossy techniques like using different quality levels.</p>
    <figure id="media-fig-12">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig12_percentage_optimized_images.png">
        <img src="/static/images/2019/media/fig12_percentage_optimized_images.png" alt="Figure 12. Percent 'optimized' images." aria-labelledby="media-fig12-caption" aria-describedby="media-fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=1569150767" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="media-fig12-description" class="visually-hidden">Bar chart showing in the p10 percentile 100% of images are optimized, same in p25 percentile, in the p50 percentile 98% of images are optimized (2% not), in the p75 percentile 83% of images are optimized (17% not), and in the p90 percentile 59% of images are optimized and 41% are not.</div>
      <figcaption id="media-fig12-caption"><a href="#media-fig-12" class="anchor-link">Figure 12.</a> Percent "optimized" images.</figcaption>
    </figure>
    <p>The savings in this AB Lighthouse test is not just about potential byte savings, which can accrue to several MBs at the p95, it also demonstrates the page performance improvement.</p>
    <figure id="media-fig-13">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig13_project_perf_improvements_image_optimization.png">
        <img src="/static/images/2019/media/fig13_project_perf_improvements_image_optimization.png" alt="Figure 13. Projected page performance improvements from image optimization from Lighthouse." aria-labelledby="media-fig12-caption" aria-describedby="media-fig13-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=167590779" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
      <div id="media-fig13-description" class="visually-hidden">Bar chart showing in the p10 percentile 0 ms could be sized, same in p25 percentile, in the p50 percentile 150 ms could be saved, in the p75 percentile 1,460 ms could be saved and in the p90 percentile 5,720 ms could be saved.</div>
      <figcaption id="media-fig13-caption"><a href="#media-fig-13" class="anchor-link">Figure 13.</a> Projected page performance improvements from image optimization from Lighthouse.</figcaption>
    </figure>
    <h3 id="media-responsive-images"><a href="#media-responsive-images" class="anchor-link">Responsive images</a></h3>
    <p>Another axis for improving page performance is to apply responsive images. This technique focuses on reducing image bytes by reducing the extra pixels that are not shown on the display because of image shrinking. At the beginning of this chapter, you saw that the median web page on desktop used one MP of image placeholders yet transferred 2.1 MP of actual pixel volume. Since this was a 1x DPR test, 1.1 MP of pixels were transferred over the network, but not displayed. To reduce this overhead, we can use one of two (possibly three) techniques:</p>
    <ul>
      <li><strong>HTML markup</strong> - using a combination of the <code>&lt;picture&gt;</code> and <code>&lt;source&gt;</code> elements along with the <code>srcset</code> and <code>sizes</code> attributes allows the browser to select the best image based on the dimensions of the viewport and the density of the display.</li>
      <li><strong>Client Hints</strong> - this moves the selection of possible resized images to HTTP content negotiation.</li>
      <li><strong>BONUS</strong>: JavaScript libraries to delay image loading until the JavaScript can execute and inspect the Browser DOM and inject the correct image based on the container.</li>
    </ul>
    <h3 id="media-use-of-html-markup"><a href="#media-use-of-html-markup" class="anchor-link">Use of HTML markup</a></h3>
    <p>The most common method to implement responsive images is to build a list of alternative images using either <code>&lt;img srcset&gt;</code> or <code>&lt;source srcset&gt;</code>. If the <code>srcset</code> is based on DPR, the browser can select the correct image from the list without additional information. However, most implementations also use <code>&lt;img sizes&gt;</code> to help instruct the browser how to perform the necessary layout calculation to select the correct image in the <code>srcset</code> based on pixel dimensions.</p>
    <figure id="media-fig-14">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig14_html_usage_of_responsive_images.png">
        <img src="/static/images/2019/media/fig14_html_usage_of_responsive_images.png" alt="Figure 14. Percent of pages using responsive images with HTML." aria-labelledby="media-fig14-caption" aria-describedby="media-fig14-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=582530039&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig14-description" data-show-text="{{ show_description(14) }}" data-hide-text="{{ hide_description(14) }}">{{ show_description(14) }}</button>
      <div id="media-fig14-description" class="visually-hidden">A bar chart showing 18% of images uses 'sizes', 21% use 'srcset', and 2% use 'picture'.</div>
      <figcaption id="media-fig14-caption"><a href="#media-fig-14" class="anchor-link">Figure 14.</a> Percent of pages using responsive images with HTML.</figcaption>
    </figure>
    <p>
      The notably lower use of <code>&lt;picture&gt;</code> is not surprising given that it is used most often for advanced responsive web design (RWD) layouts like <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images#Art_direction">art direction<span class="fn">https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images#Art_direction</span></a
      >.
    </p>
    <h3 id="media-use-of-sizes"><a href="#media-use-of-sizes" class="anchor-link">Use of sizes</a></h3>
    <p>The utility of <code>srcset</code> is usually dependent on the precision of the <code>sizes</code> media query. Without <code>sizes</code> the browser will assume the <code>&lt;img&gt;</code> tag will fill the entire viewport instead of smaller component. Interestingly, there are five common patterns that web developers have adopted for <code>&lt;img sizes&gt;</code>:</p>
    <ul>
      <li>
        <strong><code>&lt;img sizes="100vw"&gt;</code></strong> - this indicates that the image will fill the width of the viewport (also the default).
      </li>
      <li>
        <strong><code>&lt;img sizes="200px"&gt;</code></strong> - this is helpful for browsers selecting based on DPR.
      </li>
      <li>
        <strong><code>&lt;img sizes="(max-width: 300px) 100vw, 300px"&gt;</code></strong> - this is the second most popular design pattern. It is the one auto generated by WordPress and likely a few other platforms. It appears auto generated based on the original image size (in this case 300px).
      </li>
      <li>
        <strong><code>&lt;img sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, ..."&gt;</code></strong> - this pattern is the custom built design pattern that is aligned with the CSS responsive layout. Each breakpoint has a different calculation for sizes to use.
      </li>
    </ul>
    <figure id="media-fig-15">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th><code>&lt;img sizes&gt;</code></th>
                <th>Frequency (millions)</th>
                <th>%</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>(max-width: 300px) 100vw, 300px</td>
                <td>1.47</td>
                <td>5%</td>
              </tr>
              <tr>
                <td>(max-width: 150px) 100vw, 150px</td>
                <td>0.63</td>
                <td>2%</td>
              </tr>
              <tr>
                <td>(max-width: 100px) 100vw, 100px</td>
                <td>0.37</td>
                <td>1%</td>
              </tr>
              <tr>
                <td>(max-width: 400px) 100vw, 400px</td>
                <td>0.32</td>
                <td>1%</td>
              </tr>
              <tr>
                <td>(max-width: 80px) 100vw, 80px</td>
                <td>0.28</td>
                <td>1%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption id="media-fig15-caption"><a href="#media-fig-15" class="anchor-link">Figure 15.</a> Percent of pages using the most popular <code>sizes</code> patterns.</figcaption>
    </figure>
    <ul>
      <li>
        <p>
          <strong><code>&lt;img sizes="auto"&gt;</code></strong> - this is the most popular use, which is actually non-standard and is an artifact of the use of the <code>lazy_sizes</code> JavaScript library. This uses client-side code to inject a better <code>sizes</code> calculation for the browser. The downside of this is that it depends on the JavaScript loading and DOM to be fully ready, delaying image loading substantially.
        </p>
      </li>
    </ul>
    <figure id="media-fig-16">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig16_top_patterns_of_img_sizes.png">
        <img src="/static/images/2019/media/fig16_top_patterns_of_img_sizes.png" alt="Figure 16. Top patterns of 'img sizes'." aria-labelledby="media-fig16-caption" aria-describedby="media-fig16-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=663985412&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig16-description" data-show-text="{{ show_description(16) }}" data-hide-text="{{ hide_description(16) }}">{{ show_description(16) }}</button>
      <div id="media-fig16-description" class="visually-hidden">Bar chart showing 11.3 million images use 'img sizes="(max-width: 300px) 100vw, 300px"', 1.60 million use 'auto', 1.00 million use 'img sizes="(max-width: 767px) 89vw...etc."', 0.23 million use '100vw' and 0.13 million use '300px'</div>
      <figcaption id="media-fig16-caption"><a href="#media-fig-16" class="anchor-link">Figure 16.</a> Top patterns of <code>&lt;img sizes&gt;</code>.</figcaption>
    </figure>
    <h3 id="media-client-hints"><a href="#media-client-hints" class="anchor-link">Client Hints</a></h3>
    <p>
      <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/client-hints">Client Hints<span class="fn">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/client-hints</span></a> allow content creators to move the resizing of images to HTTP content negotiation. In this way, the HTML does not need additional <code>&lt;img srcset&gt;</code> to clutter the markup, and instead can depend on a server or <a href="https://cloudinary.com/blog/client_hints_and_responsive_images_what_changed_in_chrome_67">image CDN to select an optimal image<span class="fn">https://cloudinary.com/blog/client_hints_and_responsive_images_what_changed_in_chrome_67</span></a> for the context. This allows simplifying of HTML and enables origin servers to adapt overtime and disconnect the content and presentation layers.
    </p>
    <p>To enable Client Hints, the web page must signal to the browser using either an extra HTTP header <code>Accept-CH: DPR, Width, Viewport-Width</code> <em>or</em> by adding the HTML <code>&lt;meta http-equiv="Accept-CH" content="DPR, Width, Viewport-Width"&gt;</code>. The convenience of one or the other technique depends on the team implementing and both are offered for convenience.</p>
    <figure id="media-fig-17">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig17_usage_of_accept-ch_http_v_html.png">
        <img src="/static/images/2019/media/fig17_usage_of_accept-ch_http_v_html.png" alt="Usage of the Accept-CH: HTTP versus HTML." aria-labelledby="media-fig17-caption" aria-describedby="media-fig17-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=284657706&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig17-description" data-show-text="{{ show_description(17) }}" data-hide-text="{{ hide_description(17) }}">{{ show_description(17) }}</button>
      <div id="media-fig17-description" class="visually-hidden">Bar chart showing 71% use the 'meta http-equiv', 30% use the 'Accept-CH' HTTP header and 1% use both.</div>
      <figcaption id="media-fig17-caption"><a href="#media-fig-17" class="anchor-link">Figure 17.</a> Usage of the <code>Accept-CH</code> header versus the equivalent <code>&lt;meta&gt;</code> tag.</figcaption>
    </figure>
    <p>The use of the <code>&lt;meta&gt;</code> tag in HTML to invoke Client Hints is far more common compared with the HTTP header. This is likely a reflection of the convenience to modify markup templates compared to adding HTTP headers in middle boxes. However, looking at the usage of the HTTP header, over 50% of these cases are from a single SaaS platform (Mercado).</p>
    <p>Of the Client Hints invoked, the majority of pages use it for the original three use-cases of <code>DPR</code>, <code>ViewportWidth</code> and <code>Width</code>. Of course, the <code>Width</code> Client Hint that requires the use <code>&lt;img sizes&gt;</code> for the browser to have enough context about the layout.</p>
    <figure id="media-fig-18">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig18_enabled_client_hints.png">
        <img src="/static/images/2019/media/fig18_enabled_client_hints.png" alt="Figure 18. Enabled Client Hints." aria-labelledby="media-fig18-caption" aria-describedby="media-fig18-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=1878506264&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig18-description" data-show-text="{{ show_description(18) }}" data-hide-text="{{ hide_description(18) }}">{{ show_description(18) }}</button>
      <div id="media-fig18-description" class="visually-hidden">A doughnut-style pie-chart showing 26.1% of client hints use 'dpr', 24.3% use 'viewport-width', 19.7% use 'width', 6.7% use 'save-data', 6.1% uses 'device-memory', 6.0% uses 'downlink', 5.6% uses 'rtt' and 5.6% uses 'ect'</div>
      <figcaption id="media-fig18-caption"><a href="#media-fig-18" class="anchor-link">Figure 18.</a> Enabled Client Hints.</figcaption>
    </figure>
    <p>The network-related Client Hints, <code>downlink</code>, <code>rtt</code>, and <code>ect</code>, are only available on Android Chrome.</p>
    <h3 id="media-lazy-loading"><a href="#media-lazy-loading" class="anchor-link">Lazy loading</a></h3>
    <p>Improving web page performance can be partially characterized as a game of illusions; moving slow things out of band and out of site of the user. In this way, lazy loading images is one of these illusions where the image and media content is only loaded when the user scrolls on the page. This improves perceived performance, even on slow networks, and saves the user from downloading bytes that are not otherwise viewed.</p>
    <p>
      Earlier, in <a href="#media-fig-5">Figure 5</a>, we showed that the volume of image content at the 75th percentile is far more than could theoretically be shown in a single desktop or mobile viewport. The <a href="https://developers.google.com/web/tools/lighthouse/audits/offscreen-images">offscreen images<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/offscreen-images</span></a> Lighthouse audit confirms this suspicion. The median web page has 27% of image content significantly below the fold. This grows to 84% at the 90th percentile.
    </p>
    <figure id="media-fig-19">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig19_lighthouse_audit_offscreen.png">
        <img src="/static/images/2019/media/fig19_lighthouse_audit_offscreen.png" alt="Figure 19. Lighthouse audit: Offscreen." aria-labelledby="media-fig19-caption" aria-describedby="media-fig19-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=2123391693&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig19-description" data-show-text="{{ show_description(19) }}" data-hide-text="{{ hide_description(19) }}">{{ show_description(19) }}</button>
      <div id="media-fig19-description" class="visually-hidden">A bar chart showing in the p10 percentile 0% of images are offscreen, in the p25 percentile 2% are offscreen, in the p50 percentile, 27% are offscreen, in the p75 percentile 64% are offscreen, and in the p90 percentile 84% of images are offscreen.</div>
      <figcaption id="media-fig19-caption"><a href="#media-fig-19" class="anchor-link">Figure 19.</a> Lighthouse audit: Offscreen.</figcaption>
    </figure>
    <p>The Lighthouse audit provides us a smell as there are a number of situations that can provide tricky to detect such as the use of quality placeholders.</p>
    <p>
      Lazy loading <a href="https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video">can be implemented<span class="fn">https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video</span></a> in many different ways including using a combination of Intersection Observers, Resize Observers, or using JavaScript libraries like <a href="https://github.com/aFarkas/lazysizes">lazySizes<span class="fn">https://github.com/aFarkas/lazysizes</span></a
      >, <a href="https://github.com/ApoorvSaxena/lozad.js">lozad<span class="fn">https://github.com/ApoorvSaxena/lozad.js</span></a
      >, and a host of others.
    </p>
    <p>In August 2019, Chrome 76 launched with the support for markup-based lazy loading using <code>&lt;img&gt;</code>. While the snapshot of websites used for the 2019 Web Almanac used July 2019 data, over 2,509 websites already utilized this feature.</p>
    <h3 id="media-accessibility"><a href="#media-accessibility" class="anchor-link">Accessibility</a></h3>
    <p>At the heart of image accessibility is the <code>alt</code> tag. When the <code>alt</code> tag is added to an image, this text can be used to describe the image to a user who is unable to view the images (either due to a disability, or a poor internet connection).</p>
    <p>We can detect all of the image tags in the HTML files of the dataset. Of 13 million image tags on desktop and 15 million on mobile, 91.6% of images have an <code>alt</code> tag present. At initial glance, it appears that image accessibility is in very good shape on the web. However, upon deeper inspection, the outlook is not as good. If we examine the length of the <code>alt</code> tags present in the dataset, we find that the median length of the <code>alt</code> tag is six characters. This maps to an empty <code>alt</code> tag (appearing as <code>alt=""</code>). Only 39% of images use <code>alt</code> text that is longer than six characters. The median value of "real" <code>alt</code> text is 31 characters, of which 25 actually describe the image.</p>
    <h2 id="media-video"><a href="#media-video" class="anchor-link">Video</a></h2>
    <p>While images dominate the media being served on web pages, videos are beginning to have a major role in content delivery on the web. According to HTTP Archive, we find that 4.06% of desktop and 2.99% of mobile sites are self-hosting video files. In other words, the video files are not hosted by websites like YouTube or Facebook.</p>
    <h3 id="media-video-formats"><a href="#media-video-formats" class="anchor-link">Video formats</a></h3>
    <p>Video can be delivered with many different formats and players. The dominant formats for mobile and desktop are <code>.ts</code> (segments of HLS streaming) and <code>.mp4</code> (the H264 MPEG):</p>
    <figure id="media-fig-20">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig20_video_files_by_extension.png">
        <img src="/static/images/2019/media/fig20_video_files_by_extension.png" alt="Figure 20. Count of video files by extension." aria-labelledby="media-fig20-caption" aria-describedby="media-fig20-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=999894252&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig20-description" data-show-text="{{ show_description(20) }}" data-hide-text="{{ hide_description(20) }}">{{ show_description(20) }}</button>
      <div id="media-fig20-description" class="visually-hidden">A bar chart showing 'ts' usage at 1,283,439 for desktop (792,952 for mobile), 'mp4' at 729,757 thousand for desktop (662,015 for mobile), 'webm' at 38,591 for desktop (32,417 for mobile), 'mov' at 22,194 for desktop (14,986 for mobile), 'm4s' at 17,338 for desktop (16,046 for mobile), 'm4v' at 7,466 for desktop (6,169 for mobile).</div>
      <figcaption id="media-fig20-caption"><a href="#media-fig-20" class="anchor-link">Figure 20.</a> Count of video files by extension.</figcaption>
    </figure>
    <p>Other formats that are seen include <code>webm</code>, <code>mov</code>, <code>m4s</code>, and <code>m4v</code> (MPEG-DASH streaming segments). It is clear that the majority of streaming on the web is HLS, and that the major format for static videos is the <code>mp4</code>.</p>
    <p>The median video size for each format is shown below:</p>
    <figure id="media-fig-21">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig21_median_vidoe_file_size_by_extension.png">
        <img src="/static/images/2019/media/fig21_median_vidoe_file_size_by_extension.png" alt="Figure 21. Median file size by video extension." aria-labelledby="media-fig21-caption" aria-describedby="media-fig21-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=821311770&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig21-description" data-show-text="{{ show_description(21) }}" data-hide-text="{{ hide_description(21) }}">{{ show_description(21) }}</button>
      <div id="media-fig21-description" class="visually-hidden">A bar chart showing 'ts' average file size at 335 KB for desktop (156 KB for mobile), 'mp4' at 175 KB for desktop (128 KB for mobile), 'webm' at 359 KB for desktop (192 KB for mobile), 'mov' at 128 KB for desktop (96 KB for mobile), 'm4s' at 324 KB for desktop (246 KB for mobile), and 'm4v' at 383 KB for desktop (161 KB for mobile)</div>
      <figcaption id="media-fig21-caption"><a href="#media-fig-21" class="anchor-link">Figure 21.</a> Median file size by video extension.</figcaption>
    </figure>
    <p>The median values are smaller on mobile, which probably just means that some sites that have very large videos on the desktop disable them for mobile, and that video streams serve smaller versions of videos to smaller screens.</p>
    <h3 id="media-video-file-sizes"><a href="#media-video-file-sizes" class="anchor-link">Video file sizes</a></h3>
    <p>When delivering video on the web, most videos are delivered with the HTML5 video player. The HTML video player is extremely customizable to deliver video for many different purposes. For example, to autoplay a video, the parameters <code>autoplay</code> and <code>muted</code> would be added. The <code>controls</code> attribute allows the user to start/stop and scan through the video. By parsing the video tags in the HTTP Archive, we're able to see the usage of each of these attributes:</p>
    <figure id="media-fig-22">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig22_html_video_tag_attributes_usage.png">
        <img src="/static/images/2019/media/fig22_html_video_tag_attributes_usage.png" alt="Figure 21. Usage of HTML video tag attributes." aria-labelledby="media-fig21-caption" aria-describedby="media-fig21-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=593556050&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig22-description" data-show-text="{{ show_description(22) }}" data-hide-text="{{ hide_description(22) }}">{{ show_description(22) }}</button>
      <div id="media-fig22-description" class="visually-hidden">A bar chart showing for desktop: 'autoplay' at 11.84%, 'buffered' at 0%, 'controls' at 12.05%, 'crossorigin' at 0.45%, 'currenttime' at 0.01%, 'disablepictureinpicture' at 0.01%, 'disableremoteplayback' at 0.01%, 'duration' at 0.05%, 'height' at 7.33%, 'intrinsicsize' at 0%, 'loop' at 14.57%, 'muted' at 13.92%, 'playsinline' at 6.49%, 'poster' at 8.98%, 'preload' at 11.62%, 'src' at 3.67%, 'use-credentials' at 0%, and 'width' at 9%. And for mobile 'autoplay' at 12.38%, 'buffered' at 0%, 'controls' at 13.88%, 'crossorigin' at 0.16%, 'currenttime' at 0.01%, disablepictureinpicture' at 0.01%, 'disableremoteplayback' at 0.02%, 'duration' at 0.09%, 'height' at 6.54%, intrinsicsize' at 0%, 'loop' at 14.44%, 'muted' at 13.55%, 'playsinline' at 6.15%, 'poster' at 9.29%, 'preload' at 10.34%, 'src' at 4.13%, 'use-credentials' at 0%, and 'width' at 9.03%.</div>
      <figcaption id="media-fig22-caption"><a href="#media-fig-22" class="anchor-link">Figure 22.</a> Usage of HTML video tag attributes.</figcaption>
    </figure>
    <p>The most common attributes are <code>autoplay</code>, <code>muted</code> and <code>loop</code>, followed by the <code>preload</code> tag and <code>width</code> and <code>height</code>. The use of the <code>loop</code> attribute is used in background videos, and also when videos are used to replace animated GIFs, so it is not surprising to see that it is often used on website home pages.</p>
    <p>While most of the attributes have similar usage on desktop and mobile, there are a few that have significant differences. The two attributes with the largest difference between mobile and desktop are <code>width</code> and <code>height</code>, with 4% fewer sites using these attributes on mobile. Interestingly, there is a small increase of the <code>poster</code> attribute (placing an image over the video window before playback) on mobile.</p>
    <p>From an accessibility point of view, the <code>&lt;track&gt;</code> tag can be used to add captions or subtitles. There is data in the HTTP Archive on how often the <code>&lt;track&gt;</code> tag is used, but on investigation, most of the instances in the dataset were commented out or pointed to an asset returning a <code>404</code> error. It appears that many sites use boilerplate JavaScript or HTML and do not remove the track, even when it is not in use.</p>
    <h3 id="media-video-players"><a href="#media-video-players" class="anchor-link">Video players</a></h3>
    <p>For more advanced playback (and to play video streams), the HTML5 native video player will not work. There are a few popular video libraries that are used to playback the video:</p>
    <figure id="media-fig-23">
      <a href="https://almanac.httparchive.org/static/images/2019/media/fig23_top_javascript_video_players.png">
        <img src="/static/images/2019/media/fig23_top_javascript_video_players.png" alt="Figure 23. Top JavaScript video players." aria-labelledby="media-fig23-caption" aria-describedby="media-fig23-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSViHIntdF6-bHAI0cl1HelY_X8rR4lf0P3W2Y8I5SyVMxG-ptggTHfWA0qrrU47RvuAydLE6Zex6L3/pubchart?oid=215677194&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig23-description" data-show-text="{{ show_description(23) }}" data-hide-text="{{ hide_description(23) }}">{{ show_description(23) }}</button>
      <div id="media-fig23-description" class="visually-hidden">Bar chart showing 'flowplayer' used by 3,365 desktop sites (3,400 mobile), 'hls' by 52,375 desktop sites (40,925 mobile), 'jwplayer' by 110,280 desktop sites (96,945 mobile), 'shaka' on 325 desktop sites (275 mobile) and 'video' used on 377,990 desktop sites (391,330 mobile)</div>
      <figcaption id="media-fig23-caption"><a href="#media-fig-23" class="anchor-link">Figure 23.</a> Top JavaScript video players.</figcaption>
    </figure>
    <p>The most popular (by far) is video.js, followed by JWPLayer and HLS.js. The authors do admit that it is possible that there are other files with the name "video.js" that may not be the same video playback library.</p>
    <h2 id="media-conclusion"><a href="#media-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>Nearly all web pages use images and video to some degree to enhance the user experience and create meaning. These media files utilize a large amount of resources and are a large percentage of the tonnage of websites (and they are not going away!) Utilization of alternative formats, lazy loading, responsive images, and image optimization can go a long way to lower the size of media on the web.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"II","chapter_number":5,"title":"Third Parties","description":"Third Parties chapter of the 2019 Web Almanac covering data of what third parties are used, what they are used for, performance impacts and privacy impacts.","authors":["patrickhulce"],"reviewers":["zcorpan","obto","jasti"],"translators":null,"discuss":"1760","results":"https://docs.google.com/spreadsheets/d/1iC4WkdadDdkqkrTY32g7hHKhXs9iHrr3Bva8CuPjVrQ/","queries":"05_Third_Parties","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-03-02T00:00:00.000Z","chapter":"third-parties"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="third-parties-introduction"><a href="#third-parties-introduction" class="anchor-link">Introduction</a></h2>
    <p>The open web is vast, linkable, and interoperable by design. The ability to grab someone else's complex library and use it on your site with a single <code>&lt;link&gt;</code> or <code>&lt;script&gt;</code> element has supercharged developers' productivity and enabled awesome new web experiences. On the flip side, the immense popularity of a select few third-party providers raises important performance, privacy, and security concerns. This chapter examines the prevalence and impact of third-party code on the web in 2019, the usage patterns that lead to the popularity of third-party solutions, and potential repercussions for the future of web experiences.</p>
    <h2 id="third-parties-definitions"><a href="#third-parties-definitions" class="anchor-link">Definitions</a></h2>
    <h3 id="third-parties-third-party"><a href="#third-parties-third-party" class="anchor-link">"Third Party"</a></h3>
    <p>A third party is an entity outside the primary site-user relationship, i.e. the aspects of the site not directly within the control of the site owner but present with their approval. For example, the Google Analytics script is an example of a common third-party resource.</p>
    <p>Third-party resources are:</p>
    <ul>
      <li>Hosted on a <em>shared</em> and <em>public</em> origin</li>
      <li>Widely used by a variety of sites</li>
      <li>Uninfluenced by an individual site owner</li>
    </ul>
    <p>To match these goals as closely as possible, the formal definition used throughout this chapter of a third-party resource is a resource that originates from a domain whose resources can be found on at least 50 unique pages in the HTTP Archive dataset.</p>
    <p>Note that using these definitions, third-party content served from a first-party domain is counted as first-party content. For example, self-hosting Google Fonts or bootstrap.css is counted as first-party content. Similarly, first-party content served from a third-party domain is counted as third-party content. For example, first-party images served over a CDN on a third-party domain are considered third-party content.</p>
    <h3 id="third-parties-provider-categories"><a href="#third-parties-provider-categories" class="anchor-link">Provider categories</a></h3>
    <p>
      This chapter divides third-party providers into one of these broad categories. A brief description is included below and the mapping of domain to category can be found in the <a href="https://github.com/patrickhulce/third-party-web/blob/8afa2d8cadddec8f0db39e7d715c07e85fb0f8ec/data/entities.json5">third-party-web repository<span class="fn">https://github.com/patrickhulce/third-party-web/blob/8afa2d8cadddec8f0db39e7d715c07e85fb0f8ec/data/entities.json5</span></a
      >.
    </p>
    <ul>
      <li><strong>Ad</strong> - display and measurement of advertisements</li>
      <li><strong>Analytics</strong> - tracking site visitor behavior</li>
      <li><strong>CDN</strong> - providers that host public shared utilities or private content of their users</li>
      <li><strong>Content</strong> - providers that facilitate publishers and host syndicated content</li>
      <li><strong>Customer Success</strong> - support and customer relationship management functionality</li>
      <li><strong>Hosting</strong> - providers that host the arbitrary content of their users</li>
      <li><strong>Marketing</strong> - sales, lead generation, and email marketing functionality</li>
      <li><strong>Social</strong> - social networks and their affiliated integrations</li>
      <li><strong>Tag Manager</strong> - provider whose sole role is to manage the inclusion of other third parties</li>
      <li><strong>Utility</strong> - code that aids the development objectives of the site owner</li>
      <li><strong>Video</strong> - providers that host the arbitrary video content of their users</li>
      <li><strong>Other</strong> - uncategorized or non-conforming activity</li>
    </ul>
    <p class="note"><strong>Note on CDNs</strong>: The CDN category here includes providers that provide resources on <strong>public</strong> CDN domains (e.g. bootstrapcdn.com, cdnjs.cloudflare.com, etc.) and does <strong>not</strong> include resources that are simply served over a CDN. i.e. putting Cloudflare in front of a page would not influence its first-party designation according to our criteria.</p>
    <h3 id="third-parties-caveats"><a href="#third-parties-caveats" class="anchor-link">Caveats</a></h3>
    <ul>
      <li>All data presented here is based on a non-interactive, cold load. These values could start to look quite different after user interaction.</li>
      <li>Roughly 84% of all third-party domains by request volume have been identified and categorized. The remaining 16% fall into the "Other" category.</li>
    </ul>
    <h2 id="third-parties-data"><a href="#third-parties-data" class="anchor-link">Data</a></h2>
    <figure id="third-parties-fig-1">
      <div class="big-number">93.59%</div>
      <figcaption><a href="#third-parties-fig-1" class="anchor-link">Figure 1.</a> Percentage of desktop pages that include at least one third-party resource.</figcaption>
    </figure>
    <p>Third-party code is everywhere. 93% of pages include at least one third-party resource, 76% of pages issue a request to an analytics domain, the median page requests content from at least 9 <em>unique</em> third-party domains that represent 35% of their total network activity, and the most active 10% of pages issue a whopping 175 third-party requests or more. It's not a stretch to say that third parties are an integral part of the web.</p>
    <figure id="third-parties-fig-2">
      <div class="big-number">55.63%</div>
      <figcaption><a href="#third-parties-fig-2" class="anchor-link">Figure 2.</a> Percentage of desktop pages that include at least one ad resource.</figcaption>
    </figure>
    <h3 id="third-parties-categories"><a href="#third-parties-categories" class="anchor-link">Categories</a></h3>
    <p>If the ubiquity of third-party content is unsurprising, perhaps more interesting is the breakdown of third-party content by provider type.</p>
    <p>While advertising might be the most user-visible example of third-party presence on the web, analytics providers are the most common third-party category with 76% of sites including at least one analytics request. CDNs at 63%, ads at 57%, and developer utilities like Sentry, Stripe, and Google Maps SDK at 56% follow up as a close second, third, and fourth for appearing on the most web properties. The popularity of these categories forms the foundation of our web usage patterns identified later in the chapter.</p>
    <h3 id="third-parties-providers"><a href="#third-parties-providers" class="anchor-link">Providers</a></h3>
    <p>A relatively small set of providers dominate the third-party landscape: the top 100 domains account for 30% of network requests across the web. Powerhouses like Google, Facebook, and YouTube make the headlines here with full percentage points of share each, but smaller entities like Wix and Shopify command a substantial portion of third-party popularity as well.</p>
    <p>
      While much could be said about every individual provider's popularity and performance impact, this more opinionated analysis is left as an exercise for the reader and other purpose-built tools such as <a href="https://thirdpartyweb.today">third-party-web<span class="fn">https://thirdpartyweb.today</span></a
      >.
    </p>
    <figure id="third-parties-fig-3">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Rank</th>
                <th>Third party domain</th>
                <th>Percent of requests</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td><code>fonts.gstatic.com</code></td>
                <td>2.53%</td>
              </tr>
              <tr>
                <td>2</td>
                <td><code>www.facebook.com</code></td>
                <td>2.38%</td>
              </tr>
              <tr>
                <td>3</td>
                <td><code>www.google-analytics.com</code></td>
                <td>1.71%</td>
              </tr>
              <tr>
                <td>4</td>
                <td><code>www.google.com</code></td>
                <td>1.17%</td>
              </tr>
              <tr>
                <td>5</td>
                <td><code>fonts.googleapis.com</code></td>
                <td>1.05%</td>
              </tr>
              <tr>
                <td>6</td>
                <td><code>www.youtube.com</code></td>
                <td>0.99%</td>
              </tr>
              <tr>
                <td>7</td>
                <td><code>connect.facebook.net</code></td>
                <td>0.97%</td>
              </tr>
              <tr>
                <td>8</td>
                <td><code>googleads.g.doubleclick.net</code></td>
                <td>0.93%</td>
              </tr>
              <tr>
                <td>9</td>
                <td><code>cdn.shopify.com</code></td>
                <td>0.76%</td>
              </tr>
              <tr>
                <td>10</td>
                <td><code>maps.googleapis.com</code></td>
                <td>0.75%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#third-parties-fig-3" class="anchor-link">Figure 3.</a> Top 10 most popular third-party domains.</figcaption>
    </figure>
    <figure id="third-parties-fig-4">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Rank</th>
                <th>Third party URL</th>
                <th>Percent of requests</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td><code>https://www.google-analytics.com/analytics.js</code></td>
                <td>0.64%</td>
              </tr>
              <tr>
                <td>2</td>
                <td><code>https://connect.facebook.net/en_US/fbevents.js</code></td>
                <td>0.20%</td>
              </tr>
              <tr>
                <td>3</td>
                <td><code>https://connect.facebook.net/signals/plugins/inferredEvents.js?v=2.8.51</code></td>
                <td>0.19%</td>
              </tr>
              <tr>
                <td>4</td>
                <td><code>https://staticxx.facebook.com/connect/xd_arbiter.php?version=44</code></td>
                <td>0.16%</td>
              </tr>
              <tr>
                <td>5</td>
                <td><code>https://fonts.gstatic.com/s/opensans/v16/mem8YaGs126MiZpBA-UFVZ0b.woff2</code></td>
                <td>0.13%</td>
              </tr>
              <tr>
                <td>6</td>
                <td><code>https://www.googletagservices.com/activeview/js/current/osd.js?cb=%2Fr20100101</code></td>
                <td>0.12%</td>
              </tr>
              <tr>
                <td>7</td>
                <td><code>https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2</code></td>
                <td>0.11%</td>
              </tr>
              <tr>
                <td>8</td>
                <td><code>https://googleads.g.doubleclick.net/pagead/id</code></td>
                <td>0.11%</td>
              </tr>
              <tr>
                <td>9</td>
                <td><code>https://fonts.gstatic.com/s/roboto/v19/KFOmCnqEu92Fr1Mu4mxK.woff2</code></td>
                <td>0.10%</td>
              </tr>
              <tr>
                <td>10</td>
                <td><code>https://www.googleadservices.com/pagead/conversion_async.js</code></td>
                <td>0.10%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#third-parties-fig-4" class="anchor-link">Figure 4.</a> Top 10 most popular third-party requests.</figcaption>
    </figure>
    <h3 id="third-parties-resource-types"><a href="#third-parties-resource-types" class="anchor-link">Resource types</a></h3>
    <p>The resource type breakdown of third-party content also lends insight into how third-party code is used across the web. While first-party requests are 56% images, 23% script, 14% CSS, and only 4% HTML, third-party requests skew more heavily toward script and HTML at 32% script, 34% images, 12% HTML, and only 6% CSS. While this suggests that third-party code is less frequently used to aid the design and instead used more frequently to facilitate or observe interactions than first-party code, a breakdown of resource types by party status tells a more nuanced story. While CSS and images are dominantly first-party at 70% and 64% respectively, fonts are largely served by third-party providers with only 28% being served from first-party sources. This concept of usage patterns is explored in more depth later in this chapter.</p>
    <figure id="third-parties-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/third-parties/fig5.png">
        <img src="/static/images/2019/third-parties/fig5.png" alt="Figure 5. Percent of third-party requests by category and content type." aria-labelledby="third-parties-fig5-caption" aria-describedby="third-parties-fig5-description" width="600" height="387" data-width="600" data-height="387" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRO5jS8JpjYdTr9poYmpyw-BL1LPQtfzHx_1hLRk9lgwkHQERuyELgF_rQ-4CpTbdbAyI9u1ggtPlLQ/pubchart?oid=488955458&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="third-parties-fig5-description" class="visually-hidden">Chart showing the breakdown of content types for each third party category. Images and scripts make up the majority of requests for each category. CDN requests have an especially large proportion of fonts.</div>
      <figcaption id="third-parties-fig5-caption"><a href="#third-parties-fig-5" class="anchor-link">Figure 5.</a> Percent of third-party requests by category and content type.</figcaption>
    </figure>
    <p>Several other amusing factoids jump out from this data. Tracking pixels (image requests to analytics domains) make up 1.6% of all network requests, six times as many video requests are to social networks like Facebook and Twitter than dedicated video providers like YouTube and Vimeo (presumably because the default YouTube embed consists of HTML and a preview thumbnail but not an autoplaying video), and there are still more requests for first-party images than all scripts combined.</p>
    <h3 id="third-parties-request-count"><a href="#third-parties-request-count" class="anchor-link">Request count</a></h3>
    <p>49% of all requests are third-party. At 51%, first-party can still narrowly hold on to the crown in 2019 of comprising the majority of the web resources. Given that just under half of all the requests are third-party yet a small set of pages do not include any at all, the most active third-party users must be doing quite a bit more than their fair share. Indeed, at the 75th, 90th, and 99th percentiles we see nearly all of the page being comprised of third-party content. In fact, for some sites heavily relying on distributed WYSIWYG platforms like Wix and SquareSpace, the root document might be the sole first-party request!</p>
    <!-- insert graphic of metric 05_11 -->
    <p>The number of requests issued by each third-party provider also varies considerably by category. While analytics are the most widespread third-party category across websites, they account for only 7% of all third-party network requests. Ads, on the other hand, are found on nearly 20% fewer sites yet make up 25% of all third-party network requests. Their outsized resource impact compared to their popularity will be a theme we continue to uncover in the remaining data.</p>
    <h3 id="third-parties-byte-weight"><a href="#third-parties-byte-weight" class="anchor-link">Byte weight</a></h3>
    <p>While 49% of requests are third-party, their share of the web in terms of bytes is quite a bit lower at only 28%. The same goes for the breakdown by multiple resource types. Third-party fonts make up 72% of all fonts, but they're only 53% of font bytes; 74% of HTML requests, but only 39% of HTML bytes; 68% of video requests, but only 31% of video bytes. All this seems to suggest third-party providers are responsible stewards who keep their response sizes low, and, for the most part, that is in fact the case until you look at scripts.</p>
    <p>Despite serving 57% of scripts, third parties comprise 64% of script bytes. meaning their scripts are larger on average than first-party scripts. This is an early warning sign for their performance impact to come in the next few sections.</p>
    <figure id="third-parties-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/third-parties/fig7.png">
        <img src="/static/images/2019/third-parties/fig7.png" alt="Figure 7. Distributions of resource bytes per third-party category." aria-labelledby="third-parties-fig7-caption" aria-describedby="third-parties-fig7-description" width="600" height="387" data-width="600" data-height="387" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRO5jS8JpjYdTr9poYmpyw-BL1LPQtfzHx_1hLRk9lgwkHQERuyELgF_rQ-4CpTbdbAyI9u1ggtPlLQ/pubchart?oid=1167032693&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="third-parties-fig7-description" class="visually-hidden">Chart showing the breakdown of bytes for each content type per third party category. Images and scripts are relatively evenly distributed across categories. 80% of fonts come from CDNs. Video comes from "content" third-parties.</div>
      <figcaption id="third-parties-fig7-caption"><a href="#third-parties-fig-7" class="anchor-link">Figure 7.</a> Distributions of resource bytes per third-party category.</figcaption>
    </figure>
    <!--

```<insert graphic of metric 05_12>```
-->
    <p>As for specific third-party providers, the same juggernauts topping the request count leaderboards make their appearance in byte weight as well. The only few notable movements are the large, media-heavy providers such as YouTube, Shopify, and Twitter which climb to the top of the byte impact charts.</p>
    <!--```<insert table of metric 05_07>```-->
    <h3 id="third-parties-script-execution"><a href="#third-parties-script-execution" class="anchor-link">Script execution</a></h3>
    <p>57% of script execution time is from third-party scripts, and the top 100 domains already account for 48% of all script execution time on the web. This underscores just how large an impact a select few entities really have on web performance. This topic is explored more in depth in the <a href="#third-parties-performance">Repercussions &gt; Performance</a> section.</p>
    <!--```<insert graphic of metric 05_05>```-->
    <!--```<insert graphic of metric 05_13>```-->
    <p>The category breakdowns among script execution largely follow that of resource counts. Here too advertising looms largest. Ad scripts comprise 25% of third-party script execution time with hosting and social providers in a distant tie for second at 12%.</p>
    <!--```<insert table of metric 05_08>```-->
    <!--```<insert table of metric 05_10>```-->
    <p>
      While much could be said about every individual provider's popularity and performance impact, this more opinionated analysis is left as an exercise for the reader and other purpose-built tools such as the previously mentioned <a href="https://thirdpartyweb.today">third-party-web<span class="fn">https://thirdpartyweb.today</span></a
      >.
    </p>
    <h2 id="third-parties-usage-patterns"><a href="#third-parties-usage-patterns" class="anchor-link">Usage patterns</a></h2>
    <p>Why do site owners use third-party code? How did third-party content grow to be nearly half of all network requests? What are all these requests doing? Answers to these questions lie in the three primary usage patterns of third-party resources. Broadly, site owners reach for third parties to generate and consume data from their users, monetize their site experiences, and simplify web development.</p>
    <h3 id="third-parties-generate-and-consume-data"><a href="#third-parties-generate-and-consume-data" class="anchor-link">Generate and consume data</a></h3>
    <p>Analytics is the most popular third-party category found across the web and yet is minimally user-visible. Consider the volume of information at play in the lifetime of a web visit; there's user context, device, browser, connection quality, location, page interactions, session length, return visitor status, and more being generated continuously. It's difficult, cumbersome, and expensive to maintain tools that warehouse, normalize, and analyze time series data of this magnitude. While nothing categorically necessitates that analytics fall into the domain of third-party providers, the widespread attractiveness of understanding your users, deep complexity of the problem space, and increasing emphasis on managing data respectfully and responsibly naturally surfaces analytics as a popular third-party usage pattern.</p>
    <p>There's also a flip side to user data though: consumption. While analytics is about generating data from your site's visitors, other third-party resources focus on consuming data about your visitors that is known only by others. Social providers fall squarely into this usage pattern. A site owner <em>must</em> use Facebook resources if they wish to integrate information from a visitor's Facebook profile into their site. As long as site owners are interested in personalizing their experience with widgets from social networks and leveraging the social networks of their visitors to increase their reach, social integrations are likely to remain the domain of third-party entities for the foreseeable future.</p>
    <h3 id="third-parties-monetize-web-traffic"><a href="#third-parties-monetize-web-traffic" class="anchor-link">Monetize web traffic</a></h3>
    <p>
      The open model of the web does not always serve the financial interests of content creators to their liking and many site owners resort to monetizing their sites with advertising. Because building direct relationships with advertisers and negotiating pricing contracts is a relatively difficult and time-consuming process, this concern is largely handled by third-party providers performing targeted advertising and real-time bidding. Widespread negative public opinion, the popularity of ad blocking technology, and regulatory action in major global markets such as Europe pose the largest threat to the continued use of third-party providers for monetization. While it's unlikely that site owners suddenly strike their own advertising deals or build bespoke ad networks, alternative monetization models like paywalls and experiments like Brave's <a href="https://basicattentiontoken.org/">Basic Attention Token<span class="fn">https://basicattentiontoken.org/</span></a> have a real chance of shaking up the third-party ad landscape of the future.
    </p>
    <h3 id="third-parties-simplify-development"><a href="#third-parties-simplify-development" class="anchor-link">Simplify development</a></h3>
    <p>Above all, third-party resources are used to simplify the web development experience. Even previous usage patterns could arguably fall into this pattern as well. Whether analyzing user behavior, communicating with advertisers, or personalizing the user experience, third-party resources are used to make first-party development easier.</p>
    <p>Hosting providers are the most extreme example of this pattern. Some of these providers even enable anyone on Earth to become a site owner with no technical expertise necessary. They provide hosting of assets, tools to build sites without coding experience, and domain registration services.</p>
    <p>The remainder of third-party providers also tend to fall into this usage pattern. Whether it's hosting of a utility library such as jQuery for usage by front-end developers cached on Cloudflare's edge servers or a vast library of common fonts served from a popular Google CDN, third-party content is another way to give the site owner one fewer thing to worry about and, maybe, just maybe, make the job of delivering a great experience a little bit easier.</p>
    <h2 id="third-parties-repercussions"><a href="#third-parties-repercussions" class="anchor-link">Repercussions</a></h2>
    <h3 id="third-parties-performance"><a href="#third-parties-performance" class="anchor-link">Performance</a></h3>
    <p>The <a href="#performance">performance</a> impact of third-party content is neither categorically good nor bad. There are good and bad actors across the spectrum and different category types have varying levels of influence.</p>
    <p>The good: shared third-party font and stylesheet utilities are, on average, delivered more efficiently than their first-party counterparts.</p>
    <p>Utilities, CDNs, and Content categories are the brightest spots on the third-party performance landscape. They offer optimized versions of the same sort of content that would otherwise be served from first-party sources. Google Fonts and Typekit serve optimized fonts that are smaller on average than first-party fonts, Cloudflare CDN serves a minified version of open source libraries that might be accidentally served in development mode by some site owners, Google Maps SDK efficiently delivers complex maps that might otherwise be naively shipped as large images.</p>
    <p>The bad: a very small set of entities represent a very large chunk of JavaScript execution time carrying out narrow set of functionality on pages.</p>
    <p>Ads, social, hosting, and certain analytics providers represent the largest negative impact on web performance. While hosting providers deliver a majority of a site's content and will understandably have a larger performance impact than other third-party categories, they also serve almost entirely static sites that demand very little JavaScript in most cases that should not justify the volume of script execution time. The other categories hurting performance though have even less of an excuse. They fill very narrow roles on each page they appear on and yet quickly take over a majority of resources. For example, the Facebook "Like" button and associated social widgets take up extraordinarily little screen real estate and are a fraction of most web experiences, and yet the median impact on pages with social third parties is nearly 20% of their total JavaScript execution time. The situation is similar for analytics - tracking libraries do not directly contribute to the perceived user experience, and yet the 90th percentile impact on pages with analytics third parties is 44% of their total JavaScript execution time.</p>
    <p>The silver lining of such a small number of entities enjoying such large market share is that a very limited and concentrated effort can have an enormous impact on the web as a whole. Performance improvements at just the top few hosting providers can improve 2-3% of <em>all</em> web requests.</p>
    <h3 id="third-parties-privacy"><a href="#third-parties-privacy" class="anchor-link">Privacy</a></h3>
    <p>The abundance of analytics providers and top-heavy concentration of script execution raises two primary privacy concerns for site visitors: the largest use case of third-parties is for site owners to track their users and a handful of companies receive information on a large swath of web traffic.</p>
    <p>
      The interest of site owners in understanding and analyzing user behavior is not malicious on its own, but the widespread and relatively behind-the-scenes nature of web analytics raises valid concerns, and users, companies, and lawmakers have taken notice in recent years with privacy regulation such as <a href="https://en.wikipedia.org/wiki/General_Data_Protection_Regulation">GDPR<span class="fn">https://en.wikipedia.org/wiki/General_Data_Protection_Regulation</span></a> in Europe and the <a href="https://en.wikipedia.org/wiki/California_Consumer_Privacy_Act">CCPA<span class="fn">https://en.wikipedia.org/wiki/California_Consumer_Privacy_Act</span></a> in California. Ensuring that developers handle user data responsibly, treat the user respectfully, and are transparent with what data is collected is key to keeping analytics the most popular third-party category and maintaining the symbiotic nature of analyzing user behavior to deliver future user value.
    </p>
    <p>The top-heavy concentration of script execution is great for the potential impact of performance improvements, but less exciting for the privacy ramifications. 29% of <em>all</em> script execution time across the web is just from scripts on domains owned by Google or Facebook. That's a very large percentage of CPU time that is controlled by just two entities. It's critical to ensure that the same privacy protections held to analytics providers be applied in these other ad, social, and developer utility categories as well.</p>
    <h3 id="third-parties-security"><a href="#third-parties-security" class="anchor-link">Security</a></h3>
    <p>
      While the topic of security is covered more in-depth in the <a href="#security">Security</a> chapter, the security implications of introducing external dependencies to your site go hand-in-hand with privacy concerns. Allowing third parties to execute arbitrary JavaScript effectively provides them with complete control over your page. When a script can control the DOM and <code>window</code>, it can do everything. Even if code has no security concerns, it can introduce a single point of failure, <a href="https://www.stevesouders.com/blog/2010/06/01/frontend-spof/">which has been recognized as a potential problem for some time now<span class="fn">https://www.stevesouders.com/blog/2010/06/01/frontend-spof/</span></a
      >.
    </p>
    <p>
      <a href="https://csswizardry.com/2019/05/self-host-your-static-assets/">Self-hosting third-party content<span class="fn">https://csswizardry.com/2019/05/self-host-your-static-assets/</span></a> addresses some of the concerns mentioned here - and others. Additionally with browsers increasingly <a href="https://chromestatus.com/feature/5730772021411840">partitioning HTTP caches<span class="fn">https://chromestatus.com/feature/5730772021411840</span></a> the benefits of loading directly from the third-party are increasingly questionable. Perhaps this is a better way to consume third-party content for many use cases, even if it makes measuring its impact more difficult.
    </p>
    <h2 id="third-parties-conclusion"><a href="#third-parties-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>Third-party content is everywhere. This is hardly surprising; the entire basis of the web is to allow interconnectedness and linking. In this chapter we have examined third-party content in terms of assets hosted away from the main domain. If we had included self-hosted third-party content (e.g. common open source libraries hosted on the main domain), third-party usage would have been even larger!</p>
    <p>
      While <a href="https://en.wikipedia.org/wiki/Code_reuse">reuse in computer technologies<span class="fn">https://en.wikipedia.org/wiki/Code_reuse</span></a> is generally a best practice, third parties on the web introduce dependencies that have a considerable impact on the performance, privacy, and security of a page. Self-hosting and careful provider selection can go a long way to mitigate these effects
    </p>
    <p>Regardless of the important question of how third-party content is added to a page, the conclusion is the same: third parties are an integral part of the web!</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"I","chapter_number":6,"title":"Fonts","description":"Fonts chapter of the 2019 Web Almanac covering where fonts are loaded from, font formats, font loading performance, variable fonts and color fonts.","authors":["zachleat"],"reviewers":["hyperpress","AymenLoukil"],"translators":null,"discuss":"1761","results":"https://docs.google.com/spreadsheets/d/108g6LXdC3YVsxmX1CCwrmpZ3-DmbB8G_wwgQHX5pn6Q/","queries":"06_Fonts","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-03-02T00:00:00.000Z","chapter":"fonts"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="fonts-introduction"><a href="#fonts-introduction" class="anchor-link">Introduction</a></h2>
    <p>Web fonts enable beautiful and functional typography on the web. Using web fonts not only empowers design, but it democratizes a subset of design, as it allows easier access to those who might not have particularly strong design skills. However, for all the good they can do, web fonts can also do great harm to your site's performance if they are not loaded properly.</p>
    <p>Are they a net positive for the web? Do they provide more benefit than harm? Are the web standards cowpaths sufficiently paved to encourage web font loading best practices by default? And if not, what needs to change? Let's take a data-driven peek at whether or not we can answer those questions by inspecting how web fonts are used on the web today.</p>
    <h2 id="fonts-where-did-you-get-those-web-fonts"><a href="#fonts-where-did-you-get-those-web-fonts" class="anchor-link">Where did you get those web fonts?</a></h2>
    <p>The first and most prominent question: performance. There is a whole chapter dedicated to <a href="#performance">performance</a> but we will delve a little into font-specific performance issues here.</p>
    <p>
      Using hosted web fonts enables ease of implementation and maintenance, but self-hosting offers the best performance. Given that web fonts by default make text invisible while the web font is loading (also known as the <a href="https://css-tricks.com/fout-foit-foft/">Flash of Invisible Text<span class="fn">https://css-tricks.com/fout-foit-foft/</span></a
      >, or FOIT), the performance of web fonts can be more critical than non-blocking assets like images.
    </p>
    <h3 id="fonts-are-fonts-being-hosted-on-the-same-host-or-by-a-different-host"><a href="#fonts-are-fonts-being-hosted-on-the-same-host-or-by-a-different-host" class="anchor-link">Are fonts being hosted on the same host or by a different host?</a></h3>
    <p>Differentiating self-hosting against third-party hosting is increasingly relevant in an <a href="#http2">HTTP/2</a> world, where the performance gap between a same-host and different-host connection can be wider. Same-host requests have the huge benefit of a better potential for prioritization against other same-host requests in the waterfall.</p>
    <p>Recommendations to mitigate the performance costs of loading web fonts from another host include using the <code>preconnect</code>, <code>dns-prefetch</code>, and <code>preload</code> <a href="#resource-hints">resource hints</a>, but high priority web fonts should be same-host requests to minimize the performance impact of web fonts. This is especially important for fonts used by very visually prominent content or body copy occupying the majority of a page.</p>
    <figure id="fonts-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/fonts/fig1.png">
        <img src="/static/images/2019/fonts/fig1.png" alt="Figure 1. Popular web font hosting strategies." aria-labelledby="fonts-fig1-description" aria-describedby="fonts-fig1-caption" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQDogXDb3BwZZHrBT39qccP_LJoCScD3QEi_FmjT_8VDPD_1Srpz-g7ZuuTUEb8pYXBpDmQzZ1hQh7q/pubchart?oid=1546332659&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="fonts-fig1-description" class="visually-hidden">Bar chart showing the popularity of third-party and self-hosting strategies for web fonts. 75% of mobile web pages use third-party hosts and 25% self-host. Desktop websites have similar usage.</div>
      <figcaption id="fonts-fig1-caption"><a href="#fonts-fig-1" class="anchor-link">Figure 1.</a> Popular web font hosting strategies.</figcaption>
    </figure>
    <p>The fact that three quarters are hosted is perhaps unsurprising given Google Fonts dominance that we will discuss <a href="#fonts-what-are-the-most-popular-third-party-hosts">below</a>.</p>
    <p>Google serves fonts using third-party CSS files hosted on <code>https://fonts.googleapis.com</code>. Developers add requests to these stylesheets using <code>&lt;link&gt;</code> tags in their markup. While these stylesheets are render blocking, they are very small. However, the font files are hosted on yet another domain, <code>https://fonts.gstatic.com</code>. The model of requiring two separate hops to two different domains makes <code>preconnect</code> a great option here for the second request that will not be discovered until the CSS is downloaded.</p>
    <p>
      Note that while <code>preload</code> would be a nice addition to load the font files higher in the request waterfall (remember that <code>preconnect</code> sets up the connection, it doesnt request the file content), <code>preload</code> is not yet available with Google Fonts. Google Fonts generates unique URLs for their font files <a href="https://github.com/google/fonts/issues/1067">which are subject to change<span class="fn">https://github.com/google/fonts/issues/1067</span></a
      >.
    </p>
    <h3 id="fonts-what-are-the-most-popular-third-party-hosts"><a href="#fonts-what-are-the-most-popular-third-party-hosts" class="anchor-link">What are the most popular third-party hosts?</a></h3>
    <figure id="fonts-fig-2">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Host</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>fonts.gstatic.com</td>
                <td class="numeric">75.4%</td>
                <td class="numeric">74.9%</td>
              </tr>
              <tr>
                <td>use.typekit.net</td>
                <td class="numeric">7.2%</td>
                <td class="numeric">6.6%</td>
              </tr>
              <tr>
                <td>maxcdn.bootstrapcdn.com</td>
                <td class="numeric">1.8%</td>
                <td class="numeric">2.0%</td>
              </tr>
              <tr>
                <td>use.fontawesome.com</td>
                <td class="numeric">1.1%</td>
                <td class="numeric">1.2%</td>
              </tr>
              <tr>
                <td>static.parastorage.com</td>
                <td class="numeric">0.8%</td>
                <td class="numeric">1.2%</td>
              </tr>
              <tr>
                <td>fonts.shopifycdn.com</td>
                <td class="numeric">0.6%</td>
                <td class="numeric">0.6%</td>
              </tr>
              <tr>
                <td>cdn.shopify.com</td>
                <td class="numeric">0.5%</td>
                <td class="numeric">0.5%</td>
              </tr>
              <tr>
                <td>cdnjs.cloudflare.com</td>
                <td class="numeric">0.4%</td>
                <td class="numeric">0.5%</td>
              </tr>
              <tr>
                <td>use.typekit.com</td>
                <td class="numeric">0.4%</td>
                <td class="numeric">0.4%</td>
              </tr>
              <tr>
                <td>netdna.bootstrapcdn.com</td>
                <td class="numeric">0.3%</td>
                <td class="numeric">0.4%</td>
              </tr>
              <tr>
                <td>fast.fonts.net</td>
                <td class="numeric">0.3%</td>
                <td class="numeric">0.3%</td>
              </tr>
              <tr>
                <td>static.dealer.com</td>
                <td class="numeric">0.2%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td>themes.googleusercontent.com</td>
                <td class="numeric">0.2%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td>static-v.tawk.to</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.3%</td>
              </tr>
              <tr>
                <td>stc.utdstc.com</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td>cdn.jsdelivr.net</td>
                <td class="numeric">0.2%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td>kit-free.fontawesome.com</td>
                <td class="numeric">0.2%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td>open.scdn.co</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.1%</td>
              </tr>
              <tr>
                <td>assets.squarespace.com</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.1%</td>
              </tr>
              <tr>
                <td>fonts.jimstatic.com</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.2%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#fonts-fig-2" class="anchor-link">Figure 2.</a> Top 20 font hosts by percent of requests.</figcaption>
    </figure>
    <p>The dominance of Google Fonts here was simultaneously surprising and unsurprising at the same time. It was unsurprising in that I expected the service to be the most popular and surprising in the sheer dominance of its popularity. 75% of font requests is astounding. TypeKit was a distant single-digit second place, with the Bootstrap library accounting for an even more distant third place.</p>
    <figure id="fonts-fig-3">
      <div class="big-number">29%</div>
      <figcaption><a href="#fonts-fig-3" class="anchor-link">Figure 3.</a> Percent of pages that include a Google Fonts stylesheet link in the document <code>&lt;head&gt;</code>.</figcaption>
    </figure>
    <p>While the high usage of Google Fonts here is very impressive, it is also noteworthy that only 29% of pages included a Google Fonts <code>&lt;link&gt;</code> element. This could mean a few things:</p>
    <ul>
      <li>When pages uses Google Fonts, they use <em>a lot</em> of Google Fonts. They are provided without monetary cost, after all. Perhaps they're being used in a popular WYSIWYG editor? This seems like a very likely explanation.</li>
      <li>Or a more unlikely story is that it could mean that a lot of people are using Google Fonts with <code>@import</code> instead of <code>&lt;link&gt;</code>.</li>
      <li>
        Or if we want to go off the deep end into super unlikely scenarios, it could mean that many people are using Google Fonts with an <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Link">HTTP <code>Link:</code> header<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Link</span></a> instead.
      </li>
    </ul>
    <figure id="fonts-fig-4">
      <div class="big-number">0.4%</div>
      <figcaption><a href="#fonts-fig-4" class="anchor-link">Figure 4.</a> Percent of pages that include a Google Fonts stylesheet link as the first child in the document <code>&lt;head&gt;</code>.</figcaption>
    </figure>
    <p>Google Fonts documentation encourages the <code>&lt;link&gt;</code> for the Google Fonts CSS to be placed as the first child in the <code>&lt;head&gt;</code> of a page. This is a big ask! In practice, this is not common as only half a percent of all pages (about 20,000 pages) took this advice.</p>
    <p>More so, if a page is using <code>preconnect</code> or <code>dns-prefetch</code> as <code>&lt;link&gt;</code> elements, these would come before the Google Fonts CSS anyway. Read on for more about these resource hints.</p>
    <h3 id="fonts-speeding-up-third-party-hosting"><a href="#fonts-speeding-up-third-party-hosting" class="anchor-link">Speeding up third-party hosting</a></h3>
    <p>As mentioned above, a super easy way to speed up web font requests to a third-party host is to use the <code>preconnect</code> <a href="#resource-hints">resource hint</a>.</p>
    <figure id="fonts-fig-5">
      <div class="big-number">1.7%</div>
      <figcaption><a href="#fonts-fig-5" class="anchor-link">Figure 5.</a> Percent of mobile pages preconnecting to a web font host.</figcaption>
    </figure>
    <p>
      Wow! Less than 2% of pages are using <a href="https://web.dev/uses-rel-preconnect"><code>preconnect</code><span class="fn">https://web.dev/uses-rel-preconnect</span></a
      >! Given that Google Fonts is at 75%, this should be higher! Developers: if you use Google Fonts, use <code>preconnect</code>! Google Fonts: proselytize <code>preconnect</code> more!
    </p>
    <p>In fact, if you're using Google Fonts go ahead and add this to your <code>&lt;head&gt;</code> if it's not there already:</p>
    <p><code>&lt;link rel="preconnect" href="https://fonts.gstatic.com/"&gt;</code></p>
    <h3 id="fonts-most-popular-typefaces"><a href="#fonts-most-popular-typefaces" class="anchor-link">Most popular typefaces</a></h3>
    <figure id="fonts-fig-6">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Rank</th>
                <th>Font family</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="numeric">1</td>
                <td>Open Sans</td>
                <td class="numeric">24%</td>
                <td class="numeric">22%</td>
              </tr>
              <tr>
                <td class="numeric">2</td>
                <td>Roboto</td>
                <td class="numeric">15%</td>
                <td class="numeric">19%</td>
              </tr>
              <tr>
                <td class="numeric">3</td>
                <td>Montserrat</td>
                <td class="numeric">5%</td>
                <td class="numeric">4%</td>
              </tr>
              <tr>
                <td class="numeric">4</td>
                <td>Source Sans Pro</td>
                <td class="numeric">4%</td>
                <td class="numeric">3%</td>
              </tr>
              <tr>
                <td class="numeric">5</td>
                <td>Noto Sans JP</td>
                <td class="numeric">3%</td>
                <td class="numeric">3%</td>
              </tr>
              <tr>
                <td class="numeric">6</td>
                <td>Lato</td>
                <td class="numeric">3%</td>
                <td class="numeric">3%</td>
              </tr>
              <tr>
                <td class="numeric">7</td>
                <td>Nanum Gothic</td>
                <td class="numeric">4%</td>
                <td class="numeric">2%</td>
              </tr>
              <tr>
                <td class="numeric">8</td>
                <td>Noto Sans KR</td>
                <td class="numeric">3%</td>
                <td class="numeric">2%</td>
              </tr>
              <tr>
                <td class="numeric">9</td>
                <td>Roboto Condensed</td>
                <td class="numeric">2%</td>
                <td class="numeric">2%</td>
              </tr>
              <tr>
                <td class="numeric">10</td>
                <td>Raleway</td>
                <td class="numeric">2%</td>
                <td class="numeric">2%</td>
              </tr>
              <tr>
                <td class="numeric">11</td>
                <td>FontAwesome</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">12</td>
                <td>Roboto Slab</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">13</td>
                <td>Noto Sans TC</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">14</td>
                <td>Poppins</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">15</td>
                <td>Ubuntu</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">16</td>
                <td>Oswald</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">17</td>
                <td>Merriweather</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">18</td>
                <td>PT Sans</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">19</td>
                <td>Playfair Display</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
              <tr>
                <td class="numeric">20</td>
                <td>Noto Sans</td>
                <td class="numeric">1%</td>
                <td class="numeric">1%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#fonts-fig-6" class="anchor-link">Figure 6.</a> Top 20 font families as a percent of all font declarations.</figcaption>
    </figure>
    <p>
      It is unsurprising that the top entries here seem to match up very similarly to <a href="https://fonts.google.com/?sort=popularity">Google Fonts' list of fonts sorted by popularity<span class="fn">https://fonts.google.com/?sort=popularity</span></a
      >.
    </p>
    <h2 id="fonts-what-font-formats-are-being-used"><a href="#fonts-what-font-formats-are-being-used" class="anchor-link">What font formats are being used?</a></h2>
    <p>
      <a href="https://caniuse.com/#feat=woff2">WOFF2 is pretty well supported<span class="fn">https://caniuse.com/#feat=woff2</span></a> in web browsers today. Google Fonts serves WOFF2, a format that offers improved compression over its predecessor WOFF, which was itself already an improvement over other existing font formats.
    </p>
    <figure id="fonts-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/fonts/fig7.png">
        <img src="/static/images/2019/fonts/fig7.png" alt="Figure 7. Popularity of web font MIME types." aria-labelledby="fonts-fig7-caption" aria-describedby="fonts-fig7-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQDogXDb3BwZZHrBT39qccP_LJoCScD3QEi_FmjT_8VDPD_1Srpz-g7ZuuTUEb8pYXBpDmQzZ1hQh7q/pubchart?oid=998584594&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="fonts-fig7-description" class="visually-hidden">Bar chart showing the popularity of web font MIME types. WOFF2 is used on 74% of fonts, followed by 13% WOFF, 6% octet-stream, 3% TTF, 2% plain, 1% HTML, 1% SFNT, and fewer than 1% for all other types. Desktop and mobile have similar distributions.</div>
      <figcaption id="fonts-fig7-caption"><a href="#fonts-fig-7" class="anchor-link">Figure 7.</a> Popularity of web font MIME types.</figcaption>
    </figure>
    <p>From my perspective, an argument could be made to go WOFF2-only for web fonts after seeing the results here. I wonder where the double-digit WOFF usage is coming from? Perhaps developers still serving web fonts to Internet Explorer?</p>
    <p>Third place <code>octet-stream</code> (and <code>plain</code> a little further down) would seem to suggest that a lot of web servers are configured improperly, sending an incorrect MIME type with web font file requests.</p>
    <p>Let's dig a bit deeper and look at the <code>format()</code> values used in the <code>src:</code> property of <code>@font-face</code> declarations:</p>
    <figure id="fonts-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/fonts/fig8.png">
        <img src="/static/images/2019/fonts/fig8.png" alt="Figure 8. Popularity of font formats in <code>@font-face</code> declarations." aria-labelledby="fonts-fig8-caption" aria-describedby="fonts-fig8-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQDogXDb3BwZZHrBT39qccP_LJoCScD3QEi_FmjT_8VDPD_1Srpz-g7ZuuTUEb8pYXBpDmQzZ1hQh7q/pubchart?oid=700778025&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="fonts-fig8-description" class="visually-hidden">Bar chart showing the popularity of formats used in font-face declarations. 69% of desktop pages' @font-face declarations specify the WOFF2 format, 11% WOFF, 10% TrueType, 8% SVG, 2% EOT, and fewer than 1% OpenType, TTF, and OTF. The distribution for mobile pages is similar.</div>
      <figcaption id="fonts-fig8-caption"><a href="#fonts-fig-8" class="anchor-link">Figure 8.</a> Popularity of font formats in <code>@font-face</code> declarations.</figcaption>
    </figure>
    <p>
      I was hoping to see <a href="https://caniuse.com/#feat=svg-fonts">SVG fonts<span class="fn">https://caniuse.com/#feat=svg-fonts</span></a> on the decline. They're buggy and implementations have been removed from every browser except Safari. Time to drop these, y'all.
    </p>
    <p>The SVG data point here also makes me wonder what MIME type y'all are serving these SVG fonts with. I don't see <code>image/svg+xml</code> anywhere in Figure 7. Anyway, don't worry about fixing that, just get rid of them!</p>
    <h3 id="fonts-woff2-only"><a href="#fonts-woff2-only" class="anchor-link">WOFF2-only</a></h3>
    <figure id="fonts-fig-9">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Rank</th>
                <th>Format combinations</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="numeric">1</td>
                <td>woff2</td>
                <td class="numeric">84.0%</td>
                <td class="numeric">81.9%</td>
              </tr>
              <tr>
                <td class="numeric">2</td>
                <td>svg, truetype, woff</td>
                <td class="numeric">4.3%</td>
                <td class="numeric">4.0%</td>
              </tr>
              <tr>
                <td class="numeric">3</td>
                <td>svg, truetype, woff, woff2</td>
                <td class="numeric">3.5%</td>
                <td class="numeric">3.2%</td>
              </tr>
              <tr>
                <td class="numeric">4</td>
                <td>eot, svg, truetype, woff</td>
                <td class="numeric">1.3%</td>
                <td class="numeric">2.9%</td>
              </tr>
              <tr>
                <td class="numeric">5</td>
                <td>woff, woff2</td>
                <td class="numeric">1.8%</td>
                <td class="numeric">1.8%</td>
              </tr>
              <tr>
                <td class="numeric">6</td>
                <td>eot, svg, truetype, woff, woff2</td>
                <td class="numeric">1.2%</td>
                <td class="numeric">2.1%</td>
              </tr>
              <tr>
                <td class="numeric">7</td>
                <td>truetype, woff</td>
                <td class="numeric">0.9%</td>
                <td class="numeric">1.1%</td>
              </tr>
              <tr>
                <td class="numeric">8</td>
                <td>woff</td>
                <td class="numeric">0.7%</td>
                <td class="numeric">0.8%</td>
              </tr>
              <tr>
                <td class="numeric">9</td>
                <td>truetype</td>
                <td class="numeric">0.6%</td>
                <td class="numeric">0.7%</td>
              </tr>
              <tr>
                <td class="numeric">10</td>
                <td>truetype, woff, woff2</td>
                <td class="numeric">0.6%</td>
                <td class="numeric">0.6%</td>
              </tr>
              <tr>
                <td class="numeric">11</td>
                <td>opentype, woff, woff2</td>
                <td class="numeric">0.3%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td class="numeric">12</td>
                <td>svg</td>
                <td class="numeric">0.2%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td class="numeric">13</td>
                <td>eot, truetype, woff</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.2%</td>
              </tr>
              <tr>
                <td class="numeric">14</td>
                <td>opentype, woff</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.1%</td>
              </tr>
              <tr>
                <td class="numeric">15</td>
                <td>opentype</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.1%</td>
              </tr>
              <tr>
                <td class="numeric">16</td>
                <td>eot</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.1%</td>
              </tr>
              <tr>
                <td class="numeric">17</td>
                <td>opentype, svg, truetype, woff</td>
                <td class="numeric">0.1%</td>
                <td class="numeric">0.0%</td>
              </tr>
              <tr>
                <td class="numeric">18</td>
                <td>opentype, truetype, woff, woff2</td>
                <td class="numeric">0.0%</td>
                <td class="numeric">0.0%</td>
              </tr>
              <tr>
                <td class="numeric">19</td>
                <td>eot, truetype, woff, woff2</td>
                <td class="numeric">0.0%</td>
                <td class="numeric">0.0%</td>
              </tr>
              <tr>
                <td class="numeric">20</td>
                <td>svg, woff</td>
                <td class="numeric">0.0%</td>
                <td class="numeric">0.0%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#fonts-fig-9" class="anchor-link">Figure 9.</a> Top 20 font format combinations.</figcaption>
    </figure>
    <p>This dataset seems to suggest that the majority of people are already using WOFF2-only in their <code>@font-face</code> blocks. But this is misleading of course, per our earlier discussion on the dominance of Google Fonts in the data set. Google Fonts does some sniffing methods to serve a streamlined CSS file and only includes the most modern <code>format()</code>. Unsurprisingly, WOFF2 dominates the results here for that reason, as browser support for WOFF2 has been pretty broad for some time now.</p>
    <p>Importantly, this particular data doesn't really support or detract from the case to go WOFF2-only yet, but it remains a tempting idea.</p>
    <h2 id="fonts-fighting-against-invisible-text"><a href="#fonts-fighting-against-invisible-text" class="anchor-link">Fighting against invisible text</a></h2>
    <p>The number one tool we have to fight the default web font loading behavior of "invisible while loading" (also known as FOIT), is <code>font-display</code>. Adding <code>font-display: swap</code> to your <code>@font-face</code> block is an easy way to tell the browser to show fallback text while the web font is loading.</p>
    <p>
      <a href="https://caniuse.com/#feat=mdn-css_at-rules_font-face_font-display">Browser support<span class="fn">https://caniuse.com/#feat=mdn-css_at-rules_font-face_font-display</span></a> is great too. Internet Explorer and pre-Chromium Edge don't have support but they also render fallback text by default when a web font loads (no FOITs allowed here). For our Chrome tests, how commonly is <code>font-display</code> used?
    </p>
    <figure id="fonts-fig-10">
      <div class="big-number">26%</div>
      <figcaption><a href="#fonts-fig-10" class="anchor-link">Figure 10.</a> Percent of mobile pages that utilize the <code>font-display</code> style.</figcaption>
    </figure>
    <p>
      I assume this will be creeping up over time, especially now that <a href="https://www.zachleat.com/web/google-fonts-display/">Google Fonts is adding <code>font-display</code> to all new code snippets<span class="fn">https://www.zachleat.com/web/google-fonts-display/</span></a> copied from their site.
    </p>
    <p>
      If you're using Google Fonts, update your snippets! If you're not using Google Fonts, use <code>font-display</code>! Read more about <code>font-display</code> on <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display">MDN<span class="fn">https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display</span></a
      >.
    </p>
    <p>Let's have a look at what <code>font-display</code> values are popular:</p>
    <figure id="fonts-fig-11">
      <a href="https://almanac.httparchive.org/static/images/2019/fonts/fig11.png">
        <img src="/static/images/2019/fonts/fig11.png" alt="Figure 11. Usage of 'font-display' values." aria-labelledby="fonts-fig11-caption" aria-describedby="fonts-fig11-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQDogXDb3BwZZHrBT39qccP_LJoCScD3QEi_FmjT_8VDPD_1Srpz-g7ZuuTUEb8pYXBpDmQzZ1hQh7q/pubchart?oid=1988783738&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig11-description" data-show-text="{{ show_description(11) }}" data-hide-text="{{ hide_description(11) }}">{{ show_description(11) }}</button>
      <div id="fonts-fig11-description" class="visually-hidden">Bar chart showing the usage of the font-display style. 2.6% of mobile pages set this style to "swap", 1.5% to "auto", 0.7% to "block", 0.4% to "fallback", 0.2% to optional, and 0.1% to "swap" enclosed in quotes, which is invalid. The desktop distribution is similar except "swap" usage is lower by 0.4 percentage points and "auto" usage is higher by 0.1 percentage points.</div>
      <figcaption id="fonts-fig11-caption"><a href="#fonts-fig-11" class="anchor-link">Figure 11.</a> Usage of <code>font-display</code> values.</figcaption>
    </figure>
    <p>As an easy way to show fallback text while a web font is loading, <code>font-display: swap</code> reigns supreme and is the most common value. <code>swap</code> is also the default value used by new Google Fonts code snippets too. I would have expected <code>optional</code> (only render if cached) to have a bit more usage here as a few prominent developer evangelists lobbied for it a bit, but no dice.</p>
    <h2 id="fonts-how-many-web-fonts-are-too-many"><a href="#fonts-how-many-web-fonts-are-too-many" class="anchor-link">How many web fonts are too many?</a></h2>
    <p>This is a question that requires some measure of nuance. How are the fonts being used? For how much content on the page? Where does this content live in the layout? How are the fonts being rendered? In lieu of nuance however let's dive right into some broad and heavy handed analysis specifically centered on request counts.</p>
    <figure id="fonts-fig-12">
      <a href="https://almanac.httparchive.org/static/images/2019/fonts/fig12.png">
        <img src="/static/images/2019/fonts/fig12.png" alt="Figure 12. Distribution of font requests per page." aria-labelledby="fonts-fig12-caption" aria-describedby="fonts-fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQDogXDb3BwZZHrBT39qccP_LJoCScD3QEi_FmjT_8VDPD_1Srpz-g7ZuuTUEb8pYXBpDmQzZ1hQh7q/pubchart?oid=451821825&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="fonts-fig12-description" class="visually-hidden">Bar chart showing the distribution of font requests per page. The 10, 25, 50, 75, and 90th percentiles for desktop are: 0, 1, 3, 6, and 9 font requests. The distribution for mobile is identical until the 75th and 90th percentiles, where mobile pages request 1 fewer font.</div>
      <figcaption id="fonts-fig12-caption"><a href="#fonts-fig-12" class="anchor-link">Figure 12.</a> Distribution of font requests per page.</figcaption>
    </figure>
    <p>The median web page makes three web font requests. At the 90th percentile, requested six and nine web fonts on mobile and desktop, respectively.</p>
    <figure id="fonts-fig-13">
      <a href="https://almanac.httparchive.org/static/images/2019/fonts/fig13.png">
        <img src="/static/images/2019/fonts/fig13.png" alt="Figure 13. Histogram of web fonts requested per page." aria-labelledby="fonts-fig13-description" aria-describedby="fonts-fig13-caption" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQDogXDb3BwZZHrBT39qccP_LJoCScD3QEi_FmjT_8VDPD_1Srpz-g7ZuuTUEb8pYXBpDmQzZ1hQh7q/pubchart?oid=1755200484&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
      <div id="fonts-fig13-description" class="visually-hidden">Histogram showing the distribution of the number of font requests per page. The most popular number of font requests is 0 at 22% of desktop pages. The distribution drops to 9% of pages having 1 font, then crests at 10% for 2-4 fonts before falling as the number of fonts increases. The desktop and mobile distributions are similar, although the mobile distribution skews slightly toward having fewer fonts per page.</div>
      <figcaption id="fonts-fig13-caption"><a href="#fonts-fig-13" class="anchor-link">Figure 13.</a> Histogram of web fonts requested per page.</figcaption>
    </figure>
    <p>
      It does seem quite interesting that web font requests seem to be pretty steady across desktop and mobile. I'm glad to see the <a href="https://css-tricks.com/snippets/css/using-font-face/#article-header-id-6">recommendation to hide <code>@font-face</code> blocks inside of a <code>@media</code> queries<span class="fn">https://css-tricks.com/snippets/css/using-font-face/#article-header-id-6</span></a> didn't catch on (don't get any ideas).
    </p>
    <p>That said there are marginally more requests for fonts made on mobile devices. My hunch here is that fewer typefaces are available on mobile devices, which in turn means fewer <code>local()</code> hits in Google Fonts CSS, falling back to network requests for these.</p>
    <h3 id="fonts-you-dont-want-to-win-this-award"><a href="#fonts-you-dont-want-to-win-this-award" class="anchor-link">You don't want to win this award</a></h3>
    <figure id="fonts-fig-14">
      <div class="big-number">718</div>
      <figcaption><a href="#fonts-fig-14" class="anchor-link">Figure 14.</a> The most web font requests on a single page.</figcaption>
    </figure>
    <p>The award for the page that requests the most web fonts goes to a site that made <strong>718</strong> web font requests!</p>
    <p>After diving into the code, all of those 718 requests are going to Google Fonts! It looks like a malfunctioning "Above the Page fold" optimization plugin for WordPress has gone rogue on this site and is requesting (DDoS-ing?) all the Google Fontsoops!</p>
    <p>Ironic that a performance optimization plugin can make your performance much worse!</p>
    <h2 id="fonts-more-accurate-matching-with-unicode-range">
      <a href="#fonts-more-accurate-matching-with-unicode-range" class="anchor-link">More accurate matching with <code>unicode-range</code></a>
    </h2>
    <figure id="fonts-fig-15">
      <div class="big-number">56%</div>
      <figcaption><a href="#fonts-fig-15" class="anchor-link">Figure 15.</a> Percent of mobile pages that declare a web font with the <code>unicode-range</code> property.</figcaption>
    </figure>
    <p>
      <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/%40font-face/unicode-range"><code>unicode-range</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/CSS/%40font-face/unicode-range</span></a> is a great CSS property to let the browser know specifically which code points the page would like to use in the font file. If the <code>@font-face</code> declaration has a <code>unicode-range</code>, content on the page must match one of the code points in the range before the font is requested. It is a very good thing.
    </p>
    <p>This is another metric that I expect was skewed by Google Fonts usage, as Google Fonts uses <code>unicode-range</code> in most (if not all) of its CSS. I'd expect this to be less common in user land, but perhaps filtering out Google Fonts requests in the next edition of the Almanac may be possible.</p>
    <h2 id="fonts-dont-request-web-fonts-if-a-system-font-exists"><a href="#fonts-dont-request-web-fonts-if-a-system-font-exists" class="anchor-link">Don't request web fonts if a system font exists</a></h2>
    <figure id="fonts-fig-16">
      <div class="big-number">59%</div>
      <figcaption><a href="#fonts-fig-16" class="anchor-link">Figure 16.</a> Percent of mobile pages that declare a web font with the <code>local()</code> property.</figcaption>
    </figure>
    <p><code>local()</code> is a nice way to reference a system font in your <code>@font-face</code> <code>src</code>. If the <code>local()</code> font exists, it doesn't need to make a request for a web font at all. This is used both extensively and controversially by Google Fonts, so it is likely another example of skewed data if we're trying to glean patterns from user land.</p>
    <p>
      It should also be noted here that it has been said by smarter people than I (Bram Stein of TypeKit) that <a href="https://bramstein.com/writing/web-font-anti-patterns-local-fonts.html">using <code>local()</code> can be unpredictable as installed versions of fonts can be outdated and unreliable<span class="fn">https://bramstein.com/writing/web-font-anti-patterns-local-fonts.html</span></a
      >.
    </p>
    <h2 id="fonts-condensed-fonts-and-font-stretch">
      <a href="#fonts-condensed-fonts-and-font-stretch" class="anchor-link">Condensed fonts and <code>font-stretch</code></a>
    </h2>
    <figure id="fonts-fig-17">
      <div class="big-number">7%</div>
      <figcaption><a href="#fonts-fig-17" class="anchor-link">Figure 17.</a> Percent of desktop and mobile pages that include a style with the <code>font-stretch</code> property.</figcaption>
    </figure>
    <p>
      Historically, <code>font-stretch</code> has suffered from poor browser support and was not a well-known <code>@font-face</code> property. Read more about <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-stretch"><code>font-stretch</code> on MDN<span class="fn">https://developer.mozilla.org/en-US/docs/Web/CSS/font-stretch</span></a
      >. But <a href="https://caniuse.com/#feat=css-font-stretch">browser support<span class="fn">https://caniuse.com/#feat=css-font-stretch</span></a> has broadened.
    </p>
    <p>It has been suggested that using condensed fonts on smaller viewports allows more text to be viewable, but this approach isn't commonly used. That being said, that this property is used half a percentage point more on desktop than mobile is unexpected, and 7% seems much higher than I would have predicted.</p>
    <h2 id="fonts-variable-fonts-are-the-future"><a href="#fonts-variable-fonts-are-the-future" class="anchor-link">Variable fonts are the future</a></h2>
    <p>
      <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Fonts/Variable_Fonts_Guide">Variable fonts<span class="fn">https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Fonts/Variable_Fonts_Guide</span></a> allow several font weights and styles to be included in the one font file.
    </p>
    <figure id="fonts-fig-18">
      <div class="big-number">1.8%</div>
      <figcaption><a href="#fonts-fig-18" class="anchor-link">Figure 18.</a> Percent of pages that include a variable font.</figcaption>
    </figure>
    <p>
      Even at 1.8% this was higher than expected, although I am excited to see this take off. <a href="https://developers.google.com/fonts/docs/css2">Google Fonts v2<span class="fn">https://developers.google.com/fonts/docs/css2</span></a> does include some support for variable fonts.
    </p>
    <figure id="fonts-fig-19">
      <a href="https://almanac.httparchive.org/static/images/2019/fonts/fig19.png">
        <img src="/static/images/2019/fonts/fig19.png" alt="Figure 19. Usage of 'font-variation-settings' axes." aria-labelledby="fonts-fig19-caption" aria-describedby="fonts-fig19-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQDogXDb3BwZZHrBT39qccP_LJoCScD3QEi_FmjT_8VDPD_1Srpz-g7ZuuTUEb8pYXBpDmQzZ1hQh7q/pubchart?oid=699343351&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig19-description" data-show-text="{{ show_description(19) }}" data-hide-text="{{ hide_description(19) }}">{{ show_description(19) }}</button>
      <div id="fonts-fig19-description" class="visually-hidden">Bar chart showing the usage of the font-variation-settings property. 42% of properties on desktop pages are set to the "opsz" value, 32% to "wght", 16% to "wdth", 2% or fewer to "roun", "crsb", "slnt", "inln", and more. The most notable differences between desktop and mobile pages are 26% usage of "opsz", 38% of "wght", and 23% of "wdth".</div>
      <figcaption id="fonts-fig19-caption"><a href="#fonts-fig-19" class="anchor-link">Figure 19.</a> Usage of <code>font-variation-settings</code> axes.</figcaption>
    </figure>
    <p>Through the lens of this large data set, these are very low sample sizes-take these results with a grain of salt. However, <code>opsz</code> as the most common axis on desktop pages is notable, with <code>wght</code> and <code>wdth</code> trailing. In my experience, the introductory demos for variable fonts are usually weight-based.</p>
    <h2 id="fonts-color-fonts-might-also-be-the-future"><a href="#fonts-color-fonts-might-also-be-the-future" class="anchor-link">Color fonts might also be the future?</a></h2>
    <figure id="fonts-fig-20">
      <div class="big-number">117</div>
      <figcaption><a href="#fonts-fig-20" class="anchor-link">Figure 20.</a> The number of desktop web pages that include a color font.</figcaption>
    </figure>
    <p>
      Usage here of these is basically nonexistent but you can check out the excellent resource <a href="https://www.colorfonts.wtf/">Color Fonts! WTF?<span class="fn">https://www.colorfonts.wtf/</span></a> for more information. Similar (but not at all) to the SVG format for fonts (which is bad and going away), this allows you to embed SVG inside of OpenType files, which is awesome and cool.
    </p>
    <h2 id="fonts-conclusion"><a href="#fonts-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>The biggest takeaway here is that Google Fonts dominates the web font discussion. Approaches they've taken weigh heavily on the data we've recorded here. The positives here are easy access to web fonts, good font formats (WOFF2), and for-free <code>unicode-range</code> configurations. The downsides here are performance drawbacks associated with third-party hosting, different-host requests, and no access to <code>preload</code>.</p>
    <p>I fully expect that in the future we'll see the "Rise of the Variable Font". This <em>should</em> be paired with a decline in web font requests, as Variable Fonts combine multiple individual font files into a single composite font file. But history has shown us that what usually happens here is that we optimize a thing and then add more things to fill the vacancy.</p>
    <p>It will be very interesting to see if color fonts increase in popularity. I expect these to be far more niche than variable fonts but may see a lifeline in the icon font space.</p>
    <p>Keep those fonts frosty, y'all.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"II","chapter_number":7,"title":"Performance","description":"Performance chapter of the 2019 Web Almanac covering First Contentful Paint (FCP), Time to First Byte (TTFB), and First Input Delay (FID).","authors":["rviscomi"],"reviewers":["JMPerez","obto","sergeychernyshev","zeman"],"translators":null,"discuss":"1762","results":"https://docs.google.com/spreadsheets/d/1zWzFSQ_ygb-gGr1H1BsJCfB7Z89zSIf7GX0UayVEte4/","queries":"07_Performance","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-03-01T00:00:00.000Z","chapter":"performance"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="performance-introduction"><a href="#performance-introduction" class="anchor-link">Introduction</a></h2>
    <p>
      Performance is a visceral part of the user experience. For <a href="https://wpostats.com/">many websites<span class="fn">https://wpostats.com/</span></a
      >, an improvement to the user experience by speeding up the page load time aligns with an improvement to conversion rates. Conversely, when performance is poor, users don't convert as often and have even been observed to be <a href="https://blog.fullstory.com/rage-clicks-turn-analytics-into-actionable-insights/">rage clicking<span class="fn">https://blog.fullstory.com/rage-clicks-turn-analytics-into-actionable-insights/</span></a> on the page in frustration.
    </p>
    <p>There are many ways to quantify web performance. The most important thing is to measure what actually matters to users. However, events like <code>onload</code> or <code>DOMContentLoaded</code> may not necessarily reflect what users experience visually. For example, when loading an email client, it might show an interstitial progress bar while the inbox contents load asynchronously. The problem is that the <code>onload</code> event doesn't wait for the inbox to asynchronously load. In this example, the loading metric that matters most to users is the "time to inbox", and focusing on the <code>onload</code> event may be misleading. For that reason, this chapter will look at more modern and universally applicable paint, load, and interactivity metrics to try to capture how users are actually experiencing the page.</p>
    <p>There are two kinds of performance data: lab and field. You may have heard these referred to as synthetic testing and real-user measurement (or RUM). Measuring performance in the lab ensures that each website is tested under common conditions and variables like browser, connection speed, physical location, cache state, etc. remain the same. This guarantee of consistency makes each website comparable with one another. On the other hand, measuring performance in the field represents how users actually experience the web in all of the infinite combinations of conditions that we could never capture in the lab. For the purposes of this chapter and understanding real-world user experiences, we'll look at field data.</p>
    <h2 id="performance-the-state-of-performance"><a href="#performance-the-state-of-performance" class="anchor-link">The state of performance</a></h2>
    <p>
      Almost all of the other chapters in the Web Almanac are based on data from the <a href="https://httparchive.org/">HTTP Archive<span class="fn">https://httparchive.org/</span></a
      >. However, in order to capture how real users experience the web, we need a different dataset. In this section, we're using the <a href="http://bit.ly/chrome-ux-report">Chrome UX Report<span class="fn">http://bit.ly/chrome-ux-report</span></a> (CrUX), a public dataset from Google that consists of all the same websites as the HTTP Archive, and aggregates how Chrome users actually experience them. Experiences are categorized by:
    </p>
    <ul>
      <li>
        The form factor of the users' devices
        <ul>
          <li>Desktop</li>
          <li>Phone</li>
          <li>Tablet</li>
        </ul>
      </li>
      <li>
        Users' effective connection type (ECT) in mobile terms
        <ul>
          <li>Offline</li>
          <li>Slow 2G</li>
          <li>2G</li>
          <li>3G</li>
          <li>4G</li>
        </ul>
      </li>
      <li>Users' geographic locations</li>
    </ul>
    <p>
      Experiences are measured monthly, including paint, load, and interactivity metrics. The first metric we'll look at is <a href="https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics#first_paint_and_first_contentful_paint">First Contentful Paint<span class="fn">https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics#first_paint_and_first_contentful_paint</span></a> (FCP). This is the time users spend waiting for the page to display something useful to the screen, like an image or text. Then, we'll look at look at a loading metric, <a href="https://developer.mozilla.org/en-US/docs/Glossary/time_to_first_byte">Time to First Byte<span class="fn">https://developer.mozilla.org/en-US/docs/Glossary/time_to_first_byte</span></a> (TTFB). This is a measure of how long the web page took from the time of the user's navigation until they received the first byte of the response. And, finally, the last field metric we'll look at is <a href="https://developers.google.com/web/updates/2018/05/first-input-delay">First Input Delay<span class="fn">https://developers.google.com/web/updates/2018/05/first-input-delay</span></a> (FID). This is a relatively new metric and one that represents parts of the UX other than loading performance. It measures the time from a user's first interaction with a page's UI until the time the browser's main thread is ready to process the event.
    </p>
    <p>So let's dive in and see what insights we can find.</p>
    <h3 id="performance-first-contentful-paint"><a href="#performance-first-contentful-paint" class="anchor-link">First Contentful Paint</a></h3>
    <figure id="performance-fig1">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig1.png">
        <img src="/static/images/2019/performance/fig1.png" alt="Figure 1. Distribution of websites' fast, moderate, and slow FCP performance." aria-labelledby="performance-fig1-caption" aria-describedby="performance-fig1-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=115935793&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="performance-fig1-description" class="visually-hidden">Distribution of 1,000 websites' fast, moderate, and slow FCP. The distribution of fast FCP appears to be linear from 100% to 0%.</div>
      <figcaption id="performance-fig1-caption"><a href="#performance-fig1" class="anchor-link">Figure 1.</a> Distribution of websites' fast, moderate, and slow FCP performance.</figcaption>
    </figure>
    <p>In Figure 1 above, you can see how FCP experiences are distributed across the web. Out of the millions of websites in the CrUX dataset, this chart compresses the distribution down to 1,000 websites, where each vertical slice represents a single website. The chart is sorted by the percent of fast FCP experiences, which are those occurring in less than 1 second. Slow experiences occur in 3 seconds or more, and moderate (formerly known as "average") experiences are everything in between. At the extremes of the chart, there are some websites with almost 100% fast experiences and some websites with almost 100% slow experiences. In between that, websites that have a combination of fast, moderate, and slow performance seem to lean more towards fast or moderate than slow, which is good.</p>
    <p class="note">Note: When a user experiences slow performance, it's hard to say what the reason might be. It could be that the website itself was built poorly and inefficiently. Or there could be other environmental factors like the user's slow connection, empty cache, etc. So, when looking at this field data we prefer to say that the user experiences themselves are slow, and not necessarily the websites.</p>
    <p>
      In order to categorize whether a website is sufficiently <strong>fast</strong> we will use the new <a href="https://developers.google.com/speed/docs/insights/v5/about#categories">PageSpeed Insights<span class="fn">https://developers.google.com/speed/docs/insights/v5/about#categories</span></a> (PSI) methodology, where at least 75% of the website's FCP experiences must be faster than 1 second. Similarly, a sufficiently <strong>slow</strong> website has 25% or more FCP experiences slower than 3 seconds. We say a website has <strong>moderate</strong> performance when it doesn't meet either of these conditions.
    </p>
    <figure id="performance-fig2">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig2.png">
        <img src="/static/images/2019/performance/fig2.png" alt="Figure 2. Distribution of websites labeled as having fast, moderate, or slow FCP." aria-labelledby="performance-fig2-caption" aria-describedby="performance-fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=36103372&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="performance-fig2-description" class="visually-hidden">Bar chart showing that 13% of websites have fast FCP, 66% have moderate FCP, and 20% have slow FCP.</div>
      <figcaption id="performance-fig2-caption"><a href="#performance-fig2" class="anchor-link">Figure 2.</a> Distribution of websites labeled as having fast, moderate, or slow FCP.</figcaption>
    </figure>
    <p>The results in Figure 2 show that only 13% of websites are considered fast. This is a sign that there is still a lot of room for improvement, but many websites are painting meaningful content quickly and consistently. Two thirds of websites have moderate FCP experiences.</p>
    <p>To help us understand how users experience FCP across different devices, let's segment by form factor.</p>
    <h4 id="performance-fcp-by-device"><a href="#performance-fcp-by-device" class="anchor-link">FCP by device</a></h4>
    <figure id="performance-fig3">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig3.png">
        <img src="/static/images/2019/performance/fig3.png" alt="Figure 3. Distribution of <em>desktop</em> websites' fast, moderate, and slow FCP performance." aria-labelledby="performance-fig3-caption" aria-describedby="performance-fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=1231764008&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="performance-fig3-description" class="visually-hidden">Distribution of 1,000 desktop websites' fast, moderate, and slow FCP. The distribution of fast FCP appears to be linear from 100% to 0% with a slight bulge in the middle.</div>
      <figcaption id="performance-fig3-caption"><a href="#performance-fig3" class="anchor-link">Figure 3.</a> Distribution of <em>desktop</em> websites' fast, moderate, and slow FCP performance.</figcaption>
    </figure>
    <figure id="performance-fig4">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig4.png">
        <img src="/static/images/2019/performance/fig4.png" alt="Figure 4. Distribution of 'phone' websites' fast, moderate, and slow FCP performance." aria-labelledby="performance-fig4-caption" aria-describedby="performance-fig4-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=167423587&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="performance-fig4-description" class="visually-hidden">Distribution of 1,000 mobile websites' fast, moderate, and slow FCP. The distribution of fast FCP appears to be linear from 100% to 0% without the same middle bulge seen for desktop websites.</div>
      <figcaption id="performance-fig4-caption"><a href="#performance-fig4" class="anchor-link">Figure 4.</a> Distribution of <em>phone</em> websites' fast, moderate, and slow FCP performance.</figcaption>
    </figure>
    <p>In Figures 3 and 4 above, the FCP distributions are broken down by desktop and phone. It's subtle, but the torso of the desktop fast FCP distribution appears to be more convex than the distribution for phone users. This visual approximation suggests that desktop users experience a higher overall proportion of fast FCP. To verify this, we can apply the PSI methodology to each distribution.</p>
    <figure id="performance-fig5">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig5.png">
        <img src="/static/images/2019/performance/fig5.png" alt="Figure 5. Distribution of websites labeled as having fast, moderate, or slow FCP, broken down by device type." aria-labelledby="performance-fig5-caption" aria-describedby="performance-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=486448175&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="performance-fig5-description" class="visually-hidden">Bar chart of the desktop and mobile FCP distributions. Desktop fast, moderate, slow: 17%, 67%, and 16% respectively. Mobile: 11%, 66%, and 23%.</div>
      <figcaption id="performance-fig5-caption"><a href="#performance-fig5" class="anchor-link">Figure 5.</a> Distribution of websites labeled as having fast, moderate, or slow FCP, broken down by device type.</figcaption>
    </figure>
    <p>According to PSI's classification, 17% of websites have fast FCP experiences overall for desktop users, compared to 11% for mobile users. The entire distribution is skewed to being slightly faster for desktop experiences, with fewer slow websites and more in the fast and moderate category.</p>
    <p>Why might desktop users experience fast FCP on a higher proportion of websites than phone users? We can only speculate, after all, this dataset is meant to answer how the web is performing and not necessarily <em>why</em> it's performing that way. But one guess could be that desktop users are connected to the internet on faster, more reliable networks like WiFi rather than cell towers. To help answer this question, we can also explore how user experiences vary by ECT.</p>
    <h4 id="performance-fcp-by-effective-connection-type"><a href="#performance-fcp-by-effective-connection-type" class="anchor-link">FCP by effective connection type</a></h4>
    <figure id="performance-fig6">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig6.png">
        <img src="/static/images/2019/performance/fig6.png" alt="Figure 6. Distribution of websites labeled as having fast, moderate, or slow FCP, broken down by ECT." aria-labelledby="performance-fig6-caption" aria-describedby="performance-fig6-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=1987967547&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="performance-fig6-description" class="visually-hidden">Bar chart of FCP distributions per effective connection type. 4G fast, moderate, slow: 14%, 67%, and 19% respectively. 3G: 1%, 38%, and 61%. 2G: 0%, 9%, 90%. Slow 2G: 0%, 1%, 99%.</div>
      <figcaption id="performance-fig6-caption"><a href="#performance-fig6" class="anchor-link">Figure 6.</a> Distribution of websites labeled as having fast, moderate, or slow FCP, broken down by <abbr title="effective connection type">ECT</abbr>.</figcaption>
    </figure>
    <p>In Figure 6 above, FCP experiences are grouped by the ECT of the user experience. Interestingly, there is a correlation between ECT speed and the percent of websites serving fast FCP. As the ECT speeds decrease, the proportion of fast experiences approaches zero. 14% of websites that serve users with 4G ECT have fast&nbsp;FCP experiences, while 19% of those websites have slow experiences. 61% of websites serve slow FCP to users with 3G ECT, 90% to 2G ECT, and 99% to slow-2G ECT. These results suggest that websites seldom serve fast FCP consistently to users on connections effectively slower than 4G.</p>
    <h4 id="performance-fcp-by-geography"><a href="#performance-fcp-by-geography" class="anchor-link">FCP by geography</a></h4>
    <figure id="performance-fig7">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig7.png">
        <img src="/static/images/2019/performance/fig7.png" alt="Figure 7. Distribution of websites labeled as having fast, moderate, or slow FCP, broken down by geo." aria-labelledby="performance-fig7-caption" aria-describedby="performance-fig7-description" width="600" height="940" data-width="600" data-height="940" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=792398959&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="performance-fig7-description" class="visually-hidden">Bar chart of FCP distributions for the top 23 most popular geographies. Korea has the most fast websites at 36%. From there, the percent of fast websites declines rapidly for other geographies: Japan 28%, Taiwan 26%, Netherlands 21%, etc.</div>
      <figcaption id="performance-fig7-caption"><a href="#performance-fig7" class="anchor-link">Figure 7.</a> Distribution of websites labeled as having fast, moderate, or slow FCP, broken down by geo.</figcaption>
    </figure>
    <p>
      Finally, we can slice FCP by users' geography (geo). The chart above shows the top 23 geos having the highest number of distinct websites, an indicator of overall popularity of the open web. Web users in the United States visit the most distinct websites at 1,211,002. The geos are sorted by the percent of websites having sufficiently fast FCP experiences. At the top of the list are three <a href="https://en.wikipedia.org/wiki/Asia-Pacific">Asia-Pacific<span class="fn">https://en.wikipedia.org/wiki/Asia-Pacific</span></a> (APAC) geos: Korea, Taiwan, and Japan. This could be explained by the availability of extremely <a href="https://en.wikipedia.org/wiki/List_of_countries_by_Internet_connection_speeds">fast network connection speeds in these regions<span class="fn">https://en.wikipedia.org/wiki/List_of_countries_by_Internet_connection_speeds</span></a
      >. Korea has 36% of websites meeting the fast FCP bar, and only 7% rated as slow FCP. Recall that the global distribution of fast/moderate/slow websites is approximately 13/66/20, making Korea a significantly positive outlier.
    </p>
    <p>Other APAC geos tell a different story. Thailand, Vietnam, Indonesia, and India all have fewer than 10% of fast websites. These geos also have more than triple the proportion of slow websites than Korea.</p>
    <h3 id="performance-time-to-first-byte-ttfb"><a href="#performance-time-to-first-byte-ttfb" class="anchor-link">Time to First Byte (TTFB)</a></h3>
    <p>
      <a href="https://web.dev/time-to-first-byte">Time to First Byte<span class="fn">https://web.dev/time-to-first-byte</span></a> (TTFB) is a measure of how long the web page took from the time of the user's navigation until they received the first byte of the response.
    </p>
    <figure id="performance-fig8">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/nav-timing.png">
        <img alt="Navigation Timing API diagram of the events in a page navigation" src="/static/images/2019/performance/nav-timing.png" aria-labelledby="performance-fig8-caption" aria-describedby="performance-fig8-description" width="2580" height="868" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="performance-fig8-description" class="visually-hidden">Diagram showing the sequence of network phases in a page load: startTime (promptForUnload), redirect, AppCache, DNS, TCP, request, response, processing, and load.</div>
      <figcaption id="performance-fig8-caption"><a href="#performance-fig8" class="anchor-link">Figure 8.</a> Navigation Timing API diagram of the events in a page navigation.</figcaption>
    </figure>
    <p>
      To help explain TTFB and the many factors that affect it, let's borrow a diagram from the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API">Navigation Timing API spec<span class="fn">https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API</span></a
      >. In Figure 8 above, TTFB is the duration from <code>startTime</code> to <code>responseStart</code>, including everything in between: <code>unload</code>, <code>redirects</code>, <code>AppCache</code>, <code>DNS</code>, <code>SSL</code>, <code>TCP</code>, and the time the server spends handling the request. Given that context, let's see how users are experiencing this metric.
    </p>
    <figure id="performance-fig9">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig9.png">
        <img src="/static/images/2019/performance/fig9.png" alt="Figure 9. Distribution of websites' fast, moderate, and slow TTFB performance." aria-labelledby="performance-fig9-caption" aria-describedby="performance-fig9-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=444630188&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="performance-fig9-description" class="visually-hidden">Distribution of 1,000 websites' fast, moderate, and slow TTFB. The distribution of fast TTFB drops quickly from about 90% to 50% at the 10th fastest percentile. Then the distribution gradually decreases from 50% to 0% all the way down the remaining 90 percentiles.</div>
      <figcaption id="performance-fig9-caption"><a href="#performance-fig9" class="anchor-link">Figure 9.</a> Distribution of websites' fast, moderate, and slow TTFB performance.</figcaption>
    </figure>
    <p>
      Similar to the FCP chart in Figure 1, this is a view of 1,000 representative samples ordered by fast TTFB. A <a href="https://developers.google.com/speed/docs/insights/Server#recommendations">fast TTFB<span class="fn">https://developers.google.com/speed/docs/insights/Server#recommendations</span></a> is one that happens in under 0.2 seconds (200 ms), a slow TTFB happens in 1 second or more, and everything in between is moderate.
    </p>
    <p>Looking at the curve of the fast proportions, the shape is quite different from that of FCP. There are very few websites that have a fast TTFB greater than 75%, while more than half are below 25%.</p>
    <p>Let's apply a TTFB speed label to each website, taking inspiration from the PSI methodology used above for FCP. If a website serves fast TTFB to 75% or more user experiences, it's labeled as <strong>fast</strong>. Otherwise, if it serves <strong>slow</strong> TTFB to 25% or more user experiences, it's slow. If neither of those conditions apply, it's <strong>moderate</strong>.</p>
    <figure id="performance-fig10">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig10.png">
        <img src="/static/images/2019/performance/fig10.png" alt="Figure 10. Distribution of websites labeled as having fast, moderate, or slow TTFB." aria-labelledby="performance-fig10-caption" aria-describedby="performance-fig10-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=926985367&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="performance-fig10-description" class="visually-hidden">Bar chart showing that 2% of websites have fast TTFB, 56% have moderate TTFB, and 42% have slow TTFB.</div>
      <figcaption id="performance-fig10-caption"><a href="#performance-fig10" class="anchor-link">Figure 10.</a> Distribution of websites labeled as having fast, moderate, or slow TTFB.</figcaption>
    </figure>
    <p>42% of websites have slow TTFB experiences. This is significant because TTFB is a blocker for all other performance metrics to follow. <em>By definition, a user cannot possibly experience a fast FCP if the TTFB takes more than 1 second</em>.</p>
    <h4 id="performance-ttfb-by-geo"><a href="#performance-ttfb-by-geo" class="anchor-link">TTFB by geo</a></h4>
    <figure id="performance-fig11">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig11.png">
        <img src="/static/images/2019/performance/fig11.png" alt="Figure 11. Distribution of websites labeled as having fast, moderate, or slow TTFB, broken down by geo." aria-labelledby="performance-fig11-caption" aria-describedby="performance-fig11-description" width="600" height="940" data-width="600" data-height="940" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=685447534&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig11-description" data-show-text="{{ show_description(11) }}" data-hide-text="{{ hide_description(11) }}">{{ show_description(11) }}</button>
      <div id="performance-fig11-description" class="visually-hidden">Bar chart of TTFB distributions for the top 23 most popular geographies. Korea has the most fast websites at 14%. From there, the percent of fast websites declines rapidly for other geographies: Taiwan 7%, Japan 5%, Netherlands 4%, etc.</div>
      <figcaption id="performance-fig11-caption"><a href="#performance-fig11" class="anchor-link">Figure 11.</a> Distribution of websites labeled as having fast, moderate, or slow TTFB, broken down by geo.</figcaption>
    </figure>
    <p>Now let's look at the percent of websites serving fast TTFB to users in different geos. APAC geos like Korea, Taiwan, and Japan are still outperforming users from the rest of the world. But no geo has more than 15% of websites with fast TTFB. India, for example, has fewer than 1% of websites with fast TTFB and 79% with slow TTFB.</p>
    <h3 id="performance-first-input-delay"><a href="#performance-first-input-delay" class="anchor-link">First Input Delay</a></h3>
    <p>
      The last field metric we'll look at is <a href="https://developers.google.com/web/updates/2018/05/first-input-delay">First Input Delay<span class="fn">https://developers.google.com/web/updates/2018/05/first-input-delay</span></a> (FID). This metric represents the time from a user's first interaction with a page's UI until the time the browser's main thread is ready to process the event. Note that this doesn't include the time applications spend actually handling the input. At worst, slow FID results in a page that appears unresponsive and a frustrating user experience.
    </p>
    <p>Let's start by defining some thresholds. According to the new PSI methodology, a <strong>fast</strong> FID is one that happens in less than 100 ms. This gives the application enough time to handle the input event and provide feedback to the user in a time that feels instantaneous. A <strong>slow</strong> FID is one that happens in 300 ms or more. Everything in between is <strong>moderate</strong>.</p>
    <figure id="performance-fig12">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig12.png">
        <img src="/static/images/2019/performance/fig12.png" alt="Figure 12. Distribution of websites' fast, moderate, and slow FID performance." aria-labelledby="performance-fig12-caption" aria-describedby="performance-fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=60679078&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="performance-fig12-description" class="visually-hidden">Distribution of 1,000 websites' fast, moderate, and slow FID. The distribution of fast FID holds above 75% for the fastest three quarters of websites, then drops quickly to 0%.</div>
      <figcaption id="performance-fig12-caption"><a href="#performance-fig12" class="anchor-link">Figure 12.</a> Distribution of websites' fast, moderate, and slow FID performance.</figcaption>
    </figure>
    <p>You know the drill by now. This chart shows the distribution of websites' fast, moderate, and slow FID experiences. This is a dramatically different chart from the previous charts for FCP and TTFB. (See <a href="#performance-fig1">Figure 1</a> and <a href="#performance-fig9">Figure 9</a>, respectively). The curve of fast FID very slowly descends from 100% to 75%, then takes a nosedive. The overwhelming majority of FID experiences are fast for most websites.</p>
    <figure id="performance-fig13">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig13.png">
        <img src="/static/images/2019/performance/fig13.png" alt="Figure 13. Distribution of websites labeled as having fast, moderate, or slow TTFB." aria-labelledby="performance-fig13-caption" aria-describedby="performance-fig13-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=1828752871&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
      <div id="performance-fig13-description" class="visually-hidden">Bar chart showing that 40% of websites have fast FID, 45% have moderate FID, and 15% have slow FID.</div>
      <figcaption id="performance-fig13-caption"><a href="#performance-fig13" class="anchor-link">Figure 13.</a> Distribution of websites labeled as having fast, moderate, or slow TTFB.</figcaption>
    </figure>
    <p>The PSI methodology for labeling a website as having sufficiently fast or slow FID is slightly different than that of FCP. For a site to be <strong>fast</strong>, 95% of its FID experiences must be fast. A site is <strong>slow</strong> if 5% of its FID experiences are slow. All other experiences are <strong>moderate</strong>.</p>
    <p>Compared to the previous metrics, the distribution of aggregate FID performance is much more skewed towards fast and moderate experiences than slow. 40% of websites have fast FID and only 15% have slow FID. The nature of FID being an interactivity metric -- as opposed to a loading metric bound by network speeds -- makes for an entirely different way to characterize performance.</p>
    <h4 id="performance-fid-by-device"><a href="#performance-fid-by-device" class="anchor-link">FID by device</a></h4>
    <figure id="performance-fig14">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig14.png">
        <img src="/static/images/2019/performance/fig14.png" alt="Figure 14. Distribution of 'desktop' websites' fast, moderate, and slow FID performance." aria-labelledby="performance-fig14-caption" aria-describedby="performance-fig14-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=16379508&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig14-description" data-show-text="{{ show_description(14) }}" data-hide-text="{{ hide_description(14) }}">{{ show_description(14) }}</button>
      <div id="performance-fig14-description" class="visually-hidden">Distribution of 1,000 desktop websites' fast, moderate, and slow FID. The distribution of fast FID decreases very slowly from 100% to 90% for the fastest three quarters of websites. After that, fast FID decreases slightly to 75%. Nearly all desktop websites have more than 75% fast FID experiences.</div>
      <figcaption id="performance-fig14-caption"><a href="#performance-fig14" class="anchor-link">Figure 14.</a> Distribution of <em>desktop</em> websites' fast, moderate, and slow FID performance.</figcaption>
    </figure>
    <figure id="performance-fig15">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig15.png">
        <img src="/static/images/2019/performance/fig15.png" alt="Figure 15. Distribution of 'phone' websites' fast, moderate, and slow FID performance." aria-labelledby="performance-fig15-caption" aria-describedby="performance-fig15-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=519511409&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig15-description" data-show-text="{{ show_description(15) }}" data-hide-text="{{ hide_description(15) }}">{{ show_description(15) }}</button>
      <div id="performance-fig15-description" class="visually-hidden">Distribution of 1,000 mobile websites' fast, moderate, and slow FID. The distribution of fast FID declines steadily but much more quickly than desktop. It reaches 75% fast for at three quarters of websites then quickly drops to 0%.</div>
      <figcaption id="performance-fig15-caption"><a href="#performance-fig15" class="anchor-link">Figure 15.</a> Distribution of <em>phone</em> websites' fast, moderate, and slow FID performance.</figcaption>
    </figure>
    <p>By breaking FID down by device, it becomes clear that there are two very different stories. Desktop users enjoy fast FID almost all the time. Sure, there are some websites that throw out a slow experience now and then, but the results are predominantly fast. Mobile users, on the other hand, have what seem to be one of two experiences: pretty fast (but not quite as often as desktop) and almost never fast. The latter is experienced by users on only the tail 10% of websites, but this is still a substantial difference.</p>
    <figure id="performance-fig16">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig16.png">
        <img src="/static/images/2019/performance/fig16.png" alt="Figure 16. Distribution of websites labeled as having fast, moderate, or slow FID, broken down by device type." aria-labelledby="performance-fig16-caption" aria-describedby="performance-fig16-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=1533541692&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig16-description" data-show-text="{{ show_description(16) }}" data-hide-text="{{ hide_description(16) }}">{{ show_description(16) }}</button>
      <div id="performance-fig16-description" class="visually-hidden">Bar chart of the desktop and mobile FID distributions. Desktop fast, moderate, slow: 82%, 12%, and 5% respectively. Mobile: 26%, 52%, and 22%.</div>
      <figcaption id="performance-fig16-caption"><a href="#performance-fig16" class="anchor-link">Figure 16.</a> Distribution of websites labeled as having fast, moderate, or slow FID, broken down by device type.</figcaption>
    </figure>
    <p>When we apply the PSI labeling to desktop and phone experiences, the distinction becomes crystal clear. 82% of websites' FID experienced by desktop users are fast compared to 5% slow. For mobile experiences, 26% of websites are fast while 22% are slow. Form factor plays a major role in the performance of interactivity metrics like FID.</p>
    <h4 id="performance-fid-by-effective-connection-type"><a href="#performance-fid-by-effective-connection-type" class="anchor-link">FID by effective connection type</a></h4>
    <figure id="performance-fig17">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig17.png">
        <img src="/static/images/2019/performance/fig17.png" alt="Figure 17. Distribution of websites labeled as having fast, moderate, or slow FID, broken down by ECT." aria-labelledby="performance-fig17-caption" aria-describedby="performance-fig17-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=1173039776&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig17-description" data-show-text="{{ show_description(17) }}" data-hide-text="{{ hide_description(17) }}">{{ show_description(17) }}</button>
      <div id="performance-fig17-description" class="visually-hidden">Bar chart of FID distributions per effective connection type. 4G fast, moderate, slow: 41%, 45%, and 15% respectively. 3G: 22%, 52%, and 26%. 2G: 19%, 58%, 23%. Slow 2G: 15%, 58%, 27%.</div>
      <figcaption id="performance-fig17-caption"><a href="#performance-fig17" class="anchor-link">Figure 17.</a> Distribution of websites labeled as having fast, moderate, or slow FID, broken down by <abbr title="effective connection type">ECT</abbr>.</figcaption>
    </figure>
    <p>On its face, FID seems like it would be driven primarily by CPU speed. It'd be reasonable to assume that the slower the device itself is, the higher the likelihood that it will be busy when the user attempts to interact with a web page, right?</p>
    <p>The ECT results above seem to suggest that there is a correlation between connection speed and FID performance. As users' effective connection speed decreases, the percent of websites on which they experience fast FID also decreases: 41% of websites visited by users with a 4G ECT have fast FID, 22% with 3G, 19% with 2G, and 15% with slow 2G.</p>
    <h4 id="performance-fid-by-geo"><a href="#performance-fid-by-geo" class="anchor-link">FID by geo</a></h4>
    <figure id="performance-fig18">
      <a href="https://almanac.httparchive.org/static/images/2019/performance/fig18.png">
        <img src="/static/images/2019/performance/fig18.png" alt="Figure 18. Distribution of websites labeled as having fast, moderate, or slow FID, broken down by geo." aria-labelledby="performance-fig18-caption" aria-describedby="performance-fig18-description" width="600" height="940" data-width="600" data-height="940" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSQlf3_ySLPB5322aTumUZhbVGdaUdkmi1Hs4bYuO3Z1kqM4xspx7REbwXukwPd_tsOSg6oImzpYLM9/pubchart?oid=11500240&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig18-description" data-show-text="{{ show_description(18) }}" data-hide-text="{{ hide_description(18) }}">{{ show_description(18) }}</button>
      <div id="performance-fig18-description" class="visually-hidden">Bar chart of FID distributions for the top 23 most popular geographies. Korea has the most fast websites at 69%. From there, the percent of fast websites declines steadily for other geographies: Australia 55%, United States 52%, Canada 51%, etc.</div>
      <figcaption id="performance-fig18-caption"><a href="#performance-fig18" class="anchor-link">Figure 18.</a> Distribution of websites labeled as having fast, moderate, or slow FID, broken down by geo.</figcaption>
    </figure>
    <p>In this breakdown of FID by geographic location, Korea is out in front of everyone else again. But the top geos have some new faces: Australia, the United States, and Canada are next with more than 50% of websites having fast FID.</p>
    <p>As with the other geo-specific results, there are so many possible factors that could be contributing to the user experience. For example, perhaps wealthier geos that are more privileged can afford faster network infrastructure also have residents with more money to spend on desktops and/or high-end mobile phones.</p>
    <h2 id="performance-conclusion"><a href="#performance-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>Quantifying how fast a web page loads is an imperfect science that can't be represented by a single metric. Conventional metrics like <code>onload</code> can miss the mark entirely by measuring irrelevant or imperceptible parts of the user experience. User-perceived metrics like FCP and FID more faithfully convey what users see and feel. Even still, neither metric can be looked at in isolation to draw conclusions about whether the overall page load experience was fast or slow. Only by looking at many metrics holistically, can we start to understand the performance for an individual website and the state of the web.</p>
    <p>The data presented in this chapter showed that there is still a lot of work to do to meet the goals set for fast websites. Certain form factors, effective connection types, and geos do correlate with better user experiences, but we can't forget about the combinations of demographics with poor performance. In many cases, the web platform is used for business; making more money from improving conversion rates can be a huge motivator for speeding up a website. Ultimately, for all websites, performance is about delivering positive experiences to users in a way that doesn't impede, frustrate, or enrage them.</p>
    <p>
      As the web gets another year older and our ability to measure how users experience it improves incrementally, I'm looking forward to developers having access to metrics that capture more of the holistic user experience. FCP is very early on the timeline of showing useful content to users, and newer metrics like <a href="https://web.dev/largest-contentful-paint">Largest Contentful Paint<span class="fn">https://web.dev/largest-contentful-paint</span></a> (LCP) are emerging to improve our visibility into how page loads are perceived. The <a href="https://web.dev/layout-instability-api">Layout Instability API<span class="fn">https://web.dev/layout-instability-api</span></a> has also given us a novel glimpse into the frustration users experience beyond page load.
    </p>
    <p>Equipped with these new metrics, the web in 2020 will become even more transparent, better understood, and give developers an advantage to make more meaningful progress to improve performance and contribute to positive user experiences.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"II","chapter_number":8,"title":"Security","description":"Security chapter of the 2019 Web Almanac covering Transport Layer Security (TLS(), mixed content, security headers, cookies, and Subresource Integrity.","authors":["ScottHelme","arturjanc"],"reviewers":["bazzadp","ghedo","paulcalvano"],"translators":null,"discuss":"1763","results":"https://docs.google.com/spreadsheets/d/1Zq2tQhPE06YZUcbzryRrBE6rdZgHHlqEp2XcgS37cm8/","queries":"08_Security","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-06-30T00:00:00.000Z","chapter":"security"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="security-introduction"><a href="#security-introduction" class="anchor-link">Introduction</a></h2>
    <p>This chapter of the Web Almanac looks at the current status of security on the web. With security and privacy becoming increasingly more important online there has been an increase in the availability of features to protect site operators and users. We're going to look at the adoption of these new features across the web.</p>
    <h2 id="security-transport-layer-security"><a href="#security-transport-layer-security" class="anchor-link">Transport Layer Security</a></h2>
    <p>
      Perhaps the largest push to increasing security and privacy online we're seeing at present is the widespread adoption of Transport Layer Security (TLS). TLS (or the older version, SSL) is the protocol that gives us the 'S' in HTTPS and allows secure and private browsing of websites. Not only are we seeing a great <a href="https://httparchive.org/reports/state-of-the-web#pctHttps">increase in the use of HTTPS across the web<span class="fn">https://httparchive.org/reports/state-of-the-web#pctHttps</span></a
      >, but also an increase in more modern versions of TLS like TLSv1.2 and TLSv1.3, which is also important.
    </p>
    <figure id="security-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/security/fig1.png">
        <img src="/static/images/2019/security/fig1.png" alt="Figure 1. Usage of HTTP versus HTTPS." aria-labelledby="security-fig1-caption" aria-describedby="security-fig1-description" width="760" height="470" data-width="760" data-height="470" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRCG3clMcnkVPrnZSCWFi3qG-EU00Qr8X3XaRFQPWHEXQmYWMxnS_kfmmyMQsPZe2P6ECjzCjG0dVFg/pubchart?oid=933123879&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="security-fig1-description" class="visually-hidden">Horizontal bar chart showing mobile HTTPS at 79% and HTTP at 21%, and beneath that desktop HTTPS is 80.51% and HTTP is 19.49%</div>
      <figcaption id="security-fig1-caption"><a href="#security-fig-1" class="anchor-link">Figure 1.</a> Usage of HTTP versus HTTPS.</figcaption>
    </figure>
    <h3 id="security-protocol-versions"><a href="#security-protocol-versions" class="anchor-link">Protocol versions</a></h3>
    <figure id="security-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/security/fig2.png">
        <img src="/static/images/2019/security/fig2.png" alt="Figure 2. Usage of TLS protocol versions." aria-labelledby="security-fig2-caption" aria-describedby="security-fig2-description" width="760" height="470" data-width="760" data-height="470" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRCG3clMcnkVPrnZSCWFi3qG-EU00Qr8X3XaRFQPWHEXQmYWMxnS_kfmmyMQsPZe2P6ECjzCjG0dVFg/pubchart?oid=1441324762&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="security-fig2-description" class="visually-hidden">Horizontal bar chart showing desktop and mobile on similar TLS usage: 58% on TLSv1.2, 41% on TLSv1.3 and very little usage of TLSv1.0 (0.75%) and a tiny usage of TLSv1.1.</div>
      <figcaption id="security-fig2-caption"><a href="#security-fig-2" class="anchor-link">Figure 2.</a> Usage of TLS protocol versions.</figcaption>
    </figure>
    <p>
      Figure 2 shows the support for various protocol versions. Use of legacy TLS versions like TLSv1.0 and TLSv1.1 is minimal and almost all support is for the newer TLSv1.2 and TLSv1.3 versions of the protocol. Even though TLSv1.3 is still very young as a standard (TLSv1.3 was only formally approved in <a href="https://tools.ietf.org/html/rfc8446">August 2018<span class="fn">https://tools.ietf.org/html/rfc8446</span></a
      >), over 40% of requests using TLS are using the latest version!
    </p>
    <p>This is likely due to many sites using requests from the larger players for <a href="#third-parties">third-party content</a>. For example, any sites load Google Analytics, Google AdWords, or Google Fonts and these large players like Google are typically early adopters for new protocols.</p>
    <p>If we look at just home pages, and not all the other requests made on sites, then the usage of TLS is considerably as expected, though still quite high which is likely due to <a href="#cms">CMS</a> sites like Wordpress and <a href="#cdn">CDNs</a>:</p>
    <figure id="security-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/security/fig3.png">
        <img src="/static/images/2019/security/fig3.png" alt="Figure 3. Usage of TLS protocol versions for home page requests only." aria-labelledby="security-fig3-caption" aria-describedby="security-fig3-description" width="760" height="470" data-width="760" data-height="470" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRCG3clMcnkVPrnZSCWFi3qG-EU00Qr8X3XaRFQPWHEXQmYWMxnS_kfmmyMQsPZe2P6ECjzCjG0dVFg/pubchart?oid=897771966&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="security-fig3-description" class="visually-hidden">Horizontal bar chart showing desktop and mobile on similar TLS usage: 47% on desktop (43% on mobile) on TLSv1.2, 20.2% on desktop (19.7% on mobile) on TLSv1.3 and very little usage of TLSv1.0 (1.1% - 1.2%) and a tiny usage of TLSv1.1.</div>
      <figcaption id="security-fig3-caption"><a href="#security-fig-3" class="anchor-link">Figure 3.</a> Usage of TLS protocol versions for home page requests only.</figcaption>
    </figure>
    <p>On the other hand, the <a href="#methodology">methodology</a> used by the Web Almanac will also <em>under-report</em> usage from large sites, as their sites themselves will likely form a larger volume of internet traffic in the real world, yet are crawled only once for these statistics.</p>
    <h3 id="security-certificate-authorities"><a href="#security-certificate-authorities" class="anchor-link">Certificate Authorities</a></h3>
    <p>Of course, if we want to use HTTPS on our website then we need a certificate from a Certificate Authority (CA). With the increase in the use of HTTPS comes the increase in use of CAs and their products/services. Here are the top ten certificate issuers based on the volume of TLS requests that use their certificate.</p>
    <figure id="security-fig-4">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Issuing Certificate Authority</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Google Internet Authority G3</td>
                <td>19.26%</td>
                <td>19.68%</td>
              </tr>
              <tr>
                <td>Let's Encrypt Authority X3</td>
                <td>10.20%</td>
                <td>9.19%</td>
              </tr>
              <tr>
                <td>DigiCert SHA2 High Assurance Server CA</td>
                <td>9.83%</td>
                <td>9.26%</td>
              </tr>
              <tr>
                <td>DigiCert SHA2 Secure Server CA</td>
                <td>7.55%</td>
                <td>8.72%</td>
              </tr>
              <tr>
                <td>GTS CA 1O1</td>
                <td>7.87%</td>
                <td>8.43%</td>
              </tr>
              <tr>
                <td>DigiCert SHA2 Secure Server CA</td>
                <td>7.55%</td>
                <td>8.72%</td>
              </tr>
              <tr>
                <td>COMODO RSA Domain Validation Secure Server CA</td>
                <td>6.29%</td>
                <td>5.79%</td>
              </tr>
              <tr>
                <td>Go Daddy Secure Certificate Authority - G2</td>
                <td>4.84%</td>
                <td>5.10%</td>
              </tr>
              <tr>
                <td>Amazon</td>
                <td>4.71%</td>
                <td>4.45%</td>
              </tr>
              <tr>
                <td>COMODO ECC Domain Validation Secure Server CA 2</td>
                <td>3.22%</td>
                <td>2.75%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-4" class="anchor-link">Figure 4.</a> Top ten Certificate Authority used.</figcaption>
    </figure>
    <p>As previously discussed, the volume for Google likely reflects repeated use of Google Analytics, Google Adwords, or Google Fonts on other sites.</p>
    <p>
      The rise of <a href="https://letsencrypt.org/">Let's Encrypt<span class="fn">https://letsencrypt.org/</span></a> has been meteoric after their launch in early 2016, since then they've become one of the top certificate issuers in the world. The availability of free certificates and the automated tooling has been critically important to the adoption of HTTPS on the web. Let's Encrypt certainly had a significant part to play in both of those.
    </p>
    <p>
      The reduced cost has removed the barrier to entry for HTTPS, but the automation Let's Encrypt uses is perhaps more important in the long run as it allows shorter certificate lifetimes <a href="https://scotthelme.co.uk/why-we-need-to-do-more-to-reduce-certificate-lifetimes/">which has many security benefits<span class="fn">https://scotthelme.co.uk/why-we-need-to-do-more-to-reduce-certificate-lifetimes/</span></a
      >.
    </p>
    <h3 id="security-authentication-key-type"><a href="#security-authentication-key-type" class="anchor-link">Authentication key type</a></h3>
    <p>Alongside the important requirement to use HTTPS is the requirement to also use a good configuration. With so many configuration options and choices to make, this is a careful balance.</p>
    <p>First of all, we'll look at the keys used for authentication purposes. Traditionally certificates have been issued based on keys using the RSA algorithm, however a newer and better algorithm uses ECDSA (Elliptic Curve Digital Signature Algorithm) which allows the use of smaller keys that demonstrate better performance than their RSA counterparts. Looking at the results of our crawl we still see a large % of the web using RSA.</p>
    <figure id="security-fig-5">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Key Type</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>RSA Keys</td>
                <td>48.67%</td>
                <td>58.8%</td>
              </tr>
              <tr>
                <td>ECDA Keys</td>
                <td>21.47%</td>
                <td>26.41%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-5" class="anchor-link">Figure 5.</a> Authentication key types used.</figcaption>
    </figure>
    <p>Whilst ECDSA keys are stronger, which allows the use of smaller keys and demonstrate better performance than their RSA counterparts, concerns around backwards compatibility, and complications in supporting both in the meantime, do prevent some website operators from migrating.</p>
    <h3 id="security-forward-secrecy"><a href="#security-forward-secrecy" class="anchor-link">Forward secrecy</a></h3>
    <p>
      <a href="https://en.wikipedia.org/wiki/Forward_secrecy">Forward secrecy<span class="fn">https://en.wikipedia.org/wiki/Forward_secrecy</span></a> is a property of some key exchange mechanisms that secures the connection in such a way that it prevents each connection to a server from being exposed even in case of a future compromise of the server's private key. This is well understood within the security community as desirable on all TLS connections to safeguard the security of those connections. It was introduced as an optional configuration in 2008 with TLSv1.2 and has become mandatory in 2018 with TLSv1.3 requiring the use of Forward Secrecy.
    </p>
    <p>Looking at the % of TLS requests that provide Forward Secrecy, we can see that support is tremendous. 96.92% of Desktop and 96.49% of mobile requests use Forward secrecy. We'd expect that the continuing increase in the adoption of TLSv1.3 will further increase these numbers.</p>
    <h3 id="security-cipher-suites"><a href="#security-cipher-suites" class="anchor-link">Cipher suites</a></h3>
    <p>
      TLS allows the use of various cipher suites - some newer and more secure, and some older and insecure. Traditionally newer TLS versions have added cipher suites but have been reluctant to remove older cipher suites. TLSv1.3 aims to simplify this by offering a reduced set of ciphers suites and will not permit the older, insecure, cipher suites to be used. Tools like <a href="https://www.ssllabs.com/">SSL Labs<span class="fn">https://www.ssllabs.com/</span></a> allow the TLS setup of a website (including the cipher suites supported and their preferred order) to be easily seen, which helps drive better configurations. We can see that the majority of cipher suites negotiated for TLS requests were indeed excellent:
    </p>
    <figure id="security-fig-6">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Cipher Suite</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>AES_128_GCM</code></td>
                <td>75.87%</td>
                <td>76.71%</td>
              </tr>
              <tr>
                <td><code>AES_256_GCM</code></td>
                <td>19.73%</td>
                <td>18.49%</td>
              </tr>
              <tr>
                <td><code>AES_256_CBC</code></td>
                <td>2.22%</td>
                <td>2.26%</td>
              </tr>
              <tr>
                <td><code>AES_128_CBC</code></td>
                <td>1.43%</td>
                <td>1.72%</td>
              </tr>
              <tr>
                <td><code>CHACHA20_POLY1305</code></td>
                <td>0.69%</td>
                <td>0.79%</td>
              </tr>
              <tr>
                <td><code>3DES_EDE_CBC</code></td>
                <td>0.06%</td>
                <td>0.04%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-6" class="anchor-link">Figure 6.</a> Cipher suite usage used.</figcaption>
    </figure>
    <p>
      It is positive to see such wide stream use of GCM ciphers since the older CBC ciphers are less secure. <a href="https://blog.cloudflare.com/it-takes-two-to-chacha-poly/">CHACHA20_POLY1305<span class="fn">https://blog.cloudflare.com/it-takes-two-to-chacha-poly/</span></a> is still an niche cipher suite, and we even still have a very small use of the <a href="https://en.wikipedia.org/wiki/Triple_DES#Security">insecure 3DES ciphers<span class="fn">https://en.wikipedia.org/wiki/Triple_DES#Security</span></a
      >.
    </p>
    <p>
      It should be noticed that these were the cipher suites used for the crawl using Chrome, but sites will likely also support other cipher suites as well for older browsers. Other sources, for example <a href="https://www.ssllabs.com/ssl-pulse/">SSL Pulse<span class="fn">https://www.ssllabs.com/ssl-pulse/</span></a
      >, can provide more detail on the range of all cipher suites and protocols supported.
    </p>
    <h2 id="security-mixed-content"><a href="#security-mixed-content" class="anchor-link">Mixed content</a></h2>
    <p>Most sites on the web originally existed as HTTP websites and have had to migrate their site to HTTPS. This 'lift and shift' operation can be difficult and sometimes things get missed or left behind. This results in sites having mixed content, where their pages load over HTTPS but something on the page, perhaps an image or a style, is loaded over HTTP. Mixed content is bad for security and privacy and can be difficult to find and fix.</p>
    <figure id="security-fig-7">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Mixed Content Type</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Pages with Any Mixed Content</td>
                <td>16.27%</td>
                <td>15.37%</td>
              </tr>
              <tr>
                <td>Pages with Active Mixed Content</td>
                <td>3.99%</td>
                <td>4.13%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-7" class="anchor-link">Figure 7.</a> Mixed content usage.</figcaption>
    </figure>
    <p>We can see that around 20% of sites across mobile (645,485 sites) and desktop (594,072 sites) present some form of mixed content. Whilst passive mixed content, something like an image, is less dangerous, we can still see that almost a quarter of sites with mixed content have active mixed content. Active mixed content, like JavaScript, is more dangerous as an attacker can insert their own hostile code into a page easily.</p>
    <p>
      In the past web browsers have allowed passive mixed content and flagged it with a warning but blocked active mixed content. More recently however, Chrome <a href="https://blog.chromium.org/2019/10/no-more-mixed-messages-about-https.html">announced<span class="fn">https://blog.chromium.org/2019/10/no-more-mixed-messages-about-https.html</span></a> it intends to improve here and as HTTPS becomes the norm it will block all mixed content instead.
    </p>
    <h2 id="security-security-headers"><a href="#security-security-headers" class="anchor-link">Security headers</a></h2>
    <p>
      Many new and recent features for site operators to better protect their users have come in the form of new HTTP response headers that can configure and control security protections built into the browser. Some of these features are easy to enable and provide a huge level of protection whilst others require a little more work from site operators. If you wish to check if a site is using these headers and has them correctly configured, you can use the <a href="https://securityheaders.com/">Security Headers<span class="fn">https://securityheaders.com/</span></a> tool to scan it.
    </p>
    <figure id="security-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/security/fig8.png">
        <img src="/static/images/2019/security/fig8.png" alt="Figure 8. Usage of Security Headers" aria-labelledby="security-fig8-caption" aria-describedby="security-fig8-description" width="760" height="450" data-width="760" data-height="450" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRCG3clMcnkVPrnZSCWFi3qG-EU00Qr8X3XaRFQPWHEXQmYWMxnS_kfmmyMQsPZe2P6ECjzCjG0dVFg/pubchart?oid=2029255231&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="security-fig8-description" class="visually-hidden">A vertical bar graph showing increasing usage of security headers list for both desktop and mobile listing from left to right: cross-origin-resource-policy (0 sites on both), feature policy (approx 8k desktop and mobile) report-to (74k desktop and 83k mobile), nel (74k desktop and 83k mobile), referrer-policy (142k desktop, 156k mobile), content-security-policy (240k desktop, 252k mobile), strict-transport-security (648k desktop, 679k mobile), x-xss-protection (642k desktop, 805k mobile), x-frame-options (743k desktop, 782k mobile) and finally x-content-type-options (770k desktop, 932k mobile).</div>
      <figcaption id="security-fig8-caption"><a href="#security-fig-8" class="anchor-link">Figure 8.</a> Usage of Security Headers</figcaption>
    </figure>
    <h3 id="security-http-strict-transport-security"><a href="#security-http-strict-transport-security" class="anchor-link">HTTP Strict Transport Security</a></h3>
    <p>
      The <a href="https://tools.ietf.org/html/rfc6797">HSTS<span class="fn">https://tools.ietf.org/html/rfc6797</span></a> header allows a website to instruct a browser that it should only ever communicate with the site over a secure HTTPS connection. This means that any attempts to use a http:// URL will automatically be converted to https:// before a request is made. Given that over 40% of requests were capable of using TLS, we see a much lower % of requests instructing the browser to require it.
    </p>
    <figure id="security-fig-9">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>HSTS Directive</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>max-age</code></td>
                <td>14.80%</td>
                <td>12.81%</td>
              </tr>
              <tr>
                <td><code>includeSubDomains</code></td>
                <td>3.86%</td>
                <td>3.29%</td>
              </tr>
              <tr>
                <td><code>preload</code></td>
                <td>2.27%</td>
                <td>1.99%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-9" class="anchor-link">Figure 9.</a> HSTS directive usage.</figcaption>
    </figure>
    <p>Less than 15% of mobile and desktop pages are issuing a HSTS with a <code>max-age</code> directive. This is a minimum requirement for a valid policy. Fewer still are including subdomains in their policy with the <code>includeSubDomains</code> directive and even fewer still are HSTS preloading. Looking at the median value for a HSTS <code>max-age</code>, for those that do use this, we can see that on both desktop and mobile it is 15768000, a strong configuration representing half a year (60 x 60 x 24 x 365/2).</p>
    <figure id="security-fig-10">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="colgroup" colspan="2">Client</th>
              </tr>
              <tr>
                <th scope="col">Percentile</th>
                <th scope="col">Desktop</th>
                <th scope="col">Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>10</td>
                <td>300</td>
                <td>300</td>
              </tr>
              <tr>
                <td>25</td>
                <td>7889238</td>
                <td>7889238</td>
              </tr>
              <tr>
                <td>50</td>
                <td>15768000</td>
                <td>15768000</td>
              </tr>
              <tr>
                <td>75</td>
                <td>31536000</td>
                <td>31536000</td>
              </tr>
              <tr>
                <td>90</td>
                <td>63072000</td>
                <td>63072000</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <figcaption><a href="#security-fig-10" class="anchor-link">Figure 10.</a> Medium values of HSTS `max-age` policy by percentile.</figcaption>
    </figure>
    <h4 id="security-hsts-preloading"><a href="#security-hsts-preloading" class="anchor-link">HSTS preloading</a></h4>
    <p>
      With the HSTS policy delivered via an HTTP response Header, when visiting a site for the first time a browser will not know whether a policy is configured. To avoid this <a href="https://en.wikipedia.org/wiki/Trust_on_first_use">Trust On First Use<span class="fn">https://en.wikipedia.org/wiki/Trust_on_first_use</span></a> problem, a site operator can have the policy preloaded into the browser (or other user agents) meaning you are protected even before you visit the site for the first time.
    </p>
    <p>
      There are a number of requirements for preloading, which are outlined on the <a href="https://hstspreload.org/">HSTS preload<span class="fn">https://hstspreload.org/</span></a> site. We can see that only a small number of sites, 0.31% on desktop and 0.26% on mobile, are eligible according to current criteria. Sites should ensure they have fully transitions all sites under their domain to HTTPS before submitting to preload the domain or they risk blocking access to HTTP-only sites.
    </p>
    <h3 id="security-content-security-policy"><a href="#security-content-security-policy" class="anchor-link">Content Security Policy</a></h3>
    <p>
      Web applications face frequent attacks where hostile content finds its way into a page. The most worrisome form of content is JavaScript and when an attacker finds a way to insert JavaScript into a page, they can launch damaging attacks. These attacks are known as <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">Cross-Site Scripting (XSS)<span class="fn">https://en.wikipedia.org/wiki/Cross-site_scripting</span></a> and <a href="https://www.w3.org/TR/CSP2/">Content Security Policy (CSP)<span class="fn">https://www.w3.org/TR/CSP2/</span></a> provides an effective defense against these attacks.
    </p>
    <p>CSP is an HTTP header (<code>Content-Security-Policy</code>) published by a website which tells the browser rules around content allowed on a site. If additional content is injected into the site due to a security flaw, and it is not allowed by the policy, the browser will block it from being used. Alongside XSS protection, CSP also offers several other key benefits such as <a href="#security-upgrade-insecure-requests">making migration to HTTPS easier</a>.</p>
    <p>
      Despite the many benefits of CSP, it can be complicated to implement on websites since its very purpose is to limit what is acceptable on a page. The policy must allow all content and resources you need and can easily get large and complex. Tools like <a href="https://report-uri.com/">Report URI<span class="fn">https://report-uri.com/</span></a> can help you analyze and build the appropriate policy.
    </p>
    <p>We find that only 5.51% of desktop pages include a CSP and only 4.73% of mobile pages include a CSP, likely due to the complexity of deployment.</p>
    <h4 id="security-hashnonce"><a href="#security-hashnonce" class="anchor-link">Hash/nonce</a></h4>
    <p>
      A common approach to CSP is to create an allowlist of 3rd party domains that are permitted to load content, such as JavaScript, into your pages. Creating and managing these lists can be difficult so <a href="https://www.w3.org/TR/CSP2/#source-list-valid-hashes">hashes<span class="fn">https://www.w3.org/TR/CSP2/#source-list-valid-hashes</span></a> and <a href="https://www.w3.org/TR/CSP2/#source-list-valid-nonces">nonces<span class="fn">https://www.w3.org/TR/CSP2/#source-list-valid-nonces</span></a> were introduced as an alternative approach. A hash is calculated based on contents of the script so if this is published by the website operator and the script is changed, or another script is added, then it will not match the hash and will be blocked. A nonce is a one-time code (which should be changed each time the page is loaded to prevent it being guessed) which is allowed by the CSP and which the script is tagged with. You can see an example of a nonce on this page by viewing the source to see how Google Tag Manager is loaded.
    </p>
    <p>Of the sites surveyed only 0.09% of desktop pages use a nonce source and only 0.02% of desktop pages use a hash source. The number of mobile pages use a nonce source is slightly higher at 0.13% but the use of hash sources is lower on mobile pages at 0.01%.</p>
    <h4 id="security-strict-dynamic">
      <a href="#security-strict-dynamic" class="anchor-link"><code>strict-dynamic</code></a>
    </h4>
    <p>
      The proposal of <a href="https://www.w3.org/TR/CSP3/#strict-dynamic-usage"><code>strict-dynamic</code><span class="fn">https://www.w3.org/TR/CSP3/#strict-dynamic-usage</span></a> in the next iteration of <a href="https://www.w3.org/TR/CSP3/">CSP<span class="fn">https://www.w3.org/TR/CSP3/</span></a> further reduces the burden on site operators for using CSP by allowing an approved script to load further script dependencies. Despite the introduction of this feature, which already has <a href="https://caniuse.com/#feat=mdn-http_headers_csp_content-security-policy_strict-dynamic">support in some modern browsers<span class="fn">https://caniuse.com/#feat=mdn-http_headers_csp_content-security-policy_strict-dynamic</span></a
      >, only 0.03% of desktop pages and 0.1% of mobile pages include it in their policy.
    </p>
    <h4 id="security-trusted-types">
      <a href="#security-trusted-types" class="anchor-link"><code>trusted-types</code></a>
    </h4>
    <p>
      XSS attacks come in various forms and <a href="https://github.com/w3c/webappsec-trusted-types">Trusted-Types<span class="fn">https://github.com/w3c/webappsec-trusted-types</span></a> was created to help specifically with DOM-XSS. Despite being an effective mechanism, our data shows that only 2 mobile and desktop pages use the Trusted-Types directive.
    </p>
    <h4 id="security-unsafe-inline-and-unsafe-eval">
      <a href="#security-unsafe-inline-and-unsafe-eval" class="anchor-link"><code>unsafe inline</code> and <code>unsafe-eval</code></a>
    </h4>
    <p>When a CSP is deployed on a page, certain unsafe features like inline scripts or the use of <code>eval()</code> are disabled. A page can depend on these features and enable them in a safe fashion, perhaps with a nonce or hash source. Site operators can also re-enable these unsafe features with <code>unsafe-inline</code> or <code>unsafe-eval</code> in their CSP though, as their names suggest, doing so does lose much of the protections that CSP gives you. Of the 5.51% of desktop pages that include a CSP, 33.94% of them include <code>unsafe-inline</code> and 31.03% of them include <code>unsafe-eval</code>. On mobile pages we find that of the 4.73% that contain a CSP, 34.04% use <code>unsafe-inline</code> and 31.71% use <code>unsafe-eval</code>.</p>
    <h4 id="security-upgrade-insecure-requests">
      <a href="#security-upgrade-insecure-requests" class="anchor-link"><code>upgrade-insecure-requests</code></a>
    </h4>
    <p>We mentioned earlier that a common problem that site operators face in their migration from HTTP to HTTPS is that some content can still be accidentally loaded over HTTP on their HTTPS page. This problem is known as mixed content and CSP provides an effective way to solve this problem. The <code>upgrade-insecure-requests</code> directive instructs a browser to load all subresources on a page over a secure connection, automatically upgrading HTTP requests to HTTPS requests as an example. Think of it like HSTS for subresources on a page.</p>
    <p>We showed earlier in figure 7 that, of the HTTPS pages surveyed on the desktop, 16.27% of them loaded mixed-content with 3.99% of pages loading active mixed-content like JS/CSS/fonts. On mobile pages we see 15.37% of HTTPS pages loading mixed-content with 4.13% loading active mixed-content. By loading active content such as JavaScript over HTTP an attacker can easily inject hostile code into the page to launch an attack. This is what the <code>upgrade-insecure-requests</code> directive in CSP protects against.</p>
    <p>The <code>upgrade-insecure-requests</code> directive is found in the CSP of 3.24% of desktop pages and 2.84% of mobile pages, indicating that an increase in adoption would provide substantial benefits. It could be introduced with relative ease, without requiring a fully locked-down CSP and the complexity that would entail, by allowing broad categories with a policy like below, or even including <code>unsafe-inline</code> and <code>unsafe-eval</code>:</p>
    <pre><code>Content-Security-Policy: upgrade-insecure-requests; default-src https:</code></pre>
    <h4 id="security-frame-ancestors">
      <a href="#security-frame-ancestors" class="anchor-link"><code>frame-ancestors</code></a>
    </h4>
    <p>
      Another common attack known as <a href="https://en.wikipedia.org/wiki/Clickjacking">clickjacking<span class="fn">https://en.wikipedia.org/wiki/Clickjacking</span></a> is conducted by an attacker who will place a target website inside an iframe on a hostile website, and then overlay hidden controls and buttons that they are in control of. Whilst the <code>X-Frame-Options</code> header (discussed below) originally set out to control framing, it wasn't flexible and <code>frame-ancestors</code> in CSP stepped in to provide a more flexible solution. Site operators can now specify a list of hosts that are permitted to frame them and any other hosts attempting to frame them will be prevented.
    </p>
    <p>Of the pages surveyed, 2.85% of desktop pages include the <code>frame-ancestors</code> directive in CSP with 0.74% of desktop pages setting Frame-Ancestors to <code>'none'</code>, preventing any framing, and 0.47% of pages setting <code>frame-ancestors</code> to <code>'self'</code>, allowing only their own site to frame itself. On mobile we see 2.52% of pages using <code>frame-ancestors</code> with 0.71% setting the value of <code>'none'</code> and 0.41% setting the value to <code>'self'</code>.</p>
    <h3 id="security-referrer-policy"><a href="#security-referrer-policy" class="anchor-link">Referrer Policy</a></h3>
    <p>
      The <a href="https://www.w3.org/TR/referrer-policy/"><code>Referrer-Policy</code><span class="fn">https://www.w3.org/TR/referrer-policy/</span></a> header allows a site to control what information will be sent in the <code>Referer</code> header when a user navigates away from the current page. This can be the source of information leakage if there is sensitive data in the URL, such as search queries or other user-dependent information included in URL parameters. By controlling what information is sent in the <code>Referer</code> header, ideally limiting it, a site can protect the privacy of their visitors by reducing the information sent to 3rd parties.
    </p>
    <p>
      Note the Referrer Policy does not follow the <code>Referer</code> header's misspelling <a href="https://stackoverflow.com/questions/3087626/was-the-misspelling-of-the-http-field-name-referer-intentional">which has become a well-known error<span class="fn">https://stackoverflow.com/questions/3087626/was-the-misspelling-of-the-http-field-name-referer-intentional</span></a
      >.
    </p>
    <p>A total of 3.25% of desktop pages and 2.95% of mobile pages issue a <code>Referrer-Policy</code> header and below we can see the configurations those pages used.</p>
    <figure id="security-fig-11">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Configuration</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>no-referrer-when-downgrade</code></td>
                <td>39.16%</td>
                <td>41.52%</td>
              </tr>
              <tr>
                <td><code>strict-origin-when-cross-origin</code></td>
                <td>39.16%</td>
                <td>22.17%</td>
              </tr>
              <tr>
                <td><code>unsafe-url</code></td>
                <td>22.17%</td>
                <td>22.17%</td>
              </tr>
              <tr>
                <td><code>same-origin</code></td>
                <td>7.97%</td>
                <td>7.97%</td>
              </tr>
              <tr>
                <td><code>origin-when-cross-origin</code></td>
                <td>6.76%</td>
                <td>6.44%</td>
              </tr>
              <tr>
                <td><code>no-referrer</code></td>
                <td>5.65%</td>
                <td>5.38%</td>
              </tr>
              <tr>
                <td><code>strict-origin</code></td>
                <td>4.35%</td>
                <td>4.14%</td>
              </tr>
              <tr>
                <td><code>origin</code></td>
                <td>3.63%</td>
                <td>3.23%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-11" class="anchor-link">Figure 11.</a> <code>Referrer-Policy</code> configuration option usage.</figcaption>
    </figure>
    <p>
      This table shows the valid values set by pages and that, of the pages which use this header, 99.75% of them on desktop and 96.55% of them on mobile are setting a valid policy. The most popular choice of configuration is <code>no-referrer-when-downgrade</code> which will prevent the <code>Referer</code> header being sent when a user navigates from a HTTPS page to a HTTP page. The second most popular choice is <code>strict-origin-when-cross-origin</code> which prevents any information being sent on a scheme downgrade (HTTPS to HTTP navigation) and when information is sent in the <code>Referer</code> it will only contain the origin of the source and not the full URL (for example <code>https://www.example.com</code> rather than <code>https://www.example.com/page/</code>). Details on the other valid configurations can be found in the <a href="https://www.w3.org/TR/referrer-policy/#referrer-policies">Referrer Policy specification<span class="fn">https://www.w3.org/TR/referrer-policy/#referrer-policies</span></a
      >, though such a high usage of <code>unsafe-url</code> warrants further investigation but is likely to be a <a href="#third-parties">third-party</a> component like analytics or advertisement libraries.
    </p>
    <h3 id="security-feature-policy"><a href="#security-feature-policy" class="anchor-link">Feature Policy</a></h3>
    <p>
      As the web platform becomes more powerful and feature rich, attackers can abuse these new APIs in interesting ways. In order to limit misuse of powerful APIs, a site operator can issue a <a href="https://w3c.github.io/webappsec-feature-policy/"><code>Feature-Policy</code><span class="fn">https://w3c.github.io/webappsec-feature-policy/</span></a> header to disable features that are not required, preventing them from being abused.
    </p>
    <p>Here are the 5 most popular features that are controlled with a Feature Policy.</p>
    <figure id="security-fig-12">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Feature</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>microphone</code></td>
                <td>10.78%</td>
                <td>10.98%</td>
              </tr>
              <tr>
                <td><code>camera</code></td>
                <td>9.95%</td>
                <td>10.19%</td>
              </tr>
              <tr>
                <td><code>payment</code></td>
                <td>9.54%</td>
                <td>9.54%</td>
              </tr>
              <tr>
                <td><code>geolocation</code></td>
                <td>9.38%</td>
                <td>9.41%</td>
              </tr>
              <tr>
                <td><code>gyroscope</code></td>
                <td>7.92%</td>
                <td>7.90%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-12" class="anchor-link">Figure 12.</a> Top 5 <code>Feature-Policy</code> options used.</figcaption>
    </figure>
    <p>We can see that the most popular feature to take control of is the microphone, with almost 11% of desktop and mobile pages issuing a policy that includes it. Delving deeper into the data we can look at what those pages are allowing or blocking.</p>
    <figure id="security-fig-13">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Feature</th>
                <th>Configuration</th>
                <th>Usage</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>microphone</code></td>
                <td><code>none</code></td>
                <td>9.09%</td>
              </tr>
              <tr>
                <td><code>microphone</code></td>
                <td><code>none</code></td>
                <td>8.97%</td>
              </tr>
              <tr>
                <td><code>microphone</code></td>
                <td><code>self</code></td>
                <td>0.86%</td>
              </tr>
              <tr>
                <td><code>microphone</code></td>
                <td><code>self</code></td>
                <td>0.85%</td>
              </tr>
              <tr>
                <td><code>microphone</code></td>
                <td><code>*</code></td>
                <td>0.64%</td>
              </tr>
              <tr>
                <td><code>microphone</code></td>
                <td><code>*</code></td>
                <td>0.53%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-13" class="anchor-link">Figure 13.</a> Settings used for <code>microphone</code> feature.</figcaption>
    </figure>
    <p>By far the most common approach here is to block use of the microphone altogether, with about 9% of pages taking that approach. A small number of pages do allow the use of the microphone by their own origin and interestingly, a small selection of pages intentionally allow use of the microphone by any origin loading content in their page.</p>
    <h3 id="security-x-frame-options">
      <a href="#security-x-frame-options" class="anchor-link"><code>X-Frame-Options</code></a>
    </h3>
    <p>
      The <a href="https://tools.ietf.org/html/rfc7034"><code>X-Frame-Options</code><span class="fn">https://tools.ietf.org/html/rfc7034</span></a> header allows a page to control whether or not it can be placed in an iframe by another page. Whilst lacking the flexibility of <code>frame-ancestors</code> in CSP, mentioned above, it was effective if you didn't require fine grained control of framing.
    </p>
    <p>We see that the usage of the <code>X-Frame-Options</code> header is quite high on both desktop (16.99%) and mobile (14.77%) and can also look more closely at the specific configurations used.</p>
    <figure id="security-fig-14">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Configuration</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>sameorigin</code></td>
                <td>84.92%</td>
                <td>83.86%</td>
              </tr>
              <tr>
                <td><code>deny</code></td>
                <td>13.54%</td>
                <td>14.50%</td>
              </tr>
              <tr>
                <td><code>allow-from</code></td>
                <td>1.53%</td>
                <td>1.64%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-14" class="anchor-link">Figure 14.</a> <code>X-Frame-Options</code> configuration used.</figcaption>
    </figure>
    <p>
      It seems that the vast majority of pages restrict framing to only their own origin and the next significant approach is to prevent framing altogether. This is similar to <code>frame-ancestors</code> in CSP where these 2 approaches are also the most common. It should also be noted that the <code>allow-from</code> option, which in theory allow site owners to list the third-party domains allowed to frame was <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options#Browser_compatibility">never well supported<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options#Browser_compatibility</span></a> and has been deprecated.
    </p>
    <h3 id="security-x-content-type-options">
      <a href="#security-x-content-type-options" class="anchor-link"><code>X-Content-Type-Options</code></a>
    </h3>
    <p>
      The <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options"><code>X-Content-Type-Options</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options</span></a> header is the most widely deployed Security Header and is also the most simple, with only one possible configuration value <code>nosniff</code>. When this header is issued a browser must treat a piece of content as the MIME Type declared in the <code>Content-Type</code> header and not try to change the advertised value when it infers a file is of a different type. Various security flaws can be introduced if a browser is persuaded to incorrectly sniff the type..
    </p>
    <p>We find that an identical 17.61% of pages on both mobile and desktop issue the <code>X-Content-Type-Options</code> header.</p>
    <h3 id="security-x-xss-protection">
      <a href="#security-x-xss-protection" class="anchor-link"><code>X-XSS-Protection</code></a>
    </h3>
    <p>
      The <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-XSS-Protection"><code>X-XSS-Protection</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-XSS-Protection</span></a> header allows a site to control the XSS Auditor or XSS Filter built into a browser, which should in theory provide some XSS protection.
    </p>
    <p>14.69% of Desktop requests, and 15.2% of mobile requests used the <code>X-XSS-Protection</code> header. Digging into the data we can see what the intention for most site operators was in figure 13.</p>
    <figure id="security-fig-15">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Configuration</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>1;mode=block</code></td>
                <td>91.77%</td>
                <td>91.46%</td>
              </tr>
              <tr>
                <td><code>1</code></td>
                <td>5.54%</td>
                <td>5.35%</td>
              </tr>
              <tr>
                <td><code>0</code></td>
                <td>2.58%</td>
                <td>3.11%</td>
              </tr>
              <tr>
                <td><code>1;report=</code></td>
                <td>0.12%</td>
                <td>0.09%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-15" class="anchor-link">Figure 15.</a> <code>X-XSS-Protection</code> configuration usage.</figcaption>
    </figure>
    <p>The value <code>1</code> enables the filter/auditor and <code>mode=block</code> sets the protection to the strongest setting (in theory) where any suspected XSS attack would cause the page to not be rendered. The second most common configuration was to simply ensure the auditor/filter was turned on, by presenting a value of <code>1</code> and then the 3rd most popular configuration is quite interesting.</p>
    <p>Setting a value of <code>0</code> in the header instructs the browser to disable any XSS auditor/filter that it may have. Some historic attacks demonstrated how the auditor or filter could be tricked into assisting an attacker rather than protecting the user so some site operators could disable it if they were confident they have adequate protection against XSS in place.</p>
    <p>Due to these attacks, Edge retired their XSS Filter, Chrome deprecated their XSS Auditor and Firefox never implemented support for the feature. We still see widespread use of the header at approximately 15% of all sites, despite it being largely useless now.</p>
    <h3 id="security-report-to"><a href="#security-report-to" class="anchor-link">Report-To</a></h3>
    <p>
      The <a href="https://www.w3.org/TR/reporting/">Reporting API<span class="fn">https://www.w3.org/TR/reporting/</span></a> was introduced to allow site operators to gather various pieces of <a href="https://scotthelme.co.uk/introducing-the-reporting-api-nel-other-major-changes-to-report-uri/">telemetry from the browser<span class="fn">https://scotthelme.co.uk/introducing-the-reporting-api-nel-other-major-changes-to-report-uri/</span></a
      >. Many errors or problems on a site can result in a poor experience for the user yet a site operator can only find out if the user contacts them. The Reporting API provides a mechanism for a browser to automatically report these problems without any user interaction or interruption. The Reporting API is configured by delivering the <code>Report-To</code> header.
    </p>
    <p>
      By specifying the header, which contains a location where the telemetry should be sent, a browser will automatically begin sending the data and you can use a 3rd party service like <a href="https://report-uri.com/">Report URI<span class="fn">https://report-uri.com/</span></a> to collect the reports or collect them yourself. Given the ease of deployment and configuration, we can see that only a small fraction of desktop (1.70%) and mobile (1.57%) sites currently enable this feature. To see the kind of telemetry you can collect, refer to the <a href="https://www.w3.org/TR/reporting/">Reporting API specification<span class="fn">https://www.w3.org/TR/reporting/</span></a
      >.
    </p>
    <h3 id="security-network-error-logging"><a href="#security-network-error-logging" class="anchor-link">Network Error Logging</a></h3>
    <p>
      <a href="https://www.w3.org/TR/network-error-logging/">Network Error Logging (NEL)<span class="fn">https://www.w3.org/TR/network-error-logging/</span></a> provides detailed information about various failures in the browser that can result in a site being inoperative. Whereas the <code>Report-To</code> is used to report problems with a page that is loaded, the <code>NEL</code> header allows sites to inform the browser to cache this policy and then to report future connection problems when they happen via the endpoint configured in the <code>Reporting-To</code> header above. NEL can therefore be seen as an extension of the Reporting API.
    </p>
    <p>Of course, with NEL depending on the Reporting API, we shouldn't see the usage of NEL exceed that of the Reporting API, so we see similarly low numbers here too at 1.70% for desktop requests and 1.57% for mobile. The fact these numbers are identical suggest they are being deployed together.</p>
    <p>
      NEL provides incredibly valuable information and you can read more about the type of information in the <a href="https://w3c.github.io/network-error-logging/#predefined-network-error-types">Network Error Logging specification<span class="fn">https://w3c.github.io/network-error-logging/#predefined-network-error-types</span></a
      >.
    </p>
    <h3 id="security-clear-site-data"><a href="#security-clear-site-data" class="anchor-link">Clear Site Data</a></h3>
    <p>
      With the increasing ability to store data locally on a user's device, via cookies, caches and local storage to name but a few, site operators needed a reliable way to manage this data. The Clear Site Data header provides a means to ensure that all data of a particular type is removed from the device, though it is <a href="https://caniuse.com/#feat=mdn-http_headers_clear-site-data">not yet supported in all browsers<span class="fn">https://caniuse.com/#feat=mdn-http_headers_clear-site-data</span></a
      >.
    </p>
    <p>Given the nature of the header, it is unsurprising to see almost no usage reported - just 9 desktop requests and 7 mobile requests. With our data only looking at the homepage of a site, we're unlikely to see the most common use of the header which would be on a logout endpoint. Upon logging out of a site, the site operator would return the Clear Site Data header and the browser would remove all data of the indicated types. This is unlikely to take place on the homepage of a site.</p>
    <h2 id="security-cookies"><a href="#security-cookies" class="anchor-link">Cookies</a></h2>
    <p>Cookies have many security protections available and whilst some of those are long standing, and have been available for years, some of them are really quite new have been introduced only in the last couple of years.</p>
    <h3 id="security-secure">
      <a href="#security-secure" class="anchor-link"><code>Secure</code></a>
    </h3>
    <p>The <code>Secure</code> flag on a cookie instructs a browser to only send the cookie over a secure (HTTPS) connection and we find only a small % of sites (4.22% on desktop and 3.68% on mobile) issuing a cookie with the Secure flag set on their homepage. This is depressing considering the relative ease with which this feature can be used. Again, the high usage of analytics and advertisement <a href="#third-parties">third-party</a> requests, which wish to collect data over both HTTP and HTTPS is likely skewing these numbers and it would be interesting research to see the usage on other cookies, like authentication cookies.</p>
    <h3 id="security-httponly">
      <a href="#security-httponly" class="anchor-link"><code>HttpOnly</code></a>
    </h3>
    <p>The <code>HttpOnly</code> flag on a cookie instructs the browser to prevent JavaScript on the page from accessing the cookie. Many cookies are only used by the server so are not needed by the JavaScript on the page, so restricting access to a cookie is a great protection against XSS attacks from stealing the cookie. We find that a much larger % of sites issuing a cookie with this flag on their homepage at 24.24% on desktop and 22.23% on mobile.</p>
    <h3 id="security-samesite">
      <a href="#security-samesite" class="anchor-link"><code>SameSite</code></a>
    </h3>
    <p>
      As a much more recent addition to cookie protections, the <code>SameSite</code> flag is a powerful protection against <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">Cross-Site Request Forgery (CSRF)<span class="fn">https://en.wikipedia.org/wiki/Cross-site_request_forgery</span></a> attacks (often also known as XSRF).
    </p>
    <p>These attacks work by using the fact that browsers will typically include relevant cookies in all requests. Therefore, if you are logged in, and so have cookies set, and then visit a malicious site, it can make a call for an API and the browser will "helpfully" send the cookies. Adding the <code>SameSite</code> attribute to a Cookie, allows a website to inform the browser not to send the cookies when calls are issued from third-party sites and hence the attack fails.</p>
    <p>Being a recently introduced mechanism, the usage of Same-Site cookies is much lower as we would expect at 0.1% of requests on both desktop and mobile. There are use cases when a cookie should be sent cross-site. For example, single sign-on sites implicitly work by setting the cookie along with an authentication token.</p>
    <figure id="security-fig-16">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Configuration</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>strict</code></td>
                <td>53.14%</td>
                <td>50.64%</td>
              </tr>
              <tr>
                <td><code>lax</code></td>
                <td>45.85%</td>
                <td>47.42%</td>
              </tr>
              <tr>
                <td><code>none</code></td>
                <td>0.51%</td>
                <td>0.41%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#security-fig-16" class="anchor-link">Figure 16.</a> SameSite configuration usage.</figcaption>
    </figure>
    <p>We can see that of those pages already using Same-Site cookies, more than half of them are using it in <code>strict</code> mode. This is closely followed by sites using Same-Site in <code>lax</code> mode and then a small selection of sites using the value <code>none</code>. This last value is used to opt-out of the upcoming change where browser vendors may implement <code>lax</code> mode by default.</p>
    <p>
      Because it provides much needed protection against a dangerous attack, there are currently indications that leading browsers could <a href="https://blog.chromium.org/2019/10/developers-get-ready-for-new.html">implement this feature by default<span class="fn">https://blog.chromium.org/2019/10/developers-get-ready-for-new.html</span></a> and enable it on cookies even though the value is not set. If this were to happen the SameSite protection would be enabled, though in its weaker setting of <code>lax</code> mode and not <code>strict</code> mode, as that would likely cause more breakage.
    </p>
    <h3 id="security-prefixes"><a href="#security-prefixes" class="anchor-link">Prefixes</a></h3>
    <p>Another recent addition to cookies are Cookie Prefixes. These use the name of your cookie to add one of two further protections to those already covered. While the above flags can be accidentally unset on cookies, the name will not change so using the name to define security attributes can more reliably enforce them.</p>
    <p>Currently the name of your cookie can be prefixed with either <code>__Secure-</code> or <code>__Host-</code>, with both offering additional security to the cookie.</p>
    <figure id="security-fig-17">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="colgroup" colspan="2">No. of Home Pages</th>
                <th scope="colgroup" colspan="2">% of Home Pages</th>
              </tr>
              <tr>
                <th scope="col">Prefix value</th>
                <th scope="col">Desktop</th>
                <th scope="col">Mobile</th>
                <th scope="col">Desktop</th>
                <th scope="col">Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>__Secure-</code></td>
                <td>640</td>
                <td>628</td>
                <td>0.01%</td>
                <td>0.01%</td>
              </tr>
              <tr>
                <td><code>__Host-</code></td>
                <td>154</td>
                <td>157</td>
                <td>0.00%</td>
                <td>0.00%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <figcaption><a href="#security-fig-17" class="anchor-link">Figure 17.</a> Cookie prefix usage.</figcaption>
    </figure>
    <p>As the figures show, the use of either prefix is incredibly low but as the more relaxed of the two, the <code>__Secure-</code> prefix does see more utilization already.</p>
    <h2 id="security-subresource-integrity"><a href="#security-subresource-integrity" class="anchor-link">Subresource Integrity</a></h2>
    <p>Another problem that has been on the rise recently is the security of 3rd party dependencies. When loading a script file from a 3rd party, we hope that the script file is always the library that we wanted, perhaps a particular version of jQuery. If a CDN or 3rd party hosting service is compromised, the script files they are hosting could be altered. In this scenario your application would now be loading malicious JavaScript that could harm your visitors. This is what subresource integrity protects against.</p>
    <p>By adding an <code>integrity</code> attribute to a script or link tag, a browser can integrity check the 3rd party resource and reject it if it has been altered, in a similar manner that CSP hashes described above are used.</p>
    <pre><code>&lt;script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"&gt;&lt;/script&gt;</code></pre>
    <p>With only 0.06% (247,604) of desktop pages and 0.05% (272,167) of mobile pages containing link or script tags with the integrity attribute set, there's room for a lot of improvement in the use of SRI. With many CDNs now providing code samples that include the SRI integrity attribute we should see a steady increase in the use of SRI.</p>
    <h2 id="security-conclusion"><a href="#security-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>As the web grows in capabilities and allows access to more and more sensitive data, it becomes increasingly important for developers to adopt web security features to protect their applications. The security features reviewed in this chapter are defenses built into the web platform itself, available to every web author. However, as a review of the study results in this chapter shows, the coverage of several important security mechanisms extends only to a subset of the web, leaving a significant part of the ecosystem exposed to security or privacy bugs.</p>
    <h3 id="security-encryption"><a href="#security-encryption" class="anchor-link">Encryption</a></h3>
    <p>In the recent years, the web has made the most progress on the encryption of data in transit. As described in the <a href="#security-transport-layer-security">TLS section</a> section, thanks to a range of efforts from browser vendors, developers and Certificate Authorities such as Let's Encrypt, the fraction of the web using HTTPS has steadily grown. At the time of writing, the majority of sites are available over HTTPS, ensuring confidentiality and integrity of traffic. Importantly, over 99% of websites which enable HTTPS use newer, more secure versions of the TLS protocol (TLSv1.2 and TLSv1.3). The use of strong <a href="#security-cipher-suites">cipher suites</a> such as AES in GCM mode is also high, accounting for over 95% of requests on all platforms.</p>
    <p>At the same time, gaps in TLS configurations are still fairly common. Over 15% of pages suffer from <a href="#security-mixed-content">mixed content</a> issues, resulting in browser warnings, and 4% of sites contain active mixed content, blocked by modern browsers for security reasons. Similarly, the benefits of <a href="#security-http-strict-transport-security">HTTP Strict Transport Security</a> only extend to a small subset of major sites, and the majority of websites don't enable the most secure HSTS configurations and are not eligible for <a href="#security-hsts-preloading">HSTS preloading</a>. Despite progress in HTTPS adoption, a large number of cookies is still set without the <code>Secure</code> flag; only 4% of homepages that set cookies prevent them from being sent over unencrypted HTTP.</p>
    <h3 id="security-defending-against-common-web-vulnerabilities"><a href="#security-defending-against-common-web-vulnerabilities" class="anchor-link">Defending against common web vulnerabilities</a></h3>
    <p>
      Web developers working on sites with sensitive data often enable opt-in web security features to protect their applications from <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">XSS<span class="fn">https://en.wikipedia.org/wiki/Cross-site_scripting</span></a
      >, <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">CSRF<span class="fn">https://en.wikipedia.org/wiki/Cross-site_request_forgery</span></a
      >, <a href="https://en.wikipedia.org/wiki/Clickjacking">clickjacking<span class="fn">https://en.wikipedia.org/wiki/Clickjacking</span></a
      >, and other common web bugs. These issues can be mitigated by setting a number of standard, broadly supported HTTP response headers, including <a href="#security-x-frame-options"><code>X-Frame-Options</code></a
      >, <a href="#security-x-content-type-options"><code>X-Content-Type-Options</code></a
      >, and <a href="#security-content-security-policy"><code>Content-Security-Policy</code></a
      >.
    </p>
    <p>
      In large part due to the complexity of both the security features and web applications, only a minority of websites currently use these defenses, and often enable only those mechanisms which do not require significant refactoring efforts. The most common opt-in application security features are <code>X-Content-Type-Options</code> (enabled by 17% of pages), <code>X-Frame-Options</code> (16%), and the deprecated <code>X-XSS-Protection</code> header (15%). The most powerful web security mechanismContent Security Policyis only enabled by 5% of websites, and only a small subset of them (about 0.1% of all sites) use the safer configurations based on <a href="#security-hashnonce">CSP nonces and hashes</a>. The related <a href="#security-referrer-policy"><code>Referrer-Policy</code></a
      >, aiming to reduce the amount of information sent to third parties in the <code>Referer</code> headers is similarly only used by 3% of websites.
    </p>
    <h3 id="security-modern-web-platform-defenses"><a href="#security-modern-web-platform-defenses" class="anchor-link">Modern web platform defenses</a></h3>
    <p>In the recent years, web browsers have implemented powerful new mechanisms which offer protections from major classes of vulnerabilities and new web threats; this includes <a href="#security-subresource-integrity">Subresource Integrity</a>, <a href="#security-samesite">SameSite cookies</a>, and <a href="#security-prefixes">cookie prefixes</a>.</p>
    <p>
      These features have seen adoption only by a relatively small number of websites; their total coverage is generally well below 1%. The even more recent security mechanisms such as <a href="https://w3c.github.io/webappsec-trusted-types/dist/spec/">Trusted Types<span class="fn">https://w3c.github.io/webappsec-trusted-types/dist/spec/</span></a
      >, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cross-Origin_Resource_Policy_(CORP)">Cross-Origin Resource Policy<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cross-Origin_Resource_Policy_(CORP)</span></a> or <a href="https://www.chromestatus.com/feature/5432089535053824">Cross-Origin-Opener Policy<span class="fn">https://www.chromestatus.com/feature/5432089535053824</span></a> have not seen any widespread adoption as of yet.
    </p>
    <p>
      Similarly, convenience features such as the <a href="#security-report-to">Reporting API</a>, <a href="#security-network-error-logging">Network Error Logging</a> and the <a href="#security-clear-site-data"><code>Clear-Site-Data</code></a> header are also still in their infancy and are currently being used by a small number of sites.
    </p>
    <h2 id="security-tying-it-all-together"><a href="#security-tying-it-all-together" class="anchor-link">Tying it all together</a></h2>
    <p>At web scale, the total coverage of opt-in platform security features is currently relatively low. Even the most broadly adopted protections are enabled by less than a quarter of websites, leaving the majority of the web without platform safeguards against common security issues; more recent security mechanisms, such as Content Security Policy or Referrer Policy, are enabled by less than 5% of websites.</p>
    <p>
      It is important to note, however, that the adoption of these mechanisms is skewed towards larger web applications which frequently handle more sensitive user data. The developers of these sites more frequently invest in improving their web defenses, including enabling a range of protections against common vulnerabilities; tools such as <a href="https://observatory.mozilla.org/">Mozilla Observatory<span class="fn">https://observatory.mozilla.org/</span></a> and <a href="https://securityheaders.com/">Security Headers<span class="fn">https://securityheaders.com/</span></a> can provide a useful checklist of web available security features.
    </p>
    <p>If your web application handles sensitive user data, consider enabling the security mechanisms outlined in this section to protect your users and make the web safer.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"II","chapter_number":9,"title":"Accessibility","description":"Accessibility chapter of the 2019 Web Almanac covering ease of reading, media, ease of navigation, and compatibility with assistive technologies.","authors":["nektarios-paisios","obto","kleinab"],"reviewers":["ljme"],"translators":null,"discuss":"1764","results":"https://docs.google.com/spreadsheets/d/16JGy-ehf4taU0w4ABiKjsHGEXNDXxOlb__idY8ifUtQ/","queries":"09_Accessibility","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-08-02T00:00:00.000Z","chapter":"accessibility"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="accessibility-introduction"><a href="#accessibility-introduction" class="anchor-link">Introduction</a></h2>
    <p>Accessibility on the web is essential for an inclusive and equitable society. As more of our social and work lives move to the online world, it becomes even more important for people with disabilities to be able to participate in all online interactions without barriers. Just as building architects can create or omit accessibility features such as wheelchair ramps, web developers can help or hinder the assistive technology users rely on.</p>
    <p>When thinking about users with disabilities, we should remember that their user journeys are often the samethey just use different tools. These popular tools include but are not limited to: screen readers, screen magnifiers, browser or text size zooming, and voice controls.</p>
    <p>Often, improving the accessibility of your site has benefits for everyone. While we typically think of people with disabilities as people with a permanent disability, anybody can have a temporary or situational disability. For example, someone might be permanently blind, have a temporary eye infection, or, situationally, be outside under a glaring sun. All of these might explain why someone is unable to see their screen. Everyone has situational disabilities, and so improving the accessibility of your web page will improve the experience of all users in any situation.</p>
    <p>
      The <a href="https://www.w3.org/WAI/WCAG21/quickref/">Web Content Accessibility Guidelines<span class="fn">https://www.w3.org/WAI/WCAG21/quickref/</span></a> (WCAG) advise on how to make a website accessible. These guidelines were used as the basis for our analysis. However, in many cases it is difficult to programmatically analyze the accessibility of a website. For instance, the web platform provides several ways of achieving similar functional results, but the underlying code powering them may be completely different. Therefore, our analysis is just an approximation of overall web accessibility.
    </p>
    <p>We've split up our most interesting insights into four categories: ease of reading, media on the web, ease of page navigation, and compatibility with assistive technologies.</p>
    <p>No significant difference in accessibility was found between desktop and mobile during testing. As a result, all of our presented metrics are the result of our desktop analysis unless otherwise stated.</p>
    <h2 id="accessibility-ease-of-reading"><a href="#accessibility-ease-of-reading" class="anchor-link">Ease of reading</a></h2>
    <p>The primary goal of a web page is to deliver content users want to engage with. This content might be a video or an assortment of images, but many times, it's simply the text on the page. It's extremely important that our textual content is legible to our readers. If visitors can't read a web page, they can't engage with it, which ends up with them leaving. In this section we'll look at three areas in which sites struggled.</p>
    <h3 id="accessibility-color-contrast"><a href="#accessibility-color-contrast" class="anchor-link">Color contrast</a></h3>
    <p>
      There are many cases where visitors to your site may not be able see it perfectly. Visitors may be colorblind and unable to distinguish between the font and background color (<a href="http://www.cvrl.org/people/stockman/pubs/1999%20Genetics%20chapter%20SSJN.pdf">1 in every 12 men and 1 in 200 women<span class="fn">http://www.cvrl.org/people/stockman/pubs/1999%20Genetics%20chapter%20SSJN.pdf</span></a> of European descent). Perhaps they're simply reading while the sun is out and creating tons of glare on their screensignificantly impairing their vision. Or maybe they've just grown older and their eyes can't distinguish colors as well as they used to.
    </p>
    <p>In order to make sure your website is readable under these conditions, making sure your text has sufficient color contrast with its background is critical. It is also important to consider what contrasts will be shown when the colors are converted to grayscale.</p>
    <figure id="accessibility-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/example-of-good-and-bad-color-contrast-lookzook.svg">
        <img alt="Figure 1. Example of what text with insufficient color contrast looks like. Courtesy of LookZook" aria-labelledby="accessibility-fig1-caption" aria-describedby="accessibility-fig1-description" src="/static/images/2019/accessibility/example-of-good-and-bad-color-contrast-lookzook.svg" width="568" height="300" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="accessibility-fig1-description" class="visually-hidden">Four colored boxes of brown and gray shades with white text overlaid inside creating two columns. The left column says Too lightly colored and has the brown background color written as <code>#FCA469</code>. The right column says Recommended and the brown background color is written as <code>#BD5B0E</code>. The top box in each column has an brown background with white text <code>#FFFFFF</code> and the bottom box has a gray background with white text <code>#FFFFFF</code>. The grayscale equivalents are <code>#B8B8B8</code> and <code>#707070</code> respectively. Courtesy of LookZook</div>
      <figcaption id="accessibility-fig1-caption"><a href="#accessibility-fig-1" class="anchor-link">Figure 1.</a> Example of what text with insufficient color contrast looks like. Courtesy of LookZook</figcaption>
    </figure>
    <p>Only 22.04% of sites gave all of their text sufficient color contrast. Or in other words: 4 out of every 5 sites have text which easily blends into the background, making it unreadable.</p>
    <p class="note">Note that we weren't able to analyze any text inside of images, so our reported metric is an upper-bound of the total number of websites passing the color contrast test.</p>
    <h3 id="accessibility-zooming-and-scaling-pages"><a href="#accessibility-zooming-and-scaling-pages" class="anchor-link">Zooming and scaling pages</a></h3>
    <p>
      Using a <a href="https://accessibleweb.com/question-answer/minimum-font-size/">legible font size<span class="fn">https://accessibleweb.com/question-answer/minimum-font-size/</span></a> and <a href="https://www.w3.org/WAI/WCAG21/quickref/#target-size">target size<span class="fn">https://www.w3.org/WAI/WCAG21/quickref/#target-size</span></a> helps users read and interact with your website. But even websites perfectly following all of these guidelines can't meet the specific needs of each visitor. This is why device features like pinch-to-zoom and scaling are so important: they allow users to tweak your pages so their needs are met. Or in the case of particularly inaccessible sites using tiny fonts and buttons, it gives users the chance to even use the site.
    </p>
    <p>There are rare cases when disabling scaling is acceptable, like when the page in question is a web-based game using touch controls. If left enabled in this case, players' phones will zoom in and out every time the player taps twice on the game, ironically making it inaccessible.</p>
    <p>
      Because of this, developers are given the ability to disable this feature by setting one of the following two properties in the <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag">meta viewport tag<span class="fn">https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag</span></a
      >:
    </p>
    <ol>
      <li>
        <p><code>user-scalable</code> set to <code>0</code> or <code>no</code></p>
      </li>
      <li>
        <p><code>maximum-scale</code> set to <code>1</code>, <code>1.0</code>, etc</p>
      </li>
    </ol>
    <p>
      Sadly, developers have misused this so much that almost one out of every three sites on mobile (32.21%) disable this feature, and Apple (as of iOS 10) no longer allows web-developers to disable zooming. Mobile Safari simply <a href="https://archive.org/details/ios-10-beta-release-notes">ignores the tag<span class="fn">https://archive.org/details/ios-10-beta-release-notes</span></a
      >. All sites, no matter what, can be zoomed and scaled on newer iOS devices.
    </p>
    <figure id="accessibility-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/fig2.png">
        <img src="/static/images/2019/accessibility/fig2.png" alt="Figure 2. Percentage of sites that disable zooming and scaling vs device type." aria-labelledby="accessibility-fig2-caption" aria-describedby="accessibility-fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSG3DTnx7j-YT1hnQpQYjDRD-rCSF1dXbgva-iJQZKdCKIt34ojGMDRhx74fF93CpPg7oGW_C68fWGT/pubchart?oid=2053904956&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="accessibility-fig2-description" class="visually-hidden">Vertical measuring percentage data, ranging from 0 to 80 in increments of 20, vs. the device type, grouped into desktop and mobile. Desktop enabled: 75.46%; Desktop disabled 24.54%; Mobile enabled: 67.79%; Mobile disabled: 32.21%.</div>
      <figcaption id="accessibility-fig2-caption"><a href="#accessibility-fig-2" class="anchor-link">Figure 2.</a> Percentage of sites that disable zooming and scaling vs device type.</figcaption>
    </figure>
    <h3 id="accessibility-language-identification"><a href="#accessibility-language-identification" class="anchor-link">Language identification</a></h3>
    <p>The web is full of wondrous amounts of content. However, there's a catch: over 1,000 different languages exist in the world, and the content you're looking for may not be written in one you are fluent in. In recent years, we've made great strides in translation technologies and you probably have used one of them on the web (e.g., Google translate).</p>
    <p>
      In order to facilitate this feature, the translation engines need to know what language your pages are written in. This is done by using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang"><code>lang</code> attribute<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang</span></a
      >. Without this, computers must guess what language your page is written in. As you might imagine, this leads to many errors, especially when pages use multiple languages (e.g., your page navigation is in English, but the post content is in Japanese).
    </p>
    <p>This problem is even more pronounced on text-to-speech assistive technologies like screen readers, where if no language has been specified, they tend to read the text in the default user language.</p>
    <p>Of the pages analyzed, 26.13% do not specify a language with the <code>lang</code> attribute. This leaves over a quarter of pages susceptible to all of the problems described above. The good news? Of sites using the <code>lang</code> attribute, they specify a valid language code correctly 99.68% of the time.</p>
    <h3 id="accessibility-distracting-content"><a href="#accessibility-distracting-content" class="anchor-link">Distracting content</a></h3>
    <p>Some users, such as those with cognitive disabilities, have difficulties concentrating on the same task for long periods of time. These users don't want to deal with pages that include lots of motion and animations, especially when these effects are purely cosmetic and not related to the task at hand. At a minimum, these users need a way to turn all distracting animations off.</p>
    <p>
      Unfortunately, our findings indicate that infinitely looping animations are quite common on the web, with 21.04% of pages using them through infinite CSS animations or <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/marquee"><code>&lt;marquee&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/marquee</span></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/blink"><code>&lt;blink&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/blink</span></a> elements.
    </p>
    <p>It is interesting to note however, that the bulk of this problem appears to be a few popular third-party stylesheets which include infinitely looping CSS animations by default. We were unable to determine how many pages actually used these animation styles.</p>
    <h2 id="accessibility-media-on-the-web"><a href="#accessibility-media-on-the-web" class="anchor-link">Media on the web</a></h2>
    <h3 id="accessibility-alternative-text-on-images"><a href="#accessibility-alternative-text-on-images" class="anchor-link">Alternative text on images</a></h3>
    <p>
      Images are an essential part of the web experience. They can tell powerful stories, grab attention, and elicit emotion. But not everyone can see these images that we rely on to tell parts of our stories. Thankfully, in 1995, HTML 2.0 provided a solution to this problem: <a href="https://webaim.org/techniques/alttext/">the alt attribute<span class="fn">https://webaim.org/techniques/alttext/</span></a
      >. The alt attribute provides web developers with the capability of adding a textual description to the images we use, so that when someone is unable to see our images (or the images are unable to load), they can read the alt text for a description. The alt text fills them in on the part of the story they would have otherwise missed.
    </p>
    <p>Even though alt attributes have been around for 25 years, 49.91% of pages still fail to provide alt attributes for some of their images, and 8.68% of pages never use them at all.</p>
    <h3 id="accessibility-captions-for-audio-and-video"><a href="#accessibility-captions-for-audio-and-video" class="anchor-link">Captions for audio and video</a></h3>
    <p>Just as images are powerful storytellers, so too are audio and video in grabbing attention and expressing ideas. When audio and video content is not captioned, users who cannot hear this content miss out on large portions of the web. One of the most common things we hear from users who are Deaf or hard of hearing is the need to include captions for all audio and video content.</p>
    <p>
      Of sites using <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio"><code>&lt;audio&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio</span></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video"><code>&lt;video&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video</span></a> elements, only 0.54% provide captions (as measured by those that include the <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Audio_and_video_delivery/Adding_captions_and_subtitles_to_HTML5_video"><code>&lt;track&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/Guide/Audio_and_video_delivery/Adding_captions_and_subtitles_to_HTML5_video</span></a> element). Note that some websites have custom solutions for providing video and audio captions to users. We were unable to detect these and thus the true percentage of sites utilizing captions is slightly higher.
    </p>
    <h2 id="accessibility-ease-of-page-navigation"><a href="#accessibility-ease-of-page-navigation" class="anchor-link">Ease of page navigation</a></h2>
    <p>When you open the menu in a restaurant, the first thing you probably do is read all of the section headers: appetizers, salads, main course, and dessert. This allows you to scan a menu for all of the options and jump quickly to the dishes most interesting to you. Similarly, when a visitor opens a web page, their goal is to find the information they are most interested inthe reason they came to the page in the first place. In order to help users find their desired content as fast as possible (and prevent them from hitting the back button), we try to separate the contents of our pages into several visually distinct sections, for example: a site header for navigation, various headings in our articles so users can quickly scan them, a footer for other extraneous resources, and more.</p>
    <p>While this is exceptionally important, we need to take care to mark up our pages so our visitors' computers can perceive these distinct sections as well. Why? While most readers use a mouse to navigate pages, many others rely on keyboards and screen readers. These technologies rely heavily on how well their computers understand your page.</p>
    <h3 id="accessibility-headings"><a href="#accessibility-headings" class="anchor-link">Headings</a></h3>
    <p>Headings are not only helpful visually, but to screen readers as well. They allow screen readers to quickly jump from section to section and help indicate where one section ends and another begins.</p>
    <p>In order to avoid confusing screen reader users, make sure you never skip a heading level. For example, don't go straight from an H1 to an H3, skipping the H2. Why is this a big deal? Because this is an unexpected change that will cause a screen reader user to think they've missed a piece of content. This might cause them to start looking all over for what they may have missed, even if there isn't anything missing. Plus, you'll help all of your readers by keeping a more consistent design.</p>
    <p>With that being said, here are our results:</p>
    <ol>
      <li>89.36% of pages use headings in some fashion. Awesome.</li>
      <li>38.6% of pages do skip heading levels.</li>
      <li>Strangely, H2s are found on more sites than H1s.</li>
    </ol>
    <figure id="accessibility-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/fig3.png">
        <img src="/static/images/2019/accessibility/fig3.png" alt="Figure 3. Popularity of heading levels." aria-labelledby="accessibility-fig3-caption" aria-describedby="accessibility-fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-crolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSG3DTnx7j-YT1hnQpQYjDRD-rCSF1dXbgva-iJQZKdCKIt34ojGMDRhx74fF93CpPg7oGW_C68fWGT/pubchart?oid=1123601243&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="accessibility-fig3-description" class="visually-hidden">Vertical bar chart measuring percentage data, ranging from 0 to 80 in increments of 20, vs. bars representing each heading level h1 through h6. H1: 63.25%; H2: 67.86%; H3: 58.63%; H4: 36.38%; H5: 14.64%; H6: 6.91%.</div>
      <figcaption id="accessibility-fig3-caption"><a href="#accessibility-fig-3" class="anchor-link">Figure 3.</a> Popularity of heading levels.</figcaption>
    </figure>
    <h3 id="accessibility-main-landmark"><a href="#accessibility-main-landmark" class="anchor-link">Main landmark</a></h3>
    <p>
      A <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Main_role">main landmark<span class="fn">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Main_role</span></a> indicates to screen readers where the main content of a web page starts so users can jump right to it. Without this, screen reader users have to manually skip over your navigation every single time they go to a new page within your site. Obviously, this is rather frustrating.
    </p>
    <p>We found only one in every four pages (26.03%) include a main landmark. And surprisingly, 8.06% of pages erroneously contained more than one main landmark, leaving these users guessing which landmark contains the actual main content.</p>
    <figure id="accessibility-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/fig4.png">
        <img src="/static/images/2019/accessibility/fig4.png" alt="Figure 4. Percent of pages by their number of 'main' landmarks." aria-labelledby="accessibility-fig4-caption" aria-describedby="accessibility-fig4-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSG3DTnx7j-YT1hnQpQYjDRD-rCSF1dXbgva-iJQZKdCKIt34ojGMDRhx74fF93CpPg7oGW_C68fWGT/pubchart?oid=1420590464&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="accessibility-fig4-description" class="visually-hidden">Vertical bar chart displaying percentage data, ranging from 0 to 80 in increments of 20, vs. bars representing the number of main landmarks per page from 0 to 4. Source: HTTP Archive (July 2019). Zero: 73.97%; One: 17.97%; Two: 7.41%; Three: 0.15%; 4: 0.06%.</div>
      <figcaption id="accessibility-fig4-caption"><a href="#accessibility-fig-4" class="anchor-link">Figure 4.</a> Percent of pages by their number of "main" landmarks.</figcaption>
    </figure>
    <h3 id="accessibility-html-section-elements"><a href="#accessibility-html-section-elements" class="anchor-link">HTML section elements</a></h3>
    <p>Since HTML5 was released in 2008, and made the official standard in 2014, there are many HTML elements to aid computers and screen readers in understanding our page layout and structure.</p>
    <p>
      Elements like <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/header"><code>&lt;header&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/header</span></a
      >, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/footer"><code>&lt;footer&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/footer</span></a
      >, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nav"><code>&lt;navigation&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nav</span></a
      >, and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/main"><code>&lt;main&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/main</span></a> indicate where specific types of content live and allow users to quickly jump around your page. These are being used widely across the web, with most of them being used on over 50% of pages (<code>&lt;main&gt;</code> being the outlier).
    </p>
    <p>
      Others like <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/article"><code>&lt;article&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/article</span></a
      >, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/hr"><code>&lt;hr&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/hr</span></a
      >, and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/aside"><code>&lt;aside&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/aside</span></a> aid readers in understanding a page's main content. For example, <code>&lt;article&gt;</code> says where one article ends and another begins. These elements are not used nearly as much, with each sitting at around 20% usage. Not all of these belong on every web page, so this isn't necessarily an alarming statistic.
    </p>
    <p>All of these elements are primarily designed for accessibility support and have no visual effect, which means you can safely replace existing elements with them and suffer no unintended consequences.</p>
    <figure id="accessibility-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/fig5.png">
        <img src="/static/images/2019/accessibility/fig5.png" alt="Figure 5. Usage of various HTML semantic elements." aria-labelledby="accessibility-fig5-caption" aria-describedby="accessibility-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSG3DTnx7j-YT1hnQpQYjDRD-rCSF1dXbgva-iJQZKdCKIt34ojGMDRhx74fF93CpPg7oGW_C68fWGT/pubchart?oid=708035719&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="accessibility-fig5-description" class="visually-hidden">Vertical bar chart with bars for each element type vs percent of pages ranging from 0 to 60 in increments of 20. nav: 53.94%; header: 54.82%; footer: 55.92%; main: 18.47%; aside: 16.99%; article: 22.59%; hr: 19.1%; section: 36.55%.</div>
      <figcaption id="accessibility-fig5-caption"><a href="#accessibility-fig-5" class="anchor-link">Figure 5.</a> Usage of various HTML semantic elements.</figcaption>
    </figure>
    <h3 id="accessibility-other-html-elements-used-for-navigation"><a href="#accessibility-other-html-elements-used-for-navigation" class="anchor-link">Other HTML elements used for navigation</a></h3>
    <p>Many popular screen readers also allow users to navigate by quickly jumping through links, lists, list items, iframes, and form fields like edit fields, buttons, and list boxes. Figure 6 details how often we saw pages using these elements.</p>
    <figure id="accessibility-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/fig6.png">
        <img src="/static/images/2019/accessibility/fig6.png" alt="Figure 6. Other HTML elements used for navigation" aria-labelledby="accessibility-fig6-caption" aria-describedby="accessibility-fig6-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSG3DTnx7j-YT1hnQpQYjDRD-rCSF1dXbgva-iJQZKdCKIt34ojGMDRhx74fF93CpPg7oGW_C68fWGT/pubchart?oid=389034849&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="accessibility-fig6-description" class="visually-hidden">Vertical bar chart with bars for each element type vs percent of pages ranging from 0 to 100 in increments of 25. a: 98.22%; ul: 88.62%; input: 76.63%; iframe: 60.39%; button: 56.74%; select: 19.68%; textarea: 12.03%.</div>
      <figcaption id="accessibility-fig6-caption"><a href="#accessibility-fig-6" class="anchor-link">Figure 6.</a> Other HTML elements used for navigation.</figcaption>
    </figure>
    <h3 id="accessibility-skip-links"><a href="#accessibility-skip-links" class="anchor-link">Skip Links</a></h3>
    <p>
      A <a href="https://webaim.org/techniques/skipnav/">skip link<span class="fn">https://webaim.org/techniques/skipnav/</span></a> is a link placed at the top of a page which allows screen readers or keyboard-only users to jump straight to the main content. It effectively "skips" over all navigational links and menus at the top of the page. Skip links are especially useful to keyboard users who don't use a screen reader, as these users don't usually have access to other modes of quick navigation (like landmarks and headings). 14.19% of the pages in our sample were found to have skip links.
    </p>
    <p>If you'd like to see a skip link in action for yourself, you can! Just do a quick Google search and hit "<kbd>tab</kbd>" as soon as you land on the search result pages. You'll be greeted with a previously hidden link just like the one in Figure 7.</p>
    <figure id="accessibility-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/example-of-a-skip-link-on-google.com.png">
        <img alt="Figure 7. What a skip link looks like on google.com." aria-labelledby="accessibility-fig7-caption" aria-describedby="accessibility-fig7-description" src="/static/images/2019/accessibility/example-of-a-skip-link-on-google.com.png" width="600" height="333" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="accessibility-fig7-description" class="visually-hidden">Screenshot of Google search results page for search 'http archive'. The visible 'Skip to main content' link is surrounded by a blue focus highlight and a yellow overlaid box with a red arrow pointing to the skip link reads 'A skip link on google.com'.</div>
      <figcaption id="accessibility-fig7-caption"><a href="#accessibility-fig-7" class="anchor-link">Figure 7.</a> What a skip link looks like on google.com.</figcaption>
    </figure>
    <p>
      In fact you don't need to even leave this site as we <a href="https://github.com/HTTPArchive/almanac.httparchive.org/pull/645">use them here too<span class="fn">https://github.com/HTTPArchive/almanac.httparchive.org/pull/645</span></a
      >!
    </p>
    <p>It's hard to accurately determine what a skip link is when analyzing sites. For this analysis, if we found an anchor link (<code>href=#heading1</code>) within the first 3 links on the page, we defined this as a page with a skip link. So 14.19% is a strict upper bound.</p>
    <h3 id="accessibility-shortcuts"><a href="#accessibility-shortcuts" class="anchor-link">Shortcuts</a></h3>
    <p>
      Shortcut keys set via the <a href="https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts"><code>aria-keyshortcuts</code><span class="fn">https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts</span></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey"><code>accesskey</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey</span></a> attributes can be used in one of two ways:
    </p>
    <ol>
      <li><p>Activating an element on the page, like a link or button.</p></li>
      <li><p>Giving a certain element on the page focus. For example, shifting focus to a certain input on the page, allowing a user to then start typing into it.</p></li>
    </ol>
    <p>
      Adoption of <a href="https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts"><code>aria-keyshortcuts</code><span class="fn">https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts</span></a> was almost absent from our sample, with it only being used on 159 sites out of over 4 million analyzed. The <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey"><code>accesskey</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey</span></a> attribute was used more frequently, being found on 2.47% of web pages (1.74% on mobile). We believe the higher usage of shortcuts on desktop is due to developers expecting mobile sites to only be accessed via a touch screen and not a keyboard.
    </p>
    <p>What is especially surprising here is 15.56% of mobile and 13.03% of desktop sites which use shortcut keys assign the same shortcut to multiple different elements. This means browsers have to guess which element should own this shortcut key.</p>
    <h3 id="accessibility-tables"><a href="#accessibility-tables" class="anchor-link">Tables</a></h3>
    <p>Tables are one of the primary ways we organize and express large amounts of data. Many assistive technologies like screen readers and switches (which may be used by users with motor disabilities) might have special features allowing them to navigate this tabular data more efficiently.</p>
    <h4 id="accessibility-headings-1"><a href="#accessibility-headings-1" class="anchor-link">Headings</a></h4>
    <p>Depending on the way a particular table is structured, the use of table headers makes it easier to read across columns or rows without losing context on what data that particular column or row refers to. Having to navigate a table lacking in header rows or columns is a subpar experience for a screen reader user. This is because it's hard for a screen reader user to keep track of their place in a table absent of headers, especially when the table is quite large.</p>
    <p>
      To mark up table headers, simply use the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/th"><code>&lt;th&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/th</span></a> tag (instead of <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/td"><code>&lt;td&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/td</span></a
      >), or either of the ARIA <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Table_Role"><code>columnheader</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Table_Role</span></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Table_Role"><code>rowheader</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Table_Role</span></a> roles. Only 24.5% of pages with tables were found to markup their tables with either of these methods. So the three quarters of pages choosing to include tables without headers are creating serious challenges for screen reader users.
    </p>
    <p>Using <code>&lt;th&gt;</code> and <code>&lt;td&gt;</code> was by far the most commonly used method for marking up table headers. The use of <code>columnheader</code> and <code>rowheader</code> roles was almost non-existent with only 677 total sites using them (0.058%).</p>
    <h4 id="accessibility-captions"><a href="#accessibility-captions" class="anchor-link">Captions</a></h4>
    <p>
      Table captions via the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/caption"><code>&lt;caption&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/caption</span></a> element are helpful in providing more context for readers of all kinds. A caption can prepare a reader to take in the information your table is sharing, and it can be especially useful for people who may get distracted or interrupted easily. They are also useful for people who may lose their place within a large table, such as a screen reader user or someone with a learning or intellectual disability. The easier you can make it for readers to understand what they're analyzing, the better.
    </p>
    <p>Despite this, only 4.32% of pages with tables provide captions.</p>
    <h2 id="accessibility-compatibility-with-assistive-technologies"><a href="#accessibility-compatibility-with-assistive-technologies" class="anchor-link">Compatibility with assistive technologies</a></h2>
    <h3 id="accessibility-the-use-of-aria"><a href="#accessibility-the-use-of-aria" class="anchor-link">The use of ARIA</a></h3>
    <p>
      One of the most popular and widely used specifications for accessibility on the web is the <a href="https://www.w3.org/WAI/standards-guidelines/aria/">Accessible Rich Internet Applications<span class="fn">https://www.w3.org/WAI/standards-guidelines/aria/</span></a> (ARIA) standard. This standard offers a large array of additional HTML attributes to help convey the purpose behind visual elements (i.e., their semantic meaning), and what kinds of actions they're capable of.
    </p>
    <p>Using ARIA correctly and appropriately can be challenging. For example, of pages making use of ARIA attributes, we found 12.31% have invalid values assigned to their attributes. This is problematic because any mistake in the use of an ARIA attribute has no visual effect on the page. Some of these errors can be detected by using an automated validation tool, but generally they require hands-on use of real assistive software (like a screen reader). This section will examine how ARIA is used on the web, and specifically which parts of the standard are most prevalent.</p>
    <figure id="accessibility-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/fig8.png">
        <img src="/static/images/2019/accessibility/fig8.png" alt="Figure 8. Percent of total pages vs ARIA attribute." aria-labelledby="accessibility-fig8-caption" aria-describedby="accessibility-fig8-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSG3DTnx7j-YT1hnQpQYjDRD-rCSF1dXbgva-iJQZKdCKIt34ojGMDRhx74fF93CpPg7oGW_C68fWGT/pubchart?oid=792161340&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="accessibility-fig8-description" class="visually-hidden">Vertical bar chart displaying percentage data, ranging from 0 to 25 in increments of 5, vs. bars representing each attribute. Aria-hidden: 23.46%, aria-label: 17.67%, aria-expanded: 8.68%, aria-current: 7.76%, aria-labelledby: 6.85%, aria-controls: 3.56%, aria-haspopup: 2.62%, aria-invalid: 2.68%, aria-describedby: 1.69%, aria-live: 1.04%, aria-required: 1%</div>
      <figcaption id="accessibility-fig8-caption"><a href="#accessibility-fig-8" class="anchor-link">Figure 8.</a> Percent of total pages vs ARIA attribute.</figcaption>
    </figure>
    <h4 id="accessibility-the-role-attribute">
      <a href="#accessibility-the-role-attribute" class="anchor-link">The <code>role</code> attribute</a>
    </h4>
    <p>The "role" attribute is the most important attribute in the entire ARIA specification. It's used to inform the browser what the purpose of a given HTML element is (i.e., the semantic meaning). For example, a <code>&lt;div&gt;</code> element, visually styled as a button using CSS, should be given the ARIA role of <code>button</code>.</p>
    <p>Currently, 46.91% of pages use at least one ARIA role attribute. In Figure 9 below, we've compiled a list of the top ten most widely used ARIA role values.</p>
    <figure id="accessibility-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/accessibility/fig9.png">
        <img src="/static/images/2019/accessibility/fig9.png" alt="Figure 9. Top 10 aria roles." aria-labelledby="accessibility-fig9-caption" aria-describedby="accessibility-fig9-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSG3DTnx7j-YT1hnQpQYjDRD-rCSF1dXbgva-iJQZKdCKIt34ojGMDRhx74fF93CpPg7oGW_C68fWGT/pubchart?oid=176877741&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="accessibility-fig9-description" class="visually-hidden">Vertical bar chart with bars for each role type vs percent of sites using ranging from 0 to 25 in increments of 5. Navigation: 20.4%; search: 15.49%; main: 14.39%; banner: 13.62%; contentinfo: 11.23%; button: 10.59%; dialog: 7.87%; complementary: 6.06%; menu: 4.71%; form: 3.75%</div>
      <figcaption id="accessibility-fig9-caption"><a href="#accessibility-fig-9" class="anchor-link">Figure 9.</a> Top 10 aria roles.</figcaption>
    </figure>
    <p>Looking at the results in Figure 9, we found two interesting insights: updating UI frameworks may have a profound impact on accessibility across the web, and the impressive number of sites attempting to make dialogs accessible.</p>
    <h5 id="accessibility-updating-ui-frameworks-could-be-the-way-forward-for-accessibility-across-the-web"><a href="#accessibility-updating-ui-frameworks-could-be-the-way-forward-for-accessibility-across-the-web" class="anchor-link">Updating UI frameworks could be the way forward for accessibility across the web</a></h5>
    <p>The top 5 roles, all appearing on 11% of pages or more, are landmark roles. These are used to aid navigation, not to describe the functionality of a widget, such as a combo box. This is a surprising result because the main motivator behind the development of ARIA was to give web developers the capability to describe the functionality of widgets made of generic HTML elements (like a <code>&lt;div&gt;</code>).</p>
    <p>We suspect that some of the most popular web UI frameworks include navigation roles in their templates. This would explain the prevalence of landmark attributes. If this theory is correct, updating popular UI frameworks to include more accessibility support may have a huge impact on the accessibility of the web.</p>
    <p>Another result pointing towards this conclusion is the fact that more "advanced" but equally important ARIA attributes don't appear to be used at all. Such attributes cannot easily be deployed through a UI framework because they might need to be customized based on the structure and the visual appearance of every site individually. For example, we found that the <code>posinset</code> and <code>setsize</code> attributes were only used on 0.01% of pages. These attributes convey to a screen reader user how many items are in a list or menu and which item is currently selected. So, if a visually impaired user is trying to navigate through a menu, they might hear index announcements like: "Home, 1 of 5", "Products, 2 of 5", "Downloads, 3 of 5", etc.</p>
    <h5 id="accessibility-many-sites-attempt-to-make-dialogs-accessible"><a href="#accessibility-many-sites-attempt-to-make-dialogs-accessible" class="anchor-link">Many sites attempt to make dialogs accessible</a></h5>
    <p>
      The relative popularity of the <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/dialog_role">dialog role<span class="fn">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/dialog_role</span></a> stands out because making dialogs accessible for screen reader users is very challenging. It is therefore exciting to see around 8% of the analyzed pages stepping up to the challenge. Again, we suspect this might be due to the use of some UI frameworks.
    </p>
    <h4 id="accessibility-labels-on-interactive-elements"><a href="#accessibility-labels-on-interactive-elements" class="anchor-link">Labels on interactive elements</a></h4>
    <p>The most common way that a user interacts with a website is through its controls, such as links or buttons to navigate the website. However, many times screen reader users are unable to tell what action a control will perform once activated. Often the reason this confusion occurs is due to the lack of a textual label. For example, a button displaying a left-pointing arrow icon to signify it's the "Back" button, but containing no actual text.</p>
    <p>Only about a quarter (24.39%) of pages that use buttons or links include textual labels with these controls. If a control is not labeled, a screen reader user might read something generic, such as the word "button" instead of a meaningful word like "Search".</p>
    <p>Buttons and links are almost always included in the tab order and thus have extremely high visibility. Navigating through a website using the tab key is one of the primary ways through which users who use only the keyboard explore your website. So a user is sure to encounter your unlabeled buttons and links if they are moving through your website using the tab key.</p>
    <h3 id="accessibility-accessibility-of-form-controls"><a href="#accessibility-accessibility-of-form-controls" class="anchor-link">Accessibility of Form Controls</a></h3>
    <p>
      Filling out forms is a task many of us do every single day. Whether we're shopping, booking travel, or applying for a job, forms are the main way users share information with web pages. Because of this, ensuring your forms are accessible is incredibly important. The simplest means of accomplishing this is by providing labels (via the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label"><code>&lt;label&gt;</code> element<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label</span></a
      >, <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute"><code>aria-label</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute</span></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-labelledby_attribute"><code>aria-labelledby</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-labelledby_attribute</span></a
      >) for each of your inputs. Sadly, only 22.33% of pages provide labels for all their form inputs, meaning 4 out of every 5 pages have forms that may be very difficult to fill out.
    </p>
    <h4 id="accessibility-indicators-of-required-and-invalid-fields"><a href="#accessibility-indicators-of-required-and-invalid-fields" class="anchor-link">Indicators of required and invalid fields</a></h4>
    <p>
      When we come across a field with a big red asterisk next to it, we know it's a required field. Or when we hit submit and are informed there were invalid inputs, anything highlighted in a different color needs to be corrected and then resubmitted. However, people with low or no vision cannot rely on these visual cues, which is why the HTML input attributes <code>required</code>, <code>aria-required</code>, and <code>aria-invalid</code> are so important. They provide screen readers with the equivalent of red asterisks and red highlighted fields. As a nice bonus, when you inform browsers what fields are required, they'll <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation">validate parts of your forms<span class="fn">https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation</span></a> for you. No JavaScript required.
    </p>
    <p>Of pages using forms, 21.73% use <code>required</code> or <code>aria-required</code> when marking up required fields. Only one in every five sites make use of this. This is a simple step to make your site accessible, and unlocks helpful browser features for all users.</p>
    <p>We also found 3.52% of sites with forms make use of <code>aria-invalid</code>. However, since many forms only make use of this field once incorrect information is submitted, we could not ascertain the true percentage of sites using this markup.</p>
    <h4 id="accessibility-duplicate-ids"><a href="#accessibility-duplicate-ids" class="anchor-link">Duplicate IDs</a></h4>
    <p>
      IDs can be used in HTML to link two elements together. For example, the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label"><code>&lt;label&gt;</code> element<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label</span></a> works this way. You specify the ID of the input field this label is describing and the browser links them together. The result? Users can now click on this label to focus on the input field, and screen readers will use this label as the description.
    </p>
    <p>
      Unfortunately, 34.62% of sites have duplicate IDs, which means on many sites the ID specified by the user could refer to multiple different inputs. So when a user clicks on the label to select a field, they may end up <a href="https://www.deque.com/blog/unique-id-attributes-matter/">selecting something different<span class="fn">https://www.deque.com/blog/unique-id-attributes-matter/</span></a> than they intended. As you might imagine, this could have negative consequences in something like a shopping cart.
    </p>
    <p>
      This issue is even more pronounced for screen readers because their users may not be able to visually double check what is selected. Plus, many ARIA attributes, such as <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-describedby_attribute"><code>aria-describedby</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-describedby_attribute</span></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-labelledby_attribute"><code>aria-labelledby</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-labelledby_attribute</span></a
      >, work similarly to the label element detailed above. So to make your site accessible, removing all duplicate IDs is a good first step.
    </p>
    <h2 id="accessibility-conclusion"><a href="#accessibility-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>People with disabilities are not the only ones with accessibility needs. For example, anyone who has suffered a temporary wrist injury has experienced the difficulty of tapping small tap targets. Eyesight often diminishes with age, making text written in small fonts challenging to read. Finger dexterity is not the same across age demographics, making tapping interactive controls or swiping through content on mobile websites more difficult for a sizable percentage of users.</p>
    <p>Similarly, assistive software is not only geared towards people with disabilities but for improving the day to day experience of everyone:</p>
    <ul>
      <li>The recent popularity of voice assistance, both on mobile devices and in the home, has demonstrated that controlling a computing device using voice commands is both desirable and essential for many users. Voice commands like these used to only be an accessibility feature but are now turning into a mainstream product.</li>
      <li>Drivers would benefit from a screen reading feature that, while they keep their eyes on the road, reads long pieces of text like news stories aloud.</li>
      <li>Captions are enjoyed not only by people who cannot hear a video but also by people who want to watch a video in a loud restaurant or in a library.</li>
    </ul>
    <p>Once a website is built, it's often hard to retrofit accessibility on top of existing site structures and widgets. Accessibility isn't something that can be easily sprinkled on afterwards, rather it needs to be part of the design and implementation process. Unfortunately, either through a lack of awareness or easy-to-use testing tools, many developers are not familiar with the needs of all their users and the requirements of the assistive software they use.</p>
    <p>While not conclusive, our results indicate that the use of accessibility standards like ARIA and accessibility best practices (e.g., using alt text) are found on a <em>sizable, but not substantial</em> portion of the web. On the surface this is encouraging, but we suspect many of these positive trends are due to the popularity of certain UI frameworks. On one hand, this is disappointing because web developers cannot simply rely on UI frameworks to inject their sites with accessibility support. On the other hand though, it's encouraging to see how large of an effect UI frameworks could have on the accessibility of the web.</p>
    <p>The next frontier, in our opinion, is making widgets which are available through UI frameworks more accessible. Since many complex widgets used in the wild (e.g., calendar pickers) are sourced from a UI library, it would be great for these widgets to be accessible out of the box. We hope that when we collect our results next time, the usage of more properly implemented complex ARIA roles is on the risesignifying more complex widgets have also been made accessible. In addition, we hope to see more accessible media, like images and video, so all users can enjoy the richness of the web.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"I","chapter_number":10,"title":"SEO","description":"SEO chapter of the 2019 Web Almanac covering content, meta tags, indexability, linking, speed, structured data, internationalization, SPAs, AMP and security.","authors":["ymschaap","rachellcostello","AVGP"],"reviewers":["clarkeclark","andylimn","AymenLoukil","catalinred","mattludwig"],"translators":null,"discuss":"1765","results":"https://docs.google.com/spreadsheets/d/1uARtBWwz9nJOKqKPFinAMbtoDgu5aBtOhsBNmsCoTaA/","queries":"10_SEO","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-03-01T00:00:00.000Z","chapter":"seo"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="seo-introduction"><a href="#seo-introduction" class="anchor-link">Introduction</a></h2>
    <p>Search Engine Optimization (SEO) isn't just a hobby or a side project for digital marketers, it is crucial for the success of a website. The primary goal of SEO is to make sure that a website is optimized for the search engine bots that need to crawl and index its pages, as well as for the users that will be navigating the website and consuming its content. SEO impacts everyone working on a website, from the developer who is building it, through to the digital marketer who will need to promote it to new potential customers.</p>
    <p>
      Let's put the importance of SEO into perspective. Earlier this year, the SEO industry looked on in horror (and fascination) as <a href="https://www.bbc.co.uk/news/business-47877688">ASOS reported an 87% decrease in profits<span class="fn">https://www.bbc.co.uk/news/business-47877688</span></a> after a "difficult year". The brand attributed their issues to a drop in search engine rankings which occurred after they launched over 200 microsites and significant changes to their website's navigation, among other technical changes. Yikes.
    </p>
    <p>The purpose of the SEO chapter of the Web Almanac is to analyze on-site elements of the web that impact the crawling and indexing of content for search engines, and ultimately, website performance. In this chapter, we'll take a look at how well-equipped the top websites are to provide a great experience for users and search engines, and which ones still have work to do.</p>
    <p>Our analysis includes data from <a href="#methodology-lighthouse">Lighthouse</a>, the <a href="#methodology-chrome-ux-report">Chrome UX Report</a>, and HTML element analysis. We focused on SEO fundamentals like <code>&lt;title&gt;</code> elements, the different types of on-page links, content, and loading speed, but also the more technical aspects of SEO, including indexability, structured data, internationalization, and AMP across over 5 million websites.</p>
    <p>Our custom metrics provide insights that, up until now, have not been exposed before. We are now able to make claims about the adoption and implementation of elements such as the <code>hreflang</code> tag, rich results eligibility, heading tag usage, and even anchor-based navigation for single page apps.</p>
    <p class="note">Note: Our data is limited to analyzing home pages only and has not been gathered from site-wide crawls. This will impact many metrics we'll discuss, so we've added any relevant limitations in this case whenever we mention a specific metric. Learn more about these limitations in our <a href="#methodology">Methodology</a>.</p>
    <p>Read on to find out more about the current state of the web and its search engine friendliness.</p>
    <h2 id="seo-fundamentals"><a href="#seo-fundamentals" class="anchor-link">Fundamentals</a></h2>
    <p>Search engines have a three-step process: crawling, indexing, and ranking. To be search engine-friendly, a page needs to be discoverable, understandable, and contain quality content that would provide value to a user who is browsing the search engine results pages (SERPs).</p>
    <p>We wanted to analyze how much of the web is meeting the basic standards of SEO best practices, so we assessed on-page elements such as body content, <code>meta</code> tags, and internal linking. Let's take a look at the results.</p>
    <h3 id="seo-content"><a href="#seo-content" class="anchor-link">Content</a></h3>
    <p>To be able to understand what a page is about and decide for which search queries it provides the most relevant answers, a search engine must be able to discover and access its content. What content are search engines currently finding, however? To help answer this, we created two custom metrics: word count and headings.</p>
    <h4 id="seo-word-count"><a href="#seo-word-count" class="anchor-link">Word count</a></h4>
    <p>We assessed the content on the pages by looking for groups of at least 3 words and counting how many were found in total. We found 2.73% of desktop pages that didn't have any word groups, meaning that they have no body content to help search engines understand what the website is about.</p>
    <figure id="seo-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig1.png">
        <img src="/static/images/2019/seo/fig1.png" alt="Figure 1. Distribution of the number of words per page." aria-labelledby="seo-fig1-caption" aria-describedby="seo-fig1-caption" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=190546113&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="seo-fig1-description" class="visually-hidden">Distribution of words per page. The median number of words per desktop page is 346 and 306 for mobile pages. Desktop pages have more word throughout the percentiles, by as many as 120 words at the 90th percentile.</div>
      <figcaption id="seo-fig1-caption"><a href="#seo-fig-1" class="anchor-link">Figure 1.</a> Distribution of the number of words per page.</figcaption>
    </figure>
    <p>The median desktop home page has 346 words, and the median mobile home page has a slightly lower word count at 306 words. This shows that mobile sites do serve a bit less content to their users, but at over 300 words, this is still a reasonable amount to read. This is especially true for home pages which will naturally contain less content than article pages, for example. Overall the distribution of words is broad, with between 22 words at the 10th percentile and up to 1,361 at the 90th percentile.</p>
    <h4 id="seo-headings"><a href="#seo-headings" class="anchor-link">Headings</a></h4>
    <p>We also looked at whether pages are structured in a way that provides the right context for the content they contain. Headings (<code>H1</code>, <code>H2</code>, <code>H3</code>, etc.) are used to format and structure a page and make content easier to read and parse. Despite the importance of headings, 10.67% of pages have no heading tags at all.</p>
    <figure id="seo-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig2.png">
        <img src="/static/images/2019/seo/fig2.png" alt="Figure 2. Distribution of the number of headings per page." aria-labelledby="seo-fig2-caption" aria-describedby="seo-fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=676369575&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="seo-fig2-description" class="visually-hidden">Distribution of headings per page. The median number of headings per desktop and mobile page is 10. At the 10, 25, 75, and 90th percentiles, the number of headings per desktop page are: 0, 3, 21, and 39. This is slightly higher than the distribution of mobile headings per page.</div>
      <figcaption id="seo-fig2-caption"><a href="#seo-fig-2" class="anchor-link">Figure 2.</a> Distribution of the number of headings per page.</figcaption>
    </figure>
    <p>The median number of heading elements per page is 10. Headings contain 30 words on mobile pages and 32 words on desktop pages. This implies that the websites that utilize headings put significant effort in making sure that their pages are readable, descriptive, and clearly outline the page structure and context to search engine bots.</p>
    <figure id="seo-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig3.png">
        <img src="/static/images/2019/seo/fig3.png" alt="Figure 3. Distribution of H1 length per page." aria-labelledby="seo-fig3-caption" aria-describedby="seo-fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=1380411857&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="seo-fig3-description" class="visually-hidden">Distribution of the number of characters in the first H1 per page. The desktop and mobile distributions are nearly identical, with the 10, 25, 50, 75, and 90th percentiles as: 6, 11, 19, 31, and 47 characters.</div>
      <figcaption id="seo-fig3-caption"><a href="#seo-fig-3" class="anchor-link">Figure 3.</a> Distribution of H1 length per page.</figcaption>
    </figure>
    <p>In terms of specific heading length, the median length of the first <code>H1</code> element found on desktop is 19 characters.</p>
    <p>
      For advice on how to handle <code>H1</code>s and headings for SEO and accessibility, take a look at this <a href="https://www.youtube.com/watch?v=zyqJJXWk0gk">video response by John Mueller<span class="fn">https://www.youtube.com/watch?v=zyqJJXWk0gk</span></a> in the Ask Google Webmasters series.
    </p>
    <h3 id="seo-meta-tags"><a href="#seo-meta-tags" class="anchor-link">Meta tags</a></h3>
    <p>Meta tags allow us to give specific instructions and information to search engine bots about the different elements and content on a page. Certain meta tags can convey things like the topical focus of a page, as well as how the page should be crawled and indexed. We wanted to assess whether or not websites were making the most of these opportunities that meta tags provide.</p>
    <h4 id="seo-page-titles"><a href="#seo-page-titles" class="anchor-link">Page titles</a></h4>
    <figure id="seo-fig-4">
      <div class="big-number">97%</div>
      <figcaption><a href="#seo-fig-4" class="anchor-link">Figure 4.</a> Percent of mobile pages that include a <code>&lt;title&gt;</code> tag.</figcaption>
    </figure>
    <p>Page titles are an important way of communicating the purpose of a page to a user or search engine. <code>&lt;title&gt;</code> tags are also used as headings in the SERPS and as the title for the browser tab when visiting a page, so it's no surprise to see that 97.1% of mobile pages have a document title.</p>
    <figure id="seo-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig5.png">
        <img src="/static/images/2019/seo/fig5.png" alt="Figure 5. Distribution of title length per page." aria-labelledby="seo-fig5-caption" aria-describedby="seo-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=1015017335&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="seo-fig5-description" class="visually-hidden">Distribution of the number of characters per title element per page. The 10, 25, 50, 75, and 90th percentiles of title lengths for desktop are: 4, 9, 20, 40, and 66 characters. The mobile distribution is very similar.</div>
      <figcaption id="seo-fig5-caption"><a href="#seo-fig-5" class="anchor-link">Figure 5.</a> Distribution of title length per page.</figcaption>
    </figure>
    <p>
      Even though <a href="https://moz.com/learn/seo/title-tag">Google usually displays the first 50-60 characters of a page title<span class="fn">https://moz.com/learn/seo/title-tag</span></a> within a SERP, the median length of the <code>&lt;title&gt;</code> tag was only 21 characters for mobile pages and 20 characters for desktop pages. Even the 75th percentile is still below the cutoff length. This suggests that some SEOs and content writers aren't making the most of the space allocated to them by search engines for describing their home pages in the SERPs.
    </p>
    <h4 id="seo-meta-descriptions"><a href="#seo-meta-descriptions" class="anchor-link">Meta descriptions</a></h4>
    <p>Compared to the <code>&lt;title&gt;</code> tag, fewer pages were detected to have a meta description, as only 64.02% of mobile home pages have a meta description. Considering that Google often rewrites meta descriptions in the SERPs in response to the searcher's query, perhaps website owners place less importance on including a meta description at all.</p>
    <figure id="seo-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig6.png">
        <img src="/static/images/2019/seo/fig6.png" alt="Figure 6. Distribution of meta description length per page." aria-labelledby="seo-fig6-caption" aria-describedby="seo-fig6-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=1750266149&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="seo-fig6-description" class="visually-hidden">Distribution of the number of characters per meta description per page. The 10, 25, 50, 75, and 90th percentiles of title lengths for desktop are: 9, 48, 123, 162, and 230 characters. The mobile distribution is slightly higher by fewer than 10 characters at any given percentile.</div>
      <figcaption id="seo-fig6-caption"><a href="#seo-fig-6" class="anchor-link">Figure 6.</a> Distribution of meta description length per page.</figcaption>
    </figure>
    <p>
      The median meta description length was also lower than the <a href="https://moz.com/learn/seo/meta-description">recommended length of 155-160 characters<span class="fn">https://moz.com/learn/seo/meta-description</span></a
      >, with desktop pages having descriptions of 123 characters. Interestingly, meta descriptions were consistently longer on mobile than on desktop, despite mobile SERPs traditionally having a shorter pixel limit. This limit has only been extended recently, so perhaps more website owners have been testing the impact of having longer, more descriptive meta descriptions for mobile results.
    </p>
    <h4 id="seo-image-alt-tags"><a href="#seo-image-alt-tags" class="anchor-link">Image alt tags</a></h4>
    <p>Considering the importance of <code>alt</code> text for SEO and accessibility, it is far from ideal to see that only 46.71% of mobile pages use <code>alt</code> attributes on all of their images. This means that there are still improvements to be made with regard to making images across the web more accessible to users and understandable for search engines. Learn more about issues like these in the <a href="#accessibility">Accessibility</a> chapter.</p>
    <h3 id="seo-indexability"><a href="#seo-indexability" class="anchor-link">Indexability</a></h3>
    <p>To show a page's content to users in the SERPs, search engine crawlers must first be permitted to access and index that page. Some of the factors that impact a search engine's ability to crawl and index pages include:</p>
    <ul>
      <li>Status codes</li>
      <li><code>noindex</code> tags</li>
      <li>Canonical tags</li>
      <li>The <code>robots.txt</code> file</li>
    </ul>
    <h4 id="seo-status-codes"><a href="#seo-status-codes" class="anchor-link">Status codes</a></h4>
    <p>It is recommended to maintain a <code>200 OK</code> status code for any important pages that you want search engines to index. The majority of pages tested were available for search engines to access, with 87.03% of initial HTML requests on desktop returning a <code>200</code> status code. The results were slightly lower for mobile pages, with only 82.95% of pages returning a <code>200</code> status code.</p>
    <p>
      The next most commonly found status code on mobile was <code>302</code>, a temporary redirect, which was found on 10.45% of mobile pages. This was higher than on desktop, with only 6.71% desktop home pages returning a <code>302</code> status code. This could be due to the fact that the <a href="https://developers.google.com/search/mobile-sites/mobile-seo/separate-urls">mobile home pages were alternates<span class="fn">https://developers.google.com/search/mobile-sites/mobile-seo/separate-urls</span></a> to an equivalent desktop page, such as on non-responsive sites that have separate versions of the website for each device.
    </p>
    <p class="note">Note: Our results didn't include <code>4xx</code> or <code>5xx</code> status codes.</p>
    <h4 id="seo-noindex">
      <a href="#seo-noindex" class="anchor-link"><code>noindex</code></a>
    </h4>
    <p>A <code>noindex</code> directive can be served in the HTML <code>&lt;head&gt;</code> or in the HTTP headers as an <code>X-Robots</code> directive. A <code>noindex</code> directive basically tells a search engine not to include that page in its SERPs, but the page will still be accessible for users when they are navigating through the website. <code>noindex</code> directives are usually added to duplicate versions of pages that serve the same content, or low quality pages that provide no value to users coming to a website from organic search, such as filtered, faceted, or internal search pages.</p>
    <p>
      96.93% of mobile pages passed the <a href="https://developers.google.com/web/tools/lighthouse/audits/indexing">Lighthouse indexing audit<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/indexing</span></a
      >, meaning that these pages didn't contain a <code>noindex</code> directive. However, this means that 3.07% of mobile home pages <em>did</em> have a <code>noindex</code> directive, which is cause for concern, meaning that Google was prevented from indexing these pages.
    </p>
    <p class="note">The websites included in our research are sourced from the <a href="#methodology-chrome-ux-report">Chrome UX Report</a> dataset, which excludes websites that are not publicly discoverable. This is a significant source of bias because we're unable to analyze sites that Chrome determines to be non-public. Learn more about our <a href="#methodology-websites">methodology</a>.</p>
    <h4 id="seo-canonicalization"><a href="#seo-canonicalization" class="anchor-link">Canonicalization</a></h4>
    <p>Canonical tags are used to specify duplicate pages and their preferred alternates, so that search engines can consolidate authority which might be spread across multiple pages within the group onto one main page for improved rankings.</p>
    <p>
      48.34% of mobile home pages were <a href="https://developers.google.com/web/tools/lighthouse/audits/canonical">detected<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/canonical</span></a> to have a canonical tag. Self-referencing canonical tags aren't essential, and canonical tags are usually required for duplicate pages. Home pages are rarely duplicated anywhere else across the site so seeing that less than half of pages have a canonical tag isn't surprising.
    </p>
    <h4 id="seo-robotstxt"><a href="#seo-robotstxt" class="anchor-link">robots.txt</a></h4>
    <p>
      One of the most effective methods for controlling search engine crawling is the <a href="https://www.deepcrawl.com/knowledge/technical-seo-library/robots-txt/"><code>robots.txt</code> file<span class="fn">https://www.deepcrawl.com/knowledge/technical-seo-library/robots-txt/</span></a
      >. This is a file that sits on the root domain of a website and specifies which URLs and URL paths should be disallowed from being crawled by search engines.
    </p>
    <p>
      It was interesting to observe that only 72.16% of mobile sites have a valid <code>robots.txt</code>, <a href="https://developers.google.com/web/tools/lighthouse/audits/robots">according to Lighthouse<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/robots</span></a
      >. The key issues we found are split between 22% of sites having no <code>robots.txt</code> file at all, and ~6% serving an invalid <code>robots.txt</code> file, and thus failing the audit. While there are many valid reasons to not have a <code>robots.txt</code> file, such as having a small website that doesn't struggle with <a href="https://webmasters.googleblog.com/2017/01/what-crawl-budget-means-for-googlebot.html">crawl budget issues<span class="fn">https://webmasters.googleblog.com/2017/01/what-crawl-budget-means-for-googlebot.html</span></a
      >, having an invalid <code>robots.txt</code> is cause for concern.
    </p>
    <h3 id="seo-linking"><a href="#seo-linking" class="anchor-link">Linking</a></h3>
    <p>One of the most important attributes of a web page is links. Links help search engines discover new, relevant pages to add to their index and navigate through websites. 96% of the web pages in our dataset contain at least one internal link, and 93% contain at least one external link to another domain. The small minority of pages that don't have any internal or external links will be missing out on the immense value that links pass through to target pages.</p>
    <p>The number of internal and external links included on desktop pages were consistently higher than the number found on mobile pages. Often a limited space on a smaller viewport causes fewer links to be included in the design of a mobile page compared to desktop.</p>
    <p>
      It's important to bear in mind that fewer internal links on the mobile version of a page <a href="https://moz.com/blog/internal-linking-mobile-first-crawl-paths">might cause an issue<span class="fn">https://moz.com/blog/internal-linking-mobile-first-crawl-paths</span></a> for your website. With <a href="https://www.deepcrawl.com/knowledge/white-papers/mobile-first-index-guide/">mobile-first indexing<span class="fn">https://www.deepcrawl.com/knowledge/white-papers/mobile-first-index-guide/</span></a
      >, which for new websites is the default for Google, if a page is only linked from the desktop version and not present on the mobile version, search engines will have a much harder time discovering and ranking it.
    </p>
    <figure id="seo-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig7.png">
        <img src="/static/images/2019/seo/fig7.png" alt="Figure 7. Distribution of internal links per page." aria-labelledby="seo-fig7-caption" aria-describedby="seo-fig7-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=534496673&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="seo-fig7-description" class="visually-hidden">Distribution of the number of internal links per page. The 10, 25, 50, 75, and 90th percentiles of internal links for desktop are: 7, 29, 70, 142, and 261. The mobile distribution is much lower, by 30 links at the 90th percentile and 10 at the median.</div>
      <figcaption id="seo-fig7-caption"><a href="#seo-fig-7" class="anchor-link">Figure 7.</a> Distribution of internal links per page.</figcaption>
    </figure>
    <figure id="seo-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig8.png">
        <img src="/static/images/2019/seo/fig8.png" alt="Figure 8. Distribution of external links per page." aria-labelledby="seo-fig8-caption" aria-describedby="seo-fig8-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=1997009875&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="seo-fig8-description" class="visually-hidden">Distribution of the number of external links per page. The 10, 25, 50, 75, and 90th percentiles of external links for desktop are: 1, 4, 10, 22, and 51. The mobile distribution is much lower, by 11 links at the 90th percentile and 2 at the median.</div>
      <figcaption id="seo-fig8-caption"><a href="#seo-fig-8" class="anchor-link">Figure 8.</a> Distribution of external links per page.</figcaption>
    </figure>
    <p>The median desktop page includes 70 internal (same-site) links, whereas the median mobile page has 60 internal links. The median number of external links per page follows a similar trend, with desktop pages including 10 external links, and mobile pages including 8.</p>
    <figure id="seo-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig9.png">
        <img src="/static/images/2019/seo/fig9.png" alt="Figure 9. Distribution of anchor links per page." aria-labelledby="seo-fig9-caption" aria-describedby="seo-fig9-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=1852200766&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="seo-fig9-description" class="visually-hidden">Distribution of the number of anchor links per page. The 10, 25, 50, 75, and 90th percentiles of internal anchor for desktop are: 0, 0, 0, 1, and 3. The mobile distribution is identical.</div>
      <figcaption id="seo-fig9-caption"><a href="#seo-fig-9" class="anchor-link">Figure 9.</a> Distribution of anchor links per page.</figcaption>
    </figure>
    <p>Anchor links, which link to a certain scroll position on the same page, are not very popular. Over 65% of home pages have no anchor links. This is probably due to the fact that home pages don't usually contain any long-form content.</p>
    <p>
      There is good news from our analysis of the descriptive link text metric. 89.94% of mobile pages pass Lighthouse's <a href="https://developers.google.com/web/tools/lighthouse/audits/descriptive-link-text">descriptive link text audit<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/descriptive-link-text</span></a
      >. This means that these pages don't have generic "click here", "go", "here" or "learn more" links, but use more meaningful link text which helps users and search engines better understand the context of pages and how they connect with one another.
    </p>
    <h2 id="seo-advanced"><a href="#seo-advanced" class="anchor-link">Advanced</a></h2>
    <p>Having descriptive, useful content on a page that isn't being blocked from search engines with a <code>noindex</code> or <code>Disallow</code> directive isn't enough for a website to succeed in organic search. Those are just the basics. There is a lot more than can be done to enhance the performance of a website and its appearance in SERPs.</p>
    <p>Some of the more technically complex aspects that have been gaining importance in successfully indexing and ranking websites include speed, structured data, internationalization, security, and mobile friendliness.</p>
    <h3 id="seo-speed"><a href="#seo-speed" class="anchor-link">Speed</a></h3>
    <p>
      Mobile loading speed was first <a href="https://webmasters.googleblog.com/2018/01/using-page-speed-in-mobile-search.html">announced as a ranking factor<span class="fn">https://webmasters.googleblog.com/2018/01/using-page-speed-in-mobile-search.html</span></a> by Google in 2018. Speed isn't a new focus for Google though. Back in 2010 it was <a href="https://webmasters.googleblog.com/2010/04/using-site-speed-in-web-search-ranking.html">revealed that speed had been introduced as a ranking signal<span class="fn">https://webmasters.googleblog.com/2010/04/using-site-speed-in-web-search-ranking.html</span></a
      >.
    </p>
    <p>A fast-loading website is also crucial for a good user experience. Users that have to wait even a few seconds for a site to load have the tendency to bounce and try another result from one of your SERP competitors that loads quickly and meets their expectations of website performance.</p>
    <p>The metrics we used for our analysis of load speed across the web is based on the <a href="#methodology-chrome-ux-report">Chrome UX Report</a> (CrUX), which collects data from real-world Chrome users. This data shows that an astonishing 48% of websites are labeled as <strong>slow</strong>. A website is labeled slow if it more than 25% of FCP experiences slower than 3 seconds <em>or</em> 5% of FID experiences slower than 300 ms.</p>
    <figure id="seo-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/seo/fig10.png">
        <img src="/static/images/2019/seo/fig10.png" alt="Figure 10. Distribution of the performance of user experiences by device type." aria-labelledby="seo-fig10-caption" aria-describedby="seo-fig10-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vSrPaauIA_G4AySC09FX4fK5DsJ8DWhJGUQE0obrBe9HGSA8geyq3KwFi531jg9Ll9auE3x_UEwnF8g/pubchart?oid=2083126642&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="seo-fig10-description" class="visually-hidden">Distribution of the performance of desktop, phone, and tablet user experiences. Desktop: 2% fast, 52% moderate, 46% slow. Phone: 1% fast, 41% moderate, 58% slow. Tablet: 0% fast, 35% moderate, 65% slow.</div>
      <figcaption id="seo-fig10-caption"><a href="#seo-fig-10" class="anchor-link">Figure 10.</a> Distribution of the performance of user experiences by device type.</figcaption>
    </figure>
    <p>Split by device, this picture is even bleaker for tablet (65%) and phone (58%).</p>
    <p>Although the numbers are bleak for the speed of the web, the good news is that SEO experts and tools have been focusing more and more on the technical challenges of speeding up websites. You can learn more about the state of web performance in the <a href="#performance">Performance</a> chapter.</p>
    <h3 id="seo-structured-data"><a href="#seo-structured-data" class="anchor-link">Structured data</a></h3>
    <p>
      Structured data allows website owners to add additional semantic data to their web pages, by adding <a href="https://en.wikipedia.org/wiki/JSON-LD">JSON-LD<span class="fn">https://en.wikipedia.org/wiki/JSON-LD</span></a> snippets or <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Microdata">Microdata<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Microdata</span></a
      >, for example. Search engines parse this data to better understand these pages and sometimes use the markup to display additional relevant information in the search results. Some of the useful types of structured data are:
    </p>
    <ul>
      <li>
        <a href="https://developers.google.com/search/docs/data-types/review-snippet">reviews<span class="fn">https://developers.google.com/search/docs/data-types/review-snippet</span></a>
      </li>
      <li>
        <a href="https://developers.google.com/search/docs/data-types/product">products<span class="fn">https://developers.google.com/search/docs/data-types/product</span></a>
      </li>
      <li>
        <a href="https://developers.google.com/search/docs/data-types/local-business">businesses<span class="fn">https://developers.google.com/search/docs/data-types/local-business</span></a>
      </li>
      <li>
        <a href="https://developers.google.com/search/docs/data-types/movie">movies<span class="fn">https://developers.google.com/search/docs/data-types/movie</span></a>
      </li>
      <li>
        and <a href="https://developers.google.com/search/docs/guides/search-gallery">you can search for more types of supported structured data types<span class="fn">https://developers.google.com/search/docs/guides/search-gallery</span></a>
      </li>
    </ul>
    <p>
      The <a href="https://developers.google.com/search/docs/guides/enhance-site">extra visibility<span class="fn">https://developers.google.com/search/docs/guides/enhance-site</span></a> that structured data can provide for websites is interesting for site owners, given that it can help to create more opportunities for traffic. For example, the relatively new <a href="https://developers.google.com/search/docs/data-types/faqpage">FAQ schema<span class="fn">https://developers.google.com/search/docs/data-types/faqpage</span></a> will double the size of your snippet and the real estate of your site in the SERP.
    </p>
    <p>During our research, we found that only 14.67% of sites are eligible for rich results on mobile. Interestingly, desktop site eligibility is slightly lower at 12.46%. This suggests that there is a lot more that site owners can be doing to optimize the way their home pages are appearing in search.</p>
    <p>Among the sites with structured data markup, the five most prevalent types are:</p>
    <ol>
      <li><code>WebSite</code> (16.02%)</li>
      <li><code>SearchAction</code> (14.35%)</li>
      <li><code>Organization</code> (12.89%)</li>
      <li><code>WebPage</code> (11.58%)</li>
      <li><code>ImageObject</code> (5.35%)</li>
    </ol>
    <p>
      Interestingly, one of the most popular data types that triggers a search engine feature is <code>SearchAction</code>, which powers the <a href="https://developers.google.com/search/docs/data-types/sitelinks-searchbox">sitelinks searchbox<span class="fn">https://developers.google.com/search/docs/data-types/sitelinks-searchbox</span></a
      >.
    </p>
    <p>The top five markup types all lead to more visibility in Google's search results, which might be the fuel for more widespread adoption of these types of structured data.</p>
    <p>Seeing as we only looked at home pages within this analysis, the results might look very different if we were to consider interior pages, too.</p>
    <p>
      Review stars are only found on 1.09% of the web's home pages (via <a href="https://schema.org/AggregateRating">AggregateRating<span class="fn">https://schema.org/AggregateRating</span></a
      >). Also, the newly introduced <a href="https://schema.org/QAPage">QAPage<span class="fn">https://schema.org/QAPage</span></a> appeared only in 48 instances, and the <a href="https://schema.org/FAQPage">FAQPage<span class="fn">https://schema.org/FAQPage</span></a> at a slightly higher frequency of 218 times. These last two counts are expected to increase in the future as we run more crawls and dive deeper into Web Almanac analysis.
    </p>
    <h3 id="seo-internationalization"><a href="#seo-internationalization" class="anchor-link">Internationalization</a></h3>
    <p>
      Internationalization is one of the most complex aspects of SEO, even <a href="https://twitter.com/JohnMu/status/965507331369984002">according to some Google search employees<span class="fn">https://twitter.com/JohnMu/status/965507331369984002</span></a
      >. Internationalization in SEO focuses on serving the right content from a website with multiple language or country versions and making sure that content is being targeted towards the specific language and location of the user.
    </p>
    <p>While 38.40% of desktop sites (33.79% on mobile) have the HTML lang attribute set to English, only 7.43% (6.79% on mobile) of the sites also contain an <code>hreflang</code> link to another language version. This suggests that the vast majority of websites that we analyzed don't offer separate versions of their home page that would require language targeting -- unless these separate versions do exist but haven't been configured correctly.</p>
    <figure id="seo-fig-11">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th><code>hreflang</code></th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>en</td>
                <td class="numeric">12.19%</td>
                <td class="numeric">2.80%</td>
              </tr>
              <tr>
                <td>x-default</td>
                <td class="numeric">5.58%</td>
                <td class="numeric">1.44%</td>
              </tr>
              <tr>
                <td>fr</td>
                <td class="numeric">5.23%</td>
                <td class="numeric">1.28%</td>
              </tr>
              <tr>
                <td>es</td>
                <td class="numeric">5.08%</td>
                <td class="numeric">1.25%</td>
              </tr>
              <tr>
                <td>de</td>
                <td class="numeric">4.91%</td>
                <td class="numeric">1.24%</td>
              </tr>
              <tr>
                <td>en-us</td>
                <td class="numeric">4.22%</td>
                <td class="numeric">2.95%</td>
              </tr>
              <tr>
                <td>it</td>
                <td class="numeric">3.58%</td>
                <td class="numeric">0.92%</td>
              </tr>
              <tr>
                <td>ru</td>
                <td class="numeric">3.13%</td>
                <td class="numeric">0.80%</td>
              </tr>
              <tr>
                <td>en-gb</td>
                <td class="numeric">3.04%</td>
                <td class="numeric">2.79%</td>
              </tr>
              <tr>
                <td>de-de</td>
                <td class="numeric">2.34%</td>
                <td class="numeric">2.58%</td>
              </tr>
              <tr>
                <td>nl</td>
                <td class="numeric">2.28%</td>
                <td class="numeric">0.55%</td>
              </tr>
              <tr>
                <td>fr-fr</td>
                <td class="numeric">2.28%</td>
                <td class="numeric">2.56%</td>
              </tr>
              <tr>
                <td>es-es</td>
                <td class="numeric">2.08%</td>
                <td class="numeric">2.51%</td>
              </tr>
              <tr>
                <td>pt</td>
                <td class="numeric">2.07%</td>
                <td class="numeric">0.48%</td>
              </tr>
              <tr>
                <td>pl</td>
                <td class="numeric">2.01%</td>
                <td class="numeric">0.50%</td>
              </tr>
              <tr>
                <td>ja</td>
                <td class="numeric">2.00%</td>
                <td class="numeric">0.43%</td>
              </tr>
              <tr>
                <td>tr</td>
                <td class="numeric">1.78%</td>
                <td class="numeric">0.49%</td>
              </tr>
              <tr>
                <td>it-it</td>
                <td class="numeric">1.62%</td>
                <td class="numeric">2.40%</td>
              </tr>
              <tr>
                <td>ar</td>
                <td class="numeric">1.59%</td>
                <td class="numeric">0.43%</td>
              </tr>
              <tr>
                <td>pt-br</td>
                <td class="numeric">1.52%</td>
                <td class="numeric">2.38%</td>
              </tr>
              <tr>
                <td>th</td>
                <td class="numeric">1.40%</td>
                <td class="numeric">0.42%</td>
              </tr>
              <tr>
                <td>ko</td>
                <td class="numeric">1.33%</td>
                <td class="numeric">0.28%</td>
              </tr>
              <tr>
                <td>zh</td>
                <td class="numeric">1.30%</td>
                <td class="numeric">0.27%</td>
              </tr>
              <tr>
                <td>sv</td>
                <td class="numeric">1.22%</td>
                <td class="numeric">0.30%</td>
              </tr>
              <tr>
                <td>en-au</td>
                <td class="numeric">1.20%</td>
                <td class="numeric">2.31%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#seo-fig-11" class="anchor-link">Figure 11.</a> Top 25 most popular <code>hreflang</code> values.</figcaption>
    </figure>
    <p>Next to English, the most common languages are French, Spanish, and German. These are followed by languages targeted towards specific geographies like English for Americans (<code>en-us</code>) or more obscure combinations like Spanish for the Irish (<code>es-ie</code>).</p>
    <p>
      The analysis did not check for correct implementation, such as whether or not the different language versions properly link to each other. However, from looking at the low adoption of having an x-default version (only 3.77% on desktop and 1.30% on mobile), <a href="https://www.google.com/url?q=https://support.google.com/webmasters/answer/189077?hl%3Den&amp;sa=D&amp;ust=1570627963630000&amp;usg=AFQjCNFwzwglsbysT9au_I-7ZQkwa-QvrA">as is recommended<span class="fn">https://www.google.com/url?q=https://support.google.com/webmasters/answer/189077?hl%3Den&amp;sa=D&amp;ust=1570627963630000&amp;usg=AFQjCNFwzwglsbysT9au_I-7ZQkwa-QvrA</span></a
      >, this is an indicator that this element is complex and not always easy to get right.
    </p>
    <h3 id="seo-spa-crawlability"><a href="#seo-spa-crawlability" class="anchor-link">SPA crawlability</a></h3>
    <p>
      Single-page applications (SPAs) built with frameworks like React and Vue.js come with their own SEO complexity. Websites using a hash-based navigation, make it especially hard for search engines to properly crawl and index them. For example, Google had an "AJAX crawling scheme" workaround that turned out to be complex for search engines as well as developers, so it was <a href="https://webmasters.googleblog.com/2015/10/deprecating-our-ajax-crawling-scheme.html">deprecated in 2015<span class="fn">https://webmasters.googleblog.com/2015/10/deprecating-our-ajax-crawling-scheme.html</span></a
      >.
    </p>
    <p>The number of SPAs that were tested had a relatively low number of links served via hash URLs, with 13.08% of React mobile pages using hash URLs for navigation, 8.15% of mobile Vue.js pages using them, and 2.37% of mobile Angular pages using them. These results were very similar for desktop pages too. This is positive to see from an SEO perspective, considering the impact that hash URLs can have on content discovery.</p>
    <p>
      The higher number of hash URLs in React pages is surprising, especially in contrast to the lower number of hash URLs found on Angular pages. Both frameworks promote the adoption of routing packages where the <a href="https://developer.mozilla.org/en-US/docs/Web/API/History">History API<span class="fn">https://developer.mozilla.org/en-US/docs/Web/API/History</span></a> is the default for links, instead of relying on hash URLs. Vue.js is <a href="https://github.com/vuejs/rfcs/pull/40">considering moving to using the History API as the default<span class="fn">https://github.com/vuejs/rfcs/pull/40</span></a> as well in version 3 of their <code>vue-router</code> package.
    </p>
    <h3 id="seo-amp"><a href="#seo-amp" class="anchor-link">AMP</a></h3>
    <p>
      AMP (formerly known as "Accelerated Mobile Pages") was first introduced in 2015 by Google as an open source HTML framework. It provides components and infrastructure for websites to provide a faster experience for users, by using optimizations such as caching, lazy loading, and optimized images. Notably, Google adopted this for their search engine, where AMP pages are also served from their own CDN. This feature later became a standards proposal under the name <a href="https://wicg.github.io/webpackage/draft-yasskin-http-origin-signed-responses.html">Signed HTTP Exchanges<span class="fn">https://wicg.github.io/webpackage/draft-yasskin-http-origin-signed-responses.html</span></a
      >.
    </p>
    <p>Despite this, only 0.62% of mobile home pages contain a link to an AMP version. Given the visibility this project has had, this suggests that it has had a relatively low adoption. However, AMP can be more useful for serving article pages, so our home page-focused analysis won't reflect adoption across other page types.</p>
    <h3 id="seo-security"><a href="#seo-security" class="anchor-link">Security</a></h3>
    <p>
      A strong online shift in recent years has been for the web to move to HTTPS by default. HTTPS prevents website traffic from being intercepted on public Wi-Fi networks, for example, where user input data is then transmitted unsecurely. Google have been pushing for sites to adopt HTTPS, and even made <a href="https://webmasters.googleblog.com/2014/08/https-as-ranking-signal.html">HTTPS as a ranking signal<span class="fn">https://webmasters.googleblog.com/2014/08/https-as-ranking-signal.html</span></a
      >. Chrome also supported the move to secure pages by labeling non-HTTPS pages as <a href="https://www.blog.google/products/chrome/milestone-chrome-security-marking-http-not-secure/">not secure<span class="fn">https://www.blog.google/products/chrome/milestone-chrome-security-marking-http-not-secure/</span></a> in the browser.
    </p>
    <p>
      For more information and guidance from Google on the importance of HTTPS and how to adopt it, please see <a href="https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-https">Why HTTPS Matters<span class="fn">https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-https</span></a
      >.
    </p>
    <p>We found that 67.06% of websites on desktop are now served over HTTPS. Just under half of websites still haven't migrated to HTTPS and are serving non-secure pages to their users. This is a significant number. Migrations can be hard work, so this could be a reason why the adoption rate isn't higher, but an HTTPS migration usually require an SSL certificate and a simple change to the <code>.htaccess</code> file. There's no real reason not to switch to HTTPS.</p>
    <p>
      Google's <a href="https://transparencyreport.google.com/https/overview">HTTPS Transparency Report<span class="fn">https://transparencyreport.google.com/https/overview</span></a> reports a 90% adoption of HTTPS for the top 100 non-Google domains (representing 25% of all website traffic worldwide). The difference between this number and ours could be explained by the fact that relatively smaller sites are adopting HTTPS at a slower rate.
    </p>
    <p>Learn more about the state of security in the <a href="#security">Security</a> chapter.</p>
    <h2 id="seo-conclusion"><a href="#seo-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>Through our analysis, we observed that the majority of websites are getting the fundamentals right, in that their home pages are crawlable, indexable, and include the key content required to rank well in search engines' results pages. Not every person who owns a website will be aware of SEO at all, let alone its best practice guidelines, so it is promising to see that so many sites have got the basics covered.</p>
    <p>However, more sites are missing the mark than expected when it comes to some of the more advanced aspects of SEO and accessibility. Site speed is one of these factors that many websites are struggling with, especially on mobile. This is a significant problem, as speed is one of the biggest contributors to UX, which is something that can impact rankings. The number of websites that aren't yet served over HTTPS is also problematic to see, considering the importance of security and keeping user data safe.</p>
    <p>There is a lot more that we can all be doing to learn about SEO best practices and industry developments. This is essential due to the evolving nature of the search industry and the rate at which changes happen. Search engines make thousands of improvements to their algorithms each year, and we need to keep up if we want our websites to reach more visitors in organic search.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"II","chapter_number":11,"title":"PWA","description":"PWA chapter of the 2019 Web Almanac covering service workers (registations, installability, events and filesizes), Web App Manifests properties, and Workbox.","authors":["tomayac","jeffposnick"],"reviewers":["hyperpress","ahmadawais"],"translators":null,"discuss":"1766","results":"https://docs.google.com/spreadsheets/d/19BI3RQc_vR9bUPPZfVsF_4gpFWLNT6P0pLcAdL-A56c/","queries":"11_PWA","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-03-01T00:00:00.000Z","chapter":"pwa"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="pwa-introduction"><a href="#pwa-introduction" class="anchor-link">Introduction</a></h2>
    <p>
      Progressive Web Apps (PWAs) are a new class of web applications, building on top of platform primitives like the <a href="https://developer.mozilla.org/en/docs/Web/API/Service_Worker_API">Service Worker APIs<span class="fn">https://developer.mozilla.org/en/docs/Web/API/Service_Worker_API</span></a
      >. Service workers allow apps to support network-independent loading by acting as a network proxy, intercepting your web app's outgoing requests, and replying with programmatic or cached responses. Service workers can receive push notifications and synchronize data in the background even when the corresponding app is not running. Additionally, service workers, together with <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest">Web App Manifests<span class="fn">https://developer.mozilla.org/en-US/docs/Web/Manifest</span></a
      >, allow users to install PWAs to their devices' home screens.
    </p>
    <p>
      Service workers were <a href="https://blog.chromium.org/2014/12/chrome-40-beta-powerful-offline-and.html">first implemented in Chrome 40<span class="fn">https://blog.chromium.org/2014/12/chrome-40-beta-powerful-offline-and.html</span></a
      >, back in December 2014, and the term Progressive Web Apps was <a href="https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/">coined by Frances Berriman and Alex Russell<span class="fn">https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/</span></a> in 2015. As service workers are now finally <a href="https://jakearchibald.github.io/isserviceworkerready/">implemented in all major browsers<span class="fn">https://jakearchibald.github.io/isserviceworkerready/</span></a
      >, the goal for this chapter is to determine how many PWAs are actually out there, and how they make use of these new technologies. Certain advanced APIs like <a href="https://developers.google.com/web/updates/2015/12/background-sync">Background Sync<span class="fn">https://developers.google.com/web/updates/2015/12/background-sync</span></a> are currently still <a href="https://caniuse.com/#feat=background-sync">only available on Chromium-based browsers<span class="fn">https://caniuse.com/#feat=background-sync</span></a
      >, so as an additional question, we looked into which features these PWAs actually use.
    </p>
    <h2 id="pwa-service-workers"><a href="#pwa-service-workers" class="anchor-link">Service workers</a></h2>
    <h3 id="pwa-service-worker-registrations-and-installability"><a href="#pwa-service-worker-registrations-and-installability" class="anchor-link">Service worker registrations and installability</a></h3>
    <figure id="pwa-fig-1">
      <div class="big-number">0.44%</div>
      <figcaption><a href="#pwa-fig-1" class="anchor-link">Figure 1.</a> Percent of desktop pages that register a service worker.</figcaption>
    </figure>
    <p>The first metric we explore are service worker installations. Looking at the data exposed through feature counters in the HTTP Archive, we find that 0.44% of all desktop and 0.37% of all mobile pages register a service worker, and both curves over time are steeply growing.</p>
    <figure id="pwa-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/pwa/fig2.png" class="fig-mobile">
        <img src="/static/images/2019/pwa/fig2.png" alt="Figure 2. Service Worker installation over time for desktop and mobile." aria-labelledby="pwa-fig2-caption" aria-describedby="pwa-fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT7DUzACr4eBhNU4cDz8-17oSx2qYbi9OFDjngz0NXNBP2IzZFxvDxLX2XThlN4SZymKMygOXzpI2AJ/pubchart?oid=251442414&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="pwa-fig2-description" class="visually-hidden">Timeseries chart of service worker installation. Since Janurary 2017, desktop and mobile have increased steadily from approximately 0.0% to about 0.4%.</div>
      <figcaption id="pwa-fig2-caption"><a href="#pwa-fig-2" class="anchor-link">Figure 2.</a> Service Worker installation over time for desktop and mobile.</figcaption>
    </figure>
    <p>
      Now this might not look overly impressive, but taking traffic data from Chrome Platform Status into account, we can see that a service worker controls about <a href="https://www.chromestatus.com/metrics/feature/timeline/popularity/990">15% of all page loads<span class="fn">https://www.chromestatus.com/metrics/feature/timeline/popularity/990</span></a
      >, which can be interpreted as popular, high-traffic sites increasingly having started to embrace service workers.
    </p>
    <figure id="pwa-fig-3">
      <div class="big-number">15%</div>
      <figcaption>
        <a href="#pwa-fig-3" class="anchor-link">Figure 3.</a> Percent of page views on a page that registers a service worker. (Source: <a href="https://www.chromestatus.com/metrics/feature/timeline/popularity/990">Chrome Platform Status<span class="fn">https://www.chromestatus.com/metrics/feature/timeline/popularity/990</span></a
        >)
      </figcaption>
    </figure>
    <p>
      <a href="#methodology-lighthouse">Lighthouse</a> checks whether a page is eligible for an <a href="https://developers.google.com/web/tools/lighthouse/audits/install-prompt">install prompt<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/install-prompt</span></a
      >. 1.56% of mobile pages have an <a href="https://web.dev/installable-manifest/">installable manifest<span class="fn">https://web.dev/installable-manifest/</span></a
      >.
    </p>
    <p>
      To control the install experience, 0.82% of all desktop and 0.94% of all mobile pages use the <a href="https://w3c.github.io/manifest/#beforeinstallpromptevent-interface"><code>OnBeforeInstallPrompt</code> interface<span class="fn">https://w3c.github.io/manifest/#beforeinstallpromptevent-interface</span></a
      >. At present <a href="https://caniuse.com/#feat=web-app-manifest">support is limited to Chromium-based browsers<span class="fn">https://caniuse.com/#feat=web-app-manifest</span></a
      >.
    </p>
    <h3 id="pwa-service-worker-events"><a href="#pwa-service-worker-events" class="anchor-link">Service worker events</a></h3>
    <p>
      In a service worker one can <a href="https://developers.google.com/web/fundamentals/primers/service-workers/lifecycle">listen for a number of events<span class="fn">https://developers.google.com/web/fundamentals/primers/service-workers/lifecycle</span></a
      >:
    </p>
    <ul>
      <li><code>install</code>, which occurs upon service worker installation.</li>
      <li><code>activate</code>, which occurs upon service worker activation.</li>
      <li><code>fetch</code>, which occurs whenever a resource is fetched.</li>
      <li><code>push</code>, which occurs when a push notification arrives.</li>
      <li><code>notificationclick</code>, which occurs when a notification is being clicked.</li>
      <li><code>notificationclose</code>, which occurs when a notification is being closed.</li>
      <li><code>message</code>, which occurs when a message sent via <code>postMessage()</code> arrives.</li>
      <li><code>sync</code>, which occurs when a background sync event occurs.</li>
    </ul>
    <figure id="pwa-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/pwa/fig4.png">
        <img src="/static/images/2019/pwa/fig4.png" alt="Figure 4. Popularity of service worker events." aria-labelledby="pwa-fig4-caption" aria-describedby="pwa-fig4-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT7DUzACr4eBhNU4cDz8-17oSx2qYbi9OFDjngz0NXNBP2IzZFxvDxLX2XThlN4SZymKMygOXzpI2AJ/pubchart?oid=2110574556&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="pwa-fig4-description" class="visually-hidden">Bar chart showing the popularity of various service worker events. Fetch is used on 73% of mobile service workers, install 71%, activate 56%, notification click 10%, push 8%, message 5%, notification close 2%, and sync 1%. The usage on desktop service workers is similar, but slightly lower for fetch, install, and activate.</div>
      <figcaption id="pwa-fig4-caption"><a href="#pwa-fig-4" class="anchor-link">Figure 4.</a> Popularity of service worker events.</figcaption>
    </figure>
    <p>We have examined which of these events are being listened to by service workers we could find in the HTTP Archive. The results for mobile and desktop are very similar with <code>fetch</code>, <code>install</code>, and <code>activate</code> being the three most popular events, followed by <code>notificationclick</code> and <code>push</code>. If we interpret these results, offline use cases that service workers enable are the most attractive feature for app developers, far ahead of push notifications. Due to its limited availability, and less common use case, background sync doesn't play a significant role at the moment.</p>
    <h3 id="pwa-service-worker-file-sizes"><a href="#pwa-service-worker-file-sizes" class="anchor-link">Service worker file sizes</a></h3>
    <p>File size or lines of code are generally a bad proxy for the complexity of the task at hand. In this case, however, it is definitely interesting to compare (compressed) file sizes of service workers for mobile and desktop.</p>
    <figure id="pwa-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/pwa/fig5.png">
        <img src="/static/images/2019/pwa/fig5.png" alt="Figure 5. Distribution of service worker transfer size." aria-labelledby="pwa-fig5-caption" aria-describedby="pwa-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT7DUzACr4eBhNU4cDz8-17oSx2qYbi9OFDjngz0NXNBP2IzZFxvDxLX2XThlN4SZymKMygOXzpI2AJ/pubchart?oid=345926232&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="pwa-fig5-description" class="visually-hidden">Bar chart showing the distribution of transfer sizes of service workers. The 10, 25, 50, 75, and 90th percentiles for desktop service worker transfer sizes are: 176, 350, 895, 2,010, and 4,138 bytes. Desktop service workers are larger across each percentile from as many as 1,000 bytes at the 90th percentile.</div>
      <figcaption id="pwa-fig5-caption"><a href="#pwa-fig-5" class="anchor-link">Figure 5.</a> Distribution of service worker transfer size.</figcaption>
    </figure>
    <p>
      The median service worker file on desktop is 895 bytes, whereas on mobile it's 694 bytes. Throughout all percentiles desktop service workers are larger than mobile service workers. We note that these stats don't account for dynamically imported scripts through the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/importScripts"><code>importScripts()</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/importScripts</span></a> method, which likely skews the results higher.
    </p>
    <h2 id="pwa-web-app-manifests"><a href="#pwa-web-app-manifests" class="anchor-link">Web app manifests</a></h2>
    <h3 id="pwa-web-app-manifest-properties"><a href="#pwa-web-app-manifest-properties" class="anchor-link">Web app manifest properties</a></h3>
    <p>The web app manifest is a simple JSON file that tells the browser about a web application and how it should behave when installed on the user's mobile device or desktop. A typical manifest file includes information about the app name, icons it should use, the start URL it should open at when launched, and more. Only 1.54% of all encountered manifests were invalid JSON, and the rest parsed correctly.</p>
    <p>
      We looked at the different properties defined by the <a href="https://w3c.github.io/manifest/#webappmanifest-dictionary">Web App Manifest specification<span class="fn">https://w3c.github.io/manifest/#webappmanifest-dictionary</span></a
      >, and also considered non-standard proprietary properties. According to the spec, the following properties are allowed:
    </p>
    <ul>
      <li><code>dir</code></li>
      <li><code>lang</code></li>
      <li><code>name</code></li>
      <li><code>short_name</code></li>
      <li><code>description</code></li>
      <li><code>icons</code></li>
      <li><code>screenshots</code></li>
      <li><code>categories</code></li>
      <li><code>iarc_rating_id</code></li>
      <li><code>start_url</code></li>
      <li><code>display</code></li>
      <li><code>orientation</code></li>
      <li><code>theme_color</code></li>
      <li><code>background_color</code></li>
      <li><code>scope</code></li>
      <li><code>serviceworker</code></li>
      <li><code>related_applications</code></li>
      <li><code>prefer_related_applications</code></li>
    </ul>
    <p>The only property that we didn't observe in the wild was <code>iarc_rating_id</code>, which is a string that represents the International Age Rating Coalition (IARC) certification code of the web application. It is intended to be used to determine which ages the web application is appropriate for.</p>
    <figure id="pwa-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/pwa/fig6.png">
        <img src="/static/images/2019/pwa/fig6.png" alt="Figure 6. Popularity of web app manifest properties." aria-labelledby="pwa-fig6-caption" aria-describedby="pwa-fig6-description" width="600" height="452" data-width="600" data-height="452" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT7DUzACr4eBhNU4cDz8-17oSx2qYbi9OFDjngz0NXNBP2IzZFxvDxLX2XThlN4SZymKMygOXzpI2AJ/pubchart?oid=1904325089&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="pwa-fig6-description" class="visually-hidden">Bar chart showing the popularity of web app manifest properties for desktop and mobile. 88% of desktop web app manifests include the name property, 82% icons, 61% display, 55% theme color, 49% background color, 45% short name, 36% start URL, 19% GCM sender ID, 9% GCM user visible only, 9% orientation, 7% description, 5% scope, and 4% lang. The popularity of properties on mobile web app manifests is similar, plus or minus 2 percentage points.</div>
      <figcaption id="pwa-fig6-caption"><a href="#pwa-fig-6" class="anchor-link">Figure 6.</a> Popularity of web app manifest properties.</figcaption>
    </figure>
    <p>The proprietary properties we encountered frequently were <code>gcm_sender_id</code> and <code>gcm_user_visible_only</code> from the legacy Google Cloud Messaging (GCM) service. Interestingly there are almost no differences between mobile and desktop. On both platforms, however, there's a long tail of properties that are not interpreted by browsers yet contain potentially useful metadata like <code>author</code> or <code>version</code>. We also found a non-trivial amount of mistyped properties; our favorite being <code>shot_name</code>, as opposed to <code>short_name</code>. An interesting outlier is the <code>serviceworker</code> property, which is standard but not implemented by any browser vendor. Nevertheless, it was found on 0.09% of all web app manifests used by mobile and desktop pages.</p>
    <h3 id="pwa-display-values"><a href="#pwa-display-values" class="anchor-link">Display values</a></h3>
    <p>Looking at the values developers set for the <code>display</code> property, it becomes immediately clear that they want PWAs to be perceived as "proper" apps that don't reveal their web technology origins.</p>
    <figure id="pwa-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/pwa/fig7.png">
        <img src="/static/images/2019/pwa/fig7.png" alt="Figure 7. Usage of web app manifest display properties." aria-labelledby="pwa-fig7-caption" aria-describedby="pwa-fig7-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT7DUzACr4eBhNU4cDz8-17oSx2qYbi9OFDjngz0NXNBP2IzZFxvDxLX2XThlN4SZymKMygOXzpI2AJ/pubchart?oid=1514793237&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="pwa-fig7-description" class="visually-hidden">Bar chart showing how the display property of web app manifests is used by desktop and mobile websites. In both cases, the "standalone" value is used 57% of the time. The property is not set at all in 38% of manifests. The "minimal UI", "browser", and "fullscreen" values each make up only 1 or 2% of usage.</div>
      <figcaption id="pwa-fig7-caption"><a href="#pwa-fig-7" class="anchor-link">Figure 7.</a> Usage of web app manifest <code>display</code> properties.</figcaption>
    </figure>
    <p>By choosing <code>standalone</code>, they make sure no browser UI is shown to the end-user. This is reflected by the majority of apps that make use of the <code>prefers_related_applications</code> property: more that 97% of both mobile and desktop applications do <em>not</em> prefer native applications.</p>
    <h3 id="pwa-category-values"><a href="#pwa-category-values" class="anchor-link">Category values</a></h3>
    <p>The <code>categories</code> property describes the expected application categories to which the web application belongs. It is only meant as a hint to catalogs or app stores listing web applications, and it is expected that websites will make a best effort to list themselves in one or more appropriate categories.</p>
    <figure id="pwa-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/pwa/fig8.png">
        <img src="/static/images/2019/pwa/fig8.png" alt="Figure 8. Top web app manifest categories." aria-labelledby="pwa-fig8-caption" aria-describedby="pwa-fig8-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT7DUzACr4eBhNU4cDz8-17oSx2qYbi9OFDjngz0NXNBP2IzZFxvDxLX2XThlN4SZymKMygOXzpI2AJ/pubchart?oid=1609487902&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="pwa-fig8-description" class="visually-hidden">Bar chart showing the top web app manifest categories. 60 mobile manifests are in the "shopping" category, 15 "business", 9 "web", 9 "technology", 8 "games", 8 "entertainment", 7 "social", etc. Desktop manifests follow a similar distribution except for "shopping", for which there is only 1 desktop manifest.</div>
      <figcaption id="pwa-fig8-caption"><a href="#pwa-fig-8" class="anchor-link">Figure 8.</a> Top web app manifest categories.</figcaption>
    </figure>
    <p>There were not too many manifests that made use of the property, but it is interesting to see the shift from "shopping" being the most popular category on mobile to "business", "technology", and "web" (whatever may be meant with that) on desktop that share the first place evenly.</p>
    <h3 id="pwa-icon-sizes"><a href="#pwa-icon-sizes" class="anchor-link">Icon sizes</a></h3>
    <p>
      Lighthouse <a href="https://developers.google.com/web/tools/lighthouse/audits/manifest-contains-192px-icon">requires<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/manifest-contains-192px-icon</span></a> at least an icon sized 192x192 pixels, but common favicon generation tools create a plethora of other sizes, too.
    </p>
    <figure id="pwa-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/pwa/fig9.png">
        <img src="/static/images/2019/pwa/fig9.png" alt="Figure 9. Top web app manifest icon sizes." aria-labelledby="pwa-fig9-caption" aria-describedby="pwa-fig9-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT7DUzACr4eBhNU4cDz8-17oSx2qYbi9OFDjngz0NXNBP2IzZFxvDxLX2XThlN4SZymKMygOXzpI2AJ/pubchart?oid=1369881840&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="pwa-fig9-description" class="visually-hidden">Bar chart showing the usage of top web app manifest icon size property values. All values are given in height and width pixels, for example the top value in 23% of manifests is 192 by 192 pixels. The next most popular sizes are 144 at 11%, 96 at 11%, 72 at 10%, 48 at 10%, 512 at 9%, 36% at 9%, 256 at 5%, 384 at 2%, 128 at 1%, and 152 at 1%. Desktop and mobile have identical usage patterns.</div>
      <figcaption id="pwa-fig9-caption"><a href="#pwa-fig-9" class="anchor-link">Figure 9.</a> Top web app manifest icon sizes.</figcaption>
    </figure>
    <p>
      Lighthouse's rule is probably the culprit for 192 pixels being the most popular choice of icon size on both desktop and mobile, despite <a href="https://developers.google.com/web/fundamentals/web-app-manifest#icons">Google's documentation<span class="fn">https://developers.google.com/web/fundamentals/web-app-manifest#icons</span></a> explicitly recommending 512x512, which doesn't show as a particularly prominent option.
    </p>
    <h3 id="pwa-orientation-values"><a href="#pwa-orientation-values" class="anchor-link">Orientation values</a></h3>
    <p>
      The valid values for the <code>orientation</code> property are defined in the <a href="https://www.w3.org/TR/screen-orientation/#dom-orientationlocktype">Screen Orientation API specification<span class="fn">https://www.w3.org/TR/screen-orientation/#dom-orientationlocktype</span></a
      >. Currently, they are:
    </p>
    <ul>
      <li><code>"any"</code></li>
      <li><code>"natural"</code></li>
      <li><code>"landscape"</code></li>
      <li><code>"portrait"</code></li>
      <li><code>"portrait-primary"</code></li>
      <li><code>"portrait-secondary"</code></li>
      <li><code>"landscape-primary"</code></li>
      <li><code>"landscape-secondary"</code></li>
    </ul>
    <figure id="pwa-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/pwa/fig10.png">
        <img src="/static/images/2019/pwa/fig10.png" alt="Figure 10. Top web app manifest orientation values." aria-labelledby="pwa-fig10-caption" aria-describedby="pwa-fig10-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT7DUzACr4eBhNU4cDz8-17oSx2qYbi9OFDjngz0NXNBP2IzZFxvDxLX2XThlN4SZymKMygOXzpI2AJ/pubchart?oid=2065142361&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="pwa-fig10-description" class="visually-hidden">Bar chart showing the top web app manifest orientation values. "Portrait" is set in 6% of desktop manifests, followed by "any" in 2%, and the everything else in fewer than 1% of manifests. This is similar to usage in mobile manifests, except "portrait" is set in 8% of manifests and "portrait-primary" in 1%.</div>
      <figcaption id="pwa-fig10-caption"><a href="#pwa-fig-10" class="anchor-link">Figure 10.</a> Top web app manifest orientation values.</figcaption>
    </figure>
    <p><code>"portrait"</code> orientation is the clear winner on both platforms, followed by <code>"any"</code> orientation.</p>
    <h2 id="pwa-workbox"><a href="#pwa-workbox" class="anchor-link">Workbox</a></h2>
    <p>
      <a href="https://developers.google.com/web/tools/workbox">Workbox<span class="fn">https://developers.google.com/web/tools/workbox</span></a> is a set of libraries that help with common service worker use cases. For instance, Workbox has tools that can plug in to your build process and generate a manifest of files, which are then precached by your service worker. Workbox includes libraries to handle runtime caching, request routing, cache expiration, background sync, and more.
    </p>
    <p>
      Given the low-level nature of the service worker APIs, many developers have turned to Workbox as a way of structuring their service worker logic into higher-level, reusable chunks of code. Workbox adoption is also driven by its inclusion as a feature in a number of popular JavaScript framework starter kits, like <a href="https://create-react-app.dev/"><code>create-react-app</code><span class="fn">https://create-react-app.dev/</span></a> and <a href="https://www.npmjs.com/package/@vue/cli-plugin-pwa">Vue's PWA plugin<span class="fn">https://www.npmjs.com/package/@vue/cli-plugin-pwa</span></a
      >.
    </p>
    <p>The HTTP Archive shows that 12.71% of websites that register a service worker are using at least one of the Workbox libraries. This percentage is roughly consistent across desktop and mobile, with a slightly lower percentage (11.46%) on mobile compared to desktop (14.36%).</p>
    <h2 id="pwa-conclusion"><a href="#pwa-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>The stats in this chapter show that PWAs are still only used by a small percentage of sites. However, this relatively small usage is driven by the more popular sites which have a much larger share of traffic, and pages beyond the home page may use this more: we showed that 15% of page loads use a service workers. The advantages they give for <a href="#performance">performance</a> and greater control over <a href="#caching">caching</a> particularly for <a href="#mobile-web">mobile</a> should mean that usage will continue to grow.</p>
    <p>
      PWAs have often been seen as Chrome-driven technology. Other browsers have made great strides recently to implement most of the underlying technologies, although first-class installability lags on some platforms. It's positive to see support becoming more widespread. <a href="https://twitter.com/firt">Maximiliano Firtman<span class="fn">https://twitter.com/firt</span></a> does a great job of tracking this on iOS, including <a href="https://medium.com/@firt/iphone-11-ipados-and-ios-13-for-pwas-and-web-development-5d5d9071cc49">explaining Safari PWA support<span class="fn">https://medium.com/@firt/iphone-11-ipados-and-ios-13-for-pwas-and-web-development-5d5d9071cc49</span></a
      >. Apple doesn't use the term PWA much, and has <a href="https://developer.apple.com/news/?id=09062019b">explicitly stated that these HTML5 apps are best delivered outside of the App Store<span class="fn">https://developer.apple.com/news/?id=09062019b</span></a
      >. Microsoft went the opposite direction, not only <a href="https://docs.microsoft.com/en-us/microsoft-edge/progressive-web-apps/microsoft-store">encouraging PWAs in its app store, but even automatically shortlisting PWAs to be added that were found via the Bing web crawler<span class="fn">https://docs.microsoft.com/en-us/microsoft-edge/progressive-web-apps/microsoft-store</span></a
      >. Google has also provided a method for listing web apps in the Google Play Store, via <a href="https://developers.google.com/web/updates/2019/02/using-twa">Trusted Web Activities<span class="fn">https://developers.google.com/web/updates/2019/02/using-twa</span></a
      >.
    </p>
    <p>PWAs provide a path forward for developers who would prefer to build and release on the web instead of on native platforms and app stores. Not every operating system and browser offers full parity with native software, but improvements continue, and perhaps 2020 is the year where we see an explosion in deployments?</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"II","chapter_number":12,"title":"Mobile Web","description":"Mobile Web chapter of the 2019 Web Almanac covering page loading, textual content, zooming and scaling, buttons and links, and ease of filling out forms.","authors":["obto"],"reviewers":["AymenLoukil","hyperpress"],"translators":null,"discuss":"1767","results":"https://docs.google.com/spreadsheets/d/1dPBDeHigqx9FVaqzfq7CYTz4KjllkMTkfq4DG4utE_g/","queries":"12_Mobile_Web","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-05-27T00:00:00.000Z","chapter":"mobile-web"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="mobile-web-introduction"><a href="#mobile-web-introduction" class="anchor-link">Introduction</a></h2>
    <p>Let's step back for a moment, to the year 2007. The "mobile web" is currently just a blip on the radar, and for good reason too. Why? Mobile browsers have little to no CSS support, meaning sites look nothing like they do on desktop  some browsers can only display text. Screens are incredibly small and can only display a few lines of text at a time. And the replacements for a mouse are these tiny little arrow keys you use to "tab around". Needless to say, browsing the web on a phone is truly a labor of love. However, all of this is just about to change.</p>
    <p>In the middle of his presentation, Steve Jobs takes the newly unveiled iPhone, sits down, and begins to surf the web in a way we had only previously dreamed of. A large screen and fully featured browser displaying websites in their full glory. And most importantly, surfing the web using the most intuitive pointer device known to man: our fingers. No more tabbing around with tiny little arrow keys.</p>
    <p>
      Since 2007, the mobile web has grown at an explosive rate. And now, 13 years later, mobile accounts for <a href="https://www.merkleinc.com/thought-leadership/digital-marketing-report">59% of all searches<span class="fn">https://www.merkleinc.com/thought-leadership/digital-marketing-report</span></a> and 58.7% of all web traffic, according to <a href="https://developer.akamai.com/akamai-mpulse-real-user-monitoring-solution">Akamai mPulse<span class="fn">https://developer.akamai.com/akamai-mpulse-real-user-monitoring-solution</span></a> data in July 2019. It's no longer an afterthought, but the primary way people experience the web. So given how significant mobile is, what kind of experience are we providing our visitors? Where are we falling short? Let's find out.
    </p>
    <h2 id="mobile-web-the-page-loading-experience"><a href="#mobile-web-the-page-loading-experience" class="anchor-link">The page loading experience</a></h2>
    <p>The first part of the mobile web experience we analyzed is the one we're all most intimately familiar with: <em>the page loading experience</em>. But before we start diving into our findings, let's make sure we're all on the same page regarding what the typical mobile user <em>really</em> looks like. Because this will not only help you reproduce these results, but understand these users better.</p>
    <p>
      Let's start with what phone the typical mobile user has. The average Android phone <a href="https://web.archive.org/web/20190921115844/https://www.idc.com/getdoc.jsp?containerId=prUS45115119">is ~$250<span class="fn">https://web.archive.org/web/20190921115844/https://www.idc.com/getdoc.jsp?containerId=prUS45115119</span></a
      >, and one of the <a href="https://web.archive.org/web/20190812221233/https://deviceatlas.com/blog/most-popular-android-smartphones">most popular phones<span class="fn">https://web.archive.org/web/20190812221233/https://deviceatlas.com/blog/most-popular-android-smartphones</span></a> in that range is a Samsung Galaxy S6. So this is likely the kind of phone they use, which is actually 4x slower than an iPhone 8. This user doesn't have access to a fast 4G connection, but rather a 2G connection (<a href="https://www.gsma.com/r/mobileeconomy/">29%<span class="fn">https://www.gsma.com/r/mobileeconomy/</span></a> of the time) or 3G connection (<a href="https://www.gsma.com/r/mobileeconomy/">28%<span class="fn">https://www.gsma.com/r/mobileeconomy/</span></a> of the time). And this is what it all adds up to:
    </p>
    <figure id="mobile-web-fig-1">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Connection type</th>
                <td>
                  <a href="https://www.gsma.com/r/mobileeconomy/">2G or 3G<span class="fn">https://www.gsma.com/r/mobileeconomy/</span></a>
                </td>
              </tr>
              <tr>
                <th>Latency</th>
                <td>300 - 400ms</td>
              </tr>
              <tr>
                <th>Bandwidth</th>
                <td>0.4 - 1.6Mbps</td>
              </tr>
              <tr>
                <th>Phone</th>
                <td>
                  <a href="https://www.gsmarena.com/samsung_galaxy_s6-6849.php">Galaxy S6<span class="fn">https://www.gsmarena.com/samsung_galaxy_s6-6849.php</span></a>  <a href="https://www.notebookcheck.net/A11-Bionic-vs-7420-Octa_9250_6662.247596.0.html">4x slower<span class="fn">https://www.notebookcheck.net/A11-Bionic-vs-7420-Octa_9250_6662.247596.0.html</span></a> than iPhone 8 (Octane V2 score)
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#mobile-web-fig-1" class="anchor-link">Figure 1.</a> Technical profile of a typical mobile user.</figcaption>
    </figure>
    <p>I imagine some of you are surprised by these results. They may be far worse conditions than you've ever tested your site with. But now that we're all on the same page with what a mobile user truly looks like, let's get started.</p>
    <h3 id="mobile-web-pages-bloated-with-javascript"><a href="#mobile-web-pages-bloated-with-javascript" class="anchor-link">Pages bloated with JavaScript</a></h3>
    <p>
      The state of JavaScript on the mobile web is terrifying. According to HTTP Archive's <a href="https://httparchive.org/reports/state-of-javascript?start=2016_05_15&amp;end=2019_07_01&amp;view=list#bytesJs">JavaScript report<span class="fn">https://httparchive.org/reports/state-of-javascript?start=2016_05_15&amp;end=2019_07_01&amp;view=list#bytesJs</span></a
      >, the median mobile site requires phones to download 375 KB of JavaScript. Assuming a 70% compression ratio, this means that phones have to parse, compile, and execute 1.25 MB of JavaScript at the median.
    </p>
    <p>
      Why is this a problem? Because sites loading this much JS take upwards of <a href="https://httparchive.org/reports/loading-speed?start=earliest&amp;end=2019_07_01&amp;view=list#ttci">10 seconds<span class="fn">https://httparchive.org/reports/loading-speed?start=earliest&amp;end=2019_07_01&amp;view=list#ttci</span></a> to become consistently interactive. Or in other words, your page may appear fully loaded, but when a user clicks any of your buttons or menus, the user may experience some slowdown because the JavaScript hasn't finished executing. In the worst case scenario, users may be forced to keep clicking the button for upwards of 10 seconds, just waiting for that magical moment where something actually happens. Think about how confusing and frustrating that can be.
    </p>
    <figure id="mobile-web-fig-2">
      <iframe class="fig-mobile fig-desktop video-embed" width="560" height="315" src="https://www.youtube.com/embed/Lx1cYJAVnzA" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" aria-labelledby="mobile-web-fig2-caption" aria-describedby="mobile-web-fig2-description"></iframe>
      <a class="video-fallback-image" href="https://www.youtube.com/embed/Lx1cYJAVnzA">
        <img src="/static/images/2019/mobile-web/fig2.png" alt="Figure 2. Example of how painful of an experience waiting for JS to load can be." aria-labelledby="mobile-web-fig2-caption" aria-describedby="mobile-web-fig2-description" width="610" height="343" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="mobile-web-fig2-description" class="visually-hidden">Video showing two web pages loading and each page has a figure tapping repeatedly on a button throughout the video, to no effect. There is a clock ticking up from 0 seconds at the top, and an initial happy emoji face for each website, that starts to turn less happy as clock passes 6 seconds, wide-eyed at 8 seconds, angry at 10 seconds, really angry at 13 seconds and crying at 19 seconds shortly after which the video ends.</div>
      <figcaption id="mobile-web-fig2-caption"><a href="#mobile-web-fig-2" class="anchor-link">Figure 2.</a> Example of how painful of an experience waiting for JS to load can be.</figcaption>
    </figure>
    <p>
      Let's delve deeper and look at another metric that focuses more on <em>how well</em> each page utilizes JavaScript. For example, does it really need as much JavaScript as it's loading? We call this metric the <em>JavaScript Bloat Score</em>, based on the <a href="https://www.webbloatscore.com/">web bloat score<span class="fn">https://www.webbloatscore.com/</span></a
      >. The idea behind it is this:
    </p>
    <ul>
      <li>JavaScript is often used to both generate and change the page as it loads.</li>
      <li>It's also delivered as text to the browser. So it compresses well, and should be delivered faster than just a screenshot of the page.</li>
      <li>So if the total amount of JavaScript a page downloads <em>alone</em> (not including images, css, etc) is larger than a PNG screenshot of the viewport, we are using far too much JavaScript. At this point, it'd be faster just to send that screenshot to get the initial page state!</li>
    </ul>
    <p class="note">The *JavaScript Bloat Score* is defined as: (total JavaScript size) / (size of PNG screenshot of viewport). Any number greater than 1.0 means it's faster to send a screenshot.</p>
    <p>The results of this? Of the 5+ million websites analyzed, 75.52% were bloated with JavaScript. We have a long way to go.</p>
    <p>Note that we were not able to capture and measure the screenshots of all 5 million+ sites we analyzed. Instead, we took a random sampling of 1000 sites to find what the median viewport screenshot size is (140 KB), and then compared each site's JavaScript download size to this number.</p>
    <p>
      For a more in-depth breakdown of the effects of JavaScript, check out <a href="https://medium.com/@addyosmani/the-cost-of-javascript-in-2018-7d8950fbb5d4">The Cost of JavaScript in 2018<span class="fn">https://medium.com/@addyosmani/the-cost-of-javascript-in-2018-7d8950fbb5d4</span></a> by Addy Osmani.
    </p>
    <h3 id="mobile-web-service-worker-usage"><a href="#mobile-web-service-worker-usage" class="anchor-link">Service Worker usage</a></h3>
    <p>
      Browsers typically load all pages the same. They prioritize the download of some resources above others, follow the same caching rules, etc. Thanks to <a href="https://developers.google.com/web/fundamentals/primers/service-workers">Service Workers<span class="fn">https://developers.google.com/web/fundamentals/primers/service-workers</span></a> though, we now have a way to directly control how our resources are handled by the network layer, often times resulting in quite significant improvements to our page load times.
    </p>
    <p>Despite being available since 2016 and implemented on every major browser, only 0.64% of sites utilize them!</p>
    <h3 id="mobile-web-shifting-content-while-loading"><a href="#mobile-web-shifting-content-while-loading" class="anchor-link">Shifting content while loading</a></h3>
    <p>One of the most beautiful parts of the web is how web pages load progressively by nature. Browsers download and display content as soon as they are able, so users can engage with your content as soon as possible. However, this can have a detrimental effect if you don't design your site with this in mind. Specifically, content can shift position as resources load and impede the user experience.</p>
    <figure id="mobile-web-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/mobile-web/example-of-a-site-shifting-content-while-it-loads-lookzook.gif">
        <img src="/static/images/2019/mobile-web/example-of-a-site-shifting-content-while-it-loads-lookzook.gif" alt="Figure 3. Example of shifting content distracting a reader. CLS total of 42.59%. Image courtesy of LookZook" aria-labelledby="mobile-web-fig3-caption" aria-describedby="mobile-web-fig3-description" width="360" height="640" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="mobile-web-fig3-description" class="visually-hidden">A video showing a website progressively load. The text is displayed quickly, but as images continue to load the text gets shifted further and further down the page each timemaking it very frustrating to read. The calculated CLS of this example is 42.59%. Image courtesy of LookZook</div>
      <figcaption id="mobile-web-fig3-caption"><a href="#mobile-web-fig-3" class="anchor-link">Figure 3.</a> Example of shifting content distracting a reader. CLS total of 42.59%. Image courtesy of LookZook</figcaption>
    </figure>
    <p>Imagine you're reading an article when all of a sudden, an image loads and pushes the text you're reading way down the screen. You now have to hunt for where you were or just give up on reading the article. Or, perhaps even worse, you begin to click a link right before an ad loads in the same spot, resulting in an accidental click on the ad instead.</p>
    <p>
      So, how do we measure how much our sites shift? In the past it was quite difficult (if not impossible), but thanks to the new <a href="https://web.dev/layout-instability-api">Layout Instability API<span class="fn">https://web.dev/layout-instability-api</span></a> we can do this in two steps:
    </p>
    <ol>
      <li><p>Via the Layout Instability API, track each shift's impact on the page. This is reported to you as a percentage of how much content in the viewport has shifted.</p></li>
      <li>
        <p>
          Take all the shifts you've tracked and add them together. The result is what we call the <a href="https://web.dev/layout-instability-api#a-cumulative-layout-shift-score">Cumulative Layout Shift<span class="fn">https://web.dev/layout-instability-api#a-cumulative-layout-shift-score</span></a> (CLS) score.
        </p>
      </li>
    </ol>
    <p>Because every visitor can have a different CLS, in order to analyze this metric across the web with the <a href="#methodology-chrome-ux-report">Chrome UX Report</a> (CrUX), we combine every experience into three different buckets:</p>
    <ul>
      <li><strong>Small</strong> CLS: Experiences having CLS <em>under 5%</em>. That is, the page is mostly stable and does not shift very much at all. For perspective, the page in the video above has a CLS of 42.59%.</li>
      <li><strong>Large</strong> CLS: Experiences having CLS <em>100% or greater</em>. These may consist of many small individual shifts or a few large and noticeable shifts.</li>
      <li><strong>Medium</strong> CLS: Anything in between small and large.</li>
    </ul>
    <p>So what do we see when we look at CLS across the web?</p>
    <ol>
      <li><p>Nearly two out of every three sites (65.32%) have medium or large CLS for 50% or more of all user experiences.</p></li>
      <li><p>20.52% of sites have large CLS for at least half of all user experiences. That's about one of every five websites. Remember, the video&nbsp;in Figure 3 only has a CLS of 42.59%  these experiences are even worse than that!</p></li>
    </ol>
    <p>We suspect much of this may be caused by websites not providing an explicit width and height for resources like ads and images that load after text has been painted to the screen. Before browsers can display a resource on the screen, they need to know how much room the resource will take up. So unless an explicit size is provided via CSS or HTML attributes, browsers have no way to know how how large the resource actually is and display it with a width and height of 0px until loaded. When the resource loads and browsers finally know how big it is, it shifts the page's contents, creating an unstable layout.</p>
    <h3 id="mobile-web-permission-requests"><a href="#mobile-web-permission-requests" class="anchor-link">Permission requests</a></h3>
    <p>Over the last few years, the line between websites and "app store" apps has continued to blur. Even now, you have the ability to request access to a user's microphone, video camera, geolocation, ability to display notifications, and more.</p>
    <p>While this has opened up even more capabilities for developers, needlessly requesting these permissions may leave users feeling wary of your web page, and can build mistrust. This is why we recommend to always tie a permission request to a user gesture, like tapping a "Find theaters near me" button.</p>
    <p>Right now 1.52% of sites request permissions without a user interaction. Seeing such a low number is encouraging. However, it's important to note that we were only able to analyze home pages. So for example, sites requesting permissions only on their content pages (e.g., their blog posts) were not accounted for. See our <a href="#methodology">Methodology</a> page for more info.</p>
    <h2 id="mobile-web-textual-content"><a href="#mobile-web-textual-content" class="anchor-link">Textual content</a></h2>
    <p>The primary goal of a web page is to deliver content users want to engage with. This content might be a YouTube video or an assortment of images, but often times, it's simply the text on the page. It goes without saying that ensuring our textual content is legible to our visitors is extremely important. Because if visitors can't read it, there's nothing left to engage with, and they'll leave. There are two key things to check when ensuring your text is legible to readers: color contrast and font sizes.</p>
    <h3 id="mobile-web-color-contrast"><a href="#mobile-web-color-contrast" class="anchor-link">Color contrast</a></h3>
    <p>
      When designing our sites we tend to be in more optimal conditions, and have far better eyes than many of our visitors. Visitors may be colorblind and unable to distinguish between the text and background color. <a href="http://www.cvrl.org/people/stockman/pubs/1999%20Genetics%20chapter%20SSJN.pdf">1 in every 12 men and 1 in 200 women<span class="fn">http://www.cvrl.org/people/stockman/pubs/1999%20Genetics%20chapter%20SSJN.pdf</span></a> of European descent are colorblind. Or perhaps visitors are reading the page while the sun is creating glare on their screen, which may similarly impair legibility.
    </p>
    <p>
      To help us mitigate this problem, there are <a href="https://dequeuniversity.com/rules/axe/2.2/color-contrast">accessibility guidelines<span class="fn">https://dequeuniversity.com/rules/axe/2.2/color-contrast</span></a> we can follow when choosing our text and background colors. So how are we doing in meeting these baselines? Only 22.04% of sites give all their text sufficient color contrast. This value is actually a lower limit, as we could only analyze text with solid backgrounds. Image and gradient backgrounds were unable to be analyzed.
    </p>
    <figure id="mobile-web-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/mobile-web/example-of-good-and-bad-color-contrast-lookzook.svg">
        <img src="/static/images/2019/mobile-web/example-of-good-and-bad-color-contrast-lookzook.svg" alt="Figure 4. Example of what text with insufficient color contrast looks like. Courtesy of LookZook." aria-labelledby="mobile-web-fig4-caption" aria-describedby="mobile-web-fig4-description" width="568" height="300" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="mobile-web-fig4-description" class="visually-hidden">Four colored boxes of brown and gray shades with white text overlaid inside creating two columns, one where the background color is too lightly colored compared to the white text and one where the background color is recommended compared to the white text. The hex code of each color is displayed, white is <code>#FFFFFF</code>, the light shade of brown background is <code>#FCA469</code>, and the recommended shade of brown background is <code>#BD5B0E</code>. The grayscale equivalents are <code>#B8B8B8</code> and <code>#707070</code> respectively. Image courtesy of LookZook</div>
      <figcaption id="mobile-web-fig4-caption"><a href="#mobile-web-fig-4" class="anchor-link">Figure 4.</a> Example of what text with insufficient color contrast looks like. Courtesy of LookZook.</figcaption>
    </figure>
    <p>
      For colorblindness stats for other demographics, see <a href="https://web.archive.org/web/20180304115406/http://www.allpsych.uni-giessen.de/karl/colbook/sharpe.pdf">this paper<span class="fn">https://web.archive.org/web/20180304115406/http://www.allpsych.uni-giessen.de/karl/colbook/sharpe.pdf</span></a
      >.
    </p>
    <h3 id="mobile-web-font-size"><a href="#mobile-web-font-size" class="anchor-link">Font size</a></h3>
    <p>The second part of legibility is ensuring that text is large enough to read easily. This is important for all users, but especially so for older age demographics. Font sizes under 12px tend to be harder to read.</p>
    <p>Across the web we found 80.66% of web pages meet this baseline.</p>
    <h2 id="mobile-web-zooming-scaling-and-rotating-pages"><a href="#mobile-web-zooming-scaling-and-rotating-pages" class="anchor-link">Zooming, scaling, and rotating pages</a></h2>
    <h3 id="mobile-web-zooming-and-scaling"><a href="#mobile-web-zooming-and-scaling" class="anchor-link">Zooming and scaling</a></h3>
    <p>Designing your site to work perfectly across the tens of thousands of screen sizes and devices is incredibly difficult. Some users need larger font sizes to read, zoom in on your product images, or need a button to be larger because it's too small and slipped past your quality assurance team. Reasons like these are why device features like pinch-to-zoom and scaling are so important; they allow users to tweak our pages so their needs are met.</p>
    <p>There do exist very rare cases when disabling this is acceptable, like when the page in question is a web-based game using touch controls. If left enabled in this case, players' phones will zoom in and out every time the player taps twice on the game, resulting in an unusable experience.</p>
    <p>Because of this, developers are given the ability to disable this feature by setting one of the following two properties in the meta viewport tag:</p>
    <ol>
      <li>
        <p><code>user-scalable</code> set to <code>0</code> or <code>no</code></p>
      </li>
      <li>
        <p><code>maximum-scale</code> set to <code>1</code>, <code>1.0</code>, etc</p>
      </li>
    </ol>
    <figure id="mobile-web-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/mobile-web/fig5.png">
        <img src="/static/images/2019/mobile-web/fig5.png" alt="Figure 5. Percent of desktop and mobile websites that enable or disable zooming/scaling." aria-labelledby="mobile-web-fig5-caption" aria-describedby="mobile-web-fig5-description" width="600" height="370" data-width="600" data-height="370" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQcVHQTKIULwgs3f2Jy8IQiHwVAJjKoHrfcvwYX5UAlb4s3bsEA2owiku4c14YZiJeG8H8acgSUul2N/pubchart?oid=655301645&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="mobile-web-fig5-description" class="visually-hidden">Vertical grouped bar chart titled "Are zooming and scaling enabled?" measuring percentage data, ranging from 0 to 80 in increments of 20, vs. the device type, grouped into desktop and mobile. Desktop enabled: 75.46%; Desktop disabled 24.54%; Mobile enabled: 67.79%; Mobile disabled: 32.21%.</div>
      <figcaption id="mobile-web-fig5-caption"><a href="#mobile-web-fig-5" class="anchor-link">Figure 5.</a> Percent of desktop and mobile websites that enable or disable zooming/scaling.</figcaption>
    </figure>
    <p>
      However, developers have misused this so much that almost one out of every three sites (32.21%) disable this feature, and Apple (as of iOS 10) no longer allows web developers to disable zooming. Mobile Safari simply <a href="https://archive.org/details/ios-10-beta-release-notes">ignores the tag<span class="fn">https://archive.org/details/ios-10-beta-release-notes</span></a
      >. All sites, no matter what, can be zoomed and scaled on newer Apple devices, which account for over <a href="https://gs.statcounter.com/">11%<span class="fn">https://gs.statcounter.com/</span></a> of all web traffic worldwide!
    </p>
    <h3 id="mobile-web-rotating-pages"><a href="#mobile-web-rotating-pages" class="anchor-link">Rotating pages</a></h3>
    <p>Mobile devices allow users to rotate them so your website can be viewed in the format users prefer. Users do not always keep the same orientation throughout a session however. When filling out forms, users may rotate to landscape mode to use the larger keyboard. Or while browsing products, some may prefer the larger product images landscape mode gives them. Because of these types of use cases, it's very important not to rob the user of this built-in ability of mobile devices. And the good news is that we found virtually no sites that disable this. Only 87 total sites (or 0.0016%) disable this feature. This is fantastic.</p>
    <h2 id="mobile-web-buttons-and-links"><a href="#mobile-web-buttons-and-links" class="anchor-link">Buttons and links</a></h2>
    <h3 id="mobile-web-tap-targets"><a href="#mobile-web-tap-targets" class="anchor-link">Tap targets</a></h3>
    <p>We're used to having precise devices like mice while on desktop, but the story is quite different on mobile. On mobile we engage with sites through these large and imprecise tools we call fingers. Because of how imprecise they can be, we constantly "fat finger" links and buttons, tapping on things we never intended.</p>
    <p>
      Designing tap targets appropriately to mitigate this issue can be difficult because of how widely fingers vary in size. However, lots of research has now been done and there are safe <a href="https://developers.google.com/web/tools/lighthouse/audits/tap-targets">standards<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/tap-targets</span></a> for how large buttons should be and how far apart they need to be separated.
    </p>
    <figure id="mobile-web-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/mobile-web/example-of-easy-to-hit-tap-targets-lookzook.png">
        <img src="/static/images/2019/mobile-web/example-of-easy-to-hit-tap-targets-lookzook.png" alt="Figure 6. Standards for sizing and spacing tap targets. Image courtesy of LookZook" aria-labelledby="mobile-web-fig6-caption" aria-describedby="mobile-web-fig6-description" width="800" height="430" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="mobile-web-fig6-description" class="visually-hidden">A diagram displaying two examples of difficult to tap buttons. The first example shows two buttons with no spacing between them; An example below it shows the same buttons but with the recommended amount of spacing between them (8px or 1-2mm). The second example shows a button far too small to tap; An example below it shows the same button enlarged to the recommended size of 40-48px (around 8mm). Image courtesy of LookZook</div>
      <figcaption id="mobile-web-fig6-caption"><a href="#mobile-web-fig-6" class="anchor-link">Figure 6.</a> Standards for sizing and spacing tap targets. Image courtesy of LookZook</figcaption>
    </figure>
    <p>As of now, 34.43% of sites have sufficiently sized tap targets. So we have quite a ways to go until "fat fingering" is a thing of the past.</p>
    <h3 id="mobile-web-labeling-buttons"><a href="#mobile-web-labeling-buttons" class="anchor-link">Labeling buttons</a></h3>
    <p>Some designers love to use icons in place of text  they can make our sites look cleaner and more elegant. But while you and everyone on your team may know what these icons mean, many of your users will not. This is even the case with the infamous hamburger icon! If you don't believe us, do some user testing and see how often users get confused. You'll be astounded.</p>
    <p>This is why it's important to avoid any confusion and add supporting text and labels to your buttons. As of now, at least 28.59% of sites include a button with only a single icon with no supporting text.</p>
    <p class="note">Note: The reported number above is only a lower bound. During our analysis, we only included buttons using font icons with no supporting text. Many buttons now use SVGs instead of font-icons however, so in future runs we will be including them as well.</p>
    <h2 id="mobile-web-semantic-form-fields"><a href="#mobile-web-semantic-form-fields" class="anchor-link">Semantic form fields</a></h2>
    <p>From signing up for a new service, buying something online, or even to receive notifications of new posts from a blog, form fields are an essential part of the web and something we use daily. Unfortunately, these fields are infamous for how much of a pain they are to fill out on mobile. Thankfully, in recent years browsers have given developers new tools to help ease the pain of completing these fields we know all too well. So let's take a look at how much they've been getting used.</p>
    <h3 id="mobile-web-new-input-types"><a href="#mobile-web-new-input-types" class="anchor-link">New input types</a></h3>
    <p>In the past, <code>text</code> and <code>password</code> were some of the only input types available to developers as it met almost all of our needs on desktop. This is not the case for mobile devices. Mobile keyboards are incredibly small, and a simple task, like entering an email address, may require users to switch between multiple keyboards: the standard keyboard and the special character keyboard for the "@" symbol. Simply entering a phone number can be difficult using the default keyboard's tiny numbers.</p>
    <p>
      Many <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Form_%3Cinput%3E_types">new input types<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Form_%3Cinput%3E_types</span></a> have since been introduced, allowing developers to inform browsers what kind of data is expected, and enable browsers to provide customized keyboards specifically for these input types. For example, a type of <code>email</code> provides users with an alphanumeric keyboard including the "@" symbol, and a type of <code>tel</code> will display a numeric keypad.
    </p>
    <p>When analyzing sites containing an email input, 56.42% use <code>type="email"</code>. Similarly, for phone inputs, <code>type="tel"</code> is used 36.7% of the time. Other new input types have an even lower adoption rate.</p>
    <figure id="mobile-web-fig-7">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Type</th>
                <th>Frequency (pages)</th>
              </tr>
              <tr>
                <td>phone</td>
                <td class="numeric">1,917</td>
              </tr>
              <tr>
                <td>name</td>
                <td class="numeric">1,348</td>
              </tr>
              <tr>
                <td>textbox</td>
                <td class="numeric">833</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#mobile-web-fig-7" class="anchor-link">Figure 7.</a> Most commonly used invalid input types</figcaption>
    </figure>
    <p>Make sure to educate yourself and others on the large amount of input types available and double-check that you don't have any typos like the most common ones in Figure 7 above.</p>
    <h3 id="mobile-web-enabling-autocomplete-for-inputs"><a href="#mobile-web-enabling-autocomplete-for-inputs" class="anchor-link">Enabling autocomplete for inputs</a></h3>
    <p>
      The <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete"><code>autocomplete</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete</span></a> input attribute enables users to fill out form fields in a single click. Users fill out tons of forms, often with the exact same information each time. Realizing this, browsers have begun to securely store this information so it can be used on future pages. All developers need to do is use this <code>autocomplete</code> attribute to tell browsers what exact piece of information needs to be filled in, and the browser does the rest.
    </p>
    <figure id="mobile-web-fig-8">
      <div class="big-number">29.62%</div>
      <figcaption><a href="#mobile-web-fig-8" class="anchor-link">Figure 8.</a> Percent of pages that use <code>autocomplete</code>.</figcaption>
    </figure>
    <p>Currently, only 29.62% of pages with input fields utilize this feature.</p>
    <h3 id="mobile-web-pasting-into-password-fields"><a href="#mobile-web-pasting-into-password-fields" class="anchor-link">Pasting into password fields</a></h3>
    <p>Enabling users to copy and paste their passwords into your page is one way that allows them to use password managers. Password managers help users generate (and remember) strong passwords and fill them out automatically on web pages. Only 0.02% of web pages tested disable this functionality.</p>
    <p class="note">Note: While this is very encouraging, this may be an underestimation due to the requirement of our <a href="#methodology">Methodology</a> to only test home pages. Interior pages, like login pages, are not tested.</p>
    <h2 id="mobile-web-conclusion"><a href="#mobile-web-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>For over 13 years we've been treating the <em>mobile</em> web as an afterthought, like a mere exception to desktop. But it's time for this to change. The mobile web is now <em>the</em> web, and desktop is becoming the legacy one. There are now 4 billion active smartphones in the world, covering 70% of all potential users. What about desktops? They currently sit at 1.6 billion, and account for less and less of web usage every month.</p>
    <p>How well are we doing catering to mobile users? According to our research, even though 71% of sites make some kind of effort to adjust their site for mobile, they're falling well below the mark. Pages take forever to load and become unusable thanks to an abuse of JavaScript, text is often impossible to read, engaging with sites via clicking links or buttons is error-prone and infuriating, and tons of great technologies invented to mitigate these problems (Service Workers, autocomplete, zooming, new image formats, etc) are barely being used at all.</p>
    <p>The mobile web has now been around long enough for there to be an entire generation of kids where this is the only internet they've ever known. And what kind of experience are we giving them? We're essentially taking them back to the dial-up era. (Good thing I hear AOL still sells those CDs providing 1000 hours of free internet access!)</p>
    <figure id="mobile-web-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/mobile-web/america-online-1000-hours-free.jpg">
        <img alt="A 1000 hour free-trial CD for America Online" src="/static/images/2019/mobile-web/america-online-1000-hours-free.jpg" aria-labelledby="mobile-web-fig9-caption" aria-describedby="mobile-web-fig9-description" width="300" height="285" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="mobile-web-fig9-description" class="visually-hidden">A photograph of an AOL CD-ROM offering 1,000 hours free.</div>
      <figcaption id="mobile-web-fig9-caption">
        <a href="#mobile-web-fig-9" class="anchor-link">Figure 9.</a> 1000 hours of America Online for free, from <a href="https://archive.org/details/America_Online_1000_Hours_Free_for_45_Days_Version_7.0_Faster_Than_Ever_AM402R28">archive.org<span class="fn">https://archive.org/details/America_Online_1000_Hours_Free_for_45_Days_Version_7.0_Faster_Than_Ever_AM402R28</span></a
        >.
      </figcaption>
    </figure>
    <p class="note" data-markdown="1"></p>
    <p>Notes:</p>
    <ol>
      <li><p>We defined sites making a mobile effort as those who adjust their designs for smaller screens. Or rather, those which have at least one CSS breakpoint at 600px or less.</p></li>
      <li>
        <p>
          Potential users, or the total addressable market, are those who are 15+ years old: <a href="https://www.prb.org/international/geography/world">5.7 billion people<span class="fn">https://www.prb.org/international/geography/world</span></a
          >.
        </p>
      </li>
      <li>
        <p>
          <a href="https://www.merkleinc.com/thought-leadership/digital-marketing-report">Desktop search<span class="fn">https://www.merkleinc.com/thought-leadership/digital-marketing-report</span></a> and <a href="https://gs.statcounter.com/platform-market-share/desktop-mobile-tablet/worldwide/#monthly-201205-201909">web traffic share<span class="fn">https://gs.statcounter.com/platform-market-share/desktop-mobile-tablet/worldwide/#monthly-201205-201909</span></a> has been on the decline for years
        </p>
      </li>
      <li>
        <p>
          The total number of active smartphones was found by totaling the number of active Androids and iPhones (made public by Apple and Google), and a bit of math to account for Chinese internet-connected phones. <a href="https://www.ben-evans.com/benedictevans/2019/5/28/the-end-of-mobile">More info here<span class="fn">https://www.ben-evans.com/benedictevans/2019/5/28/the-end-of-mobile</span></a
          >.
        </p>
      </li>
      <li>
        <p>
          The 1.6 billion desktops is calculated by numbers made public by <a href="https://web.archive.org/web/20181030132235/https://news.microsoft.com/bythenumbers/en/windowsdevices">Microsoft<span class="fn">https://web.archive.org/web/20181030132235/https://news.microsoft.com/bythenumbers/en/windowsdevices</span></a> and <a href="https://web.archive.org/web/20190628161024/https://appleinsider.com/articles/18/10/30/apple-passes-100m-active-mac-milestone-thanks-to-high-numbers-of-new-users">Apple<span class="fn">https://web.archive.org/web/20190628161024/https://appleinsider.com/articles/18/10/30/apple-passes-100m-active-mac-milestone-thanks-to-high-numbers-of-new-users</span></a
          >. It does not include linux PC users.
        </p>
      </li>
    </ol>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"III","chapter_number":13,"title":"Ecommerce","description":"Ecommerce chapter of the 2019 Web Almanac covering ecommerce platforms, payloads, images, third-parties, performance, seo, and PWAs.","authors":["samdutton","alankent"],"reviewers":["voltek62"],"translators":null,"discuss":"1768","results":"https://docs.google.com/spreadsheets/d/1FUMHeOPYBgtVeMU5_pl2r33krZFzutt9vkOpphOSOss/","queries":"13_Ecommerce","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-06-30T00:00:00.000Z","chapter":"ecommerce"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="ecommerce-introduction"><a href="#ecommerce-introduction" class="anchor-link">Introduction</a></h2>
    <p>Nearly 10% of the home pages in this study were found to be on an ecommerce platform. An "ecommerce platform" is a set of software or services that enables you to create and operate an online store. There are several types of ecommerce platforms, for example:</p>
    <ul>
      <li>
        <strong>Paid-for services</strong> such as <a href="https://www.shopify.com/">Shopify<span class="fn">https://www.shopify.com/</span></a> that host your store and help you get started. They provide website hosting, site and page templates, product-data management, shopping carts and payments.
      </li>
      <li>
        <strong>Software platforms</strong> such as <a href="https://magento.com/products/magento-open-source">Magento Open Source<span class="fn">https://magento.com/products/magento-open-source</span></a> which you set up, host and manage yourself. These platforms can be powerful and flexible, but may be more complex to set up and run than services such as Shopify.
      </li>
      <li>
        <strong>Hosted platforms</strong> such as <a href="https://magento.com/products/magento-commerce">Magento Commerce<span class="fn">https://magento.com/products/magento-commerce</span></a> that offer the same features as their self-hosted counterparts, except that hosting is managed as a service by a third-party.
      </li>
    </ul>
    <figure id="ecommerce-fig-1">
      <div class="big-number">10%</div>
      <figcaption><a href="#ecommerce-fig-1" class="anchor-link">Figure 1.</a> Percent of pages on an ecommerce platform.</figcaption>
    </figure>
    <p>This analysis could only detect sites built on an ecommerce platform. This means that most large online stores and marketplacessuch as Amazon, JD, and eBayare not included here. Also note that the data here is for home pages only: not category, product or other pages. Learn more about our <a href="#methodology">methodology</a>.</p>
    <h2 id="ecommerce-platform-detection"><a href="#ecommerce-platform-detection" class="anchor-link">Platform detection</a></h2>
    <p>How do we check if a page is on an ecommerce platform?</p>
    <p>Detection is done through <a href="#methodology-wappalyzer">Wappalyzer</a>. Wappalyzer is a cross-platform utility that uncovers the technologies used on websites. It detects <a href="#cms">content management systems</a>, ecommerce platforms, web servers, <a href="#javascript">JavaScript</a> frameworks, <a href="#third-parties">analytics</a> tools, and many more.</p>
    <p>Page detection is not always reliable, and some sites explicitly block detection to protect against automated attacks. We might not be able to catch all websites that use a particular ecommerce platform, but we're confident that the ones we do detect are actually on that platform.</p>
    <figure id="ecommerce-fig-2">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">Mobile</th>
                <th scope="col">Desktop</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Ecommerce pages</td>
                <td class="numeric">500,595</td>
                <td class="numeric">424,441</td>
              </tr>
              <tr>
                <td>Total pages</td>
                <td class="numeric">5,297,442</td>
                <td class="numeric">4,371,973</td>
              </tr>
              <tr>
                <td>Adoption rate</td>
                <td class="numeric">9.45%</td>
                <td class="numeric">9.70%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#ecommerce-fig-2" class="anchor-link">Figure 2.</a> Percent of ecommerce platforms detected.</figcaption>
    </figure>
    <h2 id="ecommerce-ecommerce-platforms"><a href="#ecommerce-ecommerce-platforms" class="anchor-link">Ecommerce platforms</a></h2>
    <figure id="ecommerce-fig-3">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Platform</th>
                <th>Mobile</th>
                <th>Desktop</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>WooCommerce</td>
                <td class="numeric">3.98</td>
                <td class="numeric">3.90</td>
              </tr>
              <tr>
                <td>Shopify</td>
                <td class="numeric">1.59</td>
                <td class="numeric">1.72</td>
              </tr>
              <tr>
                <td>Magento</td>
                <td class="numeric">1.10</td>
                <td class="numeric">1.24</td>
              </tr>
              <tr>
                <td>PrestaShop</td>
                <td class="numeric">0.91</td>
                <td class="numeric">0.87</td>
              </tr>
              <tr>
                <td>Bigcommerce</td>
                <td class="numeric">0.19</td>
                <td class="numeric">0.22</td>
              </tr>
              <tr>
                <td>Shopware</td>
                <td class="numeric">0.12</td>
                <td class="numeric">0.11</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#ecommerce-fig-3" class="anchor-link">Figure 3.</a> Adoption of the top six ecommerce platforms.</figcaption>
    </figure>
    <p>Out of the 116 ecommerce platforms that were detected, only six are found on more than 0.1% of desktop or mobile websites. Note that these results do not show variation by country, by size of site, or other similar metrics.</p>
    <p>Figure 3 above shows that WooCommerce has the largest adoption at around 4% of desktop and mobile websites. Shopify is second with about 1.6% adoption. Magento, PrestaShop, Bigcommerce, and Shopware follow with smaller and smaller adoption, approaching 0.1%.</p>
    <h3 id="ecommerce-long-tail"><a href="#ecommerce-long-tail" class="anchor-link">Long tail</a></h3>
    <figure id="ecommerce-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig4.png">
        <img src="/static/images/2019/ecommerce/fig4.png" alt="Figure 4. Adoption of top ecommerce platforms." aria-labelledby="ecommerce-fig4-caption" aria-describedby="ecommerce-fig4-description" width="600" height="414" data-width="600" data-height="414" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=1565776696&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="ecommerce-fig4-description" class="visually-hidden">Bar chart of the adoption of top 20 ecommerce platforms. Refer to Figure 3 above for a data table of adoption of the top six platforms.</div>
      <figcaption id="ecommerce-fig4-caption"><a href="#ecommerce-fig-4" class="anchor-link">Figure 4.</a> Adoption of top ecommerce platforms.</figcaption>
    </figure>
    <p>There are 110 ecommerce platforms that each have fewer than 0.1% of desktop or mobile websites. Around 60 of these have fewer than 0.01% of mobile or desktop websites.</p>
    <figure id="ecommerce-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig5.png">
        <img src="/static/images/2019/ecommerce/fig5.png" alt="Figure 5. Combined adoption of the top six ecommerce platforms versus the other 110 platforms." aria-labelledby="ecommerce-fig5-caption" aria-describedby="ecommerce-fig5-description" width="600" height="361" data-width="600" data-height="361" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=2093212206&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="ecommerce-fig5-description" class="visually-hidden">The top six ecommerce platforms make up 8% of all websites. The rest of the 110 platforms only make up 1.5% of websites. The results for desktop and mobile are similar.</div>
      <figcaption id="ecommerce-fig5-caption"><a href="#ecommerce-fig-5" class="anchor-link">Figure 5.</a> Combined adoption of the top six ecommerce platforms versus the other 110 platforms.</figcaption>
    </figure>
    <p>7.87% of all requests on mobile and 8.06% on desktop are for home pages on one of the top six ecommerce platforms. A further 1.52% of requests on mobile and 1.59% on desktop are for home pages on the 110 other ecommerce platforms.</p>
    <h2 id="ecommerce-ecommerce-all-platforms"><a href="#ecommerce-ecommerce-all-platforms" class="anchor-link">Ecommerce (all platforms)</a></h2>
    <p>In total, 9.7% of desktop pages and 9.5% of mobile pages used an ecommerce platform.</p>
    <figure id="ecommerce-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig6.png">
        <img src="/static/images/2019/ecommerce/fig6.png" alt="Figure 6. Percent of pages using any ecommerce platform." aria-labelledby="ecommerce-fig6-caption" aria-describedby="ecommerce-fig6-description" width="600" height="363" data-width="600" data-height="363" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=1360307171&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="ecommerce-fig6-description" class="visually-hidden">9.7% of desktop pages use an ecommerce platform and 9.5% of mobile pages use an ecommerce platform.</div>
      <figcaption id="ecommerce-fig6-caption"><a href="#ecommerce-fig-6" class="anchor-link">Figure 6.</a> Percent of pages using any ecommerce platform.</figcaption>
    </figure>
    <p>Although the desktop proportion of websites was slightly higher overall, some popular platforms (including WooCommerce, PrestaShop and Shopware) actually have more mobile than desktop websites.</p>
    <h2 id="ecommerce-page-weight-and-requests"><a href="#ecommerce-page-weight-and-requests" class="anchor-link">Page weight and requests</a></h2>
    <p>The <a href="#page-weight">page weight</a> of an ecommerce platform includes all HTML, CSS, JavaScript, JSON, XML, images, audio, and video.</p>
    <figure id="ecommerce-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig7.png">
        <img src="/static/images/2019/ecommerce/fig7.png" alt="Figure 7. Distribution of ecommerce page weight." aria-labelledby="ecommerce-fig7-caption" aria-describedby="ecommerce-fig7-description" width="600" height="363" data-width="600" data-height="363" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=448248428&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="ecommerce-fig7-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of ecommerce page weight. The median desktop ecommerce page loads 2.7 MB. The 10th percentile is 1.0 MB, 25th 1.6 MB, 75th 4.5 MB, and 90th 7.6 MB. Desktop websites are slightly higher than mobile by tenths of a megabyte.</div>
      <figcaption id="ecommerce-fig7-caption"><a href="#ecommerce-fig-7" class="anchor-link">Figure 7.</a> Distribution of ecommerce page weight.</figcaption>
    </figure>
    <figure id="ecommerce-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig8.png">
        <img src="/static/images/2019/ecommerce/fig8.png" alt="Figure 8. Distribution of requests per ecommerce page." aria-labelledby="ecommerce-fig8-caption" aria-describedby="ecommerce-fig8-description" width="600" height="363" data-width="600" data-height="363" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=1968521689&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="ecommerce-fig8-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of requests per ecommerce page. The median desktop ecommerce page makes 108 requests. The 10th percentile is 53 requests, 25th 76, 75th 153, and 90th 210. Desktop websites are slightly higher than mobile by about 10 requests.</div>
      <figcaption id="ecommerce-fig8-caption"><a href="#ecommerce-fig-8" class="anchor-link">Figure 8.</a> Distribution of requests per ecommerce page.</figcaption>
    </figure>
    <p>
      The median desktop ecommerce platform page loads 108 requests and 2.7 MB. The median weight for <em>all</em> desktop pages is 74 requests and <a href="#page-weight-page-weight">1.9 MB</a>. In other words, ecommerce pages make nearly 50% more requests than other web pages, with payloads around 35% larger. By comparison, the <a href="https://amazon.com">amazon.com<span class="fn">https://amazon.com</span></a> home page makes around 300 requests on first load, for a page weight of around 5 MB, and <a href="https://ebay.com">ebay.com<span class="fn">https://ebay.com</span></a> makes around 150 requests for a page weight of approximately 3 MB. The page weight and number of requests for home pages on ecommerce platforms is slightly smaller on mobile at every percentile, but around 10% of all ecommerce home pages load more than 7 MB and make over 200 requests.
    </p>
    <p>This data accounts for home page payload and requests without scrolling. Clearly there are a significant proportion of sites that appear to be retrieving more files (the median is over 100), with a larger total payload, than should be necessary for first load. See also: <a href="#ecommerce-third-party-requests-and-bytes">Third-party requests and bytes</a> below.</p>
    <p>We need to do further research to better understand why so many home pages on ecommerce platforms make so many requests and have such large payloads. The authors regularly see home pages on ecommerce platforms that make hundreds of requests on first load, with multi-megabyte payloads. If the number of requests and payload are a problem for performance, then how can they be reduced?</p>
    <h2 id="ecommerce-requests-and-payload-by-type"><a href="#ecommerce-requests-and-payload-by-type" class="anchor-link">Requests and payload by type</a></h2>
    <p>The charts below are for desktop requests:</p>
    <figure id="ecommerce-fig-9">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Type</th>
                <th>10</th>
                <th>25</th>
                <th>50</th>
                <th>75</th>
                <th>90</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>image</td>
                <td class="numeric">353</td>
                <td class="numeric">728</td>
                <td class="numeric">1,514</td>
                <td class="numeric">3,104</td>
                <td class="numeric">6,010</td>
              </tr>
              <tr>
                <td>video</td>
                <td class="numeric">156</td>
                <td class="numeric">453</td>
                <td class="numeric">1,325</td>
                <td class="numeric">2,935</td>
                <td class="numeric">5,965</td>
              </tr>
              <tr>
                <td>script</td>
                <td class="numeric">199</td>
                <td class="numeric">330</td>
                <td class="numeric">572</td>
                <td class="numeric">915</td>
                <td class="numeric">1,331</td>
              </tr>
              <tr>
                <td>font</td>
                <td class="numeric">47</td>
                <td class="numeric">85</td>
                <td class="numeric">144</td>
                <td class="numeric">226</td>
                <td class="numeric">339</td>
              </tr>
              <tr>
                <td>css</td>
                <td class="numeric">36</td>
                <td class="numeric">59</td>
                <td class="numeric">102</td>
                <td class="numeric">180</td>
                <td class="numeric">306</td>
              </tr>
              <tr>
                <td>html</td>
                <td class="numeric">12</td>
                <td class="numeric">20</td>
                <td class="numeric">36</td>
                <td class="numeric">66</td>
                <td class="numeric">119</td>
              </tr>
              <tr>
                <td>audio</td>
                <td class="numeric">7</td>
                <td class="numeric">7</td>
                <td class="numeric">11</td>
                <td class="numeric">17</td>
                <td class="numeric">140</td>
              </tr>
              <tr>
                <td>xml</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">1</td>
                <td class="numeric">3</td>
              </tr>
              <tr>
                <td>other</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">3</td>
              </tr>
              <tr>
                <td>text</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#ecommerce-fig-9" class="anchor-link">Figure 9.</a> Percentiles of the distribution of page weight (in KB) by resource type.</figcaption>
    </figure>
    <figure id="ecommerce-fig-10">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Type</th>
                <th>10</th>
                <th>25</th>
                <th>50</th>
                <th>75</th>
                <th>90</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>image</td>
                <td class="numeric">16</td>
                <td class="numeric">25</td>
                <td class="numeric">39</td>
                <td class="numeric">62</td>
                <td class="numeric">97</td>
              </tr>
              <tr>
                <td>script</td>
                <td class="numeric">11</td>
                <td class="numeric">21</td>
                <td class="numeric">35</td>
                <td class="numeric">53</td>
                <td class="numeric">75</td>
              </tr>
              <tr>
                <td>css</td>
                <td class="numeric">3</td>
                <td class="numeric">6</td>
                <td class="numeric">11</td>
                <td class="numeric">22</td>
                <td class="numeric">32</td>
              </tr>
              <tr>
                <td>font</td>
                <td class="numeric">2</td>
                <td class="numeric">3</td>
                <td class="numeric">5</td>
                <td class="numeric">8</td>
                <td class="numeric">11</td>
              </tr>
              <tr>
                <td>html</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">4</td>
                <td class="numeric">7</td>
                <td class="numeric">12</td>
              </tr>
              <tr>
                <td>video</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">5</td>
                <td class="numeric">9</td>
              </tr>
              <tr>
                <td>other</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">4</td>
                <td class="numeric">9</td>
              </tr>
              <tr>
                <td>text</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">3</td>
              </tr>
              <tr>
                <td>xml</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
              </tr>
              <tr>
                <td>audio</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">3</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#ecommerce-fig-10" class="anchor-link">Figure 10.</a> Percentiles of the distribution of requests per page by resource type.</figcaption>
    </figure>
    <p>Images constitute the largest number of requests and the highest proportion of bytes for ecommerce pages. The median desktop ecommerce page includes 39 images weighing 1,514 KB (1.5 MB).</p>
    <p>The number of <a href="#javascript">JavaScript</a> requests indicates that better bundling (and/or <a href="#http2">HTTP/2</a> multiplexing) could improve performance. JavaScript files are not significantly large in terms of total bytes, but many separate requests are made. According to the <a href="#http2-adoption-of-http2">HTTP/2</a> chapter, more than 40% of requests are not via HTTP/2. Similarly, CSS files have the third highest number of requests but are generally small. Merging CSS files (and/or HTTP/2) could improve performance of such sites. In the authors' experience, many ecommerce pages have a high proportion of unused CSS and JavaScript. <a href="#media">Videos</a> may require a small number of requests, but (not surprisingly) consume a high proportion of the page weight, particularly on sites with heavy payloads.</p>
    <h2 id="ecommerce-html-payload-size"><a href="#ecommerce-html-payload-size" class="anchor-link">HTML payload size</a></h2>
    <figure id="ecommerce-fig-11">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig11.png">
        <img src="/static/images/2019/ecommerce/fig11.png" alt="Figure 11. Distribution of HTML bytes (in KB) per ecommerce page." aria-labelledby="ecommerce-fig11-caption" aria-describedby="ecommerce-fig11-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=908924961&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig11-description" data-show-text="{{ show_description(11) }}" data-hide-text="{{ hide_description(11) }}">{{ show_description(11) }}</button>
      <div id="ecommerce-fig11-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of HTML bytes per ecommerce page. The median desktop ecommerce page has 36 KB of HTML. The 10th percentile is 12 KB, 25th 20, 75th 66, and 90th 118. Desktop websites have slightly more HTML bytes than mobile by 1 or 2 KB.</div>
      <figcaption id="ecommerce-fig11-caption"><a href="#ecommerce-fig-11" class="anchor-link">Figure 11.</a> Distribution of HTML bytes (in KB) per ecommerce page.</figcaption>
    </figure>
    <p>Note that HTML payloads may include other code such as inline JSON, JavaScript, or CSS directly in the markup itself, rather than referenced as external links. The median HTML payload size for ecommerce pages is 34&nbsp;KB on mobile and 36 KB on desktop. However, 10% of ecommerce pages have an HTML payload of more than 115&nbsp;KB.</p>
    <p>Mobile HTML payload sizes are not very different from desktop. In other words, it appears that sites are not delivering significantly different HTML files for different devices or viewport sizes. On many ecommerce sites, home page HTML payloads are large. We don't know whether this is because of bloated HTML, or from other code (such as JSON) within HTML files.</p>
    <h2 id="ecommerce-image-stats"><a href="#ecommerce-image-stats" class="anchor-link">Image stats</a></h2>
    <figure id="ecommerce-fig-12">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig12.png">
        <img src="/static/images/2019/ecommerce/fig12.png" alt="Figure 12. Distribution of image bytes (in KB) per ecommerce page." aria-labelledby="ecommerce-fig12-caption" aria-describedby="ecommerce-fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=323146848&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="ecommerce-fig12-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of image bytes per ecommerce page. The median mobile ecommerce page has 1,517 KB of images. The 10th percentile is 318 KB, 25th 703, 75th 3,132, and 90th 5,881. Desktop and mobile websites have similar distributions.</div>
      <figcaption id="ecommerce-fig12-caption"><a href="#ecommerce-fig-12" class="anchor-link">Figure 12.</a> Distribution of image bytes (in KB) per ecommerce page.</figcaption>
    </figure>
    <figure id="ecommerce-fig-13">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig13.png">
        <img src="/static/images/2019/ecommerce/fig13.png" alt="Figure 13. Distribution of image requests per ecommerce page." aria-labelledby="ecommerce-fig13-caption" aria-describedby="ecommerce-fig13-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=1483037371&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
      <div id="ecommerce-fig13-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of image requests per ecommerce page. The median desktop ecommerce page makes 40 image requests. The 10th percentile is 16 requests, 25th 25, 75th 62, and 90th 97. The desktop distribution is slightly higher than mobile by 2-10 requests at each percentile.</div>
      <figcaption id="ecommerce-fig13-caption"><a href="#ecommerce-fig-13" class="anchor-link">Figure 13.</a> Distribution of image requests per ecommerce page.</figcaption>
    </figure>
    <p class="note">Note that because our data collection <a href="#methodology">methodology</a> does not simulate user interactions on pages like clicking or scrolling, images that are lazy loaded would not be represented in these results.</p>
    <p>Figures 12 and 13 above show that the median ecommerce page has 37 images and an image payload of 1,517 KB on mobile, 40 images and 1,524 KB on desktop. 10% of home pages have 90 or more images and an image payload of nearly 6&nbsp;MB!</p>
    <figure id="ecommerce-fig-14">
      <div class="big-number">1,517 KB</div>
      <figcaption><a href="#ecommerce-fig-14" class="anchor-link">Figure 14.</a> The median number of image bytes per mobile ecommerce page.</figcaption>
    </figure>
    <p>
      A significant proportion of ecommerce pages have sizable image payloads and make a large number of image requests on first load. See HTTP Archive's <a href="https://httparchive.org/reports/state-of-images">State of Images<span class="fn">https://httparchive.org/reports/state-of-images</span></a> report and the <a href="#media">media</a> and <a href="#page-weight">page weight</a> chapters for more context.
    </p>
    <p>Website owners want their sites to look good on modern devices. As a result, many sites deliver the same high resolution product images to every user <em>without regard for screen resolution or size</em>. Developers may not be aware of (or not want to use) responsive techniques that enable efficient delivery of the best possible image to different users. It's worth remembering that high-resolution images may not necessarily increase conversion rates. Conversely, overuse of heavy images is likely to impact page speed and can&nbsp;thereby <em>reduce</em> conversion rates. In the authors' experience from site reviews and events, some developers and other stakeholders have SEO or other concerns about using lazy loading for images.</p>
    <p>We need to do more analysis to better understand why some sites are not using responsive image techniques or lazy loading. We also need to provide guidance that helps ecommerce platforms to reliably deliver beautiful images to those with high end devices and good connectivity, while simultaneously providing a best-possible experience to lower-end devices and those with poor connectivity.</p>
    <h2 id="ecommerce-popular-image-formats"><a href="#ecommerce-popular-image-formats" class="anchor-link">Popular image formats</a></h2>
    <figure id="ecommerce-fig-15">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig15.png">
        <img src="/static/images/2019/ecommerce/fig15.png" alt="Figure 15. Popular image formats." aria-labelledby="ecommerce-fig15-caption" aria-describedby="ecommerce-fig15-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=2108999644&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig15-description" data-show-text="{{ show_description(15) }}" data-hide-text="{{ hide_description(15) }}">{{ show_description(15) }}</button>
      <div id="ecommerce-fig15-description" class="visually-hidden">Bar chart showing the popularity of various image formats. JPEG is the most popular format at 54% of images on desktop ecommerce pages. Next are PNG at 27%, GIF at 14%, SVG at 2%, and WebP and ICO at 1% each.</div>
      <figcaption id="ecommerce-fig15-caption"><a href="#ecommerce-fig-15" class="anchor-link">Figure 15.</a> Popular image formats.</figcaption>
    </figure>
    <p class="note">
      Note that some image services or CDNs will automatically deliver WebP (rather than JPEG or PNG) to platforms that support WebP, even for a URL with a `.jpg` or `.png` suffix. For example, <a href="https://res.cloudinary.com/webdotdev/f_auto/w_500/IMG_20190113_113201.jpg">IMG_20190113_113201.jpg<span class="fn">https://res.cloudinary.com/webdotdev/f_auto/w_500/IMG_20190113_113201.jpg</span></a> returns a WebP image in Chrome. However, the way HTTP Archive <a href="https://github.com/HTTPArchive/legacy.httparchive.org/blob/31a25b9064a365d746d4811a1d6dda516c0e4985/bulktest/batch_lib.inc#L994">detects image formats<span class="fn">https://github.com/HTTPArchive/legacy.httparchive.org/blob/31a25b9064a365d746d4811a1d6dda516c0e4985/bulktest/batch_lib.inc#L994</span></a> is to check for keywords in the MIME type first, then fall back to the file extension. This means that the format for images with URLs such as the above will be given as WebP, since WebP is supported by HTTP Archive as a user agent.
    </p>
    <h3 id="ecommerce-png"><a href="#ecommerce-png" class="anchor-link">PNG</a></h3>
    <p>One in four images on ecommerce pages are PNG. The high number of PNG requests from pages on ecommerce platforms is probably for product images. Many commerce sites use PNG with photographic images to enable transparency.</p>
    <p>
      Using WebP with a PNG fallback can be a far more efficient alternative, either via a <a href="http://simpl.info/picturetype">picture element<span class="fn">http://simpl.info/picturetype</span></a> or by using user agent capability detection via an image service such as <a href="https://res.cloudinary.com/webdotdev/f_auto/w_500/IMG_20190113_113201.jpg">Cloudinary<span class="fn">https://res.cloudinary.com/webdotdev/f_auto/w_500/IMG_20190113_113201.jpg</span></a
      >.
    </p>
    <h3 id="ecommerce-webp"><a href="#ecommerce-webp" class="anchor-link">WebP</a></h3>
    <p>
      Only 1% of images on ecommerce platforms are WebP, which tallies with the authors' experience of site reviews and partner work. WebP is <a href="https://caniuse.com/#feat=webp">supported by all modern browsers other than Safari<span class="fn">https://caniuse.com/#feat=webp</span></a> and has good fallback mechanisms available. WebP supports transparency and is a far more efficient format than PNG for photographic images (see PNG section above).
    </p>
    <p>
      We as a web community can provide better guidance/advocacy for enabling transparency using WebP with a PNG fallback and/or using WebP/JPEG with a solid color background. WebP appears to be rarely used on ecommerce platforms, despite the availability of <a href="https://web.dev/serve-images-webp">guides<span class="fn">https://web.dev/serve-images-webp</span></a> and tools (e.g. <a href="https://squoosh.app/">Squoosh<span class="fn">https://squoosh.app/</span></a> and <a href="https://developers.google.com/speed/webp/docs/cwebp">cwebp<span class="fn">https://developers.google.com/speed/webp/docs/cwebp</span></a
      >). We need to do further research into why there hasn't been more take-up of WebP, which is now <a href="https://blog.chromium.org/2010/09/webp-new-image-format-for-web.html">nearly 10 years old<span class="fn">https://blog.chromium.org/2010/09/webp-new-image-format-for-web.html</span></a
      >.
    </p>
    <h2 id="ecommerce-image-dimensions"><a href="#ecommerce-image-dimensions" class="anchor-link">Image dimensions</a></h2>
    <figure id="ecommerce-fig-16">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="colgroup" colspan="2">Mobile</th>
                <th scope="colgroup" colspan="2">Desktop</th>
              </tr>
              <tr>
                <th scope="col">Percentile</th>
                <th scope="col">Width (px)</th>
                <th scope="col">Height (px)</th>
                <th scope="col">Width (px)</th>
                <th scope="col">Height (px)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>10</td>
                <td class="numeric">16</td>
                <td class="numeric">16</td>
                <td class="numeric">16</td>
                <td class="numeric">16</td>
              </tr>
              <tr>
                <td>25</td>
                <td class="numeric">100</td>
                <td class="numeric">64</td>
                <td class="numeric">100</td>
                <td class="numeric">60</td>
              </tr>
              <tr>
                <td>50</td>
                <td class="numeric">247</td>
                <td class="numeric">196</td>
                <td class="numeric">240</td>
                <td class="numeric">192</td>
              </tr>
              <tr>
                <td>75</td>
                <td class="numeric">364</td>
                <td class="numeric">320</td>
                <td class="numeric">400</td>
                <td class="numeric">331</td>
              </tr>
              <tr>
                <td>90</td>
                <td class="numeric">693</td>
                <td class="numeric">512</td>
                <td class="numeric">800</td>
                <td class="numeric">546</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#ecommerce-fig-16" class="anchor-link">Figure 16.</a> Distribution of intrinsic image dimensions (in pixels) per ecommerce page.</figcaption>
    </figure>
    <p>The median ('mid-range') dimensions for images requested by ecommerce pages is 247x196 px on mobile and 240x192 px on desktop. 10% of images requested by ecommerce pages are at least 693x512 px on mobile and 800x546 px on desktop. Note that these dimensions are the intrinsic sizes of images, not their display size.</p>
    <p>Given that image dimensions at each percentile up to the median are similar on mobile and desktop, or even slightly <em>larger</em> on mobile in some cases, it would seem that many sites are not delivering different image dimensions for different viewports, or in other words, not using responsive image techniques. The delivery of <em>larger</em> images to mobile in some cases may (or may not!) be explained by sites using device or screen detection.</p>
    <p>We need to do more research into why many sites are (apparently) not delivering different image sizes to different viewports.</p>
    <h2 id="ecommerce-third-party-requests-and-bytes"><a href="#ecommerce-third-party-requests-and-bytes" class="anchor-link">Third-party requests and bytes</a></h2>
    <p>
      Many websitesespecially online storesload a significant amount of code and content from third-parties: for analytics, A/B testing, customer behavior tracking, advertising, and social media support. Third-party content can have a <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/loading-third-party-javascript">significant impact on performance<span class="fn">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/loading-third-party-javascript</span></a
      >. <a href="https://twitter.com/patrickhulce">Patrick Hulce<span class="fn">https://twitter.com/patrickhulce</span></a
      >'s <a href="https://github.com/patrickhulce/third-party-web">third-party-web tool<span class="fn">https://github.com/patrickhulce/third-party-web</span></a> is used to determine third-party requests for this report, and this is discussed more in the <a href="#third-parties">Third Parties</a> chapter.
    </p>
    <figure id="ecommerce-fig-17">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig17.png">
        <img src="/static/images/2019/ecommerce/fig17.png" alt="Figure 17. Distribution of third-party requests per ecommerce page." aria-labelledby="ecommerce-fig17-caption" aria-describedby="ecommerce-fig17-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=865791628&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig17-description" data-show-text="{{ show_description(17) }}" data-hide-text="{{ hide_description(17) }}">{{ show_description(17) }}</button>
      <div id="ecommerce-fig17-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of third-party requests per ecommerce page. The median number of third-party requests on desktop is 19. The 10, 25, 75, and 90th percentiles are: 4, 9, 34, and 54. The desktop distribution is higher at each percentile than mobile by only 1-2 requests.</div>
      <figcaption id="ecommerce-fig17-caption"><a href="#ecommerce-fig-17" class="anchor-link">Figure 17.</a> Distribution of third-party requests per ecommerce page.</figcaption>
    </figure>
    <figure id="ecommerce-fig-18">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig18.png">
        <img src="/static/images/2019/ecommerce/fig18.png" alt="Figure 18. Distribution of third-party bytes per ecommerce page." aria-labelledby="ecommerce-fig18-caption" aria-describedby="ecommerce-fig18-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=164264869&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig18-description" data-show-text="{{ show_description(18) }}" data-hide-text="{{ hide_description(18) }}">{{ show_description(18) }}</button>
      <div id="ecommerce-fig18-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of third-party bytes per ecommerce page. The median number of third-party bytes on desktop is 320 KB. The 10, 25, 75, and 90th percentiles are: 42, 129, 651, and 1,071. The desktop distribution is higher at each percentile than mobile by 10-30 KB.</div>
      <figcaption id="ecommerce-fig18-caption"><a href="#ecommerce-fig-18" class="anchor-link">Figure 18.</a> Distribution of third-party bytes per ecommerce page.</figcaption>
    </figure>
    <p>The median ('mid-range') home page on an ecommerce platform makes 17 requests for third-party content on mobile and 19 on desktop. 10% of all home pages on ecommerce platforms make over 50 requests for third-party content, with a total payload of over 1 MB.</p>
    <p>
      <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/loading-third-party-javascript/">Other studies<span class="fn">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/loading-third-party-javascript/</span></a> have indicated that third-party content can be a major performance bottleneck. This study shows that 17 or more requests (50 or more for the top 10%) is the norm for ecommerce pages.
    </p>
    <h2 id="ecommerce-third-party-requests-and-payload-per-platform"><a href="#ecommerce-third-party-requests-and-payload-per-platform" class="anchor-link">Third-party requests and payload per platform</a></h2>
    <p>Note the charts and tables below show data for mobile only.</p>
    <figure id="ecommerce-fig-19">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig19.png">
        <img src="/static/images/2019/ecommerce/fig19.png" alt="Figure 19. Distribution of third-party requests per mobile page for each ecommerce platform." aria-labelledby="ecommerce-fig19-caption" aria-describedby="ecommerce-fig19-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=1242665725&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig19-description" data-show-text="{{ show_description(19) }}" data-hide-text="{{ hide_description(19) }}">{{ show_description(19) }}</button>
      <div id="ecommerce-fig19-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of third-party requests per ecommerce page for each platform. Shopify and Bigcommerce load the most third-party requests across the distributions by about 40 requests at the median.</div>
      <figcaption id="ecommerce-fig19-caption"><a href="#ecommerce-fig-19" class="anchor-link">Figure 19.</a> Distribution of third-party requests per mobile page for each ecommerce platform.</figcaption>
    </figure>
    <figure id="ecommerce-fig-20">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig20.png">
        <img src="/static/images/2019/ecommerce/fig20.png" alt="Figure 20. Distribution of third-party bytes (KB) per mobile page for each ecommerce platform." aria-labelledby="ecommerce-fig20-caption" aria-describedby="ecommerce-fig20-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=1017068803&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig20-description" data-show-text="{{ show_description(20) }}" data-hide-text="{{ hide_description(20) }}">{{ show_description(20) }}</button>
      <div id="ecommerce-fig20-description" class="visually-hidden">Distribution of the 10, 25, 50, 75, and 90th percentiles of third-party bytes (KB) per ecommerce page for each platform. Shopify and Bigcommerce load the most third-party bytes across the distributions by more than 1,000 KB at the median.</div>
      <figcaption id="ecommerce-fig20-caption"><a href="#ecommerce-fig-20" class="anchor-link">Figure 20.</a> Distribution of third-party bytes (KB) per mobile page for each ecommerce platform.</figcaption>
    </figure>
    <p>Platforms such as Shopify may extend their services using client-side JavaScript, whereas other platforms such as Magento use more server side extensions. This difference in architecture affects the figures seen here.</p>
    <p>Clearly, pages on some ecommerce platforms make more requests for third-party content and incur a larger payload of third-party content. Further analysis could be done on <em>why</em> pages from some platforms make more requests and have larger third-party payloads than others.</p>
    <h2 id="ecommerce-first-contentful-paint-fcp"><a href="#ecommerce-first-contentful-paint-fcp" class="anchor-link">First Contentful Paint (FCP)</a></h2>
    <figure id="ecommerce-fig-21">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig21.png">
        <img src="/static/images/2019/ecommerce/fig21.png" alt="Figure 21. Average distribution of FCP experiences per ecommerce platform." aria-labelledby="ecommerce-fig21-caption" aria-describedby="ecommerce-fig21-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=1341906463&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig21-description" data-show-text="{{ show_description(21) }}" data-hide-text="{{ hide_description(21) }}">{{ show_description(21) }}</button>
      <div id="ecommerce-fig21-description" class="visually-hidden">Bar chart of the average distribution of FCP experiences for the top six ecommerce platforms. WooCommerce has the highest density of slow FCP experiences at 43%. Shopify has the highest density of fast FCP experiences at 47%.</div>
      <figcaption id="ecommerce-fig21-caption"><a href="#ecommerce-fig-21" class="anchor-link">Figure 21.</a> Average distribution of FCP experiences per ecommerce platform.</figcaption>
    </figure>
    <p><a href="#performance-first-contentful-paint">First Contentful Paint</a> measures the time it takes from navigation until content such as text or an image is first displayed. In this context, <strong>fast</strong> means FCP in under one second, <strong>slow</strong> means FCP in 3 seconds or more, and <strong>moderate</strong> is everything in between. Note that third-party content and code may have a significant impact on FCP.</p>
    <p>All top-six ecommerce platforms have worse FCP on mobile than desktop: less fast and more slow. Note that FCP is affected by device capability (processing power, memory, etc.) as well as connectivity.</p>
    <p>We need to establish why FCP is worse on mobile than desktop. What are the causes: connectivity and/or device capability, or something else?</p>
    <h2 id="ecommerce-progressive-web-app-pwa-scores"><a href="#ecommerce-progressive-web-app-pwa-scores" class="anchor-link">Progressive Web App (PWA) scores</a></h2>
    <p>See also the <a href="#pwa">PWA chapter</a> for more information on this topic beyond just ecommerce sites.</p>
    <figure id="ecommerce-fig-22">
      <a href="https://almanac.httparchive.org/static/images/2019/ecommerce/fig22.png">
        <img src="/static/images/2019/ecommerce/fig22.png" alt="Figure 22. Distribution of Lighthouse PWA category scores for mobile ecommerce pages." aria-labelledby="ecommerce-fig22-caption" aria-describedby="ecommerce-fig22-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vROHKGuMutXmxtzEoBSJNVn7DOzlfpizJh7mOkopFK8OVl_hCUHDOmKgYOojrpVsGnGWaletE7Uc5oX/pubchart?oid=1148584930&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig22-description" data-show-text="{{ show_description(22) }}" data-hide-text="{{ hide_description(22) }}">{{ show_description(22) }}</button>
      <div id="ecommerce-fig22-description" class="visually-hidden">Distribution of Lighthouse's PWA category scores for ecommerce pages. On a scale of 0 (failing) to 1 (perfect), 40% of pages get a score of 0.33. 1% of pages get a score above 0.6.</div>
      <figcaption id="ecommerce-fig22-caption"><a href="#ecommerce-fig-22" class="anchor-link">Figure 22.</a> Distribution of Lighthouse PWA category scores for mobile ecommerce pages.</figcaption>
    </figure>
    <p>
      More than 60% of home pages on ecommerce platforms get a <a href="https://developers.google.com/web/ilt/pwa/lighthouse-pwa-analysis-tool">Lighthouse PWA score<span class="fn">https://developers.google.com/web/ilt/pwa/lighthouse-pwa-analysis-tool</span></a> between 0.25 and 0.35. Less than 20% of home pages on ecommerce platforms get a score of more than 0.5 and less than 1% of home pages score more than 0.6.
    </p>
    <p>
      Lighthouse returns a Progressive Web App (PWA) score between 0 and 1. 0 is the worst possible score, and 1 is the best. The PWA audits are based on the <a href="https://developers.google.com/web/progressive-web-apps/checklist">Baseline PWA Checklist<span class="fn">https://developers.google.com/web/progressive-web-apps/checklist</span></a
      >, which lists 14 requirements. Lighthouse has automated audits for 11 of the 14 requirements. The remaining 3 can only be tested manually. Each of the 11 automated PWA audits are weighted equally, so each one contributes approximately 9 points to your PWA score.
    </p>
    <p>If at least one of the PWA audits got a null score, Lighthouse nulls out the score for the entire PWA category. This was the case for 2.32% of mobile pages.</p>
    <p>
      Clearly, the majority of ecommerce pages are failing most <a href="https://developers.google.com/web/progressive-web-apps/checklist">PWA checklist audits<span class="fn">https://developers.google.com/web/progressive-web-apps/checklist</span></a
      >. We need to do further analysis to better understand which audits are failing and why.
    </p>
    <h2 id="ecommerce-conclusion"><a href="#ecommerce-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>This comprehensive study of ecommerce usage shows some interesting data and also the wide variations in ecommerce sites, even among those built on the same ecommerce platform. Even though we have gone into a lot of detail here, there is much more analysis we could do in this space. For example, we didn't get accessibility scores this year (checkout the <a href="#accessibility">accessibility chapter</a> for more on that). Likewise, it would be interesting to segment these metrics by geography. This study detected 246 ad providers on home pages on ecommerce platforms. Further studies (perhaps in next year's Web Almanac?) could calculate what proportion of sites on ecommerce platforms shows ads. WooCommerce got very high numbers in this study so another interesting statistic we could look at next year is if some hosting providers are installing WooCommerce but not enabling it, thereby causing inflated figures.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"III","chapter_number":14,"title":"CMS","description":"CMS chapter of the 2019 Web Almanac covering CMS adoption, how CMS suites are built, User experience of CMS powered websites, and CMS innovation.","authors":["ernee","amedina"],"reviewers":["sirjonathan"],"translators":null,"discuss":"1769","results":"https://docs.google.com/spreadsheets/d/1FDYe6QdoY3UtXodE2estTdwMsTG-hHNrOe9wEYLlwAw/","queries":"14_CMS","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-03-01T00:00:00.000Z","chapter":"cms"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="cms-introduction"><a href="#cms-introduction" class="anchor-link">Introduction</a></h2>
    <p>The general term <strong>Content Management System (CMS)</strong> refers to systems enabling individuals and organizations to create, manage, and publish content. A CMS for web content, specifically, is a system aimed at creating, managing, and publishing content to be consumed and experienced via the open web.</p>
    <p>Each CMS implements some subset of a wide range of content management capabilities and the corresponding mechanisms for users to build websites easily and effectively around their content. Such content is often stored in some type of database, providing users with the flexibility to reuse it wherever needed for their content strategy. CMSs also provide admin capabilities aimed at making it easy for users to upload and manage content as needed.</p>
    <p>There is great variability on the type and scope of the support CMSs provide for building sites; some provide ready-to-use templates which are "hydrated" with user content, and others require much more user involvement for designing and constructing the site structure.</p>
    <p>When we think about CMSs, we need to account for all the components that play a role in the viability of such a system for providing a platform for publishing content on the web. All of these components form an ecosystem surrounding the CMS platform, and they include hosting providers, extension developers, development agencies, site builders, etc. Thus, when we talk about a CMS, we usually refer to both the platform itself and its surrounding ecosystem.</p>
    <h3 id="cms-why-do-content-creators-use-a-cms"><a href="#cms-why-do-content-creators-use-a-cms" class="anchor-link">Why do content creators use a CMS?</a></h3>
    <p>At the beginning of (web evolution) time, the web ecosystem was powered by a simple growth loop, where users could become creators just by viewing the source of a web page, copy-pasting according to their needs, and tailoring the new version with individual elements like images.</p>
    <p>
      As the web evolved, it became more powerful, but also more complicated. As a consequence, that simple growth loop was broken and it was not the case anymore that any user could become a creator. For those who could pursue the content creation path, the road became arduous and hard to achieve. The <a href="https://medinathoughts.com/2018/05/17/progressive-wordpress/">usage-capability gap<span class="fn">https://medinathoughts.com/2018/05/17/progressive-wordpress/</span></a
      >, that is, the difference between what can be done in the web and what is actually done, grew steadily.
    </p>
    <figure id="cms-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/web-evolution.png">
        <img src="/static/images/2019/cms/web-evolution.png" aria-labelledby="cms-fig1-caption" aria-describedby="cms-fig1-description" alt="Figure 1. Chart illustrating the increase in web capabilities from 1999 to 2018." width="600" height="492" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="cms-fig1-description" class="visually-hidden">On the left, labeled circa 1999, we have a bar chart with two bars showing what can be done is close to what is actually done. On the right, labeled 2018, we have a similar bar chart but what can be done is much larger, and what is done is slightly larger. The gap between what can be done and what is actually done has greatly increased.</div>
      <figcaption id="cms-fig1-caption"><a href="#cms-fig-1" class="anchor-link">Figure 1.</a> Chart illustrating the increase in web capabilities from 1999 to 2018.</figcaption>
    </figure>
    <p>Here is where a CMS plays the very important role of making it easy for users with different degrees of technical expertise to enter the web ecosystem loop as content creators. By lowering the barrier of entry for content creation, CMSs activate the growth loop of the web by turning users into creators. Hence their popularity.</p>
    <h3 id="cms-the-goal-of-this-chapter"><a href="#cms-the-goal-of-this-chapter" class="anchor-link">The goal of this chapter</a></h3>
    <p>There are many interesting and important aspects to analyze and questions to answer in our quest to understand the CMS space and its role in the present and the future of the web. While we acknowledge the vastness and complexity of the CMS platforms space, and don't claim omniscient knowledge fully covering all aspects involved on all platforms out there, we do claim our fascination for this space and we bring deep expertise on some of the major players in the space.</p>
    <p>In this chapter, we seek to scratch the surface area of the vast CMS space, trying to shed a beam of light on our collective understanding of the status quo of CMS ecosystems, and the role they play in shaping users' perception of how content can be consumed and experienced on the web. Our goal is not to provide an exhaustive view of the CMS landscape; instead, we will discuss a few aspects related to the CMS landscape in general, and the characteristics of web pages generated by these systems. This first edition of the Web Almanac establishes a baseline, and in the future we'll have the benefit of comparing data against this version for trend analysis.</p>
    <h2 id="cms-cms-adoption"><a href="#cms-cms-adoption" class="anchor-link">CMS adoption</a></h2>
    <figure id="cms-fig-2">
      <div class="big-number">40%</div>
      <figcaption><a href="#cms-fig-2" class="anchor-link">Figure 2.</a> Percent of web pages powered by a CMS.</figcaption>
    </figure>
    <p>Today, we can observe that more than 40% of the web pages are powered by some CMS platform; 40.01% for mobile and 39.61% for desktop more precisely.</p>
    <p>
      There are other datasets tracking market share of CMS platforms, such as <a href="https://w3techs.com/technologies/history_overview/content_management">W3Techs<span class="fn">https://w3techs.com/technologies/history_overview/content_management</span></a
      >, and they reflect higher percentages of more than 50% of web pages powered by CMS platforms. Furthermore, they observe also that CMS platforms are growing, as fast as 12% year-over-year growth in some cases! The deviation between our analysis and W3Tech's analysis could be explained by a difference in research methodologies. You can read more about ours on the <a href="#methodology">Methodology</a> page.
    </p>
    <p>In essence, this means that there are many CMS platforms available out there. The following picture shows a reduced view of the CMS landscape.</p>
    <figure id="cms-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/cms-logos.png">
        <img src="/static/images/2019/cms/cms-logos.png" aria-labelledby="cms-fig3-caption" aria-describedby="cms-fig3-description" alt="Figure 3. The top content management systems." width="600" height="559" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="cms-fig3-description" class="visually-hidden">Logos of the top CMS providers, including WordPress, Drupal, Wix, etc.</div>
      <figcaption id="cms-fig3-caption"><a href="#cms-fig-3" class="anchor-link">Figure 3.</a> The top content management systems.</figcaption>
    </figure>
    <p>Some of them are open source (e.g. WordPress, Drupal, others) and some of them are proprietary (e.g. AEM, others). Some CMS platforms can be used on "free" hosted or self-hosted plans, and there are also advanced options for using these platforms on higher-tiered plans even at the enterprise level. The CMS space as a whole is a complex, federated universe of <em>CMS ecosystems</em>, all separated and at the same time intertwined in the vast fabric of the web.</p>
    <p>It also means that there are hundreds of millions of websites powered by CMS platforms, and an order of magnitude more of users accessing the web and consuming content through these platforms. Thus, these platforms play a key role for us to succeed in our collective quest for an evergreen, healthy, and vibrant web.</p>
    <h3 id="cms-the-cms-landscape"><a href="#cms-the-cms-landscape" class="anchor-link">The CMS landscape</a></h3>
    <p>A large swath of the web today is powered by one kind of CMS platform or another. There are statistics collected by different organizations that reflect this reality. Looking at the <a href="#methodology-chrome-ux-report">Chrome UX Report</a> (CrUX) and HTTP Archive datasets, we get a picture that is consistent with stats published elsewhere, although quantitatively the proportions described may be different as a reflection of the specificity of the datasets.</p>
    <p>Looking at web pages served on desktop and mobile devices, we observe an approximate 60-40 split in the percentage of such pages which were generated by some kind of CMS platform, and those that aren't.</p>
    <figure id="cms-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig4.png">
        <img src="/static/images/2019/cms/fig4.png" alt="Figure 4. Percent of desktop and mobile websites that use a CMS." aria-labelledby="cms-fig4-caption" aria-describedby="cms-fig4-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=1644425372&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="cms-fig4-description" class="visually-hidden">Bar chart showing that 40% of desktop and 40% of mobile websites are built using a CMS.</div>
      <figcaption id="cms-fig4-caption"><a href="#cms-fig-4" class="anchor-link">Figure 4.</a> Percent of desktop and mobile websites that use a CMS.</figcaption>
    </figure>
    <p>CMS-powered web pages are generated by a large set of available CMS platforms. There are many such platforms to choose from, and many factors that can be considered when deciding to use one vs. another, including things like:</p>
    <ul>
      <li>Core functionality</li>
      <li>Creation/editing workflows and experience</li>
      <li>Barrier of entry</li>
      <li>Customizability</li>
      <li>Community</li>
      <li>And many others.</li>
    </ul>
    <p>
      The CrUX and HTTP Archive datasets contain web pages powered by a mix of around 103 CMS platforms. Most of those platforms are very small in terms of relative market share. For the sake of our analysis, we will be focusing on the top CMS platforms in terms of their footprint on the web as reflected by the data. For a full analysis, <a href="https://docs.google.com/spreadsheets/d/1FDYe6QdoY3UtXodE2estTdwMsTG-hHNrOe9wEYLlwAw/edit#gid=0">see this chapter's results spreadsheet<span class="fn">https://docs.google.com/spreadsheets/d/1FDYe6QdoY3UtXodE2estTdwMsTG-hHNrOe9wEYLlwAw/edit#gid=0</span></a
      >.
    </p>
    <figure id="cms-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig5.png">
        <img src="/static/images/2019/cms/fig5.png" alt="Figure 5. Top CMS platforms as a percent of all CMS websites." aria-labelledby="cms-fig5-caption" aria-describedby="cms-fig5-description" width="600" height="600" data-width="600" data-height="600" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=1652315665&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="cms-fig5-description" class="visually-hidden">Bar chart showing WordPress making up 75% of all CMS websites. The next biggest CMS, Drupal, has about 6% of the CMS market share. The rest of the CMSs quickly shrink in adoption to less than 1%.</div>
      <figcaption id="cms-fig5-caption"><a href="#cms-fig-5" class="anchor-link">Figure 5.</a> Top CMS platforms as a percent of all CMS websites.</figcaption>
    </figure>
    <p>The most salient CMS platforms present in the datasets are shown above in Figure 5. WordPress comprises 74.19% of mobile and 73.47% of desktop CMS websites. Its dominance in the CMS landscape can be attributed to a number of factors that we'll discuss later, but it's a <em>major</em> player. Open source platforms like Drupal and Joomla, and closed SaaS offerings like Squarespace and Wix, round out the top 5 CMSs. The diversity of these platforms speak to the CMS ecosystem consisting of many platforms where user demographics and the website creation journey vary. What's also interesting is the long tail of small scale CMS platforms in the top 20. From enterprise offerings to proprietary applications developed in-house for industry specific use, content management systems provide the customizable infrastructure for groups to manage, publish, and do business on the web.</p>
    <p>
      The <a href="https://wordpress.org/about/">WordPress project<span class="fn">https://wordpress.org/about/</span></a> defines its mission as "<em>democratizing publishing</em>". Some of its main goals are ease of use and to make the software free and available for everyone to create content on the web. Another big component is the inclusive community the project fosters. In almost any major city in the world, one can find a group of people who gather regularly to connect, share, and code in an effort to understand and build on the WordPress platform. Attending local meetups and annual events as well as participating in web-based channels are some of the ways WordPress contributors, experts, businesses, and enthusiasts participate in its global community.
    </p>
    <p>The low barrier of entry and resources to support users (online and in-person) with publishing on the platform and to develop extensions (plugins) and themes contribute to its popularity. There is also a thriving availability of and economy around WordPress plugins and themes that reduce the complexity of implementing sought after web design and functionality. Not only do these aspects drive its reach and adoption by newcomers, but also maintains its long-standing use over time.</p>
    <p>The open source WordPress platform is powered and supported by volunteers, the WordPress Foundation, and major players in the web ecosystem. With these factors in mind, WordPress as the leading CMS makes sense.</p>
    <h2 id="cms-how-are-cms-powered-sites-built"><a href="#cms-how-are-cms-powered-sites-built" class="anchor-link">How are CMS-powered sites built</a></h2>
    <p>Independent of the specific nuances and idiosyncrasies of different CMS platforms, the end goal for all of them is to output web pages to be served to users via the vast reach of the open web. The difference between CMS-powered and non-CMS-powered web pages is that in the former, the CMS platform makes most of the decisions of how the end result is built, while in the latter there are not such layers of abstraction and decisions are all made by developers either directly or via library configurations.</p>
    <p>In this section we take a brief look at the status quo of the CMS space in terms of the characteristics of their output (e.g. total resources used, image statistics, etc.), and how they compare with the web ecosystem as a whole.</p>
    <h3 id="cms-total-resource-usage"><a href="#cms-total-resource-usage" class="anchor-link">Total resource usage</a></h3>
    <p>The building blocks of any website also make a CMS website: <a href="#markup">HTML</a>, <a href="#css">CSS</a>, <a href="#javascript">JavaScript</a>, and <a href="#media">media</a> (images and video). CMS platforms give users powerfully streamlined administrative capabilities to integrate these resources to create web experiences. While this is one of the most inclusive aspects of these applications, it could have some adverse effects on the wider web.</p>
    <figure id="cms-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig6.png">
        <img src="/static/images/2019/cms/fig6.png" alt="Figure 6. Distribution of CMS page weight." aria-labelledby="cms-fig6-caption" aria-describedby="cms-fig6-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=991628102&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="cms-fig6-description" class="visually-hidden">Bar chart showing the distribution of CMS page weight. The median desktop CMS page weighs 2.3 MB. At the 10th percentile it is 0.7 MB, 25th percentile 1.2 MB, 75th percentile 4.2 MB, and 90th percentile 7.4 MB. Desktop values are very slightly higher than mobile.</div>
      <figcaption id="cms-fig6-caption"><a href="#cms-fig-6" class="anchor-link">Figure 6.</a> Distribution of CMS page weight.</figcaption>
    </figure>
    <figure id="cms-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig7.png">
        <img src="/static/images/2019/cms/fig7.png" alt="Figure 7. Distribution of CMS requests per page." aria-labelledby="cms-fig7-caption" aria-describedby="cms-fig7-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=140872807&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="cms-fig7-description" class="visually-hidden">Bar chart showing the distribution of CMS requests per page. The median desktop CMS page loads 86 resources. At the 10th percentile it loads 39 resources, 25th percentile 57 resources, 75th percentile 127 resources, and 90th percentile 183 resources. Desktop is consistently higher than mobile by a small margin of 3-6 resources.</div>
      <figcaption id="cms-fig7-caption"><a href="#cms-fig-7" class="anchor-link">Figure 7.</a> Distribution of CMS requests per page.</figcaption>
    </figure>
    <p>In Figures 6 and 7 above, we see the median desktop CMS page loads 86 resources and weighs 2.29 MB. Mobile page resource usage is not too far behind with 83 resources and 2.25 MB.</p>
    <p>The median indicates the halfway point that all CMS pages either fall above or below. In short, half of all CMS pages load fewer requests and weigh less, while half load more requests and weigh more. At the 10th percentile, mobile and desktop pages have under 40 requests and 1 MB in weight, but at the 90th percentile we see pages with over 170 requests and at 7 MB, almost tripling in weight from the median.</p>
    <p>How do CMS pages compare to pages on the web as a whole? In the <a href="#page-weight">Page Weight</a> chapter, we find some telling data about resource usage. At the median, desktop pages load 74 requests and weigh 1.9 MB, and mobile pages on the web load 69 requests and weigh 1.7 MB. The median CMS page exceeds this. CMS pages also exceed resources on the web at the 90th percentile, but by a smaller margin. In short: CMS pages could be considered as some of the heaviest.</p>
    <figure id="cms-fig-8">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>percentile</th>
                <th>image</th>
                <th>video</th>
                <th>script</th>
                <th>font</th>
                <th>css</th>
                <th>audio</th>
                <th>html</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="numeric">50</td>
                <td class="numeric">1,233</td>
                <td class="numeric">1,342</td>
                <td class="numeric">456</td>
                <td class="numeric">140</td>
                <td class="numeric">93</td>
                <td class="numeric">14</td>
                <td class="numeric">33</td>
              </tr>
              <tr>
                <td class="numeric">75</td>
                <td class="numeric">2,766</td>
                <td class="numeric">2,735</td>
                <td class="numeric">784</td>
                <td class="numeric">223</td>
                <td class="numeric">174</td>
                <td class="numeric">97</td>
                <td class="numeric">66</td>
              </tr>
              <tr>
                <td class="numeric">90</td>
                <td class="numeric">5,699</td>
                <td class="numeric">5,098</td>
                <td class="numeric">1,199</td>
                <td class="numeric">342</td>
                <td class="numeric">310</td>
                <td class="numeric">287</td>
                <td class="numeric">120</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cms-fig-8" class="anchor-link">Figure 8.</a> Distribution of desktop CMS page kilobytes per resource type.</figcaption>
    </figure>
    <figure id="cms-fig-9">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>percentile</th>
                <th>image</th>
                <th>video</th>
                <th>script</th>
                <th>css</th>
                <th>font</th>
                <th>audio</th>
                <th>html</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="numeric">50</td>
                <td class="numeric">1,264</td>
                <td class="numeric">1,056</td>
                <td class="numeric">438</td>
                <td class="numeric">89</td>
                <td class="numeric">109</td>
                <td class="numeric">14</td>
                <td class="numeric">32</td>
              </tr>
              <tr>
                <td class="numeric">75</td>
                <td class="numeric">2,812</td>
                <td class="numeric">2,191</td>
                <td class="numeric">756</td>
                <td class="numeric">171</td>
                <td class="numeric">177</td>
                <td class="numeric">38</td>
                <td class="numeric">67</td>
              </tr>
              <tr>
                <td class="numeric">90</td>
                <td class="numeric">5,531</td>
                <td class="numeric">4,593</td>
                <td class="numeric">1,178</td>
                <td class="numeric">317</td>
                <td class="numeric">286</td>
                <td class="numeric">473</td>
                <td class="numeric">123</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cms-fig-9" class="anchor-link">Figure 9.</a> Distribution of mobile CMS page kilobytes per resource type.</figcaption>
    </figure>
    <p>When we look closer at the types of resources that load on mobile or desktop CMS pages, images and video immediately stand out as primary contributors to their weight.</p>
    <p>The impact doesn't necessarily correlate with the number of requests, but rather how much data is associated with those individual requests. For example, in the case of video resources with only two requests made at the median, they carry more than 1MB of associated load. Multimedia experiences also come with the use of scripts to integrate interactivity, deliver functionality and data to name a few use cases. In both mobile and desktop pages, those are the 3rd heaviest resource.</p>
    <p>
      With our CMS experiences saturated with these resources, we must consider the impact this has on website visitors on the frontend- is their experience fast or slow? Additionally, when comparing mobile and desktop resource usage, the amount of requests and weight show little difference. This means that the same amount and weight of resources are powering both mobile and desktop CMS experiences. Variation in connection speed and mobile device quality adds <a href="https://medinathoughts.com/2017/12/03/the-perils-of-mobile-web-performance-part-iii/">another layer of complexity<span class="fn">https://medinathoughts.com/2017/12/03/the-perils-of-mobile-web-performance-part-iii/</span></a
      >. Later in this chapter, we'll use data from CrUX to assess user experience in the CMS space.
    </p>
    <h3 id="cms-third-party-resources"><a href="#cms-third-party-resources" class="anchor-link">Third-party resources</a></h3>
    <p>Let's highlight a particular subset of resources to assess their impact in the CMS landscape. <a href="#third-parties">Third-party</a> resources are those from origins not belonging to the destination site's domain name or servers. They can be images, videos, scripts, or other resource types. Sometimes these resources are packaged in combination such as with embedding an <code>iframe</code> for example. Our data reveals that the median amount of 3rd party resources for both desktop and mobile are close.</p>
    <p>The median amount of 3rd party requests on mobile CMS pages is 15 and weigh 264.72 KB, while the median for these requests on desktop CMS pages is 16 and weigh 271.56 KB. (Note that this excludes 3P resources considered part of "hosting").</p>
    <figure id="cms-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig10.png">
        <img src="/static/images/2019/cms/fig10.png" alt="Figure 10. Distribution of third-party weight (KB) on CMS pages." aria-labelledby="cms-fig10-caption" aria-describedby="cms-fig10-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=354803312&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="cms-fig10-description" class="visually-hidden">Bar chart of percentiles 10, 25, 50, 75, and 90 representing the distribution of third-party kilobytes on CMS pages for desktop and mobile. The median (50th percentile) desktop third-party weight is 272 KB. The 10th percentile is 27 KB, 25th 104 KB, 75th 577 KB, and 90th 940 KB. Mobile is slightly smaller in the smaller percentiles and slightly larger in the larger percentiles.</div>
      <figcaption id="cms-fig10-caption"><a href="#cms-fig-10" class="anchor-link">Figure 10.</a> Distribution of third-party weight (KB) on CMS pages.</figcaption>
    </figure>
    <figure id="cms-fig-11">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig11.png">
        <img src="/static/images/2019/cms/fig11.png" alt="Figure 11. Distribution of the number of third-party requests on CMS pages." aria-labelledby="cms-fig11-caption" aria-describedby="cms-fig11-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=699762709&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig11-description" data-show-text="{{ show_description(11) }}" data-hide-text="{{ hide_description(11) }}">{{ show_description(11) }}</button>
      <div id="cms-fig11-description" class="visually-hidden">Bar chart of percentiles 10, 25, 50, 75, and 90 representing the distribution of third-party requests on CMS pages for desktop and mobile. The median (50th percentile) desktop third-party request count is 16. The 10th percentile is 3, 25th 7, 75th 31, and 90th 52. Desktop and mobile have nearly equivalent distributions.</div>
      <figcaption id="cms-fig11-caption"><a href="#cms-fig-11" class="anchor-link">Figure 11.</a> Distribution of the number of third-party requests on CMS pages.</figcaption>
    </figure>
    <p>We know the median value indicates at least half of CMS web pages are shipping with more 3rd party resources than what we report here. At the 90th percentile, CMS pages can deliver up to 52 resources at approximately 940 KB, a considerable increase.</p>
    <p>Given that third-party resources originate from remote domains and servers, the destination site has little control over the quality and impact these resources have on its performance. This unpredictability could lead to fluctuations in speed and affect the user experience, which we'll soon explore.</p>
    <h3 id="cms-image-stats"><a href="#cms-image-stats" class="anchor-link">Image stats</a></h3>
    <figure id="cms-fig-12">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig12.png">
        <img src="/static/images/2019/cms/fig12.png" alt="Figure 12. Distribution of image weight (KB) on CMS pages." aria-labelledby="cms-fig12-caption" aria-describedby="cms-fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=1615220952&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="cms-fig12-description" class="visually-hidden">Bar chart of percentiles 10, 25, 50, 75, and 90 representing the distribution of image kilobytes on CMS pages for desktop and mobile. The median (50th percentile) desktop image weight is 1,232 KB. The 10th percentile is 198 KB, 25th 507 KB, 75th 2,763 KB, and 90th 5,694 KB. Desktop and mobile have nearly equivalent distributions.</div>
      <figcaption id="cms-fig12-caption"><a href="#cms-fig-12" class="anchor-link">Figure 12.</a> Distribution of image weight (KB) on CMS pages.</figcaption>
    </figure>
    <figure id="cms-fig-13">
      <div class="big-number">1,232 KB</div>
      <figcaption><a href="#cms-fig-13" class="anchor-link">Figure 13.</a> The median number of image kilobytes loaded per desktop CMS page.</figcaption>
    </figure>
    <p>Recall from Figures 8 and 9 earlier, images are a big contributor to the total weight of CMS pages. Figures 12 and 13 above show that the median desktop CMS page has 31 images and payload of 1,232 KB, while the median mobile CMS page has 29 images and payload of 1,263 KB. Again we have very close margins for the weight of these resources for both desktop and mobile experiences. The <a href="#page-weight">Page Weight</a> chapter additionally shows that image resources well exceed the median weight of pages with the same amount of images on the web as a whole, which is 983 KB and 893 KB for desktop and mobile respectively. The verdict: CMS pages ship heavy images.</p>
    <p>Which are the common formats found on mobile and desktop CMS pages? From our data JPG images on average are the most popular image format. PNG and GIF formats follow, while formats like SVG, ICO, and WebP trail significantly comprising approximately a little over 2% and 1%.</p>
    <figure id="cms-fig-14">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig14.png">
        <img src="/static/images/2019/cms/fig14.png" alt="Figure 14. Adoption of image formats on CMS pages." aria-labelledby="cms-fig14-caption" aria-describedby="cms-fig14-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=98218771&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig14-description" data-show-text="{{ show_description(14) }}" data-hide-text="{{ hide_description(14) }}">{{ show_description(14) }}</button>
      <div id="cms-fig14-description" class="visually-hidden">Bar chart of the adoption of image formats on CMS pages for desktop and mobile. JPEG makes up nearly half of all image formats, PNG comprises a third, GIF comprises a fifth, and the remaining 5% shared among SVG, ICO, and WebP. Desktop and mobile have nearly equivalent adoption.</div>
      <figcaption id="cms-fig14-caption"><a href="#cms-fig-14" class="anchor-link">Figure 14.</a> Adoption of image formats on CMS pages.</figcaption>
    </figure>
    <p>
      Perhaps this segmentation isn't surprising given the common use cases for these image types. SVGs for logos and icons are common as are JPEGs ubiquitous. WebP is still a relatively new optimized format with <a href="https://caniuse.com/#search=webp">growing browser adoption<span class="fn">https://caniuse.com/#search=webp</span></a
      >. It will be interesting to see how this impacts its use in the CMS space in the years to come.
    </p>
    <h2 id="cms-user-experience-on-cms-powered-websites"><a href="#cms-user-experience-on-cms-powered-websites" class="anchor-link">User experience on CMS-powered websites</a></h2>
    <p>Success as a web content creator is all about user experience. Factors such as resource usage and other statistics regarding how web pages are composed are important indicators of the quality of a given site in terms of the best practices followed while building it. However, we are ultimately interested in shedding some light on how are users actually experiencing the web when consuming and engaging with content generated by these platforms.</p>
    <p>
      To achieve this, we turn our analysis towards some <a href="https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics">user-perceived performance metrics<span class="fn">https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics</span></a
      >, which are captured in the CrUX dataset. These metrics relate in some ways to <a href="https://paulbakaus.com/tutorials/performance/the-illusion-of-speed/">how we, as humans, perceive time<span class="fn">https://paulbakaus.com/tutorials/performance/the-illusion-of-speed/</span></a
      >.
    </p>
    <figure id="cms-fig-15">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Duration</th>
                <th>Perception</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>&lt; 0.1 seconds</td>
                <td>Instant</td>
              </tr>
              <tr>
                <td>0.5-1 second</td>
                <td>Immediate</td>
              </tr>
              <tr>
                <td>2-5 seconds</td>
                <td>Point of abandonment</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cms-fig-15" class="anchor-link">Figure 15.</a> How humans perceive short durations of time.</figcaption>
    </figure>
    <p>If things happen within 0.1 seconds (100 milliseconds), for all of us they are happening virtually instantly. And when things take longer than a few seconds, the likelihood we go on with our lives without waiting any longer is very high. This is very important for content creators seeking sustainable success in the web, because it tells us how fast our sites must load if we want to acquire, engage, and retain our user base.</p>
    <p>In this section we take a look at three important dimensions which can shed light on our understanding of how users are experiencing CMS-powered web pages in the wild:</p>
    <ul>
      <li>First Contentful Paint (FCP)</li>
      <li>First Input Delay (FID)</li>
      <li>Lighthouse scores</li>
    </ul>
    <h3 id="cms-first-contentful-paint"><a href="#cms-first-contentful-paint" class="anchor-link">First Contentful Paint</a></h3>
    <p>
      <a href="https://developers.google.com/web/tools/lighthouse/audits/first-contentful-paint">First Contentful Paint<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/first-contentful-paint</span></a> measures the time it takes from navigation until content such as text or an image is first displayed. A successful FCP experience, or one that can be qualified as "fast," entails how quickly elements in the DOM are loaded to assure the user that the website is loading successfully. Although a good FCP score is not a guarantee that the corresponding site offers a good UX, a bad FCP almost certainly does guarantee the opposite.
    </p>
    <figure id="cms-fig-16">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig16.png">
        <img src="/static/images/2019/cms/fig16.png" alt="Figure 16. Average distribution of FCP experiences across CMSs." aria-labelledby="cms-fig16-caption" aria-describedby="cms-fig16-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=1644531590&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig16-description" data-show-text="{{ show_description(16) }}" data-hide-text="{{ hide_description(16) }}">{{ show_description(16) }}</button>
      <div id="cms-fig16-description" class="visually-hidden">Bar chart of the average distribution of FCP experiences per CMS. Refer to Figure 17 below for a data table of the top 5 CMSs.</div>
      <figcaption id="cms-fig16-caption"><a href="#cms-fig-16" class="anchor-link">Figure 16.</a> Average distribution of FCP experiences across CMSs.</figcaption>
    </figure>
    <figure id="cms-fig-17">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>CMS</th>
                <th>Fast<br />(&lt; 1000ms)</th>
                <th>Moderate</th>
                <th>Slow<br />(&gt;= 3000ms)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>WordPress</td>
                <td class="numeric">24.33%</td>
                <td class="numeric">40.24%</td>
                <td class="numeric">35.42%</td>
              </tr>
              <tr>
                <td>Drupal</td>
                <td class="numeric">37.25%</td>
                <td class="numeric">39.39%</td>
                <td class="numeric">23.35%</td>
              </tr>
              <tr>
                <td>Joomla</td>
                <td class="numeric">22.66%</td>
                <td class="numeric">46.48%</td>
                <td class="numeric">30.86%</td>
              </tr>
              <tr>
                <td>Wix</td>
                <td class="numeric">14.25%</td>
                <td class="numeric">62.84%</td>
                <td class="numeric">22.91%</td>
              </tr>
              <tr>
                <td>Squarespace</td>
                <td class="numeric">26.23%</td>
                <td class="numeric">43.79%</td>
                <td class="numeric">29.98%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cms-fig-17" class="anchor-link">Figure 17.</a> Average distribution of FCP experiences for the top 5 CMSs.</figcaption>
    </figure>
    <p>FCP in the CMS landscape trends mostly in the moderate range. The need for CMS platforms to query content from a database, send, and subsequently render it in the browser, could be a contributing factor to the delay that users experience. The resource loads we discussed in the previous sections could also play a role. In addition, some of these instances are on shared hosting or in environments that may not be optimized for performance, which could also impact the experience in the browser.</p>
    <p>WordPress shows notably moderate and slow FCP experiences on mobile and desktop. Wix sits strongly in moderate FCP experiences on its closed platform. TYPO3, an enterprise open-source CMS platform, has consistently fast experiences on both mobile and desktop. TYPO3 advertises built-in performance and scalability features that may have a positive impact for website visitors on the frontend.</p>
    <h3 id="cms-first-input-delay"><a href="#cms-first-input-delay" class="anchor-link">First Input Delay</a></h3>
    <p>
      <a href="https://developers.google.com/web/updates/2018/05/first-input-delay">First Input Delay<span class="fn">https://developers.google.com/web/updates/2018/05/first-input-delay</span></a> (FID) measures the time from when a user first interacts with your site (i.e. when they click a link, tap on a button, or use a custom, JavaScript-powered control) to the time when the browser is actually able to respond to that interaction. A "fast" FID from a user's perspective would be immediate feedback from their actions on a site rather than a stalled experience. This delay (a pain point) could correlate with interference from other aspects of the site loading when the user tries to interact with the site.
    </p>
    <p>FID in the CMS space generally trends on fast experiences for both desktop and mobile on average. However, what's notable is the significant difference between mobile and desktop experiences.</p>
    <figure id="cms-fig-18">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig18.png">
        <img src="/static/images/2019/cms/fig18.png" alt="Figure 18. Average distribution of FID experiences across CMSs." aria-labelledby="cms-fig18-caption" aria-describedby="cms-fig18-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=625179047&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig18-description" data-show-text="{{ show_description(18) }}" data-hide-text="{{ hide_description(18) }}">{{ show_description(18) }}</button>
      <div id="cms-fig18-description" class="visually-hidden">Bar chart of the average distribution of FCP experiences per CMS. Refer to Figure 19 below for a data table of the top 5 CMSs.</div>
      <figcaption id="cms-fig18-caption"><a href="#cms-fig-18" class="anchor-link">Figure 18.</a> Average distribution of FID experiences across CMSs.</figcaption>
    </figure>
    <figure id="cms-fig-19">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>CMS</th>
                <th>Fast<br />(&lt; 100ms)</th>
                <th>Moderate</th>
                <th>Slow<br />(&gt;= 300ms)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>WordPress</td>
                <td class="numeric">80.25%</td>
                <td class="numeric">13.55%</td>
                <td class="numeric">6.20%</td>
              </tr>
              <tr>
                <td>Drupal</td>
                <td class="numeric">74.88%</td>
                <td class="numeric">18.64%</td>
                <td class="numeric">6.48%</td>
              </tr>
              <tr>
                <td>Joomla</td>
                <td class="numeric">68.82%</td>
                <td class="numeric">22.61%</td>
                <td class="numeric">8.57%</td>
              </tr>
              <tr>
                <td>Squarespace</td>
                <td class="numeric">84.55%</td>
                <td class="numeric">9.13%</td>
                <td class="numeric">6.31%</td>
              </tr>
              <tr>
                <td>Wix</td>
                <td class="numeric">63.06%</td>
                <td class="numeric">16.99%</td>
                <td class="numeric">19.95%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cms-fig-19" class="anchor-link">Figure 19.</a> Average distribution of FID experiences for the top 5 CMSs.</figcaption>
    </figure>
    <p>While this difference is present in FCP data, FID sees bigger gaps in performance. For example, the difference between mobile and desktop fast FCP experiences for Joomla is around 12.78%, for FID experiences the difference is significant: 27.76%. Mobile device and connection quality could play a role in the performance gaps that we see here. As we highlighted previously, there is a small margin of difference between the resources shipped to desktop and mobile versions of a website. Optimizing for the mobile (interactive) experience becomes more apparent with these results.</p>
    <h3 id="cms-lighthouse-scores"><a href="#cms-lighthouse-scores" class="anchor-link">Lighthouse scores</a></h3>
    <p><a href="#methodology-lighthouse">Lighthouse</a> is an open-source, automated tool designed to help developers assess and improve the quality of their websites. One key aspect of the tool is that it provides a set of audits to assess the status of a website in terms of <strong>performance</strong>, <strong>accessibility</strong>, <strong>progressive web apps</strong>, and more. For the purposes of this chapter, we are interested in two specific audits categories: PWA and accessibility.</p>
    <h4 id="cms-pwa"><a href="#cms-pwa" class="anchor-link">PWA</a></h4>
    <p>
      The term <strong>Progressive Web App</strong> (<a href="#pwa">PWA</a>) refers to web-based user experiences that are considered as being <a href="https://developers.google.com/web/progressive-web-apps#reliable">reliable<span class="fn">https://developers.google.com/web/progressive-web-apps#reliable</span></a
      >, <a href="https://developers.google.com/web/progressive-web-apps#fast">fast<span class="fn">https://developers.google.com/web/progressive-web-apps#fast</span></a
      >, and <a href="https://developers.google.com/web/progressive-web-apps#engaging">engaging<span class="fn">https://developers.google.com/web/progressive-web-apps#engaging</span></a
      >. Lighthouse provides a set of audits which returns a PWA score between 0 (worst) and 1 (best). These audits are based on the <a href="https://developers.google.com/web/progressive-web-apps/checklist#baseline">Baseline PWA Checklist<span class="fn">https://developers.google.com/web/progressive-web-apps/checklist#baseline</span></a
      >, which lists 14 requirements. Lighthouse has automated audits for 11 of the 14 requirements. The remaining 3 can only be tested manually. Each of the 11 automated PWA audits are weighted equally, so each one contributes approximately 9 points to your PWA score.
    </p>
    <figure id="cms-fig-20">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig20.png">
        <img src="/static/images/2019/cms/fig20.png" alt="Figure 20. Distribution of Lighthouse PWA category scores for CMS pages." aria-labelledby="cms-fig20-caption" aria-describedby="cms-fig20-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=1812566020&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig20-description" data-show-text="{{ show_description(20) }}" data-hide-text="{{ hide_description(20) }}">{{ show_description(20) }}</button>
      <div id="cms-fig20-description" class="visually-hidden">Bar chart showing the distribution of Lighthouse PWA category scores for all CMS pages. The most common score is 0.3 at 22% of CMS pages. There are two other peaks in the distribution: 11% of pages with scores of 0.15 and 8% of pages with scores of 0.56. Fewer than 1% of pages get a score above 0.6.</div>
      <figcaption id="cms-fig20-caption"><a href="#cms-fig-20" class="anchor-link">Figure 20.</a> Distribution of Lighthouse PWA category scores for CMS pages.</figcaption>
    </figure>
    <figure id="cms-fig-21">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig21.png">
        <img src="/static/images/2019/cms/fig21.png" alt="Figure 21. Median Lighthouse PWA category scores per CMS." aria-labelledby="cms-fig21-caption" aria-describedby="cms-fig21-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=1071586621&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig21-description" data-show-text="{{ show_description(21) }}" data-hide-text="{{ hide_description(21) }}">{{ show_description(21) }}</button>
      <div id="cms-fig21-description" class="visually-hidden">Bar chart showing the median Lighthouse PWA score per CMS. The median score for WordPress websites is 0.33. The next five CMSs (Joomla, Drupal, Wix, Squarespace, and 1C-Bitrix) all have a median score of 0.3. The CMSs with the top PWA scores are Jimdo with a score of 0.56 and TYPO3 at 0.41.</div>
      <figcaption id="cms-fig21-caption"><a href="#cms-fig-21" class="anchor-link">Figure 21.</a> Median Lighthouse PWA category scores per CMS.</figcaption>
    </figure>
    <h4 id="cms-accessibility"><a href="#cms-accessibility" class="anchor-link">Accessibility</a></h4>
    <p>
      An accessible website is a site designed and developed so that people with disabilities can use them. Lighthouse provides a set of accessibility audits and it returns a weighted average of all of them (see <a href="https://docs.google.com/spreadsheets/d/1Cxzhy5ecqJCucdf1M0iOzM8mIxNc7mmx107o5nj38Eo/edit#gid=1567011065">Scoring Details<span class="fn">https://docs.google.com/spreadsheets/d/1Cxzhy5ecqJCucdf1M0iOzM8mIxNc7mmx107o5nj38Eo/edit#gid=1567011065</span></a> for a full list of how each audit is weighted).
    </p>
    <p>Each accessibility audit is pass or fail, but unlike other Lighthouse audits, a page doesn't get points for partially passing an accessibility audit. For example, if some elements have screenreader-friendly names, but others don't, that page gets a 0 for the <em>screenreader-friendly-names</em> audit.</p>
    <figure id="cms-fig-22">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig22.png">
        <img src="/static/images/2019/cms/fig22.png" alt="Figure 22. Distribution of Lighthouse accessibility category scores for CMS pages." aria-labelledby="cms-fig22-caption" aria-describedby="cms-fig22-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=764428981&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig22-description" data-show-text="{{ show_description(22) }}" data-hide-text="{{ hide_description(22) }}">{{ show_description(22) }}</button>
      <div id="cms-fig22-description" class="visually-hidden">Bar chart showing the distribution of CMS pages' Lighthouse accessibility scores. The distribution is heavily skewed to the higher scores with a mode of about 0.85.</div>
      <figcaption id="cms-fig22-caption"><a href="#cms-fig-22" class="anchor-link">Figure 22.</a> Distribution of Lighthouse accessibility category scores for CMS pages.</figcaption>
    </figure>
    <figure id="cms-fig-23">
      <a href="https://almanac.httparchive.org/static/images/2019/cms/fig23.png">
        <img src="/static/images/2019/cms/fig23.png" alt="Figure 23. Median Lighthouse accessibility category scores per CMS." aria-labelledby="cms-fig23-caption" aria-describedby="cms-fig23-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRlIvQce5DSZ4KnDyHErJhLJvnond89U_cNFewvtIhI2uV4Ff4og0e7X8bRFO28eBGKJ2uYlJyXLUBH/pubchart?oid=940747460&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig23-description" data-show-text="{{ show_description(23) }}" data-hide-text="{{ hide_description(23) }}">{{ show_description(23) }}</button>
      <div id="cms-fig23-description" class="visually-hidden">Bar chart showing the median Lighthouse accessibility category score per CMS. Most CMSs get a score of about 0.75. Notable outliers include Wix with a median score of 0.93 and 1-C Bitrix with a score of 0.65.</div>
      <figcaption id="cms-fig23-caption"><a href="#cms-fig-23" class="anchor-link">Figure 23.</a> Median Lighthouse accessibility category scores per CMS.</figcaption>
    </figure>
    <p>As it stands now, only 1.27% of mobile CMS home pages get a perfect score of 100%. Of the top CMSs, Wix takes the lead by having the highest median accessibility score on its mobile pages. Overall, these figures are dismal when you consider how many websites (how much of the web that is powered by CMSs) are inaccessible to a significant segment of our population. As much as digital experiences impact so many aspects of our lives, this should be a mandate to encourage us to <em>build accessible web experiences from the start</em>, and to continue the work of making the web an inclusive space.</p>
    <h2 id="cms-cms-innovation"><a href="#cms-cms-innovation" class="anchor-link">CMS innovation</a></h2>
    <p>While we've taken a snapshot of the current landscape of the CMS ecosystem, the space is evolving. In efforts to address <a href="#performance">performance</a> and user experience shortcomings, we're seeing experimental frameworks being integrated with the CMS infrastructure in both coupled and decoupled/ headless instances. Libraries and frameworks such as React.js, its derivatives like Gatsby.js and Next.js, and Vue.js derivative Nuxt.js are making slight marks of adoption.</p>
    <figure id="cms-fig-24">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>CMS</th>
                <th>React</th>
                <th>Nuxt.js,<br />React</th>
                <th>Nuxt.js</th>
                <th>Next.js,<br />React</th>
                <th>Gatsby,<br />React</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>WordPress</td>
                <td class="numeric">131,507</td>
                <td class="numeric"></td>
                <td class="numeric">21</td>
                <td class="numeric">18</td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>Wix</td>
                <td class="numeric">50,247</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>Joomla</td>
                <td class="numeric">3,457</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>Drupal</td>
                <td class="numeric">2,940</td>
                <td class="numeric"></td>
                <td class="numeric">8</td>
                <td class="numeric">15</td>
                <td class="numeric">1</td>
              </tr>
              <tr>
                <td>DataLife Engine</td>
                <td class="numeric">1,137</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>Adobe Experience Manager</td>
                <td class="numeric">723</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric">7</td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>Contentful</td>
                <td class="numeric">492</td>
                <td class="numeric">7</td>
                <td class="numeric">114</td>
                <td class="numeric">909</td>
                <td class="numeric">394</td>
              </tr>
              <tr>
                <td>Squarespace</td>
                <td class="numeric">385</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>1C-Bitrix</td>
                <td class="numeric">340</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>TYPO3 CMS</td>
                <td class="numeric">265</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric">1</td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>Weebly</td>
                <td class="numeric">263</td>
                <td class="numeric"></td>
                <td class="numeric">1</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>Jimdo</td>
                <td class="numeric">248</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric">2</td>
              </tr>
              <tr>
                <td>PrestaShop</td>
                <td class="numeric">223</td>
                <td class="numeric"></td>
                <td class="numeric">1</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>SDL Tridion</td>
                <td class="numeric">152</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
              <tr>
                <td>Craft CMS</td>
                <td class="numeric">123</td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
                <td class="numeric"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cms-fig-24" class="anchor-link">Figure 24.</a> Adoption (number of mobile websites) of React and companion frameworks per CMS.</figcaption>
    </figure>
    <p>We also see hosting providers and agencies offering Digital Experience Platforms (DXP) as holistic solutions using CMSs and other integrated technologies as a toolbox for enterprise customer-focused strategies. These innovations show an effort to create turn-key, CMS-based solutions that make it possible, simple, and easy by default for the users (and their end users) to get the best UX when creating and consuming the content of these platforms. The aim: good performance by default, feature richness, and excellent hosting environments.</p>
    <h2 id="cms-conclusions"><a href="#cms-conclusions" class="anchor-link">Conclusions</a></h2>
    <p>The CMS space is of paramount importance. The large portion of the web these applications power and the critical mass of users both creating and encountering its pages on a variety of devices and connections should not be trivialized. We hope this chapter and the others found here in the Web Almanac inspire more research and innovation to help make the space better. Deep investigations would provide us better context about the strengths, weaknesses, and opportunities these platforms provide the web as a whole. Content management systems can make an impact on preserving the integrity of the open web. Let's keep moving them forward!</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"IV","chapter_number":15,"title":"Compression","description":"Compression chapter of the 2019 Web Almanac covering HTTP compression, algorithms, content types, 1st party and 3rd party compression and opportunities.","authors":["paulcalvano"],"reviewers":["obto","yoavweiss"],"translators":null,"discuss":"1770","results":"https://docs.google.com/spreadsheets/d/1IK9kaScQr_sJUwZnWMiJcmHEYJV292C9DwCfXH6a50o/","queries":"15_Compression","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-07-08T00:00:00.000Z","chapter":"compression"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="compression-introduction"><a href="#compression-introduction" class="anchor-link">Introduction</a></h2>
    <p>HTTP compression is a technique that allows you to encode information using fewer bits than the original representation. When used for delivering web content, it enables web servers to reduce the amount of data transmitted to clients. This increases the efficiency of the client's available bandwidth, reduces <a href="#page-weight">page weight</a>, and improves <a href="#performance">web performance</a>.</p>
    <p>Compression algorithms are often categorized as lossy or lossless:</p>
    <ul>
      <li>When a lossy compression algorithm is used, the process is irreversible, and the original file cannot be restored via decompression. This is commonly used to compress media resources, such as image and video content where losing some data will not materially affect the resource.</li>
      <li>Lossless compression is a completely reversible process, and is commonly used to compress text based resources, such as <a href="#markup">HTML</a>, <a href="#javascript">JavaScript</a>, <a href="#css">CSS</a>, etc.</li>
    </ul>
    <p>In this chapter, we are going to explore how text-based content is compressed on the web. Analysis of non-text-based content forms part of the <a href="#media">Media</a> chapter.</p>
    <h2 id="compression-how-http-compression-works"><a href="#compression-how-http-compression-works" class="anchor-link">How HTTP compression works</a></h2>
    <p>
      When a client makes an HTTP request, it often includes an <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding"><code>Accept-Encoding</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding</span></a> header to advertise the compression algorithms it is capable of decoding. The server can then select from one of the advertised encodings it supports and serve a compressed response. The compressed response would include a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding"><code>Content-Encoding</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding</span></a> header so that the client is aware of which compression was used. Additionally, a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type"><code>Content-Type</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type</span></a> header is often used to indicate the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types">MIME type<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types</span></a> of the resource being served.
    </p>
    <p>In the example below, the client advertised support for gzip, brotli, and deflate compression. The server decided to return a gzip compressed response containing a <code>text/html</code> document.</p>
    <pre><code>    &gt; GET / HTTP/1.1
    &gt; Host: httparchive.org
    &gt; Accept-Encoding: gzip, deflate, br

    &lt; HTTP/1.1 200  
    &lt; Content-type: text/html; charset=utf-8
    &lt; Content-encoding: gzip</code></pre>
    <p>The HTTP Archive contains measurements for 5.3 million web sites, and each site loaded at least 1 compressed text resource on their home page. Additionally, resources were compressed on the primary domain on 81% of web sites.</p>
    <h2 id="compression-compression-algorithms"><a href="#compression-compression-algorithms" class="anchor-link">Compression algorithms</a></h2>
    <p>
      IANA maintains a <a href="https://www.iana.org/assignments/http-parameters/http-parameters.xml#content-coding">list of valid HTTP content encodings<span class="fn">https://www.iana.org/assignments/http-parameters/http-parameters.xml#content-coding</span></a> that can be used with the <code>Accept-Encoding</code> and <code>Content-Encoding</code> headers. These include gzip, deflate, br (brotli), as well as a few others. Brief descriptions of these algorithms are given below:
    </p>
    <ul>
      <li>
        <a href="https://tools.ietf.org/html/rfc1952">Gzip<span class="fn">https://tools.ietf.org/html/rfc1952</span></a> uses the <a href="https://en.wikipedia.org/wiki/LZ77_and_LZ78#LZ77">LZ77<span class="fn">https://en.wikipedia.org/wiki/LZ77_and_LZ78#LZ77</span></a> and <a href="https://en.wikipedia.org/wiki/Huffman_coding">Huffman coding<span class="fn">https://en.wikipedia.org/wiki/Huffman_coding</span></a> compression techniques, and is older than the web itself. It was originally developed for the UNIX gzip program in 1992. An implementation for web delivery has existed since HTTP/1.1, and most web browsers and clients support it.
      </li>
      <li>
        <a href="https://tools.ietf.org/html/rfc1951">Deflate<span class="fn">https://tools.ietf.org/html/rfc1951</span></a> uses the same algorithm as gzip, just with a different container. Its use was not widely adopted for the web because of <a href="https://en.wikipedia.org/wiki/HTTP_compression#Problems_preventing_the_use_of_HTTP_compression">compatibility issues<span class="fn">https://en.wikipedia.org/wiki/HTTP_compression#Problems_preventing_the_use_of_HTTP_compression</span></a> with some servers and browsers.
      </li>
      <li>
        <a href="https://tools.ietf.org/html/rfc7932">Brotli<span class="fn">https://tools.ietf.org/html/rfc7932</span></a> is a newer compression algorithm that was <a href="https://github.com/google/brotli">invented by Google<span class="fn">https://github.com/google/brotli</span></a
        >. It uses the combination of a modern variant of the LZ77 algorithm, Huffman coding, and second order context modeling. Compression via brotli is more computationally expensive compared to gzip, but the algorithm is able to reduce files by <a href="https://cran.r-project.org/web/packages/brotli/vignettes/brotli-2015-09-22.pdf">15-25%<span class="fn">https://cran.r-project.org/web/packages/brotli/vignettes/brotli-2015-09-22.pdf</span></a> more than gzip compression. Brotli was first used for compressing web content in 2015 and is <a href="https://caniuse.com/#feat=brotli">supported by all modern web browsers<span class="fn">https://caniuse.com/#feat=brotli</span></a
        >.
      </li>
    </ul>
    <p>Approximately 38% of HTTP responses are delivered with text-based compression. This may seem like a surprising statistic, but keep in mind that it is based on all HTTP requests in the dataset. Some content, such as images, will not benefit from these compression algorithms. The table below summarizes the percentage of requests served with each content encoding.</p>
    <figure id="compression-fig-1">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="colgroup" colspan="2">Percent of Requests</th>
                <th scope="colgroup" colspan="2">Requests</th>
              </tr>
              <tr>
                <th scope="col">Content Encoding</th>
                <th scope="col">Desktop</th>
                <th scope="col">Mobile</th>
                <th scope="col">Desktop</th>
                <th scope="col">Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><em>No Text Compression</em></td>
                <td class="numeric">62.87%</td>
                <td class="numeric">61.47%</td>
                <td class="numeric">260,245,106</td>
                <td class="numeric">285,158,644</td>
              </tr>
              <tr>
                <td>gzip</td>
                <td class="numeric">29.66%</td>
                <td class="numeric">30.95%</td>
                <td class="numeric">122,789,094</td>
                <td class="numeric">143,549,122</td>
              </tr>
              <tr>
                <td>br</td>
                <td class="numeric">7.43%</td>
                <td class="numeric">7.55%</td>
                <td class="numeric">30,750,681</td>
                <td class="numeric">35,012,368</td>
              </tr>
              <tr>
                <td>deflate</td>
                <td class="numeric">0.02%</td>
                <td class="numeric">0.02%</td>
                <td class="numeric">68,802</td>
                <td class="numeric">70,679</td>
              </tr>
              <tr>
                <td><em>Other / Invalid</em></td>
                <td class="numeric">0.02%</td>
                <td class="numeric">0.01%</td>
                <td class="numeric">67,527</td>
                <td class="numeric">68,352</td>
              </tr>
              <tr>
                <td>identity</td>
                <td class="numeric">0.000709%</td>
                <td class="numeric">0.000563%</td>
                <td class="numeric">2,935</td>
                <td class="numeric">2,611</td>
              </tr>
              <tr>
                <td>x-gzip</td>
                <td class="numeric">0.000193%</td>
                <td class="numeric">0.000179%</td>
                <td class="numeric">800</td>
                <td class="numeric">829</td>
              </tr>
              <tr>
                <td>compress</td>
                <td class="numeric">0.000008%</td>
                <td class="numeric">0.000007%</td>
                <td class="numeric">33</td>
                <td class="numeric">32</td>
              </tr>
              <tr>
                <td>x-compress</td>
                <td class="numeric">0.000002%</td>
                <td class="numeric">0.000006%</td>
                <td class="numeric">8</td>
                <td class="numeric">29</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#compression-fig-1" class="anchor-link">Figure 1.</a> Adoption of compression algorithms.</figcaption>
    </figure>
    <p>Of the resources that are served compressed, the majority are using either gzip (80%) or brotli (20%). The other compression algorithms are infrequently used.</p>
    <figure id="compression-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig2.png">
        <img src="/static/images/2019/compression/fig2.png" alt="Figure 2. Adoption of compression algorithms on desktop pages." aria-labelledby="compression-fig2-caption" aria-describedby="compression-fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=2052550005&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="compression-fig2-description" class="visually-hidden">Pie chart of the data table in Figure 1.</div>
      <figcaption id="compression-fig2-caption"><a href="#compression-fig-2" class="anchor-link">Figure 2.</a> Adoption of compression algorithms on desktop pages.</figcaption>
    </figure>
    <p>Additionally, there are 67k requests that return an invalid <code>Content-Encoding</code>, such as "none", "UTF-8", "base64", "text", etc. These resources are likely served uncompressed.</p>
    <p>We can't determine the compression levels from any of the diagnostics collected by the HTTP Archive, but the best practice for compressing content is:</p>
    <ul>
      <li>
        At a minimum, enable gzip compression level 6 for text based assets. This provides a fair trade-off between computational cost and compression ratio and is the <a href="https://paulcalvano.com/index.php/2018/07/25/brotli-compression-how-much-will-it-reduce-your-content/">default for many web servers<span class="fn">https://paulcalvano.com/index.php/2018/07/25/brotli-compression-how-much-will-it-reduce-your-content/</span></a
        >though <a href="http://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_comp_level">Nginx still defaults to the, often too low, level 1<span class="fn">http://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_comp_level</span></a
        >.
      </li>
      <li>If you can support brotli and precompress resources, then compress to brotli level 11. This is more computationally expensive than gzip - so precompression is an absolute must to avoid delays.</li>
      <li>If you can support brotli and are unable to precompress, then compress to brotli level 5. This level will result in smaller payloads compared to gzip, with a similar computational overhead.</li>
    </ul>
    <h2 id="compression-what-types-of-content-are-we-compressing"><a href="#compression-what-types-of-content-are-we-compressing" class="anchor-link">What types of content are we compressing?</a></h2>
    <p>Most text based resources (such as HTML, CSS, and JavaScript) can benefit from gzip or brotli compression. However, it's often not necessary to use these compression techniques on binary resources, such as images, video, and some web fonts because their file formats are already compressed.</p>
    <p>In the graph below, the top 25 content types are displayed with box sizes representing the relative number of requests. The color of each box represents how many of these resources were served compressed. Most of the media content is shaded orange, which is expected since gzip and brotli would have little to no benefit for them. Most of the text content is shaded blue to indicate that they are being compressed. However, the light blue shading for some content types indicate that they are not compressed as consistently as the others.</p>
    <figure id="compression-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig3.png">
        <img src="/static/images/2019/compression/fig3.png" alt="Figure 3. Top 25 compressed content types." aria-labelledby="compression-fig3-caption" aria-describedby="compression-fig3-description" width="780" height="482" data-width="780" data-height="482" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=1790056981&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="compression-fig3-description" class="visually-hidden">Treemap chart showing image/jpeg (167,912,373 requests - 3.23% compressed), application/javascript (121,058,259 requests - 81.29% compressed), image/png (113,530,400 requests - 3.81% compressed), text/css (86,634,570 requests - 81.81% compressed), text/html (81,975,252 requests - 43.44% compressed), image/gif (70,838,761 requests - 3.87% compressed), text/javascript (60,645,767 requests - 89.52% compressed), application/x-javascript (38,816,387 requests - 91.02% compressed), font/woff2 (22,622,918 requests - 3.87% compressed), application/json (16,501,326 requests - 59.02% compressed), image/webp (12,911,688 requests - 1.66% compressed), image/svg+xml (9,862,643 requests - 64.42% compressed), text/plain (6,622,361 requests - 24.72% compressed), application/octet-stream (3,884,287 requests - 6.01% compressed), image/x-icon (3,737,030 requests - 37.60% compressed), application/font-woff2 (3,061,857 requests - 5.90% compressed), application/font-woff (2,117,999 requests - 23.61% compressed), image/vnd.microsoft.icon (1,774,995 requests - 15.55% compressed), video/mp4 (1,472,880 requests - 0.03% compressed), font/woff (1,255,093 requests - 24.33% compressed), font/ttf (1,062,747 requests - 84.27% compressed), application/x-font-woff (1,048,398 requests - 30.77% compressed), image/jpg (951,610 requests - 6.66% compressed), application/ocsp-response (883,603 requests - 0.00% compressed).</div>
      <figcaption id="compression-fig3-caption"><a href="#compression-fig-3" class="anchor-link">Figure 3.</a> Top 25 compressed content types.</figcaption>
    </figure>
    <p>Filtering out the eight most popular content types allows us to see the compression stats for the rest of these content types more clearly.</p>
    <figure id="compression-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig4.png">
        <img src="/static/images/2019/compression/fig4.png" alt="Figure 4. Compressed content types, excluding top 8." aria-labelledby="compression-fig4-caption" aria-describedby="compression-fig4-description" width="780" height="482" data-width="780" data-height="482" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=495358423&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="compression-fig4-description" class="visually-hidden">Treemap chart showing font/woff2 (22,622,918 requests - 3.87% compressed), application/json (16,501,326 requests - 59.02% compressed), image/webp (12,911,688 requests - 1.66% compressed), image/svg+xml (9,862,643 requests - 64.42% compressed), text/plain (6,622,361 requests - 24.72% compressed), application/octet-stream (3,884,287 requests - 6.01% compressed), image/x-icon (3,737,030 requests - 37.60% compressed), application/font-woff2 (3,061,857 requests - 5.90% compressed), application/font-woff (2,117,999 requests - 23.61% compressed), image/vnd.microsoft.icon (1,774,995 requests - 15.55% compressed), video/mp4 (1,472,880 requests - 0.03% compressed), font/woff (1,255,093 requests - 24.33% compressed), font/ttf (1,062,747 requests - 84.27% compressed), application/x-font-woff (1,048,398 requests - 30.77% compressed), image/jpg (951,610 requests - 6.66% compressed), application/ocsp-response (883,603 requests - 0.00% compressed)</div>
      <figcaption id="compression-fig4-caption"><a href="#compression-fig-4" class="anchor-link">Figure 4.</a> Compressed content types, excluding top 8.</figcaption>
    </figure>
    <p>The <code>application/json</code> and <code>image/svg+xml</code> content types are compressed less than 65% of the time.</p>
    <p>Most of the custom web fonts are served without compression, since they are already in a compressed format. However, <code>font/ttf</code> is compressible, but only 84% of TTF font requests are being served with compression so there is still room for improvement here.</p>
    <p>The graphs below illustrate the breakdown of compression techniques used for each content type. Looking at the top three content types, we can see that across both desktop and mobile there are major gaps in compressing some of the most frequently requested content types. 56% of <code>text/html</code> as well as 18% of <code>application/javascript</code> and <code>text/css</code> resources are not being compressed. This presents a significant performance opportunity.</p>
    <figure id="compression-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig5.png">
        <img src="/static/images/2019/compression/fig5.png" alt="Figure 5. Compression by content type for desktop." aria-labelledby="compression-fig5-caption" aria-describedby="compression-fig5-description" width="760" height="470" data-width="760" data-height="470" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=148811764&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="compression-fig5-description" class="visually-hidden">Stacked bar chart showing application/javascript is 36.18 Million/8.97 Million/10.47 Million by compression type (Gzip/Brotli/None), text/css is 24.29 M/8.31 M/7.20 M, text/html is 11.37 M/4.89 M/20.57 M, text/javascript is 23.21 M/1.72 M/3.03 M, application/x-javascript is 11.86 M/4.97 M/1.66 M, application/json is 4.06 M/0.50 M/3.23 M, image/svg+xml is 2.54 M/0.46 M/1.74 M, text/plain is 0.71 M/0.06 M/2.42 M, and image/x-icon is 0.58 M/0.10 M/1.11 M. Deflate is almost never used by any time and does not register on the chart..</div>
      <figcaption id="compression-fig5-caption"><a href="#compression-fig-5" class="anchor-link">Figure 5.</a> Compression by content type for desktop.</figcaption>
    </figure>
    <figure id="compression-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig6.png">
        <img src="/static/images/2019/compression/fig6.png" alt="Figure 6. Compression by content type for mobile." aria-labelledby="compression-fig6-caption" aria-describedby="compression-fig6-description" width="760" height="470" data-width="760" data-height="470" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=2009060762&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="compression-fig6-description" class="visually-hidden">Stacked bar chart showing application/javascript is 43.07 Million/10.17 Million/12.19 Million by compression type (Gzip/Brotli/None), text/css is 28.3 M/9.91 M/8.56 M, text/html is 13.86 M/5.48 M/25.79 M, text/javascript is 27.41 M/1.94 M/3.33 M, application/x-javascript is 12.77 M/5.70 M/1.82 M, application/json is 4.67 M/0.50 M/3.53 M, image/svg+xml is 2.91 M/ 0.44 M/1.77 M, text/plain is 0.80 M/0.06 M/1.77 M, and image/x-icon is 0.62 M/0.11 M/1.22M. Deflate is almost never used by any time and does not register on the chart.</div>
      <figcaption id="compression-fig6-caption"><a href="#compression-fig-6" class="anchor-link">Figure 6.</a> Compression by content type for mobile.</figcaption>
    </figure>
    <p>The content types with the lowest compression rates include <code>application/json</code>, <code>text/xml</code>, and <code>text/plain</code>. These resources are commonly used for XHR requests to provide data that web applications can use to create rich experiences. Compressing them will likely improve user experience. Vector graphics such as <code>image/svg+xml</code>, and <code>image/x-icon</code> are not often thought of as text based, but they are and sites that use them would benefit from compression.</p>
    <figure id="compression-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig7.png">
        <img src="/static/images/2019/compression/fig7.png" alt="Figure 7. Compression by content type as a percent for desktop." aria-labelledby="compression-fig7-caption" aria-describedby="compression-fig7-description" width="760" height="470" data-width="760" data-height="470" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=1923565332&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="compression-fig7-description" class="visually-hidden">Stacked bar chart showing application/javascript is 65.1%/16.1%/18.8% by compression type (Gzip/Brotli/None), text/css is 61.0%/20.9%/18.1%, text/html is 30.9%/13.3%/55.8%, text/javascript is 83.0%/6.1%/10.8%, application/x-javascript is 64.1%/26.9%/9.0%, application/json is 52.1%/6.4%/41.4%, image/svg+xml is 53.5%/9.8%/36.7%, text/plain is 22.2%/2.0%/75.8%, and image/x-icon is 32.6%/5.3%/62.1%. Deflate is almost never used by any time and does not register on the chart.</div>
      <figcaption id="compression-fig7-caption"><a href="#compression-fig-7" class="anchor-link">Figure 7.</a> Compression by content type as a percent for desktop.</figcaption>
    </figure>
    <figure id="compression-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig8.png">
        <img src="/static/images/2019/compression/fig8.png" alt="Figure 8. Compression by content type as a percent for mobile." aria-labelledby="compression-fig6-caption" aria-describedby="compression-fig6-description" width="760" height="470" data-width="760" data-height="470" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=673629979&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="compression-fig8-description" class="visually-hidden">Stacked bar chart showing application/javascript is 65.8%/15.5%/18.6% by compression type (Gzip/Brotli/None), text/css is 60.5%/21.2%/18.3%, text/html is 30.7%/12.1%/57.1%, text/javascript is 83.9%/5.9%/10.2%, application/x-javascript is 62.9%/28.1%/9.0%, application/json is 53.6%/8.6%/34.6%, image/svg+xml is 23.4%/1.8%/74.8%, text/plain is 23.4%/1.8%/74.8%, and image/x-icon is 31.8%/5.5%/62.7%. Deflate is almost never used by any time and does not register on the chart.</div>
      <figcaption id="compression-fig8-caption"><a href="#compression-fig-8" class="anchor-link">Figure 8.</a> Compression by content type as a percent for mobile.</figcaption>
    </figure>
    <p>Across all content types, gzip is the most popular compression algorithm. The newer brotli compression is used less frequently, and the content types where it appears most are <code>application/javascript</code>, <code>text/css</code> and <code>application/x-javascript</code>. This is likely due to CDNs that automatically apply brotli compression for traffic that passes through them.</p>
    <h2 id="compression-first-party-vs-third-party-compression"><a href="#compression-first-party-vs-third-party-compression" class="anchor-link">First-party vs third-party compression</a></h2>
    <p>In the <a href="#third-parties">Third Parties</a> chapter, we learned about third parties and their impact on performance. When we compare compression techniques between first and third parties, we can see that third-party content tends to be compressed more than first-party content.</p>
    <p>Additionally, the percentage of brotli compression is higher for third-party content. This is likely due to the number of resources served from the larger third parties that typically support brotli, such as Google and Facebook.</p>
    <figure id="compression-fig-9">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="colgroup" colspan="2">Desktop</th>
                <th scope="colgroup" colspan="2">Mobile</th>
              </tr>
              <tr>
                <th scope="col">Content Encoding</th>
                <th scope="col">First-Party</th>
                <th scope="col">Third-Party</th>
                <th scope="col">First-Party</th>
                <th scope="col">Third-Party</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><em>No Text Compression</em></td>
                <td class="numeric">66.23%</td>
                <td class="numeric">59.28%</td>
                <td class="numeric">64.54%</td>
                <td class="numeric">58.26%</td>
              </tr>
              <tr>
                <td>gzip</td>
                <td class="numeric">29.33%</td>
                <td class="numeric">30.20%</td>
                <td class="numeric">30.87%</td>
                <td class="numeric">31.22%</td>
              </tr>
              <tr>
                <td>br</td>
                <td class="numeric">4.41%</td>
                <td class="numeric">10.49%</td>
                <td class="numeric">4.56%</td>
                <td class="numeric">10.49%</td>
              </tr>
              <tr>
                <td>deflate</td>
                <td class="numeric">0.02%</td>
                <td class="numeric">0.01%</td>
                <td class="numeric">0.02%</td>
                <td class="numeric">0.01%</td>
              </tr>
              <tr>
                <td><em>Other / Invalid</em></td>
                <td class="numeric">0.01%</td>
                <td class="numeric">0.02%</td>
                <td class="numeric">0.01%</td>
                <td class="numeric">0.02%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#compression-fig-9" class="anchor-link">Figure 9.</a> First-party versus third-party compression by device type.</figcaption>
    </figure>
    <h2 id="compression-identifying-compression-opportunities"><a href="#compression-identifying-compression-opportunities" class="anchor-link">Identifying compression opportunities</a></h2>
    <p>
      Google's <a href="https://developers.google.com/web/tools/lighthouse">Lighthouse<span class="fn">https://developers.google.com/web/tools/lighthouse</span></a> tool enables users to run a series of audits against web pages. The <a href="https://developers.google.com/web/tools/lighthouse/audits/text-compression">text compression audit<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/text-compression</span></a> evaluates whether a site can benefit from additional text-based compression. It does this by attempting to compress resources and evaluate whether an object's size can be reduced by at least 10% and 1,400 bytes. Depending on the score, you may see a compression recommendation in the results, with a list of specific resources that could be compressed.
    </p>
    <figure id="compression-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/ch15_fig8_lighthouse.jpg">
        <img src="/static/images/2019/compression/ch15_fig8_lighthouse.jpg" alt="Figure 10. Lighthouse compression suggestions" aria-labelledby="compression-fig10-caption" aria-describedby="compression-fig10-description" width="600" height="303" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="compression-fig10-description" class="visually-hidden">A screenshot of a Lighthouse report showing a list of resources (with the names redacted) and showing the size and the potential saving. For the first item there is a potentially significant saving from 91 KB to 73 KB, while for other smaller files of 6 KB or less there are smaller savings of 4 KB to 1 KB.</div>
      <figcaption id="compression-fig10-caption"><a href="#compression-fig-10" class="anchor-link">Figure 10.</a> Lighthouse compression suggestions.</figcaption>
    </figure>
    <p>Because the <a href="#methodology-lighthouse">HTTP Archive runs Lighthouse audits</a> for each mobile page, we can aggregate the scores across all sites to learn how much opportunity there is to compress more content. Overall, 62% of websites are passing this audit and almost 23% of websites have scored below a 40. This means that over 1.2 million websites could benefit from enabling additional text based compression.</p>
    <figure id="compression-fig-11">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig11.png">
        <img src="/static/images/2019/compression/fig11.png" alt="Figure 11. Lighthouse 'enable text compression' audit scores." aria-labelledby="compression-fig11-caption" aria-describedby="compression-fig11-description" width="760" height="331" data-width="760" data-height="331" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=2048155673&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig11-description" data-show-text="{{ show_description(11) }}" data-hide-text="{{ hide_description(11) }}">{{ show_description(11) }}</button>
      <div id="compression-fig11-description" class="visually-hidden">Stacked bar chart showing 7.6% are costing less than 10%, 13.2% of sites are scoring between 10-39%, 13.7% of sites scoring between 40-79%, 2.9% of sites scoring between 80-99%, and 62.5% of sites have a pass with over 100% of text assets being compressed.</div>
      <figcaption id="compression-fig11-caption"><a href="#compression-fig-11" class="anchor-link">Figure 11.</a> Lighthouse "enable text compression" audit scores.</figcaption>
    </figure>
    <p>Lighthouse also indicates how many bytes could be saved by enabling text-based compression. Of the sites that could benefit from text compression, 82% of them can reduce their page weight by up to 1 MB!</p>
    <figure id="compression-fig-12">
      <a href="https://almanac.httparchive.org/static/images/2019/compression/fig12.png">
        <img src="/static/images/2019/compression/fig12.png" alt="Figure 12. Lighthouse 'enable text compression' audit potential byte savings." aria-labelledby="compression-fig12-caption" aria-describedby="compression-fig12-description" width="760" height="331" data-width="760" data-height="331" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQNIyMEGYE_1W0OdFYLIKsxg6M3o_ZsTTuaX73Zzv6Alw4x4D6oH0jdg9BSgw-jy4E-MmX_Qaf-B98W/pubchart?oid=738657382&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="compression-fig12-description" class="visually-hidden">Stacked bar chart showing 82.11% of sites could save less than 1 Mb, 15.88% of sites could save 1 - 2 Mb and 2% of sites could save &gt; 3 MB.</div>
      <figcaption id="compression-fig12-caption"><a href="#compression-fig-12" class="anchor-link">Figure 12.</a> Lighthouse "enable text compression" audit potential byte savings.</figcaption>
    </figure>
    <h2 id="compression-conclusion"><a href="#compression-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>HTTP compression is a widely used and highly valuable feature for reducing the size of web content. Both gzip and brotli compression are the dominant algorithms used, and the amount of compressed content varies by content type. Tools like Lighthouse can help uncover opportunities to compress content.</p>
    <p>While many sites are making good use of HTTP compression, there is still room for improvement, particularly for the <code>text/html</code> format that the web is built upon! Similarly, lesser-understood text formats like <code>font/ttf</code>, <code>application/json</code>, <code>text/xml</code>, <code>text/plain</code>, <code>image/svg+xml</code>, and <code>image/x-icon</code> may take extra configuration that many websites miss.</p>
    <p>At a minimum, websites should use gzip compression for all text-based resources, since it is widely supported, easily implemented, and has a low processing overhead. Additional savings can be found with brotli compression, although compression levels should be chosen carefully based on whether a resource can be precompressed.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"IV","chapter_number":16,"title":"Caching","description":"Caching chapter of the 2019 Web Almanac covering cache-control, expires, TTLs, validitaty, vary, set-cookies, AppCache, Service Workers and opportunities.","authors":["paulcalvano"],"reviewers":["obto","bkardell"],"translators":null,"discuss":"1771","results":"https://docs.google.com/spreadsheets/d/1mnq03DqrRBwxfDV05uEFETK0_hPbYOynWxZkV3tFgNk/","queries":"16_Caching","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-07-06T00:00:00.000Z","chapter":"caching"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="caching-introduction"><a href="#caching-introduction" class="anchor-link">Introduction</a></h2>
    <p>Caching is a technique that enables the reuse of previously downloaded content. It provides a significant <a href="#performance">performance</a> benefit by avoiding costly network requests and it also helps scale an application by reducing the traffic to a website's origin infrastructure. There's an old saying, "the fastest request is the one that you don't have to make," and caching is one of the key ways to avoid having to make requests.</p>
    <p>There are three guiding principles to caching web content: cache as much as you can, for as long as you can, as close as you can to end users.</p>
    <p><strong>Cache as much as you can.</strong> When considering how much can be cached, it is important to understand whether a response is static or dynamic. Requests that are served as a static response are typically cacheable, as they have a one-to-many relationship between the resource and the users requesting it. Dynamically generated content can be more nuanced and require careful consideration.</p>
    <p><strong>Cache for as long as you can.</strong> The length of time you would cache a resource is highly dependent on the sensitivity of the content being cached. A versioned JavaScript resource could be cached for a very long time, while a non-versioned resource may need a shorter cache duration to ensure users get a fresh version.</p>
    <p><strong>Cache as close to end users as you can.</strong> Caching content close to the end user reduces download times by removing latency. For example, if a resource is cached on an end user's browser, then the request never goes out to the network and the download time is as fast as the machine's I/O. For first time visitors, or visitors that don't have entries in their cache, a CDN would typically be the next place a cached resource is returned from. In most cases, it will be faster to fetch a resource from a local cache or a CDN compared to an origin server.</p>
    <p>
      Web architectures typically involve <a href="https://blog.yoav.ws/tale-of-four-caches/">multiple tiers of caching<span class="fn">https://blog.yoav.ws/tale-of-four-caches/</span></a
      >. For example, an HTTP request may have the opportunity to be cached in:
    </p>
    <ul>
      <li>An end user's browser</li>
      <li>A service worker cache in the user's browser</li>
      <li>A shared gateway</li>
      <li>CDNs, which offer the ability to cache at the edge, close to end users</li>
      <li>A caching proxy in front of the application, to reduce the backend workload</li>
      <li>The application and database layers</li>
    </ul>
    <p>This chapter will explore how resources are cached within web browsers.</p>
    <h2 id="caching-overview-of-http-caching"><a href="#caching-overview-of-http-caching" class="anchor-link">Overview of HTTP caching</a></h2>
    <p>For an HTTP client to cache a resource, it needs to understand two pieces of information:</p>
    <ul>
      <li>"How long am I allowed to cache this for?"</li>
      <li>"How do I validate that the content is still fresh?"</li>
    </ul>
    <p>
      When a web browser sends a response to a client, it typically includes headers that indicate whether the resource is cacheable, how long to cache it for, and how old the resource is. RFC 7234 covers this in more detail in section <a href="https://tools.ietf.org/html/rfc7234#section-4.2">4.2 (Freshness)<span class="fn">https://tools.ietf.org/html/rfc7234#section-4.2</span></a> and <a href="https://tools.ietf.org/html/rfc7234#section-4.3">4.3 (Validation)<span class="fn">https://tools.ietf.org/html/rfc7234#section-4.3</span></a
      >.
    </p>
    <p>The HTTP response headers typically used for conveying freshness lifetime are:</p>
    <ul>
      <li><code>Cache-Control</code> allows you to configure a cache lifetime duration (i.e. how long this is valid for).</li>
      <li><code>Expires</code> provides an expiration date or time (i.e. when exactly this expires).</li>
    </ul>
    <p><code>Cache-Control</code> takes priority if both are present. These are <a href="#caching-cache-control-vs-expires">discussed in more detail below</a>.</p>
    <p>The HTTP response headers for validating the responses stored within the cache, i.e. giving conditional requests something to compare to on the server side, are:</p>
    <ul>
      <li><code>Last-Modified</code> indicates when the object was last changed.</li>
      <li>Entity Tag (<code>ETag</code>) provides a unique identifier for the content.</li>
    </ul>
    <p><code>ETag</code> takes priority if both are present. These are <a href="#caching-validating-freshness">discussed in more detail below</a>.</p>
    <p>The example below contains an excerpt of a request/response header from HTTP Archive's main.js file. These headers indicate that the resource can be cached for 43,200 seconds (12 hours), and it was last modified more than two months ago (difference between the <code>Last-Modified</code> and <code>Date</code> headers).</p>
    <pre><code>&gt; GET /static/js/main.js HTTP/1.1
&gt; Host: httparchive.org
&gt; User-agent: curl/7.54.0
&gt; Accept: */*

&lt; HTTP/1.1 200
&lt; Date: Sun, 13 Oct 2019 19:36:57 GMT
&lt; Content-Type: application/javascript; charset=utf-8
&lt; Content-Length: 3052
&lt; Vary: Accept-Encoding
&lt; Server: gunicorn/19.7.1
&lt; Last-Modified: Sun, 25 Aug 2019 16:00:30 GMT
&lt; Cache-Control: public, max-age=43200
&lt; Expires: Mon, 14 Oct 2019 07:36:57 GMT
&lt; ETag: "1566748830.0-3052-3932359948"</code></pre>
    <p>
      The tool <a href="https://redbot.org/">RedBot.org<span class="fn">https://redbot.org/</span></a> allows you to input a URL and see a detailed explanation of how the response would be cached based on these headers. For example, <a href="https://redbot.org/?uri=https%3A%2F%2Fhttparchive.org%2Fstatic%2Fjs%2Fmain.js">a test for the URL above<span class="fn">https://redbot.org/?uri=https%3A%2F%2Fhttparchive.org%2Fstatic%2Fjs%2Fmain.js</span></a> would output the following:
    </p>
    <figure id="caching-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/ch16_fig1_redbot_example.jpg">
        <img alt="Figure 1. Cache-Control information from RedBot." src="/static/images/2019/caching/ch16_fig1_redbot_example.jpg" aria-labelledby="caching-fig10-caption" aria-describedby="caching-fig10-description" width="600" height="138" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="caching-fig1-description" class="visually-hidden">Redbot example response showing detailed information about when the resource was changed, whether caches can store it, how long it can be considered fresh for and warnings.</div>
      <figcaption id="caching-fig1-caption"><a href="#caching-fig-1" class="anchor-link">Figure 1.</a> <code>Cache-Control</code> information from RedBot.</figcaption>
    </figure>
    <p>
      If no caching headers are present in a response, then the <a href="https://paulcalvano.com/index.php/2018/03/14/http-heuristic-caching-missing-cache-control-and-expires-headers-explained/">client is permitted to heuristically cache the response<span class="fn">https://paulcalvano.com/index.php/2018/03/14/http-heuristic-caching-missing-cache-control-and-expires-headers-explained/</span></a
      >. Most clients implement a variation of the RFC's suggested heuristic, which is 10% of the time since <code>Last-Modified</code>. However, some may cache the response indefinitely. So, it is important to set specific caching rules to ensure that you are in control of the cacheability.
    </p>
    <p>72% of responses are served with a <code>Cache-Control</code> header, and 56% of responses are served with an <code>Expires</code> header. However, 27% of responses did not use either header, and therefore are subject to heuristic caching. This is consistent across both desktop and mobile sites.</p>
    <figure id="caching-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig2.png">
        <img src="/static/images/2019/caching/fig2.png" alt="Figure 2. Presence of HTTP Cache-Control and Expires headers." aria-labelledby="caching-fig2-caption" aria-describedby="caching-fig2-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=1611664016&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="caching-fig2-description" class="visually-hidden">Two identical bar charts for mobile and desktop showing 72% of requests use Cache-Control headers, 56% use Expires and the 27% use neither.</div>
      <figcaption id="caching-fig2-caption"><a href="#caching-fig-2" class="anchor-link">Figure 2.</a> Presence of HTTP <code>Cache-Control</code> and <code>Expires</code> headers.</figcaption>
    </figure>
    <h2 id="caching-what-type-of-content-are-we-caching"><a href="#caching-what-type-of-content-are-we-caching" class="anchor-link">What type of content are we caching?</a></h2>
    <p>A cacheable resource is stored by the client for a period of time and available for reuse on a subsequent request. Across all HTTP requests, 80% of responses are considered cacheable, meaning that a cache is permitted to store them. Out of these,</p>
    <ul>
      <li>6% of requests have a time to live (TTL) of 0 seconds, which immediately invalidates a cached entry.</li>
      <li>27% are cached heuristically because of a missing <code>Cache-Control</code> header.</li>
      <li>47% are cached for more than 0 seconds.</li>
    </ul>
    <p>The remaining responses are not permitted to be stored in browser caches.</p>
    <figure id="caching-fig-3">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig3.png">
        <img src="/static/images/2019/caching/fig3.png" alt="Figure 3. Distribution of cacheable responses." aria-labelledby="caching-fig3-caption" aria-describedby="caching-fig3-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=1868559586&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig3-description" data-show-text="{{ show_description(3) }}" data-hide-text="{{ hide_description(3) }}">{{ show_description(3) }}</button>
      <div id="caching-fig3-description" class="visually-hidden">A stacked bar chart showing 20% of desktop responses are not cacheable, 47% have a cache greater than zero, 27% are heuristically cached and 6% have a TTL of 0. The stats for mobile are very similar (19%, 47%, 27% and 7%)</div>
      <figcaption id="caching-fig3-caption"><a href="#caching-fig-3" class="anchor-link">Figure 3.</a> Distribution of cacheable responses.</figcaption>
    </figure>
    <p>The table below details the cache TTL values for desktop requests by type. Most content types are being cached however CSS resources appear to be consistently cached at high TTLs.</p>
    <figure id="caching-fig-4">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="colgroup" colspan="5">Desktop Cache TTL Percentiles (Hours)</th>
              </tr>
              <tr>
                <td></td>
                <th scope="col">10</th>
                <th scope="col">25</th>
                <th scope="col">50</th>
                <th scope="col">75</th>
                <th scope="col">90</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">Audio</th>
                <td class="numeric">12</td>
                <td class="numeric">24</td>
                <td class="numeric">720</td>
                <td class="numeric">8,760</td>
                <td class="numeric">8,760</td>
              </tr>
              <tr>
                <th scope="row">CSS</th>
                <td class="numeric">720</td>
                <td class="numeric">8,760</td>
                <td class="numeric">8,760</td>
                <td class="numeric">8,760</td>
                <td class="numeric">8,760</td>
              </tr>
              <tr>
                <th scope="row">Font</th>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">3</td>
                <td class="numeric">336</td>
                <td class="numeric">8,760</td>
                <td class="numeric">87,600</td>
              </tr>
              <tr>
                <th scope="row">HTML</th>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">168</td>
                <td class="numeric">720</td>
                <td class="numeric">8,760</td>
                <td class="numeric">8,766</td>
              </tr>
              <tr>
                <th scope="row">Image</th>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">1</td>
                <td class="numeric">28</td>
                <td class="numeric">48</td>
                <td class="numeric">8,760</td>
              </tr>
              <tr>
                <th scope="row">Other</th>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">2</td>
                <td class="numeric">336</td>
                <td class="numeric">8,760</td>
                <td class="numeric">8,760</td>
              </tr>
              <tr>
                <th scope="row">Script</th>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">1</td>
                <td class="numeric">6</td>
                <td class="numeric">720</td>
              </tr>
              <tr>
                <th scope="row">Text</th>
                <td class="numeric">21</td>
                <td class="numeric">336</td>
                <td class="numeric">7,902</td>
                <td class="numeric">8,357</td>
                <td class="numeric">8,740</td>
              </tr>
              <tr>
                <th scope="row">Video</th>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">4</td>
                <td class="numeric">24</td>
                <td class="numeric">24</td>
                <td class="numeric">336</td>
              </tr>
              <tr>
                <th scope="row">XML</th>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">&lt; 1</td>
                <td class="numeric">&lt; 1</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#caching-fig-4" class="anchor-link">Figure 4.</a> Desktop cache TTL percentiles by resource type.</figcaption>
    </figure>
    <p>While most of the median TTLs are high, the lower percentiles highlight some of the missed caching opportunities. For example, the median TTL for images is 28 hours, however the 25th percentile is just one-two hours and the 10th percentile indicates that 10% of cacheable image content is cached for less than one hour.</p>
    <p>By exploring the cacheability by content type in more detail in figure 5 below, we can see that approximately half of all HTML responses are considered non-cacheable. Additionally, 16% of images and scripts are non-cacheable.</p>
    <figure id="caching-fig-5">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig5.png">
        <img src="/static/images/2019/caching/fig5.png" alt="Figure 5. Distribution of cacheability by content type for desktop." aria-labelledby="caching-fig5-caption" aria-describedby="caching-fig5-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=1493610744&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig5-description" data-show-text="{{ show_description(5) }}" data-hide-text="{{ hide_description(5) }}">{{ show_description(5) }}</button>
      <div id="caching-fig5-description" class="visually-hidden">A stacked bar chart showing the split of not cacheable, cached more than 0 seconds and cached for only 0 seconds by type for desktop. A small, but significant proportion are not cacheable and this goes up to 50% for HTML, most have caching greater than 0 and a smaller amount has a 0 TTL</div>
      <figcaption id="caching-fig5-caption"><a href="#caching-fig-5" class="anchor-link">Figure 5.</a> Distribution of cacheability by content type for desktop.</figcaption>
    </figure>
    <p>The same data for mobile is shown below. As can be seen, the cacheability of content types is consistent between desktop and mobile.</p>
    <figure id="caching-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig6.png">
        <img src="/static/images/2019/caching/fig6.png" alt="Figure 6. Distribution of cacheability by content type for mobile." aria-labelledby="caching-fig6-caption" aria-describedby="caching-fig6-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=1713903788&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="caching-fig6-description" class="visually-hidden">A stacked bar chart showing the split of not cacheable, cached more than 0 seconds and cached for only 0 seconds by type for mobile. A small, but significant proportion are not cacheable and this goes up to 50% for HTML, most have caching greater than 0 and a smaller amount has a 0 TTL</div>
      <figcaption id="caching-fig6-caption"><a href="#caching-fig-6" class="anchor-link">Figure 6.</a> Distribution of cacheability by content type for mobile.</figcaption>
    </figure>
    <h2 id="caching-cache-control-vs-expires"><a href="#caching-cache-control-vs-expires" class="anchor-link">Cache-Control vs Expires</a></h2>
    <p>In HTTP/1.0, the <code>Expires</code> header was used to indicate the date/time after which the response is considered stale. Its value is a date timestamp, such as:</p>
    <p><code>Expires: Thu, 01 Dec 1994 16:00:00 GMT</code></p>
    <p>HTTP/1.1 introduced the <code>Cache-Control</code> header, and most modern clients support both headers. This header provides much more extensibility via caching directives. For example:</p>
    <ul>
      <li><code>no-store</code> can be used to indicate that a resource should not be cached.</li>
      <li><code>max-age</code> can be used to indicate a freshness lifetime.</li>
      <li><code>must-revalidate</code> tells the client a cached entry must be validated with a conditional request prior to its use.</li>
      <li><code>private</code> indicates a response should only be cached by a browser, and not by an intermediary that would serve multiple clients.</li>
    </ul>
    <p>53% of HTTP responses include a <code>Cache-Control</code> header with the <code>max-age</code> directive, and 54% include the Expires header. However, only 41% of these responses use both headers, which means that 13% of responses are caching solely based on the older <code>Expires</code> header.</p>
    <figure id="caching-fig-7">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig7.png">
        <img src="/static/images/2019/caching/fig7.png" alt="Figure 7. Usage of Cache-Control versus Expires headers." aria-labelledby="caching-fig7-caption" aria-describedby="caching-fig7-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=1909701542&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig7-description" data-show-text="{{ show_description(7) }}" data-hide-text="{{ hide_description(7) }}">{{ show_description(7) }}</button>
      <div id="caching-fig7-description" class="visually-hidden">A bar chart showing 53% of responses have a `Cache-Control: max-age`, 54%-55% use `Expires`, 41%-42% use both, and 34% use neither. The figures are given for both desktop and mobile but the figures are near identical with mobile having a percentage point higher in use of expires.</div>
      <figcaption id="caching-fig7-caption"><a href="#caching-fig-7" class="anchor-link">Figure 7.</a> Usage of <code>Cache-Control</code> versus <code>Expires</code> headers.</figcaption>
    </figure>
    <h2 id="caching-cache-control-directives"><a href="#caching-cache-control-directives" class="anchor-link">Cache-Control directives</a></h2>
    <p>
      The HTTP/1.1 <a href="https://tools.ietf.org/html/rfc7234#section-5.2.1">specification<span class="fn">https://tools.ietf.org/html/rfc7234#section-5.2.1</span></a> includes multiple directives that can be used in the <code>Cache-Control</code> response header and are detailed below. Note that multiple can be used in a single response.
    </p>
    <figure id="caching-fig-8">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Directive</th>
                <th>Description</th>
              </tr>
              <tr>
                <td>max-age</td>
                <td>Indicates the number of seconds that a resource can be cached for.</td>
              </tr>
              <tr>
                <td>public</td>
                <td>Any cache may store the response.</td>
              </tr>
              <tr>
                <td>no-cache</td>
                <td>A cached entry must be revalidated prior to its use.</td>
              </tr>
              <tr>
                <td>must-revalidate</td>
                <td>A stale cached entry must be revalidated prior to its use.</td>
              </tr>
              <tr>
                <td>no-store</td>
                <td>Indicates that a response is not cacheable.</td>
              </tr>
              <tr>
                <td>private</td>
                <td>The response is intended for a specific user and should not be stored by shared caches.</td>
              </tr>
              <tr>
                <td>no-transform</td>
                <td>No transformations or conversions should be made to this resource.</td>
              </tr>
              <tr>
                <td>proxy-revalidate</td>
                <td>Same as must-revalidate but applies to shared caches.</td>
              </tr>
              <tr>
                <td>s-maxage</td>
                <td>Same as max age but applies to shared caches only.</td>
              </tr>
              <tr>
                <td>immutable</td>
                <td>Indicates that the cached entry will never change, and that revalidation is not necessary.</td>
              </tr>
              <tr>
                <td>stale-while-revalidate</td>
                <td>Indicates that the client is willing to accept a stale response while asynchronously checking in the background for a fresh one.</td>
              </tr>
              <tr>
                <td>stale-if-error</td>
                <td>Indicates that the client is willing to accept a stale response if the check for a fresh one fails.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#caching-fig-8" class="anchor-link">Figure 8.</a> <code>Cache-Control</code> directives.</figcaption>
    </figure>
    <p>For example, <code>cache-control: public, max-age=43200</code> indicates that a cached entry should be stored for 43,200 seconds and it can be stored by all caches.</p>
    <figure id="caching-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig9.png">
        <img src="/static/images/2019/caching/fig9.png" alt="Figure 9. Usage of Cache-Control directives on mobile." aria-labelledby="caching-fig9-caption" aria-describedby="caching-fig9-description" width="600" height="662" data-width="600" data-height="662" data-seamless="" data-rameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=1054108345&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="caching-fig9-description" class="visually-hidden">A bar chart of 15 cache control directives and their usage ranging from 74.8% for max-age, 37.8% for public, 27.8% for no-cache, 18% for no-store, 14.3% for private, 3.4% for immutable, 3.3% for no-transform, 2.4% for stale-while-revalidate, 2.2% for pre-check, 2.2% for post-check, 1.9% for s-maxage, 1.6% for proxy-revalidate, 0.3% for set-cookie and 0.2% for stale-if-error. The stats are near identical for desktop and mobile.</div>
      <figcaption id="caching-fig9-caption"><a href="#caching-fig-9" class="anchor-link">Figure 9.</a> Usage of <code>Cache-Control</code> directives on mobile.</figcaption>
    </figure>
    <p>Figure 9 above illustrates the top 15 <code>Cache-Control</code> directives in use on mobile websites. The results for desktop and mobile are very similar. There are a few interesting observations about the popularity of these cache directives:</p>
    <ul>
      <li><code>max-age</code> is used by almost 75% of <code>Cache-Control</code> headers, and <code>no-store</code> is used by 18%.</li>
      <li><code>public</code> is rarely necessary since cached entries are assumed <code>public</code> unless <code>private</code> is specified. Approximately 38% of responses include <code>public</code>.</li>
      <li>
        The <code>immutable</code> directive is relatively new, <a href="https://code.facebook.com/posts/557147474482256/this-browser-tweak-saved-60-of-requests-to-facebook">introduced in 2017<span class="fn">https://code.facebook.com/posts/557147474482256/this-browser-tweak-saved-60-of-requests-to-facebook</span></a> and is <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control#Browser_compatibility">supported on Firefox and Safari<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control#Browser_compatibility</span></a
        >. Its usage has grown to 3.4%, and it is widely used in <a href="https://discuss.httparchive.org/t/cache-control-immutable-a-year-later/1195">Facebook and Google third-party responses<span class="fn">https://discuss.httparchive.org/t/cache-control-immutable-a-year-later/1195</span></a
        >.
      </li>
    </ul>
    <p>
      Another interesting set of directives to show up in this list are <code>pre-check</code> and <code>post-check</code>, which are used in 2.2% of <code>Cache-Control</code> response headers (approximately 7.8 million responses). This pair of headers was <a href="https://blogs.msdn.microsoft.com/ieinternals/2009/07/20/internet-explorers-cache-control-extensions/">introduced in Internet Explorer 5 to provide a background validation<span class="fn">https://blogs.msdn.microsoft.com/ieinternals/2009/07/20/internet-explorers-cache-control-extensions/</span></a> and was rarely implemented correctly by websites. 99.2% of responses using these headers had used the combination of <code>pre-check=0</code> and <code>post-check=0</code>. When both of these directives are set to 0, then both directives are ignored. So, it seems these directives were never used correctly!
    </p>
    <p>In the long tail, there are more than 1,500 erroneous directives in use across 0.28% of responses. These are ignored by clients, and include misspellings such as "nocache", "s-max-age", "smax-age", and "maxage". There are also numerous non-existent directives such as "max-stale", "proxy-public", "surrogate-control", etc.</p>
    <h2 id="caching-cache-control-no-store-no-cache-and-max-age0"><a href="#caching-cache-control-no-store-no-cache-and-max-age0" class="anchor-link">Cache-Control: no-store, no-cache and max-age=0</a></h2>
    <p>When a response is not cacheable, the <code>Cache-Control</code> <code>no-store</code> directive should be used. If this directive is not used, then the response is cacheable.</p>
    <p>There are a few common errors that are made when attempting to configure a response to be non-cacheable:</p>
    <ul>
      <li>Setting <code>Cache-Control: no-cache</code> may sound like the resource will not be cacheable. However, the <code>no-cache</code> directive requires the cached entry to be revalidated prior to use and is not the same as being non-cacheable.</li>
      <li>Setting <code>Cache-Control: max-age=0</code> sets the TTL to 0 seconds, but that is not the same as being non-cacheable. When <code>max-age</code> is set to 0, the resource is stored in the browser cache and immediately invalidated. This results in the browser having to perform a conditional request to validate the resource's freshness.</li>
    </ul>
    <p>Functionally, <code>no-cache</code> and <code>max-age=0</code> are similar, since they both require revalidation of a cached resource. The <code>no-cache</code> directive can also be used alongside a <code>max-age</code> directive that is greater than 0.</p>
    <p>Over 3 million responses include the combination of <code>no-store</code>, <code>no-cache</code>, and <code>max-age=0</code>. Of these directives <code>no-store</code> takes precedence and the other directives are merely redundant</p>
    <p>18% of responses include <code>no-store</code> and 16.6% of responses include both <code>no-store</code> and <code>no-cache</code>. Since <code>no-store</code> takes precedence, the resource is ultimately non-cacheable.</p>
    <p>The <code>max-age=0</code> directive is present on 1.1% of responses (more than four million responses) where <code>no-store</code> is not present. These resources will be cached in the browser but will require revalidation as they are immediately expired.</p>
    <h2 id="caching-how-do-cache-ttls-compare-to-resource-age"><a href="#caching-how-do-cache-ttls-compare-to-resource-age" class="anchor-link">How do cache TTLs compare to resource age?</a></h2>
    <p>So far we've talked about how web servers tell a client what is cacheable, and how long it has been cached for. When designing cache rules, it is also important to understand how old the content you are serving is.</p>
    <p>When you are selecting a cache TTL, ask yourself: "how often are you updating these assets?" and "what is their content sensitivity?". For example, if a hero image is going to be modified infrequently, then cache it with a very long TTL. If you expect a JavaScript resource to change frequently, then version it and cache it with a long TTL or cache it with a shorter TTL.</p>
    <p>
      The graph below illustrates the relative age of resources by content type, and you can read a <a href="https://discuss.httparchive.org/t/analyzing-resource-age-by-content-type/1659">more detailed analysis here<span class="fn">https://discuss.httparchive.org/t/analyzing-resource-age-by-content-type/1659</span></a
      >. HTML tends to be the content type with the shortest age, and a very large % of traditionally cacheable resources (<a href="#javascript">scripts</a>, <a href="#css">CSS</a>, and <a href="#fonts">fonts</a>) are older than one year!
    </p>
    <figure id="caching-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/ch16_fig8_resource_age.jpg">
        <img src="/static/images/2019/caching/ch16_fig8_resource_age.jpg" alt="Figure 10. Resource age distribution by content type." aria-labelledby="caching-fig10-caption" aria-describedby="caching-fig10-description" width="600" height="325" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="caching-fig10-description" class="visually-hidden">A stack bar chart showing the age of content, split into weeks 0-52, &gt; one year and &gt; two years with null and negative figures shown too. The stats are split into first-party and third-party. The value 0 is used most particularly for first-party HTML, text and xml, and for up to 50% of third-party requests across all assets types. There is a mix using intermediary years and then considerable usage for one year and two year.</div>
      <figcaption id="caching-fig10-caption"><a href="#caching-fig-10" class="anchor-link">Figure 10.</a> Resource age distribution by content type.</figcaption>
    </figure>
    <p>By comparing a resources cacheability to its age, we can determine if the TTL is appropriate or too low. For example, the resource served by the response below was last modified on 25 Aug 2019, which means that it was 49 days old at the time of delivery. The <code>Cache-Control</code> header says that we can cache it for 43,200 seconds, which is 12 hours. It is definitely old enough to merit investigating whether a longer TTL would be appropriate.</p>
    <pre><code>&lt; HTTP/1.1 200
&lt; Date: Sun, 13 Oct 2019 19:36:57 GMT
&lt; Content-Type: application/javascript; charset=utf-8
&lt; Content-Length: 3052
&lt; Vary: Accept-Encoding
&lt; Server: gunicorn/19.7.1
&lt; Last-Modified: Sun, 25 Aug 2019 16:00:30 GMT
&lt; Cache-Control: public, max-age=43200
&lt; Expires: Mon, 14 Oct 2019 07:36:57 GMT
&lt; ETag: "1566748830.0-3052-3932359948" </code></pre>
    <p>Overall, 59% of resources served on the web have a cache TTL that is too short compared to its content age. Furthermore, the median delta between the TTL and age is 25 days.</p>
    <p>When we break this out by first vs third-party, we can also see that 70% of first-party resources can benefit from a longer TTL. This clearly highlights a need to spend extra attention focusing on what is cacheable, and then ensuring caching is configured correctly.</p>
    <figure id="caching-fig-11">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Client</th>
                <th>1st Party</th>
                <th>3rd Party</th>
                <th>Overall</th>
              </tr>
              <tr>
                <td>Desktop</td>
                <td class="numeric">70.7%</td>
                <td class="numeric">47.9%</td>
                <td class="numeric">59.2%</td>
              </tr>
              <tr>
                <td>Mobile</td>
                <td class="numeric">71.4%</td>
                <td class="numeric">46.8%</td>
                <td class="numeric">59.6%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#caching-fig-11" class="anchor-link">Figure 11.</a> Percent of requests with short TTLs.</figcaption>
    </figure>
    <h2 id="caching-validating-freshness"><a href="#caching-validating-freshness" class="anchor-link">Validating freshness</a></h2>
    <p>The HTTP response headers used for validating the responses stored within a cache are <code>Last-Modified</code> and <code>ETag</code>. The <code>Last-Modified</code> header does exactly what its name implies and provides the time that the object was last modified. The <code>ETag</code> header provides a unique identifier for the content.</p>
    <p>For example, the response below was last modified on 25 Aug 2019 and it has an <code>ETag</code> value of <code>"1566748830.0-3052-3932359948"</code></p>
    <pre><code>&lt; HTTP/1.1 200
&lt; Date: Sun, 13 Oct 2019 19:36:57 GMT
&lt; Content-Type: application/javascript; charset=utf-8
&lt; Content-Length: 3052
&lt; Vary: Accept-Encoding
&lt; Server: gunicorn/19.7.1
&lt; Last-Modified: Sun, 25 Aug 2019 16:00:30 GMT
&lt; Cache-Control: public, max-age=43200
&lt; Expires: Mon, 14 Oct 2019 07:36:57 GMT
&lt; ETag: "1566748830.0-3052-3932359948"</code></pre>
    <p>A client could send a conditional request to validate a cached entry by using the <code>Last-Modified</code> value in a request header named <code>If-Modified-Since</code>. Similarly, it could also validate the resource with an <code>If-None-Match</code> request header, which validates against the <code>ETag</code> value the client has for the resource in its cache.</p>
    <p>In the example below, the cache entry is still valid, and an <code>HTTP 304</code> was returned with no content. This saves the download of the resource itself. If the cache entry was no longer fresh, then the server would have responded with a <code>200</code> and the updated resource which would have to be downloaded again.</p>
    <pre><code>&gt; GET /static/js/main.js HTTP/1.1
&gt; Host: www.httparchive.org
&gt; User-Agent: curl/7.54.0
&gt; Accept: */*
&gt; If-Modified-Since: Sun, 25 Aug 2019 16:00:30 GMT

&lt; HTTP/1.1 304
&lt; Date: Thu, 17 Oct 2019 02:31:08 GMT
&lt; Server: gunicorn/19.7.1
&lt; Cache-Control: public, max-age=43200
&lt; Expires: Thu, 17 Oct 2019 14:31:08 GMT
&lt; ETag: "1566748830.0-3052-3932359948"
&lt; Accept-Ranges: bytes</code></pre>
    <p>Overall, 65% of responses are served with a <code>Last-Modified</code> header, 42% are served with an <code>ETag</code>, and 38% use both. However, 30% of responses include neither a <code>Last-Modified</code> or <code>ETag</code> header.</p>
    <figure id="caching-fig-12">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig12.png">
        <img src="/static/images/2019/caching/fig12.png" alt="Figure 12. Adoption of validating freshness via Last-Modified and ETa` headers for desktop websites." aria-labelledby="caching-fig12-caption" aria-describedby="caching-fig12-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=20297100&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig12-description" data-show-text="{{ show_description(12) }}" data-hide-text="{{ hide_description(12) }}">{{ show_description(12) }}</button>
      <div id="caching-fig12-description" class="visually-hidden">A bar chart showing 64.4% of desktop requests have a last modified, 42.8% have an ETag, 37.9% have both and 30.7% have neither. The stats for mobile are almost identical at 65.3% for Last Modified, 42.8% for ETag, 38.0% for both and 29.9% for neither.</div>
      <figcaption id="caching-fig12-caption"><a href="#caching-fig-12" class="anchor-link">Figure 12.</a> Adoption of validating freshness via <code>Last-Modified</code> and <code>ETag</code> headers for desktop websites.</figcaption>
    </figure>
    <h2 id="caching-validity-of-date-strings"><a href="#caching-validity-of-date-strings" class="anchor-link">Validity of date strings</a></h2>
    <p>There are a few HTTP headers used to convey timestamps, and the format for these are very important. The <code>Date</code> response header indicates when the resource was served to a client. The <code>Last-Modified</code> response header indicates when a resource was last changed on the server. And the <code>Expires</code> header is used to indicate how long a resource is cacheable until (unless a <code>Cache-Control</code> header is present).</p>
    <p>All three of these HTTP headers use a date formatted string to represent timestamps.</p>
    <p>For example:</p>
    <pre><code>&gt; GET /static/js/main.js HTTP/1.1
&gt; Host: httparchive.org
&gt; User-Agent: curl/7.54.0
&gt; Accept: */*

&lt; HTTP/1.1 200
&lt; Date: Sun, 13 Oct 2019 19:36:57 GMT
&lt; Content-Type: application/javascript; charset=utf-8
&lt; Content-Length: 3052
&lt; Vary: Accept-Encoding
&lt; Server: gunicorn/19.7.1
&lt; Last-modified: Sun, 25 Aug 2019 16:00:30 GMT
&lt; Cache-Control: public, max-age=43200
&lt; Expires: Mon, 14 Oct 2019 07:36:57 GMT
&lt; ETag: "1566748830.0-3052-3932359948"</code></pre>
    <p>Most clients will ignore invalid date strings, which render them ineffective for the response they are served on. This can have consequences on cacheability, since an erroneous <code>Last-Modified</code> header will be cached without a Last-Modified timestamp resulting in the inability to perform a conditional request.</p>
    <p>The <code>Date</code> HTTP response header is usually generated by the web server or CDN serving the response to a client. Because the header is typically generated automatically by the server, it tends to be less prone to error, which is reflected by the very low percentage of invalid <code>Date</code> headers. <code>Last-Modified</code> headers were very similar, with only 0.67% of them being invalid. What was very surprising to see though, was that 3.64% <code>Expires</code> headers used an invalid date format!</p>
    <figure id="caching-fig-13">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig13.png">
        <img src="/static/images/2019/caching/fig13.png" alt="Figure 13. Invalid date formats in response headers." aria-labelledby="caching-fig13-caption" aria-describedby="caching-fig13-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=1500819114&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
      <div id="caching-fig13-description" class="visually-hidden">A bar chart showing 0.10% of desktop responses have an invalid date, 0.67% have an invalid Last-Modified and 3.64% have an invalid Expires. The stats for mobile are very similar with 0.06% of responses have an invalid date, 0.68% have an invalid Last-Modified and 3.50% have an invalid Expires.</div>
      <figcaption id="caching-fig13-caption"><a href="#caching-fig-13" class="anchor-link">Figure 13.</a> Invalid date formats in response headers.</figcaption>
    </figure>
    <p>Examples of some of the invalid uses of the <code>Expires</code> header are:</p>
    <ul>
      <li>Valid date formats, but using a time zone other than GMT</li>
      <li>Numerical values such as 0 or -1</li>
      <li>Values that would be valid in a <code>Cache-Control</code> header</li>
    </ul>
    <p>The largest source of invalid <code>Expires</code> headers is from assets served from a popular third-party, in which a date/time uses the EST time zone, for example <code>Expires: Tue, 27 Apr 1971 19:44:06 EST</code>.</p>
    <h2 id="caching-vary-header"><a href="#caching-vary-header" class="anchor-link">Vary header</a></h2>
    <p>One of the most important steps in caching is determining if the resource being requested is cached or not. While this may seem simple, many times the URL alone is not enough to determine this. For example, requests with the same URL could vary in what <a href="#compression">compression</a> they used (gzip, brotli, etc.) or be modified and tailored for mobile visitors.</p>
    <p>To solve this problem, clients give each cached resource a unique identifier (a cache key). By default, this cache key is simply the URL of the resource, but developers can add other elements (like compression method) by using the Vary header.</p>
    <p>A Vary header instructs a client to add the value of one or more request header values to the cache key. The most common example of this is <code>Vary: Accept-Encoding</code>, which will result in different cached entries for <code>Accept-Encoding</code> request header values (i.e. <code>gzip</code>, <code>br</code>, <code>deflate</code>).</p>
    <p>Another common value is <code>Vary: Accept-Encoding, User-Agent</code>, which instructs the client to vary the cached entry by both the Accept-Encoding values and the <code>User-Agent</code> string. When dealing with shared proxies and CDNs, using values other than <code>Accept-Encoding</code> can be problematic as it dilutes the cache keys and can reduce the amount of traffic served from cache.</p>
    <p>In general, you should only vary the cache if you are serving alternate content to clients based on that header.</p>
    <p>The <code>Vary</code> header is used on 39% of HTTP responses, and 45% of responses that include a <code>Cache-Control</code> header.</p>
    <p>The graph below details the popularity for the top 10 <code>Vary</code> header values. <code>Accept-Encoding</code> accounts for 90% of <code>Vary</code>'s use, with <code>User-Agent</code> (11%), <code>Origin</code> (9%), and <code>Accept</code> (3%) making up much of the rest.</p>
    <figure id="caching-fig-14">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig14.png">
        <img src="/static/images/2019/caching/fig14.png" alt="Figure 14. Vary header usage." aria-labelledby="caching-fig14-caption" aria-describedby="caching-fig14-description" width="600" height="655" data-width="600" data-height="655" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=384675253&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig14-description" data-show-text="{{ show_description(14) }}" data-hide-text="{{ hide_description(14) }}">{{ show_description(14) }}</button>
      <div id="caching-fig14-description" class="visually-hidden">A bar chart showing 90% use of accept-encoding, much smaller values for the rest with 10%-11% for user-agent, approximately 7%-8% for origin and less so for accept, almost not usage for cookie, x-forward-proto, accept-language, host, x-origin, access-control-request-method, and access-control-request-headers</div>
      <figcaption id="caching-fig14-caption"><a href="#caching-fig-14" class="anchor-link">Figure 14.</a> Vary header usage.</figcaption>
    </figure>
    <h2 id="caching-setting-cookies-on-cacheable-responses"><a href="#caching-setting-cookies-on-cacheable-responses" class="anchor-link">Setting cookies on cacheable responses</a></h2>
    <p>When a response is cached, its entire headers are swapped into the cache as well. This is why you can see the response headers when inspecting a cached response via DevTools.</p>
    <figure id="caching-fig-15">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/ch16_fig12_header_example_with_cookie.jpg">
        <img src="/static/images/2019/caching/ch16_fig12_header_example_with_cookie.jpg" alt="Figure 15. Chrome Dev Tools for a cached resource." aria-labelledby="caching-fig15-caption" aria-describedby="caching-fig15-description" width="600" height="359" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig15-description" data-show-text="{{ show_description(15) }}" data-hide-text="{{ hide_description(15) }}">{{ show_description(15) }}</button>
      <div id="caching-fig15-description" class="visually-hidden">A screenshot of Chrome Developer Tools showing HTTP response headers for a cached response.</div>
      <figcaption id="caching-fig15-caption"><a href="#caching-fig-15" class="anchor-link">Figure 15.</a> Chrome Dev Tools for a cached resource.</figcaption>
    </figure>
    <p>
      But what happens if you have a <code>Set-Cookie</code> on a response? According to <a href="https://tools.ietf.org/html/rfc7234#section-8">RFC 7234 Section 8<span class="fn">https://tools.ietf.org/html/rfc7234#section-8</span></a
      >, the presence of a <code>Set-Cookie</code> response header does not inhibit caching. This means that a cached entry might contain a <code>Set-Cookie</code> if it was cached with one. The RFC goes on to recommend that you should configure appropriate <code>Cache-Control</code> headers to control how responses are cached.
    </p>
    <p>One of the risks of caching responses with <code>Set-Cookie</code> is that the cookie values can be stored and served to subsequent requests. Depending on the cookie's purpose, this could have worrying results. For example, if a login cookie or a session cookie is present in a shared cache, then that cookie might be reused by another client. One way to avoid this is to use the <code>Cache-Control</code> <code>private</code> directive, which only permits the response to be cached by the client browser.</p>
    <p>3% of cacheable responses contain a <code>Set-Cookie header</code>. Of those responses, only 18% use the <code>private</code> directive. The remaining 82% include 5.3 million HTTP responses that include a <code>Set-Cookie</code> which can be cached by public and private cache servers.</p>
    <figure id="caching-fig-16">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/ch16_fig16_cacheable_responses_set_cookie.jpg">
        <img src="/static/images/2019/caching/ch16_fig16_cacheable_responses_set_cookie.jpg" alt="Figure 16. Cacheable responses of Set-Cookie responses." aria-labelledby="caching-fig16-caption" aria-describedby="caching-fig16-description" width="600" height="567" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig16-description" data-show-text="{{ show_description(16) }}" data-hide-text="{{ hide_description(16) }}">{{ show_description(16) }}</button>
      <div id="caching-fig16-description" class="visually-hidden">A bar chart showing 97% of responses do not use Set-Cookie, and 3% do. This 3% is zoomed into for another bar chart showing the split of 15.3% private, 84.7% public for desktop and similar for mobile at 18.4% public and 81.6% private.</div>
      <figcaption id="caching-fig16-caption"><a href="#caching-fig-16" class="anchor-link">Figure 16.</a> Cacheable responses of <code>Set-Cookie</code> responses.</figcaption>
    </figure>
    <h2 id="caching-appcache-and-service-workers"><a href="#caching-appcache-and-service-workers" class="anchor-link">AppCache and service workers</a></h2>
    <p>
      The Application Cache or AppCache is a feature of HTML5 that allows developers to specify resources the browser should cache and make available to offline users. This feature was <a href="https://html.spec.whatwg.org/multipage/offline.html#offline">deprecated and removed from web standards<span class="fn">https://html.spec.whatwg.org/multipage/offline.html#offline</span></a
      >, and browser support has been diminishing. In fact, when its use is detected, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">Firefox v44+ recommends that developers should use service workers instead<span class="fn">https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers</span></a
      >. <a href="https://www.chromestatus.com/feature/5714236168732672">Chrome 70 restricts the Application Cache to secure context only<span class="fn">https://www.chromestatus.com/feature/5714236168732672</span></a
      >. The industry has moved more towards implementing this type of functionality with service workers - and <a href="https://caniuse.com/#feat=serviceworkers">browser support<span class="fn">https://caniuse.com/#feat=serviceworkers</span></a> has been rapidly growing for it.
    </p>
    <p>
      In fact, one of the <a href="https://httparchive.org/reports/progressive-web-apps#swControlledPages">HTTP Archive trend reports shows the adoption of service workers<span class="fn">https://httparchive.org/reports/progressive-web-apps#swControlledPages</span></a> shown below:
    </p>
    <figure id="caching-fig-17">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/ch16_fig14_service_worker_adoption.jpg">
        <img src="/static/images/2019/caching/ch16_fig14_service_worker_adoption.jpg" alt="Figure 17. Timeseries of service worker controlled pages." aria-labelledby="caching-fig17-caption" aria-describedby="caching-fig17-description" width="600" height="311" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig17-description" data-show-text="{{ show_description(17) }}" data-hide-text="{{ hide_description(17) }}">{{ show_description(17) }}</button>
      <div id="caching-fig17-description" class="visually-hidden">A time series chart showing service worker controlled site usage from October 2016 until July 2019. Usage has been steadily growing throughout the years for both mobile and desktop but is still less than 0.6% for both.</div>
      <figcaption id="caching-fig17-caption">
        <a href="#caching-fig-17" class="anchor-link">Figure 17.</a> Timeseries of service worker controlled pages. (Source: <a href="https://httparchive.org/reports/progressive-web-apps#swControlledPages">HTTP Archive<span class="fn">https://httparchive.org/reports/progressive-web-apps#swControlledPages</span></a
        >)
      </figcaption>
    </figure>
    <p>Adoption is still below 1% of websites, but it has been steadily increasing since January 2017. The <a href="#pwa">Progressive Web App</a> chapter discusses this more, including the fact that it is used a lot more than this graph suggests due to its usage on popular sites, which are only counted once in above graph.</p>
    <p>In the table below, you can see a summary of AppCache vs service worker usage. 32,292 websites have implemented a service worker, while 1,867 sites are still utilizing the deprecated AppCache feature.</p>
    <figure id="caching-fig-18">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">Does Not Use Server Worker</th>
                <th scope="col">Uses Service Worker</th>
                <th scope="col">Total</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Does Not Use AppCache</td>
                <td class="numeric">5,045,337</td>
                <td class="numeric">32,241</td>
                <td class="numeric">5,077,578</td>
              </tr>
              <tr>
                <td>Uses AppCache</td>
                <td class="numeric">1,816</td>
                <td class="numeric">51</td>
                <td class="numeric">1,867</td>
              </tr>
              <tr>
                <td>Total</td>
                <td class="numeric">5,047,153</td>
                <td class="numeric">32,292</td>
                <td class="numeric">5,079,445</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#caching-fig-18" class="anchor-link">Figure 18.</a> Number of websites using AppCache versus service worker.</figcaption>
    </figure>
    <p>If we break this out by HTTP vs HTTPS, then this gets even more interesting. 581 of the AppCache enabled sites are served over HTTP, which means that Chrome is likely disabling the feature. HTTPS is a requirement for using service workers, but 907 of the sites using them are served over HTTP.</p>
    <figure id="caching-fig-19">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <td></td>
                <th scope="col">Does Not Use Service Worker</th>
                <th scope="col">Uses Service Worker</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="rowgroup" rowspan="2">HTTP</th>
                <td>Does Not Use AppCache</td>
                <td class="numeric">1,968,736</td>
                <td class="numeric">907</td>
              </tr>
              <tr>
                <td>Uses AppCache</td>
                <td class="numeric">580</td>
                <td class="numeric">1</td>
              </tr>
              <tr>
                <th scope="rowgroup" rowspan="2">HTTPS</th>
                <td>Does Not Use AppCache</td>
                <td class="numeric">3,076,601</td>
                <td class="numeric">31,334</td>
              </tr>
              <tr>
                <td>Uses AppCache</td>
                <td class="numeric">1,236</td>
                <td class="numeric">50</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#caching-fig-19" class="anchor-link">Figure 19.</a> Number of websites using AppCache versus service worker usage by HTTP/HTTPS.</figcaption>
    </figure>
    <h2 id="caching-identifying-caching-opportunities"><a href="#caching-identifying-caching-opportunities" class="anchor-link">Identifying caching opportunities</a></h2>
    <p>
      Google's <a href="https://developers.google.com/web/tools/lighthouse">Lighthouse<span class="fn">https://developers.google.com/web/tools/lighthouse</span></a> tool enables users to run a series of audits against web pages, and <a href="https://developers.google.com/web/tools/lighthouse/audits/cache-policy">the cache policy audit<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/cache-policy</span></a> evaluates whether a site can benefit from additional caching. It does this by comparing the content age (via the <code>Last-Modified</code> header) to the cache TTL and estimating the probability that the resource would be served from cache. Depending on the score, you may see a caching recommendation in the results, with a list of specific resources that could be cached.
    </p>
    <figure id="caching-fig-20">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/ch16_fig15_lighthouse_example.jpg">
        <img src="/static/images/2019/caching/ch16_fig15_lighthouse_example.jpg" alt="Figure 20. Lighthouse report highlighting potential cache policy improvements." aria-labelledby="caching-fig20-caption" aria-describedby="caching-fig20-description" width="600" height="459" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig20-description" data-show-text="{{ show_description(20) }}" data-hide-text="{{ hide_description(20) }}">{{ show_description(20) }}</button>
      <div id="caching-fig20-description" class="visually-hidden">A screenshot of part of a report from the Google Lighthouse tool, with the 'Serve static assets with an efficient cache policy' section open where it lists a number of resources, who's names have been redacted, and the Cache TTL versus the size.</div>
      <figcaption id="caching-fig20-caption"><a href="#caching-fig-20" class="anchor-link">Figure 20.</a> Lighthouse report highlighting potential cache policy improvements.</figcaption>
    </figure>
    <p>
      Lighthouse computes a score for each audit, ranging from 0% to 100%, and those scores are then factored into the overall scores. The <a href="https://developers.google.com/web/tools/lighthouse/audits/cache-policy">caching score<span class="fn">https://developers.google.com/web/tools/lighthouse/audits/cache-policy</span></a> is based on potential byte savings. When we examine the Lighthouse results, we can get a perspective of how many sites are doing well with their cache policies.
    </p>
    <figure id="caching-fig-21">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig21.png">
        <img src="/static/images/2019/caching/fig21.png" alt="Figure 21. Distribution of Lighthouse scores for the 'Uses Long Cache TTL' audit for mobile web pages." aria-labelledby="caching-fig21-caption" aria-describedby="caching-fig21-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=827424070&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig21-description" data-show-text="{{ show_description(21) }}" data-hide-text="{{ hide_description(21) }}">{{ show_description(21) }}</button>
      <div id="caching-fig21-description" class="visually-hidden">A stacked bar chart 38.2% of websites get a score of &lt; 10%, 29.0% of websites get a score between 10% and 39%, 18.7% of websites get a score of 40%-79%, 10.7% of websites get a score of 80% - 99%, and 3.4% of websites get a score of 100%.</div>
      <figcaption id="caching-fig21-caption"><a href="#caching-fig-21" class="anchor-link">Figure 21.</a> Distribution of Lighthouse scores for the "Uses Long Cache TTL" audit for mobile web pages.</figcaption>
    </figure>
    <p>Only 3.4% of sites scored a 100%, meaning that most sites can benefit from some cache optimizations. A vast majority of sites sore below 40%, with 38% scoring less than 10%. Based on this, there is a significant amount of caching opportunities on the web.</p>
    <p>Lighthouse also indicates how many bytes could be saved on repeat views by enabling a longer cache policy. Of the sites that could benefit from additional caching, 82% of them can reduce their page weight by up to a whole Mb!</p>
    <figure id="caching-fig-22">
      <a href="https://almanac.httparchive.org/static/images/2019/caching/fig22.png">
        <img src="/static/images/2019/caching/fig22.png" alt="Figure 22. Distribution of potential byte savings from the Lighthouse caching audit." aria-labelledby="caching-fig21-caption" aria-describedby="caching-fig21-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vT3GWCs19Wq0mu0zgIlKRc8zcXgmVEk2xFHuzZACiWVtqOv8FO5gfHwBxa0mhU6O9TBY8ODdN4Zjd_O/pubchart?oid=1698914500&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig22-description" data-show-text="{{ show_description(22) }}" data-hide-text="{{ hide_description(22) }}">{{ show_description(22) }}</button>
      <div id="caching-fig22-description" class="visually-hidden">A stacked bar chart showing 56.8% of websites have potential byte savings of less than one MB, 22.1% could have savings of one to two MB, 8.3% could save two to three MB. 4.3% could save three to four MB and 6.0% could save more than four MB.</div>
      <figcaption id="caching-fig22-caption"><a href="#caching-fig-22" class="anchor-link">Figure 22.</a> Distribution of potential byte savings from the Lighthouse caching audit.</figcaption>
    </figure>
    <h2 id="caching-conclusion"><a href="#caching-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>Caching is an incredibly powerful feature that allows browsers, proxies and other intermediaries (such as CDNs) to store web content and serve it to end users. The performance benefits of this are significant, since it reduces round trip times and minimizes costly network requests.</p>
    <p>
      Caching is also a very complex topic. There are numerous HTTP response headers that can convey freshness as well as validate cached entries, and <code>Cache-Control</code> directives provide a tremendous amount of flexibility and control. However, developers should be cautious about the additional opportunities for mistakes that it comes with. Regularly auditing your site to ensure that cacheable resources are cached appropriately is recommended, and tools like <a href="https://developers.google.com/web/tools/lighthouse">Lighthouse<span class="fn">https://developers.google.com/web/tools/lighthouse</span></a> and <a href="https://redbot.org/">REDbot<span class="fn">https://redbot.org/</span></a> do an excellent job of helping to simplify the analysis.
    </p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"IV","chapter_number":17,"title":"CDN","description":"CDN chapter of the 2019 Web Almanac covering CDN adoption and usage, RTT &amp; TLS management, HTTP/2 adoption, caching and common library and content CDNs.","authors":["andydavies","colinbendell"],"reviewers":["yoavweiss","paulcalvano","pmeenan","enygren"],"translators":null,"discuss":"1772","results":"https://docs.google.com/spreadsheets/d/1Y7kAxjxUl8puuTToe6rL3kqJLX1ftOb0nCcD8m3lZBw/","queries":"17_CDN","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-08-04T00:00:00.000Z","chapter":"cdn"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="cdn-introduction"><a href="#cdn-introduction" class="anchor-link">Introduction</a></h2>
    <p>
      "Use a Content Delivery Network" was one of <a href="http://stevesouders.com/examples/rules.php">Steve Souders original recommendations<span class="fn">http://stevesouders.com/examples/rules.php</span></a> for making web sites load faster. It's advice that remains valid today, and in this chapter of the Web Almanac we're going to explore how widely Steve's recommendation has been adopted, how sites are using Content Delivery Networks (CDNs), and some of the features they're using.
    </p>
    <p>Fundamentally, CDNs reduce latencythe time it takes for packets to travel between two points on a network, say from a visitor's device to a serverand latency is a key factor in how quickly pages load.</p>
    <p>A CDN reduces latency in two ways: by serving content from locations that are closer to the user and second, by terminating the TCP connection closer to the end user.</p>
    <p>Historically, CDNs were used to cache, or copy, bytes so that the logical path from the user to the bytes becomes shorter. A file that is requested by many people can be retrieved once from the origin (your server) and then stored on a server closer to the user, thus saving transfer time.</p>
    <p>CDNs also help with TCP latency. The latency of TCP determines how long it takes to establish a connection between a browser and a server, how long it takes to secure that connection, and ultimately how quickly content downloads. At best, network packets travel at roughly two-thirds of the speed of light, so how long that round trip takes depends on how far apart the two ends of the conversation are, and what's in between. Congested networks, overburdened equipment, and the type of network will all add further delays. Using a CDN to move the server end of the connection closer to the visitor reduces this latency penalty, shortening connection times, TLS negotiation times, and improving content download speeds.</p>
    <p>Although CDNs are often thought of as just caches that store and serve static content close to the visitor, they are capable of so much more! CDNs aren't limited to just helping overcome the latency penalty, and increasingly they offer other features that help improve performance and security.</p>
    <ul>
      <li>Using a CDN to proxy dynamic content (base HTML page, API responses, etc.) can take advantage of both the reduced latency between the browser and the CDN's own network back to the origin.</li>
      <li>Some CDNs offer transformations that optimize pages so they download and render more quickly, or optimize images so they're the appropriate size (both dimensions and file size) for the device on which they're going to be viewed.</li>
      <li>From a <a href="#security">security</a> perspective, malicious traffic and bots can be filtered out by a CDN before the requests even reach the origin, and their wide customer base means CDNs can often see and react to new threats sooner.</li>
      <li>
        The rise of <a href="https://en.wikipedia.org/wiki/Edge_computing">edge computing<span class="fn">https://en.wikipedia.org/wiki/Edge_computing</span></a> allows sites to run their own code close to their visitors, both improving performance and reducing the load on the origin.
      </li>
    </ul>
    <p>Finally, CDNs also help sites to adopt new technologies without requiring changes at the origin, for example <a href="#http2">HTTP/2</a>, TLS 1.3, and/or IPv6 can be enabled from the edge to the browser, even if the origin servers don't support it yet.</p>
    <h3 id="cdn-caveats-and-disclaimers"><a href="#cdn-caveats-and-disclaimers" class="anchor-link">Caveats and disclaimers</a></h3>
    <p>As with any observational study, there are limits to the scope and impact that can be measured. The statistics gathered on CDN usage for the the Web Almanac does not imply performance nor effectiveness of a specific CDN vendor.</p>
    <p>There are many limits to the testing <a href="#methodology">methodology</a> used for the Web Almanac. These include:</p>
    <ul>
      <li><strong>Simulated network latency</strong>: The Web Almanac uses a dedicated network connection that <a href="#methodology-webpagetest">synthetically shapes traffic</a>.</li>
      <li>
        <strong>Single geographic location</strong>: Tests are run from <a href="https://httparchive.org/faq#how-is-the-data-gathered">a single datacenter<span class="fn">https://httparchive.org/faq#how-is-the-data-gathered</span></a> and cannot test the geographic distribution of many CDN vendors.
      </li>
      <li><strong>Cache effectiveness</strong>: Each CDN uses proprietary technology and many, for security reasons, do not expose cache performance.</li>
      <li><strong>Localization and internationalization</strong>: Just like geographic distribution, the effects of language and geo-specific domains are also opaque to the testing.</li>
      <li>
        <a href="https://github.com/WPO-Foundation/wptagent/blob/master/internal/optimization_checks.py#L51">CDN detection<span class="fn">https://github.com/WPO-Foundation/wptagent/blob/master/internal/optimization_checks.py#L51</span></a> is primarily done through DNS resolution and HTTP headers. Most CDNs use a DNS CNAME to map a user to an optimal datacenter. However, some CDNs use AnyCast IPs or direct A+AAAA responses from a delegated domain which hide the DNS chain. In other cases, websites use multiple CDNs to balance between vendors which is hidden from the single-request pass of <a href="#methodology-webpagetest">WebPageTest</a>. All of this limits the effectiveness in the measurements.
      </li>
    </ul>
    <p>Most importantly, these results reflect a potential utilization but do not reflect actual impact. YouTube is more popular than "ShoesByColin" yet both will appear as equal value when comparing utilization.</p>
    <p>With this in mind, there are a few intentional statistics that were not measured with the context of a CDN:</p>
    <ul>
      <li>
        <strong>TTFB</strong>: Measuring the Time to first byte <em>by CDN</em> would be intellectually dishonest without proper knowledge about cacheability and cache effectiveness. If one site uses a CDN for <strong>round trip time</strong> (RTT) management but not for caching, this would create a disadvantage when comparing another site that uses a different CDN vendor but does also caches the content. <em>(Note: this does not apply to the TTFB analysis in the <a href="#performance-time-to-first-byte-ttfb">Performance</a> chapter because it does not draw conclusions about the performance of individual CDNs.)</em>
      </li>
      <li><strong>Cache Hit vs. Cache Miss performance</strong>: As mentioned previously, this is opaque to the testing apparatus and therefore repeat tests to test page performance with a cold cache vs. a hot cache are unreliable.</li>
    </ul>
    <h3 id="cdn-further-stats"><a href="#cdn-further-stats" class="anchor-link">Further stats</a></h3>
    <p>In future versions of the Web Almanac, we would expect to look more closely at the TLS and RTT management between CDN vendors. Of interest would the impact of OCSP stapling, differences in TLS Cipher performance. CWND (TCP congestion window) growth rate, and specifically the adoption of BBR v1, v2, and traditional TCP Cubic.</p>
    <h2 id="cdn-cdn-adoption-and-usage"><a href="#cdn-cdn-adoption-and-usage" class="anchor-link">CDN adoption and usage</a></h2>
    <p>For websites, a CDN can improve performance for the primary domain (<code>www.shoesbycolin.com</code>), sub-domains or sibling domains (<code>images.shoesbycolin.com</code> or <code>checkout.shoesbycolin.com</code>), and finally third parties (Google Analytics, etc.). Using a CDN for each of these use cases improves performance in different ways.</p>
    <p>Historically, CDNs were used exclusively for static resources like <a href="#css">CSS</a>, <a href="#javascript">JavaScript</a>, and <a href="#media">images</a>. These resources would likely be versioned (include a unique number in the path) and cached long-term. In this way we should expect to see higher adoption of CDNs on sub-domains or sibling domains compared to the base HTML domains. The traditional design pattern would expect that <code>www.shoesbycolin.com</code> would serve HTML directly from a datacenter (or <strong>origin</strong>) while <code>static.shoesbycolin.com</code> would use a CDN.</p>
    <figure id="cdn-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig1.png">
        <img src="/static/images/2019/cdn/fig1.png" alt="Figure 1. CDN usage vs. origin-hosted resources." aria-labelledby="cdn-fig1-caption" aria-describedby="cdn-fig1-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=777938536&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="cdn-fig1-description" class="visually-hidden">Stacked bar chart showing HTML is 80% served from origin, 20% from CDN, Sub-domains are 61%/39%, third-party is 34%/66%.</div>
      <figcaption id="cdn-fig1-caption"><a href="#cdn-fig-1" class="anchor-link">Figure 1.</a> CDN usage vs. origin-hosted resources.</figcaption>
    </figure>
    <p>Indeed, this traditional pattern is what we observe on the majority of websites crawled. The majority of web pages (80%) serve the base HTML from origin. This breakdown is nearly identical between mobile and desktop with only 0.4% lower usage of CDNs on desktop. This slight variance is likely due to the small continued use of mobile specific web pages ("mDot"), which more frequently use a CDN.</p>
    <p>Likewise, resources served from sub-domains are more likely to utilize a CDN at 40% of sub-domain resources. Sub-domains are used either to partition resources like images and CSS or they are used to reflect organizational teams such as checkout or APIs.</p>
    <p>Despite first-party resources still largely being served directly from origin, third-party resources have a substantially higher adoption of CDNs. Nearly 66% of all third-party resources are served from a CDN. Since third-party domains are more likely a SaaS integration, the use of CDNs are more likely core to these business offerings. Most third-party content breaks down to shared resources (JavaScript or font CDNs), augmented content (advertisements), or statistics. In all these cases, using a CDN will improve the performance and offload for these SaaS solutions.</p>
    <h2 id="cdn-top-cdn-providers"><a href="#cdn-top-cdn-providers" class="anchor-link">Top CDN providers</a></h2>
    <p>There are two categories of CDN providers: the generic and the purpose-fit CDN. The generic CDN providers offer customization and flexibility to serve all kinds of content for many industries. In contrast, the purpose-fit CDN provider offers similar content distribution capabilities but are narrowly focused on a specific solution.</p>
    <p>This is clearly represented when looking at the top CDNs found serving the base HTML content. The most frequent CDNs serving HTML are generic CDNs (Cloudflare, Akamai, Fastly) and cloud solution providers who offer a bundled CDN (Google, Amazon) as part of the platform service offerings. In contrast, there are only a few purpose-fit CDN providers, such as Wordpress and Netlify, that deliver base HTML markup.</p>
    <p class="note">Note: This does not reflect traffic or usage, only the number of sites using them.</p>
    <figure id="cdn-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/html_cdn_usage.png">
        <img alt="Most popular CDNs used to serve base HTML pages" aria-labelledby="cdn-fig2-caption" aria-describedby="cdn-fig2-description" src="/static/images/2019/cdn/html_cdn_usage.png" width="600" height="371" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="cdn-fig2-description" class="visually-hidden">Treemap graph showing the data from Table 3.</div>
      <figcaption id="cdn-fig2-caption"><a href="#cdn-fig-2" class="anchor-link">Figure 2.</a> HTML CDN usage.</figcaption>
    </figure>
    <figure id="cdn-fig-3">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">HTML CDN Usage (%)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ORIGIN</td>
                <td class="numeric">80.39</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td class="numeric">9.61</td>
              </tr>
              <tr>
                <td>Google</td>
                <td class="numeric">5.54</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td class="numeric">1.08</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td class="numeric">1.05</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td class="numeric">0.79</td>
              </tr>
              <tr>
                <td>WordPress</td>
                <td class="numeric">0.37</td>
              </tr>
              <tr>
                <td>Sucuri Firewall</td>
                <td class="numeric">0.31</td>
              </tr>
              <tr>
                <td>Incapsula</td>
                <td class="numeric">0.28</td>
              </tr>
              <tr>
                <td>Myra Security CDN</td>
                <td class="numeric">0.1</td>
              </tr>
              <tr>
                <td>OVH CDN</td>
                <td class="numeric">0.08</td>
              </tr>
              <tr>
                <td>Netlify</td>
                <td class="numeric">0.06</td>
              </tr>
              <tr>
                <td>Edgecast</td>
                <td class="numeric">0.04</td>
              </tr>
              <tr>
                <td>GoCache</td>
                <td class="numeric">0.03</td>
              </tr>
              <tr>
                <td>Highwinds</td>
                <td class="numeric">0.03</td>
              </tr>
              <tr>
                <td>CDNetworks</td>
                <td class="numeric">0.02</td>
              </tr>
              <tr>
                <td>Limelight</td>
                <td class="numeric">0.01</td>
              </tr>
              <tr>
                <td>Level 3</td>
                <td class="numeric">0.01</td>
              </tr>
              <tr>
                <td>NetDNA</td>
                <td class="numeric">0.01</td>
              </tr>
              <tr>
                <td>StackPath</td>
                <td class="numeric">0.01</td>
              </tr>
              <tr>
                <td>Instart Logic</td>
                <td class="numeric">0.01</td>
              </tr>
              <tr>
                <td>Azion</td>
                <td class="numeric">0.01</td>
              </tr>
              <tr>
                <td>Yunjiasu</td>
                <td class="numeric">0.01</td>
              </tr>
              <tr>
                <td>section.io</td>
                <td class="numeric">0.01</td>
              </tr>
              <tr>
                <td>Microsoft Azure</td>
                <td class="numeric">0.01</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cdn-fig-3" class="anchor-link">Figure 3.</a> Top 25 CDNs for HTML by site.</figcaption>
    </figure>
    <p>Sub-domain requests have a very similar composition. Since many websites use sub-domains for static content, we see a shift to a higher CDN usage. Like the base page requests, the resources served from these sub-domains utilize generic CDN offerings.</p>
    <figure id="cdn-fig-4">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/subdomain_resource_cdn_usage.png">
        <img alt="Most popular CDNs used for resources served from a sub-domain" aria-labelledby="cdn-fig4-caption" aria-describedby="cdn-fig4-description" src="/static/images/2019/cdn/subdomain_resource_cdn_usage.png" width="600" height="371" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig4-description" data-show-text="{{ show_description(4) }}" data-hide-text="{{ hide_description(4) }}">{{ show_description(4) }}</button>
      <div id="cdn-fig4-description" class="visually-hidden">Treemap graph showing the data from Table 5.</div>
      <figcaption id="cdn-fig4-caption"><a href="#cdn-fig-4" class="anchor-link">Figure 4.</a> Sub-domain resource CDN usage.</figcaption>
    </figure>
    <figure id="cdn-fig-5">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">Sub-Domain CDN Usage (%)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ORIGIN</td>
                <td class="numeric">60.56</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td class="numeric">10.06</td>
              </tr>
              <tr>
                <td>Google</td>
                <td class="numeric">8.86</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td class="numeric">6.24</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td class="numeric">3.5</td>
              </tr>
              <tr>
                <td>Edgecast</td>
                <td class="numeric">1.97</td>
              </tr>
              <tr>
                <td>WordPress</td>
                <td class="numeric">1.69</td>
              </tr>
              <tr>
                <td>Highwinds</td>
                <td class="numeric">1.24</td>
              </tr>
              <tr>
                <td>Limelight</td>
                <td class="numeric">1.18</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td class="numeric">0.8</td>
              </tr>
              <tr>
                <td>CDN77</td>
                <td class="numeric">0.43</td>
              </tr>
              <tr>
                <td>KeyCDN</td>
                <td class="numeric">0.41</td>
              </tr>
              <tr>
                <td>NetDNA</td>
                <td class="numeric">0.37</td>
              </tr>
              <tr>
                <td>CDNetworks</td>
                <td class="numeric">0.36</td>
              </tr>
              <tr>
                <td>Incapsula</td>
                <td class="numeric">0.29</td>
              </tr>
              <tr>
                <td>Microsoft Azure</td>
                <td class="numeric">0.28</td>
              </tr>
              <tr>
                <td>Reflected Networks</td>
                <td class="numeric">0.28</td>
              </tr>
              <tr>
                <td>Sucuri Firewall</td>
                <td class="numeric">0.16</td>
              </tr>
              <tr>
                <td>BunnyCDN</td>
                <td class="numeric">0.13</td>
              </tr>
              <tr>
                <td>OVH CDN</td>
                <td class="numeric">0.12</td>
              </tr>
              <tr>
                <td>Advanced Hosters CDN</td>
                <td class="numeric">0.1</td>
              </tr>
              <tr>
                <td>Myra Security CDN</td>
                <td class="numeric">0.07</td>
              </tr>
              <tr>
                <td>CDNvideo</td>
                <td class="numeric">0.07</td>
              </tr>
              <tr>
                <td>Level 3</td>
                <td class="numeric">0.06</td>
              </tr>
              <tr>
                <td>StackPath</td>
                <td class="numeric">0.06</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cdn-fig-5" class="anchor-link">Figure 5.</a> Top 25 resource CDNs for sub-domain requests.</figcaption>
    </figure>
    <p>The composition of top CDN providers dramatically shifts for third-party resources. Not only are CDNs more frequently observed hosting third-party resources, there is also an increase in purpose-fit CDN providers such as Facebook, Twitter, and Google.</p>
    <figure id="cdn-fig-6">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/thirdparty_resource_cdn_usage.png">
        <img alt="Most popular CDNs used by third-party resources" aria-labelledby="cdn-fig6-caption" aria-describedby="cdn-fig6-description" src="/static/images/2019/cdn/thirdparty_resource_cdn_usage.png" width="600" height="376" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig6-description" data-show-text="{{ show_description(6) }}" data-hide-text="{{ hide_description(6) }}">{{ show_description(6) }}</button>
      <div id="cdn-fig6-description" class="visually-hidden">Treemap graph showing the data from Table 7.</div>
      <figcaption id="cdn-fig6-caption"><a href="#cdn-fig-6" class="anchor-link">Figure 6.</a> Third-party resource CDN usage.</figcaption>
    </figure>
    <figure id="cdn-fig-7">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">Third-Party CDN Usage (%)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ORIGIN</td>
                <td class="numeric">34.27</td>
              </tr>
              <tr>
                <td>Google</td>
                <td class="numeric">29.61</td>
              </tr>
              <tr>
                <td>Facebook</td>
                <td class="numeric">8.47</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td class="numeric">5.25</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td class="numeric">5.14</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td class="numeric">4.21</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td class="numeric">3.87</td>
              </tr>
              <tr>
                <td>WordPress</td>
                <td class="numeric">2.06</td>
              </tr>
              <tr>
                <td>Edgecast</td>
                <td class="numeric">1.45</td>
              </tr>
              <tr>
                <td>Twitter</td>
                <td class="numeric">1.27</td>
              </tr>
              <tr>
                <td>Highwinds</td>
                <td class="numeric">0.94</td>
              </tr>
              <tr>
                <td>NetDNA</td>
                <td class="numeric">0.77</td>
              </tr>
              <tr>
                <td>Cedexis</td>
                <td class="numeric">0.3</td>
              </tr>
              <tr>
                <td>CDNetworks</td>
                <td class="numeric">0.22</td>
              </tr>
              <tr>
                <td>section.io</td>
                <td class="numeric">0.22</td>
              </tr>
              <tr>
                <td>jsDelivr</td>
                <td class="numeric">0.2</td>
              </tr>
              <tr>
                <td>Microsoft Azure</td>
                <td class="numeric">0.18</td>
              </tr>
              <tr>
                <td>Yahoo</td>
                <td class="numeric">0.18</td>
              </tr>
              <tr>
                <td>BunnyCDN</td>
                <td class="numeric">0.17</td>
              </tr>
              <tr>
                <td>CDNvideo</td>
                <td class="numeric">0.16</td>
              </tr>
              <tr>
                <td>Reapleaf</td>
                <td class="numeric">0.15</td>
              </tr>
              <tr>
                <td>CDN77</td>
                <td class="numeric">0.14</td>
              </tr>
              <tr>
                <td>KeyCDN</td>
                <td class="numeric">0.13</td>
              </tr>
              <tr>
                <td>Azion</td>
                <td class="numeric">0.09</td>
              </tr>
              <tr>
                <td>StackPath</td>
                <td class="numeric">0.09</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cdn-fig-7" class="anchor-link">Figure 7.</a> Top 25 resource CDNs for third-party requests.</figcaption>
    </figure>
    <h2 id="cdn-rtt-and-tls-management"><a href="#cdn-rtt-and-tls-management" class="anchor-link">RTT and TLS management</a></h2>
    <p>
      CDNs can offer more than simple caching for website performance. Many CDNs also support a pass-through mode for dynamic or personalized content when an organization has a legal or other business requirement prohibiting the content from being cached. Utilizing a CDN's physical distribution enables increased performance for TCP RTT for end users. As <a href="https://www.igvita.com/2012/07/19/latency-the-new-web-performance-bottleneck/">others have noted<span class="fn">https://www.igvita.com/2012/07/19/latency-the-new-web-performance-bottleneck/</span></a
      >, <a href="https://hpbn.co/primer-on-latency-and-bandwidth/">reducing RTT is the most effective means to improve web page performance<span class="fn">https://hpbn.co/primer-on-latency-and-bandwidth/</span></a> compared to increasing bandwidth.
    </p>
    <p>Using a CDN in this way can improve page performance in two ways:</p>
    <ol>
      <li>
        <p>Reduce RTT for TCP and TLS negotiation. The speed of light is only so fast and CDNs offer a highly distributed set of data centers that are closer to the end users. In this way the logical (and physical) distance that packets must traverse to negotiate a TCP connection and perform the TLS handshake can be greatly reduced.</p>
        <p>Reducing RTT has three immediate benefits. First, it improves the time for the user to receive data, because TCP+TLS connection time are RTT-bound. Secondly, this will improve the time it takes to grow the congestion window and utilize the full amount of bandwidth the user has available. Finally, it reduces the probability of packet loss. When the RTT is high, network interfaces will time-out requests and resend packets. This can result in double packets being delivered.</p>
      </li>
      <li><p>CDNs can utilize pre-warmed TCP connections to the back-end origin. Just as terminating the connection closer to the user will improve the time it takes to grow the congestion window, the CDN can relay the request to the origin on pre-established TCP connections that have already maximized congestion windows. In this way the origin can return the dynamic content in fewer TCP round trips and the content can be more effectively ready to be delivered to the waiting user.</p></li>
    </ol>
    <h2 id="cdn-tls-negotiation-time-origin-3x-slower-than-cdns"><a href="#cdn-tls-negotiation-time-origin-3x-slower-than-cdns" class="anchor-link">TLS negotiation time: origin 3x slower than CDNs</a></h2>
    <p>Since TLS negotiations require multiple TCP round trips before data can be sent from a server, simply improving the RTT can significantly improve the page performance. For example, looking at the base HTML page, the median TLS negotiation time for origin requests is 207 ms (for desktop WebPageTest). This alone accounts for 10% of a 2 second performance budget, and this is under ideal network conditions where there is no latency applied on the request.</p>
    <p>In contrast, the median TLS negotiation for the majority of CDN providers is between 60 and 70 ms. Origin requests for HTML pages take almost 3x longer to complete TLS negotiation than those web pages that use a CDN. Even at the 90th percentile, this disparity perpetuates with origin TLS negotiation rates of 427 ms compared to most CDNs which complete under 140 ms!</p>
    <p class="note">A word of caution when interpreting these charts: it is important to focus on orders of magnitude when comparing vendors as there are many factors that impact the actual TLS negotiation performance. These tests were completed from a single datacenter under controlled conditions and do not reflect the variability of the internet and user experiences.</p>
    <figure id="cdn-fig-8">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/html_tls_negotiation_time.png">
        <img alt="Distribution of TLS negotiation time for initial HTML request broken down by CDN" aria-labelledby="cdn-fig8-caption" aria-describedby="cdn-fig8-description" src="/static/images/2019/cdn/html_tls_negotiation_time.png" width="600" height="371" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig8-description" data-show-text="{{ show_description(8) }}" data-hide-text="{{ hide_description(8) }}">{{ show_description(8) }}</button>
      <div id="cdn-fig8-description" class="visually-hidden">Graph showing the data from Table 9.</div>
      <figcaption id="cdn-fig8-caption"><a href="#cdn-fig-8" class="anchor-link">Figure 8.</a> HTML TLS negotiation time.</figcaption>
    </figure>
    <figure id="cdn-fig-9">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">p10</th>
                <th scope="col">p25</th>
                <th scope="col">p50</th>
                <th scope="col">p75</th>
                <th scope="col">p90</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Highwinds</td>
                <td class="numeric">58</td>
                <td class="numeric">58</td>
                <td class="numeric">60</td>
                <td class="numeric">66</td>
                <td class="numeric">94</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td class="numeric">56</td>
                <td class="numeric">59</td>
                <td class="numeric">63</td>
                <td class="numeric">69</td>
                <td class="numeric">75</td>
              </tr>
              <tr>
                <td>WordPress</td>
                <td class="numeric">58</td>
                <td class="numeric">62</td>
                <td class="numeric">76</td>
                <td class="numeric">77</td>
                <td class="numeric">80</td>
              </tr>
              <tr>
                <td>Sucuri Firewall</td>
                <td class="numeric">63</td>
                <td class="numeric">66</td>
                <td class="numeric">77</td>
                <td class="numeric">80</td>
                <td class="numeric">86</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td class="numeric">59</td>
                <td class="numeric">61</td>
                <td class="numeric">62</td>
                <td class="numeric">83</td>
                <td class="numeric">128</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td class="numeric">62</td>
                <td class="numeric">68</td>
                <td class="numeric">80</td>
                <td class="numeric">92</td>
                <td class="numeric">103</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td class="numeric">57</td>
                <td class="numeric">59</td>
                <td class="numeric">72</td>
                <td class="numeric">93</td>
                <td class="numeric">134</td>
              </tr>
              <tr>
                <td>Microsoft Azure</td>
                <td class="numeric">62</td>
                <td class="numeric">93</td>
                <td class="numeric">97</td>
                <td class="numeric">98</td>
                <td class="numeric">101</td>
              </tr>
              <tr>
                <td>Edgecast</td>
                <td class="numeric">94</td>
                <td class="numeric">97</td>
                <td class="numeric">100</td>
                <td class="numeric">110</td>
                <td class="numeric">221</td>
              </tr>
              <tr>
                <td>Google</td>
                <td class="numeric">47</td>
                <td class="numeric">53</td>
                <td class="numeric">79</td>
                <td class="numeric">119</td>
                <td class="numeric">184</td>
              </tr>
              <tr>
                <td>OVH CDN</td>
                <td class="numeric">114</td>
                <td class="numeric">115</td>
                <td class="numeric">118</td>
                <td class="numeric">120</td>
                <td class="numeric">122</td>
              </tr>
              <tr>
                <td>section.io</td>
                <td class="numeric">105</td>
                <td class="numeric">108</td>
                <td class="numeric">112</td>
                <td class="numeric">120</td>
                <td class="numeric">210</td>
              </tr>
              <tr>
                <td>Incapsula</td>
                <td class="numeric">96</td>
                <td class="numeric">100</td>
                <td class="numeric">111</td>
                <td class="numeric">139</td>
                <td class="numeric">243</td>
              </tr>
              <tr>
                <td>Netlify</td>
                <td class="numeric">53</td>
                <td class="numeric">64</td>
                <td class="numeric">73</td>
                <td class="numeric">145</td>
                <td class="numeric">166</td>
              </tr>
              <tr>
                <td>Myra Security CDN</td>
                <td class="numeric">95</td>
                <td class="numeric">106</td>
                <td class="numeric">118</td>
                <td class="numeric">226</td>
                <td class="numeric">365</td>
              </tr>
              <tr>
                <td>GoCache</td>
                <td class="numeric">217</td>
                <td class="numeric">219</td>
                <td class="numeric">223</td>
                <td class="numeric">234</td>
                <td class="numeric">260</td>
              </tr>
              <tr>
                <td><em>ORIGIN</em></td>
                <td class="numeric"><em>100</em></td>
                <td class="numeric"><em>138</em></td>
                <td class="numeric"><em>207</em></td>
                <td class="numeric"><em>342</em></td>
                <td class="numeric"><em>427</em></td>
              </tr>
              <tr>
                <td>CDNetworks</td>
                <td class="numeric">85</td>
                <td class="numeric">143</td>
                <td class="numeric">229</td>
                <td class="numeric">369</td>
                <td class="numeric">452</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cdn-fig-9" class="anchor-link">Figure 9.</a> HTML TLS connection time (ms).</figcaption>
    </figure>
    <p>For resource requests (including same-domain and third-party), the TLS negotiation time takes longer and the variance increases. This is expected because of network saturation and network congestion. By the time that a third-party connection is established (by way of a resource hint or a resource request) the browser is busy rendering and making other parallel requests. This creates contention on the network. Despite this disadvantage, there is still a clear advantage for third-party resources that utilize a CDN over using an origin solution.</p>
    <figure id="cdn-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/resource_tls_negotiation_time.png">
        <img alt="Distribution of TLS negotiation time for site resources broken down by CDN" aria-labelledby="cdn-fig10-caption" aria-describedby="cdn-fig10-description" src="/static/images/2019/cdn/resource_tls_negotiation_time.png" width="600" height="371" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="cdn-fig10-description" class="visually-hidden">Graph showing most CDNs have a TLS negotiation time of around 80 ms, but some (Microsoft Azure, Yahoo, Edgecast, ORIGIN, and CDNetworks) start to creep out towards 200 ms - especially when going above the p50 percentile.</div>
      <figcaption id="cdn-fig10-caption"><a href="#cdn-fig-10" class="anchor-link">Figure 10.</a> Resource TLS negotiation time.</figcaption>
    </figure>
    <p>TLS handshake performance is impacted by a number of factors. These include RTT, TLS record size, and TLS certificate size. While RTT has the biggest impact on the TLS handshake, the second largest driver for TLS performance is the TLS certificate size.</p>
    <p>
      During the first round trip of the <a href="https://hpbn.co/transport-layer-security-tls/#tls-handshake">TLS handshake<span class="fn">https://hpbn.co/transport-layer-security-tls/#tls-handshake</span></a
      >, the server attaches its certificate. This certificate is then verified by the client before proceeding. In this certificate exchange, the server might include the certificate chain by which it can be verified. After this certificate exchange, additional keys are established to encrypt the communication. However, the length and size of the certificate can negatively impact the TLS negotiation performance, and in some cases, crash client libraries.
    </p>
    <p>
      The certificate exchange is at the foundation of the TLS handshake and is usually handled by isolated code paths so as to minimize the attack surface for exploits. Because of its low level nature, buffers are usually not dynamically allocated, but fixed. In this way, we cannot simply assume that the client can handle an unlimited-sized certificate. For example, OpenSSL CLI tools and Safari can successfully negotiate against <a href="https://10000-sans.badssl.com"><code>https://10000-sans.badssl.com</code><span class="fn">https://10000-sans.badssl.com</span></a
      >. Yet, Chrome and Firefox fail because of the size of the certificate.
    </p>
    <p>While extreme sizes of certificates can cause failures, even sending moderately large certificates has a performance impact. A certificate can be valid for one or more hostnames which are are listed in the <code>Subject-Alternative-Name</code> (SAN). The more SANs, the larger the certificate. It is the processing of these SANs during verification that causes performance to degrade. To be clear, performance of certificate size is not about TCP overhead, rather it is about processing performance of the client.</p>
    <p>Technically, TCP slow start can impact this negotiation but it is very improbable. TLS record length is limited to 16 KB, which fits into a typical initial congestion window of 10. While some ISPs might employ packet splicers, and other tools fragment congestion windows to artificially throttle bandwidth, this isn't something that a website owner can change or manipulate.</p>
    <p>Many CDNs, however, depend on shared TLS certificates and will list many customers in the SAN of a certificate. This is often necessary because of the scarcity of IPv4 addresses. Prior to the adoption of <code>Server-Name-Indicator</code> (SNI) by end users, the client would connect to a server, and only after inspecting the certificate, would the client hint which hostname the user user was looking for (using the <code>Host</code> header in HTTP). This results in a 1:1 association of an IP address and a certificate. If you are a CDN with many physical locations, each location may require a dedicated IP, further aggravating the exhaustion of IPv4 addresses. Therefore, the simplest and most efficient way for CDNs to offer TLS certificates for websites that still have users that don't support SNI is to offer a shared certificate.</p>
    <p>
      According to Akamai, the adoption of SNI is <a href="https://datatracker.ietf.org/meeting/101/materials/slides-101-maprg-update-on-tls-sni-and-ipv6-client-adoption-00">still not 100% globally<span class="fn">https://datatracker.ietf.org/meeting/101/materials/slides-101-maprg-update-on-tls-sni-and-ipv6-client-adoption-00</span></a
      >. Fortunately there has been a rapid shift in recent years. The biggest culprits are no longer Windows XP and Vista, but now Android apps, bots, and corporate applications. Even at 99% adoption, the remaining 1% of 3.5 billion users on the internet can create a very compelling motivation for website owners to require a non-SNI certificate. Put another way, a pure play website can enjoy a virtually 100% SNI adoption among standard web browsers. Yet, if the website is also used to support APIs or WebViews in apps, particularly Android apps, this distribution can drop rapidly.
    </p>
    <p>
      Most CDNs balance the need for shared certificates and performance. Most cap the number of SANs between 100 and 150. This limit often derives from the certificate providers. For example, <a href="https://letsencrypt.org/docs/rate-limits/">LetsEncrypt<span class="fn">https://letsencrypt.org/docs/rate-limits/</span></a
      >, <a href="https://www.websecurity.digicert.com/security-topics/san-ssl-certificates">DigiCert<span class="fn">https://www.websecurity.digicert.com/security-topics/san-ssl-certificates</span></a
      >, and <a href="https://www.godaddy.com/web-security/multi-domain-san-ssl-certificate">GoDaddy<span class="fn">https://www.godaddy.com/web-security/multi-domain-san-ssl-certificate</span></a> all limit SAN certificates to 100 hostnames while <a href="https://comodosslstore.com/comodo-mdc-ssl.aspx">Comodo<span class="fn">https://comodosslstore.com/comodo-mdc-ssl.aspx</span></a
      >'s limit is 2,000. This, in turn, allows some CDNs to push this limit, cresting over 800 SANs on a single certificate. There is a strong negative correlation of TLS performance and the number of SANs on a certificate.
    </p>
    <figure id="cdn-fig-11">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig11.png">
        <img src="/static/images/2019/cdn/fig11.png" alt="Figure 11. TLS SAN count for HTML." aria-labelledby="cdn-fig11-caption" aria-describedby="cdn-fig11-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=753130748&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig11-description" data-show-text="{{ show_description(11) }}" data-hide-text="{{ hide_description(11) }}">{{ show_description(11) }}</button>
      <div id="cdn-fig11-description" class="visually-hidden">Bar chart showing data from table 12.</div>
      <figcaption id="cdn-fig11-caption"><a href="#cdn-fig-11" class="anchor-link">Figure 11.</a> TLS SAN count for HTML.</figcaption>
    </figure>
    <figure id="cdn-fig-12">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">p10</th>
                <th scope="col">p25</th>
                <th scope="col">p50</th>
                <th scope="col">p75</th>
                <th scope="col">p90</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>section.io</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
              </tr>
              <tr>
                <td>ORIGIN</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">7</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">8</td>
              </tr>
              <tr>
                <td>WordPress</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
              </tr>
              <tr>
                <td>Sucuri Firewall</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
              </tr>
              <tr>
                <td>Netlify</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">3</td>
              </tr>
              <tr>
                <td>Highwinds</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
              </tr>
              <tr>
                <td>GoCache</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">4</td>
              </tr>
              <tr>
                <td>Google</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">3</td>
                <td class="numeric">53</td>
              </tr>
              <tr>
                <td>OVH CDN</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">3</td>
                <td class="numeric">8</td>
                <td class="numeric">19</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">3</td>
                <td class="numeric">39</td>
                <td class="numeric">59</td>
              </tr>
              <tr>
                <td>Microsoft Azure</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">43</td>
                <td class="numeric">47</td>
              </tr>
              <tr>
                <td>Edgecast</td>
                <td class="numeric">2</td>
                <td class="numeric">4</td>
                <td class="numeric">46</td>
                <td class="numeric">56</td>
                <td class="numeric">130</td>
              </tr>
              <tr>
                <td>Incapsula</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">11</td>
                <td class="numeric">78</td>
                <td class="numeric">140</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td class="numeric">2</td>
                <td class="numeric">18</td>
                <td class="numeric">57</td>
                <td class="numeric">85</td>
                <td class="numeric">95</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">77</td>
                <td class="numeric">100</td>
                <td class="numeric">100</td>
              </tr>
              <tr>
                <td>Myra Security CDN</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">18</td>
                <td class="numeric">139</td>
                <td class="numeric">145</td>
              </tr>
              <tr>
                <td>CDNetworks</td>
                <td class="numeric">2</td>
                <td class="numeric">7</td>
                <td class="numeric">100</td>
                <td class="numeric">360</td>
                <td class="numeric">818</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cdn-fig-12" class="anchor-link">Figure 12.</a> TLS SAN count for HTML.</figcaption>
    </figure>
    <figure id="cdn-fig-13">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig13.png">
        <img src="/static/images/2019/cdn/fig13.png" alt="Figure 13. Resource SAN count (p50)." aria-labelledby="cdn-fig13-caption" aria-describedby="cdn-fig13-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=528008536&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
      <div id="cdn-fig13-description" class="visually-hidden">Bar chart showing the data from Table 14 for the p50 percentile.</div>
      <figcaption id="cdn-fig13-caption"><a href="#cdn-fig-13" class="anchor-link">Figure 13.</a> Resource SAN count (p50).</figcaption>
    </figure>
    <figure id="cdn-fig-14">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">p10</th>
                <th scope="col">p25</th>
                <th scope="col">p50</th>
                <th scope="col">p75</th>
                <th scope="col">p90</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>section.io</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
              </tr>
              <tr>
                <td>ORIGIN</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">3</td>
                <td class="numeric">10</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td class="numeric">1</td>
                <td class="numeric">1</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">6</td>
              </tr>
              <tr>
                <td>Highwinds</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">3</td>
                <td class="numeric">79</td>
              </tr>
              <tr>
                <td>WordPress</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
              </tr>
              <tr>
                <td>NetDNA</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
              </tr>
              <tr>
                <td>CDN77</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">10</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td class="numeric">2</td>
                <td class="numeric">3</td>
                <td class="numeric">3</td>
                <td class="numeric">3</td>
                <td class="numeric">35</td>
              </tr>
              <tr>
                <td>Edgecast</td>
                <td class="numeric">2</td>
                <td class="numeric">4</td>
                <td class="numeric">4</td>
                <td class="numeric">4</td>
                <td class="numeric">4</td>
              </tr>
              <tr>
                <td>Twitter</td>
                <td class="numeric">2</td>
                <td class="numeric">4</td>
                <td class="numeric">4</td>
                <td class="numeric">4</td>
                <td class="numeric">4</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">5</td>
                <td class="numeric">20</td>
                <td class="numeric">54</td>
              </tr>
              <tr>
                <td>Google</td>
                <td class="numeric">1</td>
                <td class="numeric">10</td>
                <td class="numeric">11</td>
                <td class="numeric">55</td>
                <td class="numeric">68</td>
              </tr>
              <tr>
                <td>Facebook</td>
                <td class="numeric">13</td>
                <td class="numeric">13</td>
                <td class="numeric">13</td>
                <td class="numeric">13</td>
                <td class="numeric">13</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td class="numeric">2</td>
                <td class="numeric">4</td>
                <td class="numeric">16</td>
                <td class="numeric">98</td>
                <td class="numeric">128</td>
              </tr>
              <tr>
                <td>Yahoo</td>
                <td class="numeric">6</td>
                <td class="numeric">6</td>
                <td class="numeric">79</td>
                <td class="numeric">79</td>
                <td class="numeric">79</td>
              </tr>
              <tr>
                <td>Cedexis</td>
                <td class="numeric">2</td>
                <td class="numeric">2</td>
                <td class="numeric">98</td>
                <td class="numeric">98</td>
                <td class="numeric">98</td>
              </tr>
              <tr>
                <td>Microsoft Azure</td>
                <td class="numeric">2</td>
                <td class="numeric">43</td>
                <td class="numeric">99</td>
                <td class="numeric">99</td>
                <td class="numeric">99</td>
              </tr>
              <tr>
                <td>jsDelivr</td>
                <td class="numeric">2</td>
                <td class="numeric">116</td>
                <td class="numeric">116</td>
                <td class="numeric">116</td>
                <td class="numeric">116</td>
              </tr>
              <tr>
                <td>CDNetworks</td>
                <td class="numeric">132</td>
                <td class="numeric">178</td>
                <td class="numeric">397</td>
                <td class="numeric">398</td>
                <td class="numeric">645</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cdn-fig-14" class="anchor-link">Figure 14.</a> 10th, 25th, 50th, 75th, and 90th percentiles of the distribution of resource SAN count.</figcaption>
    </figure>
    <h2 id="cdn-tls-adoption"><a href="#cdn-tls-adoption" class="anchor-link">TLS adoption</a></h2>
    <p>In addition to using a CDN for TLS and RTT performance, CDNs are often used to ensure patching and adoption of TLS ciphers and TLS versions. In general, the adoption of TLS on the main HTML page is much higher for websites that use a CDN. Over 76% of HTML pages are served with TLS compared to the 62% from origin-hosted pages.</p>
    <figure id="cdn-fig-15">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig15.png">
        <img src="/static/images/2019/cdn/fig15.png" alt="Figure 15. HTML TLS version adoption (CDN vs. origin)." aria-labelledby="cdn-fig15-caption" aria-describedby="cdn-fig15-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=1183502256&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig15-description" data-show-text="{{ show_description(15) }}" data-hide-text="{{ hide_description(15) }}">{{ show_description(15) }}</button>
      <div id="cdn-fig15-description" class="visually-hidden">Stacked bar chart showing TLS 1.0 is used 0.86% of the time for origin, TLS 1.2 55% of the time, TLS 1.3 6% of the time, and unencrypted 38% of the time. For CDN this changes to 35% for TLS 1.2, 41% for TLS 1.3, and 24% for unencrypted.</div>
      <figcaption id="cdn-fig15-caption"><a href="#cdn-fig-15" class="anchor-link">Figure 15.</a> HTML TLS version adoption (CDN vs. origin).</figcaption>
    </figure>
    <p>Each CDN offers different rates of adoption for both TLS and the relative ciphers and versions offered. Some CDNs are more aggressive and roll out these changes to all customers whereas other CDNs require website owners to opt-in to the latest changes and offer change-management to facilitate these ciphers and versions.</p>
    <figure id="cdn-fig-16">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig16.png">
        <img src="/static/images/2019/cdn/fig16.png" alt="Figure 16. HTML TLS adoption by CDN." aria-labelledby="cdn-fig16-caption" aria-describedby="cdn-fig16-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=2053476423&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig16-description" data-show-text="{{ show_description(16) }}" data-hide-text="{{ hide_description(16) }}">{{ show_description(16) }}</button>
      <div id="cdn-fig16-description" class="visually-hidden">Division of secure vs non-secure connections established for initial HTML request broken down by CDN with some CDNs (e.g. Wordpress) at 100%, most between 80%-100%, and then ORIGIN at 62%, Google at 51%, ChinaNetCenter at 36%, and Yunjiasu at 29%.</div>
      <figcaption id="cdn-fig16-caption"><a href="#cdn-fig-16" class="anchor-link">Figure 16.</a> HTML TLS adoption by CDN.</figcaption>
    </figure>
    <figure id="cdn-fig-17">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig17.png">
        <img src="/static/images/2019/cdn/fig17.png" alt="Figure 17. Third-party TLS adoption by CDN." aria-labelledby="cdn-fig17-caption" aria-describedby="cdn-fig17-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=991037479&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig17-description" data-show-text="{{ show_description(17) }}" data-hide-text="{{ hide_description(17) }}">{{ show_description(17) }}</button>
      <div id="cdn-fig17-description" class="visually-hidden">Stacked bar chart showing the vast majority of CDNs use TLS for over 90% of third-party requests, with a few stragglers in the 75% - 90% range, and ORIGIN lower than them all at 68%.</div>
      <figcaption id="cdn-fig17-caption"><a href="#cdn-fig-17" class="anchor-link">Figure 17.</a> Third-party TLS adoption by CDN.</figcaption>
    </figure>
    <p>Along with this general adoption of TLS, CDN use also sees higher adoption of emerging TLS versions like TLS 1.3.</p>
    <p>In general, the use of a CDN is highly correlated with a more rapid adoption of stronger ciphers and stronger TLS versions compared to origin-hosted services where there is a higher usage of very old and compromised TLS versions like TLS 1.0.</p>
    <p class="note">It is important to emphasize that Chrome used in the Web Almanac will bias to the latest TLS versions and ciphers offered by the host. Also, these web pages were crawled in July 2019 and reflect the adoption of websites that have enabled the newer versions.</p>
    <figure id="cdn-fig-18">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig18.png">
        <img src="/static/images/2019/cdn/fig18.png" alt="Figure 18. HTML TLS version by CDN." aria-labelledby="cdn-fig18-caption" aria-describedby="cdn-fig18-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=659795773&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig18-description" data-show-text="{{ show_description(18) }}" data-hide-text="{{ hide_description(18) }}">{{ show_description(18) }}</button>
      <div id="cdn-fig18-description" class="visually-hidden">Bar chart showing that TLS 1.3 or TLS 1.2 is used by all CDNs when TLS is used. A few CDNs have adopted TLS 1.3 completely, some partially and a large proportion not at all and only using TLS 1.2.</div>
      <figcaption id="cdn-fig18-caption"><a href="#cdn-fig-18" class="anchor-link">Figure 18.</a> HTML TLS version by CDN.</figcaption>
    </figure>
    <p>More discussion of TLS versions and ciphers can be found in the <a href="#security">Security</a> and <a href="#http2">HTTP/2</a> chapters.</p>
    <h2 id="cdn-http2-adoption"><a href="#cdn-http2-adoption" class="anchor-link">HTTP/2 adoption</a></h2>
    <p>Along with RTT management and improving TLS performance, CDNs also enable new standards like HTTP/2 and IPv6. While most CDNs offer support for HTTP/2 and many have signaled early support of the still-under-standards-development HTTP/3, adoption still depends on website owners to enable these new features. Despite the change-management overhead, the majority of the HTML served from CDNs has HTTP/2 enabled.</p>
    <p>CDNs have over 70% adoption of HTTP/2, compared to the nearly 27% of origin pages. Similarly, sub-domain and third-party resources on CDNs see an even higher adoption of HTTP/2 at 90% or higher while third-party resources served from origin infrastructure only has 31% adoption. The performance gains and other features of HTTP/2 are further covered in the <a href="#http2">HTTP/2</a> chapter.</p>
    <p class="note">Note: All requests were made with the latest version of Chrome which supports HTTP/2. When only HTTP/1.1 is reported, this would indicate either unencrypted (non-TLS) servers or servers that don't support HTTP/2.</p>
    <figure id="cdn-fig-19">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig19.png">
        <img src="/static/images/2019/cdn/fig19.png" alt="Figure 19. HTTP/2 adoption (CDN vs. origin)." aria-labelledby="cdn-fig19-caption" aria-describedby="cdn-fig19-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=1166990011&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig19-description" data-show-text="{{ show_description(19) }}" data-hide-text="{{ hide_description(19) }}">{{ show_description(19) }}</button>
      <div id="cdn-fig19-description" class="visually-hidden">Stacked bar chart showing 73% of Origin connections use HTTP/1.1, and 27% HTTP/2. This compares to CDNs where 29% are using HTTP/1.1 and 71% HTTP/2.</div>
      <figcaption id="cdn-fig19-caption"><a href="#cdn-fig-19" class="anchor-link">Figure 19.</a> HTTP/2 adoption (CDN vs. origin).</figcaption>
    </figure>
    <figure id="cdn-fig-20">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig20.png">
        <img src="/static/images/2019/cdn/fig20.png" alt="Figure 20. HTML adoption of HTTP/2." aria-labelledby="cdn-fig20-caption" aria-describedby="cdn-fig20-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=1896876288&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig20-description" data-show-text="{{ show_description(20) }}" data-hide-text="{{ hide_description(20) }}">{{ show_description(20) }}</button>
      <div id="cdn-fig20-description" class="visually-hidden">Bar chart showing the data from Table 21.</div>
      <figcaption id="cdn-fig20-caption"><a href="#cdn-fig-20" class="anchor-link">Figure 20.</a> HTML adoption of HTTP/2.</figcaption>
    </figure>
    <figure id="cdn-fig-21">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <td></td>
                <th scope="col">HTTP/0.9</th>
                <th scope="col">HTTP/1.0</th>
                <th scope="col">HTTP/1.1</th>
                <th scope="col">HTTP/2</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>WordPress</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0.38</td>
                <td class="numeric">100</td>
              </tr>
              <tr>
                <td>Netlify</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">1.07</td>
                <td class="numeric">99</td>
              </tr>
              <tr>
                <td>section.io</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">1.56</td>
                <td class="numeric">98</td>
              </tr>
              <tr>
                <td>GoCache</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">7.97</td>
                <td class="numeric">92</td>
              </tr>
              <tr>
                <td>NetDNA</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">12.03</td>
                <td class="numeric">88</td>
              </tr>
              <tr>
                <td>Instart Logic</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">12.36</td>
                <td class="numeric">88</td>
              </tr>
              <tr>
                <td>Microsoft Azure</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">14.06</td>
                <td class="numeric">86</td>
              </tr>
              <tr>
                <td>Sucuri Firewall</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">15.65</td>
                <td class="numeric">84</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">16.34</td>
                <td class="numeric">84</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">16.43</td>
                <td class="numeric">84</td>
              </tr>
              <tr>
                <td>Highwinds</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">17.34</td>
                <td class="numeric">83</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">18.19</td>
                <td class="numeric">82</td>
              </tr>
              <tr>
                <td>OVH CDN</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">25.53</td>
                <td class="numeric">74</td>
              </tr>
              <tr>
                <td>Limelight</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">33.16</td>
                <td class="numeric">67</td>
              </tr>
              <tr>
                <td>Edgecast</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">37.04</td>
                <td class="numeric">63</td>
              </tr>
              <tr>
                <td>Cedexis</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">43.44</td>
                <td class="numeric">57</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">47.17</td>
                <td class="numeric">53</td>
              </tr>
              <tr>
                <td>Myra Security CDN</td>
                <td class="numeric">0</td>
                <td class="numeric">0.06</td>
                <td class="numeric">50.05</td>
                <td class="numeric">50</td>
              </tr>
              <tr>
                <td>Google</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">52.45</td>
                <td class="numeric">48</td>
              </tr>
              <tr>
                <td>Incapsula</td>
                <td class="numeric">0</td>
                <td class="numeric">0.01</td>
                <td class="numeric">55.41</td>
                <td class="numeric">45</td>
              </tr>
              <tr>
                <td>Yunjiasu</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">70.96</td>
                <td class="numeric">29</td>
              </tr>
              <tr>
                <td>ORIGIN</td>
                <td class="numeric">0</td>
                <td class="numeric">0.1</td>
                <td class="numeric">72.81</td>
                <td class="numeric">27</td>
              </tr>
              <tr>
                <td>Zenedge</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">87.54</td>
                <td class="numeric">12</td>
              </tr>
              <tr>
                <td>CDNetworks</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">88.21</td>
                <td class="numeric">12</td>
              </tr>
              <tr>
                <td>ChinaNetCenter</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">94.49</td>
                <td class="numeric">6</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cdn-fig-21" class="anchor-link">Figure 21.</a> HTML adoption of HTTP/2 by CDN.</figcaption>
    </figure>
    <figure id="cdn-fig-22">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig22.png">
        <img src="/static/images/2019/cdn/fig22.png" alt="Figure 22. HTML/2 adoption: third-party resources." aria-labelledby="cdn-fig22-caption" aria-describedby="cdn-fig22-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=397209603&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig22-description" data-show-text="{{ show_description(22) }}" data-hide-text="{{ hide_description(22) }}">{{ show_description(22) }}</button>
      <div id="cdn-fig22-description" class="visually-hidden">Bar chart showing the data from Table 23.</div>
      <figcaption id="cdn-fig22-caption"><a href="#cdn-fig-22" class="anchor-link">Figure 22.</a> HTML/2 adoption: third-party resources.</figcaption>
    </figure>
    <figure id="cdn-fig-23">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>cdn</th>
                <th>HTTP/0.9</th>
                <th>HTTP/1.0</th>
                <th>HTTP/1.1</th>
                <th>HTTP/2</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>jsDelivr</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">100</td>
              </tr>
              <tr>
                <td>Facebook</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">100</td>
              </tr>
              <tr>
                <td>Twitter</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">1</td>
                <td class="numeric">99</td>
              </tr>
              <tr>
                <td>section.io</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">2</td>
                <td class="numeric">98</td>
              </tr>
              <tr>
                <td>BunnyCDN</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">2</td>
                <td class="numeric">98</td>
              </tr>
              <tr>
                <td>KeyCDN</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">4</td>
                <td class="numeric">96</td>
              </tr>
              <tr>
                <td>Microsoft Azure</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">6</td>
                <td class="numeric">94</td>
              </tr>
              <tr>
                <td>WordPress</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">7</td>
                <td class="numeric">93</td>
              </tr>
              <tr>
                <td>CDN77</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">7</td>
                <td class="numeric">93</td>
              </tr>
              <tr>
                <td>NetDNA</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">7</td>
                <td class="numeric">93</td>
              </tr>
              <tr>
                <td>Google</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">8</td>
                <td class="numeric">92</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">10</td>
                <td class="numeric">90</td>
              </tr>
              <tr>
                <td>Sucuri Firewall</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">14</td>
                <td class="numeric">86</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">16</td>
                <td class="numeric">84</td>
              </tr>
              <tr>
                <td>Yahoo</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">17</td>
                <td class="numeric">83</td>
              </tr>
              <tr>
                <td>OVH CDN</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">26</td>
                <td class="numeric">75</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">26</td>
                <td class="numeric">74</td>
              </tr>
              <tr>
                <td>Cedexis</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">27</td>
                <td class="numeric">73</td>
              </tr>
              <tr>
                <td>CDNetworks</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">30</td>
                <td class="numeric">70</td>
              </tr>
              <tr>
                <td>Edgecast</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">42</td>
                <td class="numeric">58</td>
              </tr>
              <tr>
                <td>Highwinds</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">43</td>
                <td class="numeric">57</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td class="numeric">0</td>
                <td class="numeric">0.01</td>
                <td class="numeric">47</td>
                <td class="numeric">53</td>
              </tr>
              <tr>
                <td>Incapsula</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">56</td>
                <td class="numeric">44</td>
              </tr>
              <tr>
                <td>CDNvideo</td>
                <td class="numeric">0</td>
                <td class="numeric">0</td>
                <td class="numeric">68</td>
                <td class="numeric">31</td>
              </tr>
              <tr>
                <td>ORIGIN</td>
                <td class="numeric">0</td>
                <td class="numeric">0.07</td>
                <td class="numeric">69</td>
                <td class="numeric">31</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#cdn-fig-23" class="anchor-link">Figure 23.</a> HTML/2 adoption: third-party resources.</figcaption>
    </figure>
    <h2 id="cdn-controlling-cdn-caching-behavior"><a href="#cdn-controlling-cdn-caching-behavior" class="anchor-link">Controlling CDN caching behavior</a></h2>
    <h3 id="cdn-vary">
      <a href="#cdn-vary" class="anchor-link"><code>Vary</code></a>
    </h3>
    <p>A website can control the caching behavior of browsers and CDNs with the use of different HTTP headers. The most common is the <code>Cache-Control</code> header which specifically determines how long something can be cached before returning to the origin to ensure it is up-to-date.</p>
    <p>Another useful tool is the use of the <code>Vary</code> HTTP header. This header instructs both CDNs and browsers how to fragment a cache. The <code>Vary</code> header allows an origin to indicate that there are multiple representations of a resource, and the CDN should cache each variation separately. The most common example is <a href="#compression">compression</a>. Declaring a resource as <code>Vary: Accept-Encoding</code> allows the CDN to cache the same content, but in different forms like uncompressed, with gzip, or Brotli. Some CDNs even do this compression on the fly so as to keep only one copy available. This <code>Vary</code> header likewise also instructs the browser how to cache the content and when to request new content.</p>
    <figure id="cdn-fig-24">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/use_of_vary_on_cdn.png">
        <img alt="Breakdown of Vary header values for HTML content served from a CDN" src="/static/images/2019/cdn/use_of_vary_on_cdn.png" aria-labelledby="cdn-fig24-caption" aria-describedby="cdn-fig24-description" width="600" height="376" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig24-description" data-show-text="{{ show_description(24) }}" data-hide-text="{{ hide_description(24) }}">{{ show_description(24) }}</button>
      <div id="cdn-fig24-description" class="visually-hidden">Treemap graph showing accept-encoding dominates vary usage with 73% of the chart taken up with that. Cookie (13%) and user-agent (8%) having some usage, then a complete mixed of other headers.</div>
      <figcaption id="cdn-fig24-caption"><a href="#cdn-fig-24" class="anchor-link">Figure 24.</a> Usage of <code>Vary</code> for HTML served from CDNs.</figcaption>
    </figure>
    <p>While the main use of <code>Vary</code> is to coordinate <code>Content-Encoding</code>, there are other important variations that websites use to signal cache fragmentation. Using <code>Vary</code> also instructs SEO bots like DuckDuckGo, Google, and BingBot that alternate content would be returned under different conditions. This has been important to avoid SEO penalties for "cloaking" (sending SEO specific content in order to game the rankings).</p>
    <p>For HTML pages, the most common use of <code>Vary</code> is to signal that the content will change based on the <code>User-Agent</code>. This is short-hand to indicate that the website will return different content for desktops, phones, tablets, and link-unfurling engines (like Slack, iMessage, and Whatsapp). The use of <code>Vary: User-Agent</code> is also a vestige of the early mobile era, where content was split between "mDot" servers and "regular" servers in the back-end. While the adoption for responsive web has gained wide popularity, this <code>Vary</code> form remains.</p>
    <p>In a similar way, <code>Vary: Cookie</code> usually indicates that content that will change based on the logged-in state of the user or other personalization.</p>
    <figure id="cdn-fig-25">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/use_of_vary.png">
        <img src="/static/images/2019/cdn/use_of_vary.png" alt="Figure 25. Comparison of Vary usage for HTML and resources served from origin and CDN." aria-labelledby="cdn-fig25-caption" aria-describedby="cdn-fig25-description" width="600" height="371" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig25-description" data-show-text="{{ show_description(25) }}" data-hide-text="{{ hide_description(25) }}">{{ show_description(25) }}</button>
      <div id="cdn-fig25-description" class="visually-hidden">Set of four treemap graphs showing that for CDNs serving home pages the biggest use of Vary is for Cookie, followed by User-agent. For CDNs serving other resources it's origin, followed by accept, user-agent, x-origin and referrer. For Origins and home pages it's user-agent, followed by cookie. Finally for Origins and other resources it's primarily user-agent followed by origin, accept, then range and host.</div>
      <figcaption id="cdn-fig25-caption"><a href="#cdn-fig-25" class="anchor-link">Figure 25.</a> Comparison of <code>Vary</code> usage for HTML and resources served from origin and CDN.</figcaption>
    </figure>
    <p>Resources, in contrast, don't use <code>Vary: Cookie</code> as much as the HTML resources. Instead these resources are more likely to adapt based on the <code>Accept</code>, <code>Origin</code>, or <code>Referer</code>. Most media, for example, will use <code>Vary: Accept</code> to indicate that an image could be a JPEG, WebP, JPEG 2000, or JPEG XR depending on the browser's offered <code>Accept</code> header. In a similar way, third-party shared resources signal that an XHR API will differ depending on which website it is embedded. This way, a call to an ad server API will return different content depending on the parent website that called the API.</p>
    <p>The <code>Vary</code> header also contains evidence of CDN chains. These can be seen in <code>Vary</code> headers such as <code>Accept-Encoding, Accept-Encoding</code> or even <code>Accept-Encoding, Accept-Encoding, Accept-Encoding</code>. Further analysis of these chains and <code>Via</code> header entries might reveal interesting data, for example how many sites are proxying third-party tags.</p>
    <p>Many of the uses of the <code>Vary</code> are extraneous. With most browsers adopting double-key caching, the use of <code>Vary: Origin</code> is redundant. As is <code>Vary: Range</code> or <code>Vary: Host</code> or <code>Vary: *</code>. The wild and variable use of <code>Vary</code> is demonstrable proof that the internet is weird.</p>
    <h3 id="cdn-surrogate-control-s-maxage-and-pre-check">
      <a href="#cdn-surrogate-control-s-maxage-and-pre-check" class="anchor-link"><code>Surrogate-Control</code>, <code>s-maxage</code>, and <code>Pre-Check</code></a>
    </h3>
    <p>There are other HTTP headers that specifically target CDNs, or other proxy caches, such as the <code>Surrogate-Control</code>, <code>s-maxage</code>, <code>pre-check</code>, and <code>post-check</code> values in the <code>Cache-Control</code> header. In general usage of these headers is low.</p>
    <p><code>Surrogate-Control</code> allows origins to specify caching rules just for CDNs, and as CDNs are likely to strip the header before serving responses, its low visible usage isn't a surprise, in fact it's surprising that it's actually in any responses at all! (It was even seen from some CDNs that state they strip it).</p>
    <p>Some CDNs support <code>post-check</code> as a method to allow a resource to be refreshed when it goes stale, and <code>pre-check</code> as a <code>maxage</code> equivalent. For most CDNs, usage of <code>pre-check</code> and <code>post-check</code> was below 1%. Yahoo was the exception to this and about 15% of requests had <code>pre-check=0, post-check=0</code>. Unfortunately this seems to be a remnant of an old Internet Explorer pattern rather than active usage. More discussion on this can be found in the <a href="#caching">Caching</a> chapter.</p>
    <p>The <code>s-maxage</code> directive informs proxies for how long they may cache a response. Across the Web Almanac dataset, jsDelivr is the only CDN where a high level of usage was seen across multiple resourcesthis isn't surprising given jsDelivr's role as a public CDN for libraries. Usage across other CDNs seems to be driven by individual customers, for example third-party scripts or SaaS providers using that particular CDN.</p>
    <figure id="cdn-fig-26">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig26.png">
        <img src="/static/images/2019/cdn/fig26.png" alt="Figure 26. Adoption of s-maxage across CDN responses." aria-labelledby="cdn-fig26-caption" aria-describedby="cdn-fig26-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=1215102767&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig26-description" data-show-text="{{ show_description(26) }}" data-hide-text="{{ hide_description(26) }}">{{ show_description(26) }}</button>
      <div id="cdn-fig26-description" class="visually-hidden">Bar chart showing 82% of jsDelivr serves responses with s-maxage, 14% of Level 3, 6.3% of Amazon CloudFront, 3.3% of Akamai, 3.1% of Fastly, 3% of Highwinds, 2% of Cloudflare, 0.91% of ORIGIN, 0.75% of Edgecast, 0.07% of Google.</div>
      <figcaption id="cdn-fig26-caption"><a href="#cdn-fig-26" class="anchor-link">Figure 26.</a> Adoption of <code>s-maxage</code> across CDN responses.</figcaption>
    </figure>
    <p>With 40% of sites using a CDN for resources, and presuming these resources are static and cacheable, the usage of <code>s-maxage</code> seems low.</p>
    <p>Future research might explore cache lifetimes versus the age of the resources, and the usage of <code>s-maxage</code> versus other validation directives such as <code>stale-while-revalidate</code>.</p>
    <h2 id="cdn-cdns-for-common-libraries-and-content"><a href="#cdn-cdns-for-common-libraries-and-content" class="anchor-link">CDNs for common libraries and content</a></h2>
    <p>So far, this chapter has explored the use of commercials CDNs which the site may be using to host its own content, or perhaps used by a third-party resource included on the site.</p>
    <p>Common libraries like jQuery and Bootstrap are also available from public CDNs hosted by Google, Cloudflare, Microsoft, etc. Using content from one of the public CDNs instead of a self-hosting the content is a trade-off. Even though the content is hosted on a CDN, creating a new connection and growing the congestion window may negate the low latency of using a CDN.</p>
    <p>Google Fonts is the most popular of the content CDNs and is used by 55% of websites. For non-font content, Google API, Cloudflare's JS CDN, and the Bootstrap's CDN are the next most popular.</p>
    <figure id="cdn-fig-27">
      <a href="https://almanac.httparchive.org/static/images/2019/cdn/fig27.png">
        <img src="/static/images/2019/cdn/fig27.png" alt="Figure 27. Usage of public content CDNs." aria-labelledby="cdn-fig27-caption" aria-describedby="cdn-fig27-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vRzPn-1SGVa3rNCT0U9QeQNODE97fsmXyaJX1ZOoBNR8nPpclhC6fg8R_UpoodeiX6HkdHrp50WBQ5Q/pubchart?oid=123086113&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig27-description" data-show-text="{{ show_description(27) }}" data-hide-text="{{ hide_description(27) }}">{{ show_description(27) }}</button>
      <div id="cdn-fig27-description" class="visually-hidden">Bar chart showing 55.33% of public content CDNs are made to fonts.googleapis.com, 19.86% to ajax.googleapis.com, 10.47% to cdnjs.cloudflare.com, 9.83% to maxcdn.bootstrapcdn.com, 5.95% to code.jquery.com, 4.29% to cdn.jsdelivr.net, 3.22% to use.fontawesome.com, 0.7% to stackpath.bootstrapcdn.com, 0.67% to unpkg.com, and 0.52% to ajax.aspnetcdn.com.</div>
      <figcaption id="cdn-fig27-caption"><a href="#cdn-fig-27" class="anchor-link">Figure 27.</a> Usage of public content CDNs.</figcaption>
    </figure>
    <p>As more browsers implement partitioned caches, the effectiveness of public CDNs for hosting common libraries will decrease and it will be interesting to see whether they are less popular in future iterations of this research.</p>
    <h2 id="cdn-conclusion"><a href="#cdn-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>The reduction in latency that CDNs deliver along with their ability to store content close to visitors enable sites to deliver faster experiences while reducing the load on the origin.</p>
    <p>Steve Souders' recommendation to use a CDN remains as valid today as it was 12 years ago, yet only 20% of sites serve their HTML content via a CDN, and only 40% are using a CDN for resources, so there's plenty of opportunity for their usage to grow further.</p>
    <p>There are some aspects of CDN adoption that aren't included in this analysis, sometimes this was due to the limitations of the dataset and how it's collected, in other cases new research questions emerged during the analysis.</p>
    <p>As the web continues to evolve, CDN vendors innovate, and sites use new practices CDN adoption remains an area rich for further research in future editions of the Web Almanac.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"IV","chapter_number":18,"title":"Page Weight","description":"Page Weight chapter of the 2019 Web Almanac covering why page weight matters, bandwidth, complex pages, page weight over time, page requests, and file formats.","authors":["tammyeverts","khempenius"],"reviewers":["paulcalvano"],"translators":null,"discuss":"1773","results":"https://docs.google.com/spreadsheets/d/1nWOo8efqDgzmA0wt1ipplziKhlReAxnVCW1HkjuFAxU/","queries":"18_PageWeight","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-03-01T00:00:00.000Z","chapter":"page-weight"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="page-weight-introduction"><a href="#page-weight-introduction" class="anchor-link">Introduction</a></h2>
    <p>The median web page is around 1900KB in size and contains 74 requests. That doesn't sound too bad, right?</p>
    <p>Here's the issue with medians: they mask problems. By definition, they focus only on the middle of the distribution. We need to consider percentiles at both extremes to get an understanding of the bigger picture.</p>
    <p>Looking at the 90th percentile exposes the unpleasant stuff. Roughly 10% of the pages we're pushing at the unsuspecting public are in excess of 6 MB and contain 179 requests. This is, frankly, terrible. If this doesn't seem terrible to you, then you definitely need to read this chapter.</p>
    <h3 id="page-weight-myth-page-size-doesnt-matter"><a href="#page-weight-myth-page-size-doesnt-matter" class="anchor-link">Myth: Page size doesn't matter</a></h3>
    <p>The common argument as to why page size doesn't matter anymore is that, thanks to high-speed internet and our souped-up devices, we can serve massive, complex (and massively complex) pages to the general population. This assumption works fine, as long as you're okay with ignoring the vast swathe of internet users who don't have access to said high-speed internet and souped-up devices.</p>
    <p>Yes, you can build large robust pages that feel fast to some users. But you should care about page bloat in terms of how it affects all your users, especially mobile-only users who deal with bandwidth constraints or data limits.</p>
    <p class="note" data-markdown="1"></p>
    <p>
      Check out Tim Kadlec's fascinating online calculator, <a href="https://whatdoesmysitecost.com/">What Does My Site Cost?<span class="fn">https://whatdoesmysitecost.com/</span></a
      >, which calculates the costin dollars and Gross National Income per capitaof your pages in countries around the world. It's an eye-opener. For instance, Amazon's home page, which at the time of writing weighs 2.79MB, costs 1.89% of the daily per capita GNI of Mauritania. How global is the world wide web when people in some parts of the world would have to give up a day's wages just to visit a few dozen pages?
    </p>
    <h3 id="page-weight-more-bandwidth-isnt-a-magic-bullet-for-web-performance"><a href="#page-weight-more-bandwidth-isnt-a-magic-bullet-for-web-performance" class="anchor-link">More bandwidth isn't a magic bullet for web performance</a></h3>
    <p>
      Even if more people had access to better devices and cheaper connections, that wouldn't be a complete solution. Double the bandwidth doesn't mean twice as fast. In fact, <a href="https://developer.akamai.com/blog/2015/06/09/heres-why-more-bandwidth-isnt-magic-bullet-web-performance">it has been demonstrated<span class="fn">https://developer.akamai.com/blog/2015/06/09/heres-why-more-bandwidth-isnt-magic-bullet-web-performance</span></a> that increasing bandwidth by up to 1,233% only made pages 55% faster.
    </p>
    <p>The problem is latency. Most of our networking protocols require a lot of round-trips, and each of those round trips imposes a latency penalty. For as long as latency continues to be a performance problem (which is to say, for the foreseeable future), the major performance culprit will continue to be that a typical web page today contains a hundred or so assets hosted on dozens of different servers. Many of these assets are unoptimized, unmeasured, unmonitoredand therefore unpredictable.</p>
    <h3 id="page-weight-what-types-of-assets-does-the-http-archive-track-and-how-much-do-they-matter"><a href="#page-weight-what-types-of-assets-does-the-http-archive-track-and-how-much-do-they-matter" class="anchor-link">What types of assets does the HTTP Archive track, and how much do they matter?</a></h3>
    <p>Here's a quick glossary of the page composition metrics that the HTTP Archive tracks, and how much they matter in terms of performance and user experience:</p>
    <ul>
      <li>
        <p>The <strong>total size</strong> is the total weight in bytes of the page. It matters especially to mobile users who have limited and/or metered data.</p>
      </li>
      <li>
        <p><strong>HTML</strong> is typically the smallest resource on the page. Its performance risk is negligible.</p>
      </li>
      <li>
        <p>Unoptimized <strong>images</strong> are often the greatest contributor to page bloat. Looking at the 90th percentile of the distribution of page weight, images account for a whopping 5.2 MB of a roughly 7 MB page. In other words, images comprise almost 75% of the total page weight. And if that already wasn't enough, the number of images on a page has been linked to lower conversion rates on retail sites. (More on that later.)</p>
      </li>
      <li>
        <p><strong>JavaScript</strong> matters. A page can have a relatively low JavaScript weight but still suffer from JavaScript-inflicted performance problems. Even a single 100 KB third-party script can wreak havoc with your page. The more scripts on your page, the greater the risk.</p>
        <p>It's not enough to focus solely on blocking JavaScript. It's possible for your pages to contain zero blocking resources and still have less-than-optimal performance because of how your JavaScript is rendered. That's why it's so important to understand CPU usage on your pages, because JavaScript consumes more CPU than all other browser activities combined. While JavaScript blocks the CPU, the browser can't respond to user input. This creates what's commonly called "jank": that annoying feeling of jittery, unstable page rendering.</p>
      </li>
      <li>
        <p><strong>CSS</strong> is an incredible boon for modern web pages. It solves a myriad of design problems, from browser compatibility to design maintenance and updating. Without CSS, we wouldn't have great things like responsive design. But, like JavaScript, CSS doesn't have to be bulky to cause problems. Poorly executed stylesheets can create a host of performance problems, ranging from stylesheets taking too long to download and parse, to improperly placed stylesheets that block the rest of the page from rendering. And, similarly to JavaScript, more CSS files equals more potential trouble.</p>
      </li>
    </ul>
    <h3 id="page-weight-bigger-complex-pages-can-be-bad-for-your-business"><a href="#page-weight-bigger-complex-pages-can-be-bad-for-your-business" class="anchor-link">Bigger, complex pages can be bad for your business</a></h3>
    <p>
      Let's assume you're not a heartless monster who doesn't care about your site's visitors. But if you are, you should know that serving bigger, more complex pages hurts you, too. That was one of the findings of a <a href="https://www.thinkwithgoogle.com/marketing-resources/experience-design/mobile-page-speed-load-time/">Google-led machine learning study<span class="fn">https://www.thinkwithgoogle.com/marketing-resources/experience-design/mobile-page-speed-load-time/</span></a> that gathered over a million beacons' worth of real user data from retail sites.
    </p>
    <p>There were three really important takeaways from this research:</p>
    <ol>
      <li>
        <p><strong>The total number of elements on a page was the greatest predictor of conversions.</strong> Hopefully this doesn't come as a huge surprise to you, given what we've just covered about the performance risks imposed by the various assets that make up a modern web page.</p>
      </li>
      <li>
        <p><strong>The number of images on a page was the second greatest predictor of conversions.</strong> Sessions in which users converted had 38% fewer images than in sessions that didn't convert.</p>
      </li>
    </ol>
    <figure id="page-weight-fig-1">
      <a href="https://almanac.httparchive.org/static/images/2019/page-weight/ch18_fig1_conversion_difference.png">
        <img src="/static/images/2019/page-weight/ch18_fig1_conversion_difference.png" alt="Figure 1. Converted sessions vs non-converted sessions." aria-labelledby="page-weight-fig1-caption" aria-describedby="page-weight-fig1-description" width="600" height="432" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig1-description" data-show-text="{{ show_description(1) }}" data-hide-text="{{ hide_description(1) }}">{{ show_description(1) }}</button>
      <div id="page-weight-fig1-description" class="visually-hidden">Chart showing 19 converted sessions vs. 31 non-converted sessions</div>
      <figcaption id="page-weight-fig1-caption"><a href="#page-weight-fig-1" class="anchor-link">Figure 1.</a> Converted sessions vs non-converted sessions.</figcaption>
    </figure>
    <ol start="3">
      <li><strong>Sessions with more scripts were less likely to convert.</strong> What's really fascinating about this chart isn't just the sharp drop-off in conversion probability after about 240 scripts. It's the long tail that demonstrates how many retail sessions contained up to 1,440 scripts!</li>
    </ol>
    <figure id="page-weight-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/page-weight/ch18_fig2_conversion_graph.jpg">
        <img src="/static/images/2019/page-weight/ch18_fig2_conversion_graph.jpg" alt="Figure 2. Conversion rate dropping off as scripts increase." aria-labelledby="page-weight-fig2-caption" aria-describedby="page-weight-fig2-description" width="600" height="336" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="page-weight-fig2-description" class="visually-hidden">Chart showing conversion rate climbing up until 80 scripts, and then dropping off as scripts increase up to 1440 scripts.</div>
      <figcaption id="page-weight-fig2-caption"><a href="#page-weight-fig-2" class="anchor-link">Figure 2.</a> Conversion rate dropping off as scripts increase.</figcaption>
    </figure>
    <p>Now that we've covered why page size and complexity matter, let's get into some juicy HTTP Archive stats so we can better understand the current state of the web and the impact of page bloat.</p>
    <h2 id="page-weight-analysis"><a href="#page-weight-analysis" class="anchor-link">Analysis</a></h2>
    <p>The statistics in this section are all based on the <em>transfer size</em> of a page and its resources. Not all resources on the web are compressed before sending, but if they are, this analysis uses the compressed size.</p>
    <h3 id="page-weight-page-weight"><a href="#page-weight-page-weight" class="anchor-link">Page weight</a></h3>
    <p>Roughly speaking, mobile sites are about 10% smaller than their desktop counterparts. The majority of the difference is due to mobile sites loading fewer image bytes than their desktop counterparts.</p>
    <h4 id="page-weight-mobile"><a href="#page-weight-mobile" class="anchor-link">Mobile</a></h4>
    <figure id="page-weight-fig-3">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>Total (KB)</th>
                <th>HTML (KB)</th>
                <th>JS (KB)</th>
                <th>CSS (KB)</th>
                <th>Image (KB)</th>
                <th>Document (KB)</th>
              </tr>
              <tr>
                <td>90</td>
                <td>6226</td>
                <td>107</td>
                <td>1060</td>
                <td>234</td>
                <td>4746</td>
                <td>49</td>
              </tr>
              <tr>
                <td>75</td>
                <td>3431</td>
                <td>56</td>
                <td>668</td>
                <td>122</td>
                <td>2270</td>
                <td>25</td>
              </tr>
              <tr>
                <td>50</td>
                <td>1745</td>
                <td>26</td>
                <td>360</td>
                <td>56</td>
                <td>893</td>
                <td>13</td>
              </tr>
              <tr>
                <td>25</td>
                <td>800</td>
                <td>11</td>
                <td>164</td>
                <td>22</td>
                <td>266</td>
                <td>7</td>
              </tr>
              <tr>
                <td>10</td>
                <td>318</td>
                <td>6</td>
                <td>65</td>
                <td>5</td>
                <td>59</td>
                <td>4</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-3" class="anchor-link">Figure 3.</a> Page weight on mobile broken down by resource type.</figcaption>
    </figure>
    <h4 id="page-weight-desktop"><a href="#page-weight-desktop" class="anchor-link">Desktop</a></h4>
    <figure id="page-weight-fig-4">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>Total (KB)</th>
                <th>HTML (KB)</th>
                <th>JS (KB)</th>
                <th>CSS (KB)</th>
                <th>Image (KB)</th>
                <th>Document (KB)</th>
              </tr>
              <tr>
                <td>90</td>
                <td>6945</td>
                <td>110</td>
                <td>1131</td>
                <td>240</td>
                <td>5220</td>
                <td>52</td>
              </tr>
              <tr>
                <td>75</td>
                <td>3774</td>
                <td>58</td>
                <td>721</td>
                <td>129</td>
                <td>2434</td>
                <td>26</td>
              </tr>
              <tr>
                <td>50</td>
                <td>1934</td>
                <td>27</td>
                <td>391</td>
                <td>62</td>
                <td>983</td>
                <td>14</td>
              </tr>
              <tr>
                <td>25</td>
                <td>924</td>
                <td>12</td>
                <td>186</td>
                <td>26</td>
                <td>319</td>
                <td>8</td>
              </tr>
              <tr>
                <td>10</td>
                <td>397</td>
                <td>6</td>
                <td>76</td>
                <td>8</td>
                <td>78</td>
                <td>4</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-4" class="anchor-link">Figure 4.</a> Page weight on desktop broken down by resource type</figcaption>
    </figure>
    <h3 id="page-weight-page-weight-over-time"><a href="#page-weight-page-weight-over-time" class="anchor-link">Page weight over time</a></h3>
    <p>Over the past year the median size of a desktop site increased by 434 KB, and the median size of a mobile site increased by 179 KB. Images are overwhelmingly driving this increase.</p>
    <h4 id="page-weight-mobile-1"><a href="#page-weight-mobile-1" class="anchor-link">Mobile</a></h4>
    <figure id="page-weight-fig-5">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>Total (KB)</th>
                <th>HTML (KB)</th>
                <th>JS (KB)</th>
                <th>CSS (KB)</th>
                <th>Image (KB)</th>
                <th>Document (KB)</th>
              </tr>
              <tr>
                <td>90</td>
                <td>+376</td>
                <td>-50</td>
                <td>+46</td>
                <td>+36</td>
                <td>+648</td>
                <td>+2</td>
              </tr>
              <tr>
                <td>75</td>
                <td>+304</td>
                <td>-7</td>
                <td>+34</td>
                <td>+21</td>
                <td>+281</td>
                <td>0</td>
              </tr>
              <tr>
                <td>50</td>
                <td>+179</td>
                <td>-1</td>
                <td>+27</td>
                <td>+10</td>
                <td>+106</td>
                <td>0</td>
              </tr>
              <tr>
                <td>25</td>
                <td>+110</td>
                <td>-1</td>
                <td>+16</td>
                <td>+5</td>
                <td>+36</td>
                <td>0</td>
              </tr>
              <tr>
                <td>10</td>
                <td>+72</td>
                <td>0</td>
                <td>+13</td>
                <td>+2</td>
                <td>+20</td>
                <td>+1</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-5" class="anchor-link">Figure 5.</a> Change in mobile page weight since 2018.</figcaption>
    </figure>
    <h4 id="page-weight-desktop-1"><a href="#page-weight-desktop-1" class="anchor-link">Desktop</a></h4>
    <figure id="page-weight-fig-6">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>Total (KB)</th>
                <th>HTML (KB)</th>
                <th>JS (KB)</th>
                <th>CSS (KB)</th>
                <th>Image (KB)</th>
                <th>Document (KB)</th>
              </tr>
              <tr>
                <td>90</td>
                <td>+1106</td>
                <td>-75</td>
                <td>+22</td>
                <td>+45</td>
                <td>+1291</td>
                <td>+5</td>
              </tr>
              <tr>
                <td>75</td>
                <td>+795</td>
                <td>-12</td>
                <td>+9</td>
                <td>+32</td>
                <td>+686</td>
                <td>+1</td>
              </tr>
              <tr>
                <td>50</td>
                <td>+434</td>
                <td>-1</td>
                <td>+10</td>
                <td>+15</td>
                <td>+336</td>
                <td>0</td>
              </tr>
              <tr>
                <td>25</td>
                <td>+237</td>
                <td>0</td>
                <td>+12</td>
                <td>+7</td>
                <td>+138</td>
                <td>0</td>
              </tr>
              <tr>
                <td>10</td>
                <td>+120</td>
                <td>0</td>
                <td>+10</td>
                <td>+2</td>
                <td>+39</td>
                <td>+1</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-6" class="anchor-link">Figure 6.</a> Change in desktop page weight since 2018.</figcaption>
    </figure>
    <p>
      For a longer-term perspective on how page weight has changed over time, check out <a href="https://httparchive.org/reports/page-weight#bytesTotal">this timeseries graph<span class="fn">https://httparchive.org/reports/page-weight#bytesTotal</span></a> from HTTP Archive. Median page size has grown at a fairly constant rate since the HTTP Archive started tracking this metric in November 2010 and the increase in page weight observed over the past year is consistent with this.
    </p>
    <h3 id="page-weight-page-requests"><a href="#page-weight-page-requests" class="anchor-link">Page requests</a></h3>
    <p>The median desktop page makes 74 requests, and the median mobile page makes 69. Images and JavaScript account for the majority of these requests. There was no significant change in the quantity or distribution of requests over the last year.</p>
    <h4 id="page-weight-mobile-2"><a href="#page-weight-mobile-2" class="anchor-link">Mobile</a></h4>
    <figure id="page-weight-fig-7">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>Total</th>
                <th>HTML</th>
                <th>JS</th>
                <th>CSS</th>
                <th>Image</th>
                <th>Document</th>
              </tr>
              <tr>
                <td>90</td>
                <td>168</td>
                <td>15</td>
                <td>52</td>
                <td>20</td>
                <td>79</td>
                <td>7</td>
              </tr>
              <tr>
                <td>75</td>
                <td>111</td>
                <td>7</td>
                <td>32</td>
                <td>12</td>
                <td>49</td>
                <td>2</td>
              </tr>
              <tr>
                <td>50</td>
                <td>69</td>
                <td>3</td>
                <td>18</td>
                <td>6</td>
                <td>28</td>
                <td>0</td>
              </tr>
              <tr>
                <td>25</td>
                <td>40</td>
                <td>2</td>
                <td>9</td>
                <td>3</td>
                <td>15</td>
                <td>0</td>
              </tr>
              <tr>
                <td>10</td>
                <td>22</td>
                <td>1</td>
                <td>4</td>
                <td>1</td>
                <td>7</td>
                <td>0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-7" class="anchor-link">Figure 7.</a> Mobile page requests broken down by resource type.</figcaption>
    </figure>
    <h4 id="page-weight-desktop-2"><a href="#page-weight-desktop-2" class="anchor-link">Desktop</a></h4>
    <figure id="page-weight-fig-8">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>Total</th>
                <th>HTML</th>
                <th>JS</th>
                <th>CSS</th>
                <th>Image</th>
                <th>Document</th>
              </tr>
              <tr>
                <td>90</td>
                <td>179</td>
                <td>14</td>
                <td>53</td>
                <td>20</td>
                <td>90</td>
                <td>6</td>
              </tr>
              <tr>
                <td>75</td>
                <td>118</td>
                <td>7</td>
                <td>33</td>
                <td>12</td>
                <td>54</td>
                <td>2</td>
              </tr>
              <tr>
                <td>50</td>
                <td>74</td>
                <td>4</td>
                <td>19</td>
                <td>6</td>
                <td>31</td>
                <td>0</td>
              </tr>
              <tr>
                <td>25</td>
                <td>44</td>
                <td>2</td>
                <td>10</td>
                <td>3</td>
                <td>16</td>
                <td>0</td>
              </tr>
              <tr>
                <td>10</td>
                <td>24</td>
                <td>1</td>
                <td>4</td>
                <td>1</td>
                <td>7</td>
                <td>0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-8" class="anchor-link">Figure 8.</a> Desktop page requests broken down by resource type.</figcaption>
    </figure>
    <h3 id="page-weight-file-formats"><a href="#page-weight-file-formats" class="anchor-link">File formats</a></h3>
    <p>The preceding analysis has focused on analyzing page weight through the lens of resource types. However, in the case of images and media, it's possible to dive a level deeper and look at the differences in resource sizes between specific file formats.</p>
    <h4 id="page-weight-file-size-by-image-format-mobile"><a href="#page-weight-file-size-by-image-format-mobile" class="anchor-link">File size by image format (mobile)</a></h4>
    <figure id="page-weight-fig-9">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>GIF (KB)</th>
                <th>ICO (KB)</th>
                <th>JPG (KB)</th>
                <th>PNG (KB)</th>
                <th>SVG (KB)</th>
                <th>WEBP (KB)</th>
              </tr>
              <tr>
                <td>10</td>
                <td>0</td>
                <td>0</td>
                <td>3.08</td>
                <td>0.37</td>
                <td>0.25</td>
                <td>2.54</td>
              </tr>
              <tr>
                <td>25</td>
                <td>0.03</td>
                <td>0.26</td>
                <td>7.96</td>
                <td>1.14</td>
                <td>0.43</td>
                <td>4.89</td>
              </tr>
              <tr>
                <td>50</td>
                <td>0.04</td>
                <td>1.12</td>
                <td>21</td>
                <td>4.31</td>
                <td>0.88</td>
                <td>13</td>
              </tr>
              <tr>
                <td>75</td>
                <td>0.06</td>
                <td>2.72</td>
                <td>63</td>
                <td>22</td>
                <td>2.41</td>
                <td>33</td>
              </tr>
              <tr>
                <td>90</td>
                <td>2.65</td>
                <td>13</td>
                <td>155</td>
                <td>90</td>
                <td>7.91</td>
                <td>78</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-9" class="anchor-link">Figure 9.</a> Images file sizes on mobile broken down by image format.</figcaption>
    </figure>
    <p>Some of these results, particularly those for GIFs, are really surprising. If GIFs are so small, then why are they being replaced by formats like JPG, PNG, and WEBP?</p>
    <p>The data above obscures the fact that the vast majority of GIFs on the web are actually tiny 1x1 pixels. These pixels are typically used as "tracking pixels", but can also be used as a hack to generate various CSS effects. While these 1x1 pixels are images in the literal sense, the spirit of their usage is probably closer to what we'd associate with scripts or CSS.</p>
    <p>Further investigation into the data set revealed that 62% of GIFs are 43 bytes or smaller (43 bytes is the size of a transparent, 1x1 pixel GIF) and 84% of GIFs are 1 KB or smaller.</p>
    <figure id="page-weight-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/page-weight/ch18_fig3_gif_cdf.png">
        <img src="/static/images/2019/page-weight/ch18_fig3_gif_cdf.png" alt="Figure 10. Cumulative distribution function of GIF file sizes." aria-labelledby="page-weight-fig10-caption" aria-describedby="page-weight-fig10-description" width="600" height="330" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="page-weight-fig10-description" class="visually-hidden">Chart showing 25% of GIFs are 35 bytes or smaller (which is the optimal size of a 1x1 white GIF) and 62% of GIFs are 43 bytes or smaller (which is the optimal size of a 1x1 transparent GIF). This increases to just over 75% of GIFs being 100 bytes or less.</div>
      <figcaption id="page-weight-fig10-caption"><a href="#page-weight-fig-10" class="anchor-link">Figure 10.</a> Cumulative distribution function of GIF file sizes.</figcaption>
    </figure>
    <p>The tables below show two different approaches to removing these tiny images from the data set: the first one is based on images with a file size greater than 100 bytes, the second is based on images with a file size greater than 1024 bytes.</p>
    <h4 id="page-weight-file-size-by-image-format-for-images--100-bytes"><a href="#page-weight-file-size-by-image-format-for-images--100-bytes" class="anchor-link">File size by image format for images &gt; 100 bytes</a></h4>
    <figure id="page-weight-fig-11">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>GIF (KB)</th>
                <th>ICO (KB)</th>
                <th>JPG (KB)</th>
                <th>PNG (KB)</th>
                <th>SVG (KB)</th>
                <th>WEBP (KB)</th>
              </tr>
              <tr>
                <td>10</td>
                <td>0.27</td>
                <td>0.31</td>
                <td>3.08</td>
                <td>0.4</td>
                <td>0.28</td>
                <td>2.1</td>
              </tr>
              <tr>
                <td>25</td>
                <td>0.75</td>
                <td>0.6</td>
                <td>7.7</td>
                <td>1.17</td>
                <td>0.46</td>
                <td>4.4</td>
              </tr>
              <tr>
                <td>50</td>
                <td>2.14</td>
                <td>1.12</td>
                <td>20.47</td>
                <td>4.35</td>
                <td>0.95</td>
                <td>11.54</td>
              </tr>
              <tr>
                <td>75</td>
                <td>7.34</td>
                <td>4.19</td>
                <td>61.13</td>
                <td>21.39</td>
                <td>2.67</td>
                <td>31.21</td>
              </tr>
              <tr>
                <td>90</td>
                <td>35</td>
                <td>14.73</td>
                <td>155.46</td>
                <td>91.02</td>
                <td>8.26</td>
                <td>76.43</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-11" class="anchor-link">Figure 11.</a> File size by image format for images &gt; 100 bytes.</figcaption>
    </figure>
    <h4 id="page-weight-file-size-by-image-format-for-images--1024-bytes"><a href="#page-weight-file-size-by-image-format-for-images--1024-bytes" class="anchor-link">File size by image format for images &gt; 1024 bytes</a></h4>
    <figure id="page-weight-fig-12">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>GIF (KB)</th>
                <th>ICO (KB)</th>
                <th>JPG (KB)</th>
                <th>PNG (KB)</th>
                <th>SVG (KB)</th>
                <th>WEBP (KB)</th>
              </tr>
              <tr>
                <td>10</td>
                <td>1.28</td>
                <td>1.12</td>
                <td>3.4</td>
                <td>1.5</td>
                <td>1.2</td>
                <td>3.08</td>
              </tr>
              <tr>
                <td>25</td>
                <td>1.9</td>
                <td>1.12</td>
                <td>8.21</td>
                <td>2.88</td>
                <td>1.52</td>
                <td>5</td>
              </tr>
              <tr>
                <td>50</td>
                <td>4.01</td>
                <td>2.49</td>
                <td>21.19</td>
                <td>8.33</td>
                <td>2.81</td>
                <td>12.52</td>
              </tr>
              <tr>
                <td>75</td>
                <td>11.92</td>
                <td>7.87</td>
                <td>62.54</td>
                <td>33.17</td>
                <td>6.88</td>
                <td>32.83</td>
              </tr>
              <tr>
                <td>90</td>
                <td>67.15</td>
                <td>22.13</td>
                <td>157.96</td>
                <td>127.15</td>
                <td>19.06</td>
                <td>79.53</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-12" class="anchor-link">Figure 12.</a> File size by image format for images &gt; 1024 bytes.</figcaption>
    </figure>
    <p>
      The low file size of PNG images compared to JPEG images may seem surprising. JPEG uses <a href="https://en.wikipedia.org/wiki/Lossy_compression">lossy compression<span class="fn">https://en.wikipedia.org/wiki/Lossy_compression</span></a
      >. Lossy compression results in data loss, which makes it possible to achieve smaller file sizes. Meanwhile, PNG uses <a href="https://en.wikipedia.org/wiki/Lossless_compression">lossless compression<span class="fn">https://en.wikipedia.org/wiki/Lossless_compression</span></a
      >. This does not result in data loss, which this produces higher-quality, but larger images. However, this difference in file sizes is probably a reflection of the popularity of PNGs for iconography due to their transparency support, rather than differences in their encoding and compression.
    </p>
    <h4 id="page-weight-file-size-by-media-format"><a href="#page-weight-file-size-by-media-format" class="anchor-link">File size by media format</a></h4>
    <p>MP4 is overwhelmingly the most popular video format on the web today. In terms of popularity, it is followed by WebM and MPEG-TS respectively.</p>
    <p>Unlike some of the other tables in this data set, this one has mostly happy takeaways. Videos are consistently smaller on mobile, which is great to see. In addition, the median size of an MP4 video is a very reasonable 18 KB on mobile and 39 KB on desktop. The median numbers for WebM are even better but they should be taken with a grain of salt: the duplicate measurement of 0.29 KB across multiple clients and percentiles is a little bit suspicious. One possible explanation is that identical copies of one very tiny WebM video is included on many pages. Of the three formats, MPEG-TS consistently has the highest file size across all percentiles. This may be related to the fact that it was released in 1995, making it the oldest of these three media formats.</p>
    <h5 id="page-weight-mobile-3"><a href="#page-weight-mobile-3" class="anchor-link">Mobile</a></h5>
    <figure id="page-weight-fig-13">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>MP4 (KB)</th>
                <th>WebM (KB)</th>
                <th>MPEG-TS (KB)</th>
              </tr>
              <tr>
                <td>10</td>
                <td>0.89</td>
                <td>0.29</td>
                <td>0.01</td>
              </tr>
              <tr>
                <td>25</td>
                <td>2.07</td>
                <td>0.29</td>
                <td>55</td>
              </tr>
              <tr>
                <td>50</td>
                <td>18</td>
                <td>1.44</td>
                <td>153</td>
              </tr>
              <tr>
                <td>75</td>
                <td>202</td>
                <td>223</td>
                <td>278</td>
              </tr>
              <tr>
                <td>90</td>
                <td>928</td>
                <td>390</td>
                <td>475</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-13" class="anchor-link">Figure 13.</a> Video size by media format on mobile.</figcaption>
    </figure>
    <h5 id="page-weight-desktop-3"><a href="#page-weight-desktop-3" class="anchor-link">Desktop</a></h5>
    <figure id="page-weight-fig-14">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Percentile</th>
                <th>MP4 (KB)</th>
                <th>WebM (KB)</th>
                <th>MPEG-TS (KB)</th>
              </tr>
              <tr>
                <td>10</td>
                <td>0.27</td>
                <td>0.29</td>
                <td>34</td>
              </tr>
              <tr>
                <td>25</td>
                <td>1.05</td>
                <td>0.29</td>
                <td>121</td>
              </tr>
              <tr>
                <td>50</td>
                <td>39</td>
                <td>17</td>
                <td>286</td>
              </tr>
              <tr>
                <td>75</td>
                <td>514</td>
                <td>288</td>
                <td>476</td>
              </tr>
              <tr>
                <td>90</td>
                <td>2142</td>
                <td>896</td>
                <td>756</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#page-weight-fig-14" class="anchor-link">Figure 14.</a> Video size by media format on desktop.</figcaption>
    </figure>
    <h2 id="page-weight-conclusion"><a href="#page-weight-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>Over the past year, pages increased in size by roughly 10%. Brotli, performance budgets, and basic image optimization best practices are probably the three techniques which show the most promise for maintaining or improving page weight while also being widely applicable and fairly easy to implement. That being said, in recent years, improvements in page weight have been more constrained by the low adoption of best practices than by the technology itself. In other words, although there are many existing techniques for improving page weight, they won't make a difference if they aren't put to use.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"IV","chapter_number":19,"title":"Resource Hints","description":"Resource Hints chapter of the 2019 Web Almanac covering usage of dns-prefetch, preconnect, preload, prefetch, priority hints, and native lazy loading.","authors":["khempenius"],"reviewers":["andydavies","bazzadp","yoavweiss"],"translators":null,"discuss":"1774","results":"https://docs.google.com/spreadsheets/d/14QBP8XGkMRfWRBbWsoHm6oDVPkYhAIIpfxRn4iOkbUU/","queries":"19_Resource_Hints","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-06-30T00:00:00.000Z","chapter":"resource-hints"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="resource-hints-introduction"><a href="#resource-hints-introduction" class="anchor-link">Introduction</a></h2>
    <p>
      <a href="https://www.w3.org/TR/resource-hints/">Resource hints<span class="fn">https://www.w3.org/TR/resource-hints/</span></a> provide "hints" to the browser about what resources will be needed soon. The action that the browser takes as a result of receiving this hint will vary depending on the type of resource hint; different resource hints kick off different actions. When used correctly, they can improve page performance by giving a head start to important anticipated actions.
    </p>
    <p>
      <a href="https://youtu.be/YJGCZCaIZkQ?t=1956">Examples<span class="fn">https://youtu.be/YJGCZCaIZkQ?t=1956</span></a> of performance improvements as a result of resource hints include:
    </p>
    <ul>
      <li>Jabong decreased Time to Interactive by 1.5 seconds by preloading critical scripts.</li>
      <li>Barefoot Wine decreased Time to Interactive of future pages by 2.7 seconds by prefetching visible links.</li>
      <li>Chrome.com decreased latency by 0.7 seconds by preconnecting to critical origins.</li>
    </ul>
    <p>There are four separate resource hints supported by most browsers today: <code>dns-prefetch</code>, <code>preconnect</code>, <code>preload</code>, and <code>prefetch</code>.</p>
    <h3 id="resource-hints-dns-prefetch">
      <a href="#resource-hints-dns-prefetch" class="anchor-link"><code>dns-prefetch</code></a>
    </h3>
    <p>
      The role of <a href="https://developer.mozilla.org/en-US/docs/Learn/Performance/dns-prefetch"><code>dns-prefetch</code><span class="fn">https://developer.mozilla.org/en-US/docs/Learn/Performance/dns-prefetch</span></a> is to initiate an early DNS lookup. It's useful for completing the DNS lookup for third-parties. For example, the DNS lookup of a CDN, font provider, or third-party API.
    </p>
    <h3 id="resource-hints-preconnect">
      <a href="#resource-hints-preconnect" class="anchor-link"><code>preconnect</code></a>
    </h3>
    <p>
      <a href="https://web.dev/uses-rel-preconnect"><code>preconnect</code><span class="fn">https://web.dev/uses-rel-preconnect</span></a> initiates an early connection, including DNS lookup, TCP handshake, and TLS negotiation. This hint is useful for setting up a connection with a third party. The uses of <code>preconnect</code> are very similar to those of <code>dns-prefetch</code>, but <code>preconnect</code> has less browser support. However, if you don't need IE 11 support, preconnect is probably a better choice.
    </p>
    <h3 id="resource-hints-preload">
      <a href="#resource-hints-preload" class="anchor-link"><code>preload</code></a>
    </h3>
    <p>
      The <a href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf"><code>preload</code><span class="fn">https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf</span></a> hint initiates an early request. This is useful for loading important resources that would otherwise be discovered late by the parser. For example, if an important image is only discoverable once the browser has received and parsed the stylesheet, it may make sense to preload the image.
    </p>
    <h3 id="resource-hints-prefetch">
      <a href="#resource-hints-prefetch" class="anchor-link"><code>prefetch</code></a>
    </h3>
    <p>
      <a href="https://calendar.perfplanet.com/2018/all-about-prefetching/"><code>prefetch</code><span class="fn">https://calendar.perfplanet.com/2018/all-about-prefetching/</span></a> initiates a low-priority request. It's useful for loading resources that will be used on the subsequent (rather than current) page load. A common use of prefetch is loading resources that the application "predicts" will be used on the next page load. These predictions could be based on signals like user mouse movement or common user flows/journeys.
    </p>
    <h2 id="resource-hints-syntax"><a href="#resource-hints-syntax" class="anchor-link">Syntax</a></h2>
    <p>
      97% of resource hint usage relied on using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link"><code>&lt;link&gt;</code><span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link</span></a> tag to specify a resource hint. For example:
    </p>
    <pre><code>&lt;link rel="prefetch" href="shopping-cart.js"&gt;</code></pre>
    <p>
      Only 3% of resource hint usage used <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Link">HTTP headers<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Link</span></a> to specify resource hints. For example:
    </p>
    <pre><code>Link: &lt;https://example.com/shopping-cart.js&gt;; rel=prefetch</code></pre>
    <p>Because the usage of resource hints in HTTP headers is so low, the remainder of this chapter will focus solely on analyzing the usage of resource hints in conjunction with the <code>&lt;link&gt;</code> tag. However, it's worth noting that in future years, usage of resource hints in HTTP headers may increase as <a href="#http2-http2-push">HTTP/2 Push</a> is adopted. This is due to the fact that HTTP/2 Push has repurposed the HTTP preload <code>Link</code> header as a signal to push resources.</p>
    <h2 id="resource-hints-resource-hints"><a href="#resource-hints-resource-hints" class="anchor-link">Resource hints</a></h2>
    <p class="note">Note: There was no noticeable difference between the usage patterns for resource hints on mobile versus desktop. Thus, for the sake of conciseness, this chapter only includes the statistics for mobile.</p>
    <figure id="resource-hints-fig-1">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Resource Hint</th>
                <th>Usage (percent of sites)</th>
              </tr>
              <tr>
                <td><code>dns-prefetch</code></td>
                <td>29%</td>
              </tr>
              <tr>
                <td><code>preload</code></td>
                <td>16%</td>
              </tr>
              <tr>
                <td><code>preconnect</code></td>
                <td>4%</td>
              </tr>
              <tr>
                <td><code>prefetch</code></td>
                <td>3%</td>
              </tr>
              <tr>
                <td><code>prerender</code> (deprecated)</td>
                <td>0.13%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#resource-hints-fig-1" class="anchor-link">Figure 1.</a> Adoption of resource hints.</figcaption>
    </figure>
    <p>
      The relative popularity of <code>dns-prefetch</code> is unsurprising; it's a well-established API (it first appeared in <a href="https://caniuse.com/#feat=link-rel-dns-prefetch">2009<span class="fn">https://caniuse.com/#feat=link-rel-dns-prefetch</span></a
      >), it is supported by all major browsers, and it is the most "inexpensive" of all resource hints. Because <code>dns-prefetch</code> only performs DNS lookups, it consumes very little data, and therefore there is very little downside to using it. <code>dns-prefetch</code> is most useful in high-latency situations.
    </p>
    <p>
      That being said, if a site does not need to support IE11 and below, switching from <code>dns-prefetch</code> to <code>preconnect</code> is probably a good idea. In an era where HTTPS is ubiquitous, <code>preconnect</code> yields greater <a href="#performance">performance</a> improvements while still being inexpensive. Note that unlike <code>dns-prefetch</code>, <code>preconnect</code> not only initiates the DNS lookup, but also the TCP handshake and TLS negotiation. The <a href="https://knowledge.digicert.com/solution/SO16297.html">certificate chain<span class="fn">https://knowledge.digicert.com/solution/SO16297.html</span></a> is downloaded during TLS negotiation and this typically costs a couple of kilobytes.
    </p>
    <p><code>prefetch</code> is used by 3% of sites, making it the least widely used resource hint. This low usage may be explained by the fact that <code>prefetch</code> is useful for improving subsequentrather than currentpage loads. Thus, it will be overlooked if a site is only focused on improving their landing page, or the performance of the first page viewed.</p>
    <figure id="resource-hints-fig-2">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th>Resource Hint</th>
                <th>Resource Hints Per Page:<br />Median</th>
                <th>Resource Hints Per Page:<br />90th Percentile</th>
              </tr>
              <tr>
                <td><code>dns-prefetch</code></td>
                <td>2</td>
                <td>8</td>
              </tr>
              <tr>
                <td><code>preload</code></td>
                <td>2</td>
                <td>4</td>
              </tr>
              <tr>
                <td><code>preconnect</code></td>
                <td>2</td>
                <td>8</td>
              </tr>
              <tr>
                <td><code>prefetch</code></td>
                <td>1</td>
                <td>3</td>
              </tr>
              <tr>
                <td><code>prerender</code> (deprecated)</td>
                <td>1</td>
                <td>1</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#resource-hints-fig-2" class="anchor-link">Figure 2.</a> Median and 90th percentiles of the number of resource hints used per page, of all pages using that resource hint.</figcaption>
    </figure>
    <p>Resource hints are most effective when they're used selectively (<em>"when everything is important, nothing is"</em>). Figure 2 above shows the number of resource hints per page for pages using at least one resource hint. Although there is no clear cut rule for defining what an appropriate number of resource hints is, it appears that most sites are using resource hints appropriately.</p>
    <h2 id="resource-hints-the-crossorigin-attribute">
      <a href="#resource-hints-the-crossorigin-attribute" class="anchor-link">The <code>crossorigin</code> attribute</a>
    </h2>
    <p>
      Most "traditional" resources fetched on the web (<a href="#media">images</a>, <a href="#css">stylesheets</a>, and <a href="#javascript">scripts</a>) are fetched without opting in to Cross-Origin Resource Sharing (<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS<span class="fn">https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</span></a
      >). That means that if those resources are fetched from a cross-origin server, by default their contents cannot be read back by the page, due to the same-origin policy.
    </p>
    <p>In some cases, the page can opt-in to fetch the resource using CORS if it needs to read its content. CORS enables the browser to "ask permission" and get access to those cross-origin resources.</p>
    <p>For newer resource types (e.g. fonts, <code>fetch()</code> requests, ES modules), the browser defaults to requesting those resources using CORS, failing the requests entirely if the server does not grant it permission to access them.</p>
    <figure id="resource-hints-fig-3">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <tbody>
              <tr>
                <th><code>crossorigin</code> value</th>
                <th>Usage</th>
                <th>Explanation</th>
              </tr>
              <tr>
                <td>Not set</td>
                <td>92%</td>
                <td>If the crossorigin attribute is absent, the request will follow the single-origin policy.</td>
              </tr>
              <tr>
                <td>anonymous (or equivalent)</td>
                <td>7%</td>
                <td>Executes a cross-origin request that does not include credentials.</td>
              </tr>
              <tr>
                <td>use-credentials</td>
                <td>0.47%</td>
                <td>Executes a cross-origin request that includes credentials.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#resource-hints-fig-3" class="anchor-link">Figure 3.</a> Adoption of the <code>crossorigin</code> attribute as a percent of resource hint instances.</figcaption>
    </figure>
    <p>In the context of resource hints, usage of the <code>crossorigin</code> attribute enables them to match the CORS mode of the resources they are supposed to match and indicates the credentials to include in the request. For example, <code>anonymous</code> enables CORS and indicates that no credentials should be included for those cross-origin requests:</p>
    <pre><code>&lt;link rel="prefetch" href="https://other-server.com/shopping-cart.css" crossorigin="anonymous"&gt;</code></pre>
    <p>Although other HTML elements support the crossorigin attribute, this analysis only looks at usage with resource hints.</p>
    <h2 id="resource-hints-the-as-attribute">
      <a href="#resource-hints-the-as-attribute" class="anchor-link">The <code>as</code> attribute</a>
    </h2>
    <p>
      <code>as</code> is an attribute that should be used with the <code>preload</code> resource hint to inform the browser of the type (e.g. image, script, style, etc.) of the requested resource. This helps the browser correctly prioritize the request and apply the correct Content Security Policy (<a href="https://developers.google.com/web/fundamentals/security/csp">CSP<span class="fn">https://developers.google.com/web/fundamentals/security/csp</span></a
      >). CSP is a <a href="#security">security</a> mechanism, expressed via HTTP header, that helps mitigate the impact of XSS and other malicious attacks by declaring a safelist of trusted sources; only content from these sources can be rendered or executed.
    </p>
    <figure id="resource-hints-fig-4">
      <div class="big-number">88%</div>
      <figcaption><a href="#resource-hints-fig-4" class="anchor-link">Figure 4.</a> The percent of resource hint instances using the <code>as</code> attribute.</figcaption>
    </figure>
    <p>88% of resource hint instances use the <code>as</code> attribute. When <code>as</code> is specified, it is overwhelmingly used for scripts: 92% of usage is script, 3% font, and 3% styles. This is unsurprising given the prominent role that scripts play in most sites' architecture as well the high frequency with which scripts are used as attack vectors (thereby making it therefore particularly important that scripts get the correct CSP applied to them).</p>
    <h2 id="resource-hints-the-future"><a href="#resource-hints-the-future" class="anchor-link">The future</a></h2>
    <p>At the moment, there are no proposals to expand the current set of resource hints. However, priority hints and native lazy loading are two proposed technologies that are similar in spirit to resource hints in that they provide APIs for optimizing the loading process.</p>
    <h3 id="resource-hints-priority-hints"><a href="#resource-hints-priority-hints" class="anchor-link">Priority Hints</a></h3>
    <p>
      <a href="https://wicg.github.io/priority-hints/">Priority hints<span class="fn">https://wicg.github.io/priority-hints/</span></a> are an API for expressing the fetch priority of a resource: <code>high</code>, <code>low</code>, or <code>auto</code>. They can be used with a wide range of HTML tags: specifically <code>&lt;image&gt;</code>, <code>&lt;link</code>&gt;, <code>&lt;script&gt;</code>, and <code>&lt;iframe&gt;</code>.
    </p>
    <figure id="resource-hints-fig-5">
      <div class="code-block floating-card">
        <pre><code>&lt;carousel&gt;
  &lt;img src="cat1.jpg" importance="high"&gt;
  &lt;img src="cat2.jpg" importance="low"&gt;
  &lt;img src="cat3.jpg" importance="low"&gt;
&lt;/carousel&gt;</code></pre>
      </div>
      <figcaption><a href="#resource-hints-fig-5" class="anchor-link">Figure 5.</a> Example HTML of using priority hints on a carousel of images.</figcaption>
    </figure>
    <p>For example, if you had an image carousel, priority hints could be used to prioritize the image that users see immediately and deprioritize later images.</p>
    <figure id="resource-hints-fig-6">
      <div class="big-number">0.04%</div>
      <figcaption><a href="#resource-hints-fig-6" class="anchor-link">Figure 6.</a> The rate of priority hint adoption.</figcaption>
    </figure>
    <p>
      Priority hints are <a href="https://www.chromestatus.com/feature/5273474901737472">implemented<span class="fn">https://www.chromestatus.com/feature/5273474901737472</span></a> and can be tested via a feature flag in Chromium browsers versions 70 and up. Given that it is still an experimental technology, it is unsurprising that it is only used by 0.04% of sites.
    </p>
    <p>85% of priority hint usage is with <code>&lt;img&gt;</code> tags. Priority hints are mostly used to deprioritize resources: 72% of usage is <code>importance="low"</code>; 28% of usage is <code>importance="high"</code>.</p>
    <h3 id="resource-hints-native-lazy-loading"><a href="#resource-hints-native-lazy-loading" class="anchor-link">Native lazy loading</a></h3>
    <p>
      <a href="https://web.dev/native-lazy-loading">Native lazy loading<span class="fn">https://web.dev/native-lazy-loading</span></a> is a native API for deferring the load of off-screen images and iframes. This frees up resources during the initial page load and avoids loading assets that are never used. Previously, this technique could only be achieved through third-party <a href="#javascript">JavaScript</a> libraries.
    </p>
    <p>The API for native lazy loading looks like this: <code>&lt;img src="cat.jpg"&gt;</code>.</p>
    <p>Native lazy loading is available in browsers based on Chromium 76 and up. The API was announced too late for it to be included in the dataset for this year's Web Almanac, but it is something to keep an eye out for in the coming year.</p>
    <h2 id="resource-hints-conclusion"><a href="#resource-hints-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>Overall, this data seems to suggest that there is still room for further adoption of resource hints. Most sites would benefit from adopting and/or switching to <code>preconnect</code> from <code>dns-prefetch</code>. A much smaller subset of sites would benefit from adopting <code>prefetch</code> and/or <code>preload</code>. There is greater nuance in successfully using <code>prefetch</code> and <code>preload</code>, which constrains its adoption to a certain extent, but the potential payoff is also greater. HTTP/2 Push and the maturation of machine learning technologies is also likely to increase the adoption of <code>preload</code> and <code>prefetch</code>.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% set metadata = {"part_number":"IV","chapter_number":20,"title":"HTTP/2","description":"HTTP/2 chapter of the 2019 Web Almanac covering adoption and impact of HTTP/2, HTTP/2 Push, HTTP/2 Issues, and HTTP/3.","authors":["bazzadp"],"reviewers":["bagder","rmarx","dotjs"],"translators":null,"discuss":"1775","results":"https://docs.google.com/spreadsheets/d/1z1gdS3YVpe8J9K3g2UdrtdSPhRywVQRBz5kgBeqCnbw/","queries":"20_HTTP_2","published":"2019-11-11T00:00:00.000Z","last_updated":"2020-05-05T00:00:00.000Z","chapter":"http2"} %} {% set chapter_image_dir = ("/static/images/2019/%s" % metadata.chapter) %}
<section class="chapter" id="chapter-{{ metadata.get('chapter_number') }}">
  <div class="body" id="{{ metadata.get('chapter') }}">
    <div class="subtitle">
      {{ self.part() }} {{ metadata.get('part_number') }} {{ self.chapter() }} {{ metadata.get('chapter_number') }}
    </div>
    <h1 class="title title-lg">
      {{ metadata.get('title') }} {% if metadata.get('unedited', false) %}
      <span class="chapter-unedited">{{ self.unedited() }}</span>
      {% endif %}
    </h1>

    <!-- Show large image for large screens and high density screens and use webp when supported -->
    <picture>
      <source media="(min-width: 327px)" type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp" />
      <source media="(min-width: 327px)" type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_lg.webp 2x" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_lg.jpg 2x" />
      <source type="image/webp" srcset="{{ chapter_image_dir }}/hero_sm.webp" />
      <source type="image/jpeg" srcset="{{ chapter_image_dir }}/hero_sm.jpg" />
      <img src="{{ chapter_image_dir }}/hero_lg.jpg" class="content-banner" alt="" width="866" height="433" />
    </picture>

    <div class="byline">{{ self.written_by_before() }} {% for author in metadata.get('authors') %} <a class="author" href="#contributors-{{ author }}">{{ config.contributors[author].name if author in config.contributors else author }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.written_by_after() }}</div>

    <div class="byline reviewers">{{ self.reviewed_by_before() }} {% for reviewer in metadata.get('reviewers') %} <a class="reviewer" href="#contributors-{{ reviewer }}">{{ config.contributors[reviewer].name if reviewer in config.contributors else reviewer }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.reviewed_by_after() }}</div>

    {% if metadata.get('translators') | length >= 1 %}
    <div class="byline translators">{{ self.translated_by_before() }} {% for translator in metadata.get('translators') %} <a class="translator" href="#contributors-{{ translator }}">{{ config.contributors[translator].name if translator in config.contributors else translator }}</a>{% if loop.index != loop.length and loop.length != 2 %},{% endif %} {% if loop.index == loop.length - 1 %}{{ self.and() }}{% endif %} {% endfor %}{{ self.translated_by_after() }}</div>
    {% endif %}
    <h2 id="http2-introduction"><a href="#http2-introduction" class="anchor-link">Introduction</a></h2>
    <p>HTTP/2 was the first major update to the main transport protocol of the web in nearly 20 years. It arrived with a wealth of expectations: it promised a free performance boost with no downsides. More than that, we could stop doing all the hacks and work arounds that HTTP/1.1 forced us into, due to its inefficiencies. Bundling, spriting, inlining, and even sharding domains would all become anti-patterns in an HTTP/2 world, as improved performance would be provided by default.</p>
    <p>
      This meant that even those without the skills and resources to concentrate on <a href="#performance">web performance</a> would suddenly have performant websites. However, the reality has been, as ever, a little more nuanced than that. It has been over four years since the formal approval of HTTP/2 as a standard in May 2015 as <a href="https://tools.ietf.org/html/rfc7540">RFC 7540<span class="fn">https://tools.ietf.org/html/rfc7540</span></a
      >, so now is a good time to look over how this relatively new technology has fared in the real world.
    </p>
    <h2 id="http2-what-is-http2"><a href="#http2-what-is-http2" class="anchor-link">What is HTTP/2?</a></h2>
    <p>For those not familiar with the technology, a bit of background is helpful to make the most of the metrics and findings in this chapter. Up until recently, HTTP has always been a text-based protocol. An HTTP client like a web browser opened a TCP connection to a server, and then sent an HTTP command like <code>GET /index.html</code> to ask for a resource.</p>
    <p>This was enhanced in HTTP/1.0 to add <em>HTTP headers</em>, so various pieces of metadata could be included in addition to the request, such as what browser it is, the formats it understands, etc. These HTTP headers were also text-based and separated by newline characters. Servers parsed the incoming requests by reading the request and any HTTP headers line by line, and then the server responded with its own HTTP response headers in addition to the actual resource being requested.</p>
    <p>The protocol seemed simple, but it also came with limitations. Because HTTP was essentially synchronous, once an HTTP request had been sent, the whole TCP connection was basically off limits to anything else until the response had been returned, read, and processed. This was incredibly inefficient and required multiple TCP connections (browsers typically use 6) to allow a limited form of parallelization.</p>
    <p>That in itself brings its own issues as TCP connections take time and resources to set up and get to full efficiency, especially when using HTTPS, which requires additional steps to set up the encryption. HTTP/1.1 improved this somewhat, allowing reuse of TCP connections for subsequent requests, but still did not solve the parallelization issue.</p>
    <p>Despite HTTP being text-based, the reality is that it was rarely used to transport text, at least in its raw format. While it was true that HTTP headers were still text, the payloads themselves often were not. Text files like <a href="#markup">HTML</a>, <a href="#javascript">JS</a>, and <a href="#css">CSS</a> are usually <a href="#compression">compressed</a> for transport into a binary format using gzip, brotli, or similar. Non-text files like <a href="#media">images and videos</a> are served in their own formats. The whole HTTP message is then often wrapped in HTTPS to encrypt the messages for <a href="#security">security</a> reasons.</p>
    <p>So, the web had basically moved on from text-based transport a long time ago, but HTTP had not. One reason for this stagnation was because it was so difficult to introduce any breaking changes to such a ubiquitous protocol like HTTP (previous efforts had tried and failed). Many routers, firewalls, and other middleboxes understood HTTP and would react badly to major changes to it. Upgrading them all to support a new version was simply not possible.</p>
    <p>
      In 2009, Google announced that they were working on an alternative to the text-based HTTP called <a href="https://www.chromium.org/spdy">SPDY<span class="fn">https://www.chromium.org/spdy</span></a
      >, which has since been deprecated. This would take advantage of the fact that HTTP messages were often encrypted in HTTPS, which prevents them being read and interfered with en route.
    </p>
    <p>Google controlled one of the most popular browsers (Chrome) and some of the most popular websites (Google, YouTube, Gmailetc.) - so both ends of the connection when both were used together. Google's idea was to pack HTTP messages into a proprietary format, send them across the internet, and then unpack them on the other side. The proprietary format, SPDY, was binary-based rather than text-based. This solved some of the main performance problems with HTTP/1.1 by allowing more efficient use of a single TCP connection, negating the need to open the six connections that had become the norm under HTTP/1.1.</p>
    <p>By using SPDY in the real world, they were able to prove that it was more performant for real users, and not just because of some lab-based experimental results. After rolling out SPDY to all Google websites, other servers and browser started implementing it, and then it was time to standardize this proprietary format into an internet standard, and thus HTTP/2 was born.</p>
    <p>HTTP/2 has the following key concepts:</p>
    <ul>
      <li>Binary format</li>
      <li>Multiplexing</li>
      <li>Flow control</li>
      <li>Prioritization</li>
      <li>Header compression</li>
      <li>Push</li>
    </ul>
    <p>
      <strong>Binary format</strong> means that HTTP/2 messages are wrapped into frames of a pre-defined format, making HTTP messages easier to parse and would no longer require scanning for newline characters. This is better for security as there were a number of <a href="https://www.owasp.org/index.php/HTTP_Response_Splitting">exploits<span class="fn">https://www.owasp.org/index.php/HTTP_Response_Splitting</span></a> for previous versions of HTTP. It also means HTTP/2 connections can be <strong>multiplexed</strong>. Different frames for different streams can be sent on the same connection without interfering with each other as each frame includes a stream identifier and its length. Multiplexing allows much more efficient use of a single TCP connection without the overhead of opening additional connections. Ideally we would open a single connection per domainor even for <a href="https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing/">multiple domains<span class="fn">https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing/</span></a
      >!
    </p>
    <p>Having separate streams does introduce some complexities along with some potential benefits. HTTP/2 needs the concept of <strong>flow control</strong> to allow the different streams to send data at different rates, whereas previously, with only one response in flight at any one time, this was controlled at a connection level by TCP flow control. Similarly, <strong>prioritization</strong> allows multiple requests to be sent together, but with the most important requests getting more of the bandwidth.</p>
    <p>
      Finally, HTTP/2 introduced two new concepts: <strong>header compression</strong> and <strong>HTTP/2 push</strong>. Header compression allowed those text-based HTTP headers to be sent more efficiently, using an HTTP/2-specific <a href="https://tools.ietf.org/html/rfc7541">HPACK<span class="fn">https://tools.ietf.org/html/rfc7541</span></a> format for security reasons. HTTP/2 push allowed more than one response to be sent in answer to a request, enabling the server to "push" resources before a client was even aware it needed them. Push was supposed to solve the performance workaround of having to inline resources like CSS and JavaScript directly into HTML to prevent holding up the page while those resources were requested. With HTTP/2 the CSS and JavaScript could remain as external files but be pushed along with the initial HTML, so they were available immediately. Subsequent page requests would not push these resources, since they would now be cached, and so would not waste bandwidth.
    </p>
    <p>
      This whistle-stop tour of HTTP/2 gives the main history and concepts of the newish protocol. As should be apparent from this explanation, the main benefit of HTTP/2 is to address performance limitations of the HTTP/1.1 protocol. There were also security improvements as well - perhaps most importantly in being to address performance issues of using HTTPS since HTTP/2, even over HTTPS, is <a href="https://www.httpvshttps.com/">often much faster than plain HTTP<span class="fn">https://www.httpvshttps.com/</span></a
      >. Other than the web browser packing the HTTP messages into the new binary format, and the web server unpacking it at the other side, the core basics of HTTP itself stayed roughly the same. This means web applications do not need to make any changes to support HTTP/2 as the browser and server take care of this. Turning it on should be a free performance boost, therefore adoption should be relatively easy. Of course, there are ways web developers can optimize for HTTP/2 to take full advantage of how it differs.
    </p>
    <h2 id="http2-adoption-of-http2"><a href="#http2-adoption-of-http2" class="anchor-link">Adoption of HTTP/2</a></h2>
    <p>
      As mentioned above, internet protocols are often difficult to adopt since they are ingrained into so much of the infrastructure that makes up the internet. This makes introducing any changes slow and difficult. IPv6 for example has been around for 20 years but has <a href="https://www.google.com/intl/en/ipv6/statistics.html">struggled to be adopted<span class="fn">https://www.google.com/intl/en/ipv6/statistics.html</span></a
      >.
    </p>
    <figure id="http2-fig-1">
      <div class="big-number">95%</div>
      <figcaption><a href="#http2-fig-1" class="anchor-link">Figure 1.</a> The percent of global users who can use HTTP/2.</figcaption>
    </figure>
    <p>
      HTTP/2 however, was different as it was effectively hidden in HTTPS (at least for the browser uses cases), removing barriers to adoption as long as both the browser and server supported it. Browser support has been very strong for some time and the advent of auto updating <em>evergreen</em> browsers has meant that an estimated <a href="https://caniuse.com/#feat=http2">95% of global users now support HTTP/2<span class="fn">https://caniuse.com/#feat=http2</span></a
      >.
    </p>
    <p>Our analysis is sourced from the HTTP Archive, which tests approximately 5 million of the top desktop and mobile websites in the Chrome browser. (Learn more about our <a href="#methodology">methodology</a>.)</p>
    <figure id="http2-fig-2">
      <a href="https://almanac.httparchive.org/static/images/2019/http2/ch20_fig2_http2_usage_by_request.png">
        <img alt="Figure 2. HTTP/2 usage by request." aria-labelledby="http2-fig2-caption" aria-describedby="http2-fig2-description" src="/static/images/2019/http2/ch20_fig2_http2_usage_by_request.png" width="600" height="321" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig2-description" data-show-text="{{ show_description(2) }}" data-hide-text="{{ hide_description(2) }}">{{ show_description(2) }}</button>
      <div id="http2-fig2-description" class="visually-hidden">Timeseries chart of HTTP/2 usage showing adoption at 55% for both desktop and mobile as of July 2019. The trend is growing steadily at about 15 points per year.</div>
      <figcaption id="http2-fig2-caption">
        <a href="#http2-fig-2" class="anchor-link">Figure 2.</a> HTTP/2 usage by request. (Source: <a href="https://httparchive.org/reports/state-of-the-web#h2">HTTP Archive<span class="fn">https://httparchive.org/reports/state-of-the-web#h2</span></a
        >)
      </figcaption>
    </figure>
    <p>The results show that HTTP/2 usage is now the majority protocol-an impressive feat just 4 short years after formal standardization! Looking at the breakdown of all HTTP versions by request we see the following:</p>
    <figure id="http2-fig-3">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Protocol</th>
                <th>Desktop</th>
                <th>Mobile</th>
                <th>Both</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td></td>
                <td>5.60%</td>
                <td>0.57%</td>
                <td>2.97%</td>
              </tr>
              <tr>
                <td>HTTP/0.9</td>
                <td>0.00%</td>
                <td>0.00%</td>
                <td>0.00%</td>
              </tr>
              <tr>
                <td>HTTP/1.0</td>
                <td>0.08%</td>
                <td>0.05%</td>
                <td>0.06%</td>
              </tr>
              <tr>
                <td>HTTP/1.1</td>
                <td>40.36%</td>
                <td>45.01%</td>
                <td>42.79%</td>
              </tr>
              <tr>
                <td>HTTP/2</td>
                <td>53.96%</td>
                <td>54.37%</td>
                <td>54.18%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-3" class="anchor-link">Figure 3.</a> HTTP version usage by request.</figcaption>
    </figure>
    <p>Figure 3 shows that HTTP/1.1 and HTTP/2 are the versions used by the vast majority of requests as expected. There is only a very small number of requests on the older HTTP/1.0 and HTTP/0.9 protocols. Annoyingly, there is a larger percentage where the protocol was not correctly tracked by the HTTP Archive crawl, particularly on desktop. Digging into this has shown various reasons, some of which can be explained and some of which can't. Based on spot checks, they mostly appear to be HTTP/1.1 requests and, assuming they are, desktop and mobile usage is similar.</p>
    <p>Despite there being a little larger percentage of noise than we'd like, it doesn't alter the overall message being conveyed here. Other than that, the mobile/desktop similarity is not unexpected; HTTP Archive tests with Chrome, which supports HTTP/2 for both desktop and mobile. Real-world usage may have slightly different stats with some older usage of browsers on both, but even then support is widespread, so we would not expect a large variation between desktop and mobile.</p>
    <p>
      At present, HTTP Archive does not track HTTP over <a href="https://www.chromium.org/quic">QUIC<span class="fn">https://www.chromium.org/quic</span></a> (soon to be standardized as <a href="#http2-http3">HTTP/3</a> separately, so these requests are currently listed under HTTP/2, but we'll look at other ways of measuring that later in this chapter.
    </p>
    <p>Looking at the number of requests will skew the results somewhat due to popular requests. For example, many sites load Google Analytics, which does support HTTP/2, and so would show as an HTTP/2 request, even if the embedding site itself does not support HTTP/2. On the other hand, popular websites tend to support HTTP/2 are also underrepresented in the above stats as they are only measured once (e.g. "google.com" and "obscuresite.com" are given equal weighting). <em>There are lies, damn lies, and statistics.</em></p>
    <p>
      However, our findings are corroborated by other sources, like <a href="https://telemetry.mozilla.org/new-pipeline/dist.html#!cumulative=0&amp;measure=HTTP_RESPONSE_VERSION">Mozilla's telemetry<span class="fn">https://telemetry.mozilla.org/new-pipeline/dist.html#!cumulative=0&amp;measure=HTTP_RESPONSE_VERSION</span></a
      >, which looks at real-world usage through the Firefox browser.
    </p>
    <figure id="http2-fig-4">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Protocol</th>
                <th>Desktop</th>
                <th>Mobile</th>
                <th>Both</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td></td>
                <td>0.09%</td>
                <td>0.08%</td>
                <td>0.08%</td>
              </tr>
              <tr>
                <td>HTTP/1.0</td>
                <td>0.09%</td>
                <td>0.08%</td>
                <td>0.09%</td>
              </tr>
              <tr>
                <td>HTTP/1.1</td>
                <td>62.36%</td>
                <td>63.92%</td>
                <td>63.22%</td>
              </tr>
              <tr>
                <td>HTTP/2</td>
                <td>37.46%</td>
                <td>35.92%</td>
                <td>36.61%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-4" class="anchor-link">Figure 4.</a> HTTP version usage for home pages.</figcaption>
    </figure>
    <p>It is still interesting to look at home pages only to get a rough figure on the number of sites that support HTTP/2 (at least on their home page). Figure 4 shows less support than overall requests, as expected, at around 36%.</p>
    <p>HTTP/2 is only supported by browsers over HTTPS, even though officially HTTP/2 can be used over HTTPS or over unencrypted non-HTTPS connections. As mentioned previously, hiding the new protocol in encrypted HTTPS connections prevents networking appliances which do not understand this new protocol from interfering with (or rejecting!) its usage. Additionally, the HTTPS handshake allows an easy method of the client and server agreeing to use HTTP/2.</p>
    <figure id="http2-fig-5">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Protocol</th>
                <th>Desktop</th>
                <th>Mobile</th>
                <th>Both</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td></td>
                <td>0.09%</td>
                <td>0.10%</td>
                <td>0.09%</td>
              </tr>
              <tr>
                <td>HTTP/1.0</td>
                <td>0.06%</td>
                <td>0.06%</td>
                <td>0.06%</td>
              </tr>
              <tr>
                <td>HTTP/1.1</td>
                <td>45.81%</td>
                <td>44.31%</td>
                <td>45.01%</td>
              </tr>
              <tr>
                <td>HTTP/2</td>
                <td>54.04%</td>
                <td>55.53%</td>
                <td>54.83%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-5" class="anchor-link">Figure 5.</a> HTTP version usage for HTTPS home pages.</figcaption>
    </figure>
    <p>The web is moving to HTTPS, and HTTP/2 turns the traditional argument of HTTPS being bad for performance almost completely on its head. Not every site has made the transition to HTTPS, so HTTP/2 will not even be available to those that have not. Looking at just those sites that use HTTPS, in Figure 5 we do see a higher adoption of HTTP/2 at around 55%, similar to the percent of <em>all requests</em> in Figure 2.</p>
    <p>We have shown that browser support for HTTP/2 is strong and that there is a safe road to adoption, so why doesn't every site (or at least every HTTPS site) support HTTP/2? Well, here we come to the final item for support we have not measured yet: server support.</p>
    <p>This is more problematic than browser support as, unlike modern browsers, servers often do not automatically upgrade to the latest version. Even when the server is regularly maintained and patched, that will often just apply security patches rather than new features like HTTP/2. Let's look first at the server HTTP headers for those sites that do support HTTP/2.</p>
    <figure id="http2-fig-6">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Server</th>
                <th>Desktop</th>
                <th>Mobile</th>
                <th>Both</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>nginx</td>
                <td>34.04%</td>
                <td>32.48%</td>
                <td>33.19%</td>
              </tr>
              <tr>
                <td>cloudflare</td>
                <td>23.76%</td>
                <td>22.29%</td>
                <td>22.97%</td>
              </tr>
              <tr>
                <td>Apache</td>
                <td>17.31%</td>
                <td>19.11%</td>
                <td>18.28%</td>
              </tr>
              <tr>
                <td></td>
                <td>4.56%</td>
                <td>5.13%</td>
                <td>4.87%</td>
              </tr>
              <tr>
                <td>LiteSpeed</td>
                <td>4.11%</td>
                <td>4.97%</td>
                <td>4.57%</td>
              </tr>
              <tr>
                <td>GSE</td>
                <td>2.16%</td>
                <td>3.73%</td>
                <td>3.01%</td>
              </tr>
              <tr>
                <td>Microsoft-IIS</td>
                <td>3.09%</td>
                <td>2.66%</td>
                <td>2.86%</td>
              </tr>
              <tr>
                <td>openresty</td>
                <td>2.15%</td>
                <td>2.01%</td>
                <td>2.07%</td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-6" class="anchor-link">Figure 6.</a> Servers used for HTTP/2.</figcaption>
    </figure>
    <p>
      Nginx provides package repositories that allow ease of installing or upgrading to the latest version, so it is no surprise to see it leading the way here. Cloudflare is the most popular <a href="#cdn">CDN</a> and enables HTTP/2 by default, so again it is not surprising to see it hosts a large percentage of HTTP/2 sites. Incidently, Cloudflare uses a <a href="https://blog.cloudflare.com/nginx-structural-enhancements-for-http-2-performance/">heavily customized<span class="fn">https://blog.cloudflare.com/nginx-structural-enhancements-for-http-2-performance/</span></a> version of nginx as their web server. After those, we see Apache at around 20% of usage, followed by some servers who choose to hide what they are, and then the smaller players such as LiteSpeed, IIS, Google Servlet Engine, and openresty, which is nginx based.
    </p>
    <p>What is more interesting is those servers that that do <em>not</em> support HTTP/2:</p>
    <figure id="http2-fig-7">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Server</th>
                <th>Desktop</th>
                <th>Mobile</th>
                <th>Both</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Apache</td>
                <td>46.76%</td>
                <td>46.84%</td>
                <td>46.80%</td>
              </tr>
              <tr>
                <td>nginx</td>
                <td>21.12%</td>
                <td>21.33%</td>
                <td>21.24%</td>
              </tr>
              <tr>
                <td>Microsoft-IIS</td>
                <td>11.30%</td>
                <td>9.60%</td>
                <td>10.36%</td>
              </tr>
              <tr>
                <td></td>
                <td>7.96%</td>
                <td>7.59%</td>
                <td>7.75%</td>
              </tr>
              <tr>
                <td>GSE</td>
                <td>1.90%</td>
                <td>3.84%</td>
                <td>2.98%</td>
              </tr>
              <tr>
                <td>cloudflare</td>
                <td>2.44%</td>
                <td>2.48%</td>
                <td>2.46%</td>
              </tr>
              <tr>
                <td>LiteSpeed</td>
                <td>1.02%</td>
                <td>1.63%</td>
                <td>1.36%</td>
              </tr>
              <tr>
                <td>openresty</td>
                <td>1.22%</td>
                <td>1.36%</td>
                <td>1.30%</td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-7" class="anchor-link">Figure 7.</a> Servers used for HTTP/1.1 or lower.</figcaption>
    </figure>
    <p>Some of this will be non-HTTPS traffic that would use HTTP/1.1 even if the server supported HTTP/2, but a bigger issue is those that do not support HTTP/2 at all. In these stats, we see a much greater share for Apache and IIS, which are likely running older versions.</p>
    <p>For Apache in particular, it is often not easy to add HTTP/2 support to an existing installation, as Apache does not provide an official repository to install this from. This often means resorting to compiling from source or trusting a third-party repository, neither of which is particularly appealing to many administrators.</p>
    <p>Only the latest versions of Linux distributions (RHEL and CentOS 8, Ubuntu 18 and Debian 9) come with a version of Apache which supports HTTP/2, and many servers are not running those yet. On the Microsoft side, only Windows Server 2016 and above supports HTTP/2, so again those running older versions cannot support this in IIS.</p>
    <p>Merging these two stats together, we can see the percentage of installs per server, that use HTTP/2:</p>
    <figure id="http2-fig-8">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Server</th>
                <th>Desktop</th>
                <th>Mobile</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>cloudflare</td>
                <td>85.40%</td>
                <td>83.46%</td>
              </tr>
              <tr>
                <td>LiteSpeed</td>
                <td>70.80%</td>
                <td>63.08%</td>
              </tr>
              <tr>
                <td>openresty</td>
                <td>51.41%</td>
                <td>45.24%</td>
              </tr>
              <tr>
                <td>nginx</td>
                <td>49.23%</td>
                <td>46.19%</td>
              </tr>
              <tr>
                <td>GSE</td>
                <td>40.54%</td>
                <td>35.25%</td>
              </tr>
              <tr>
                <td></td>
                <td>25.57%</td>
                <td>27.49%</td>
              </tr>
              <tr>
                <td>Apache</td>
                <td>18.09%</td>
                <td>18.56%</td>
              </tr>
              <tr>
                <td>Microsoft-IIS</td>
                <td>14.10%</td>
                <td>13.47%</td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-8" class="anchor-link">Figure 8.</a> Percentage installs of each server used to provide HTTP/2.</figcaption>
    </figure>
    <p>It's clear that Apache and IIS fall way behind with 18% and 14% of their installed based supporting HTTP/2, which has to be (at least in part) a consequence of it being more difficult to upgrade them. A full operating system upgrade is often required for many servers to get this support easily. Hopefully this will get easier as new versions of operating systems become the norm.</p>
    <p>
      None of this is a comment on the HTTP/2 implementations here (<a href="https://twitter.com/tunetheweb/status/988196156697169920?s=20">I happen to think Apache has one of the best implementations<span class="fn">https://twitter.com/tunetheweb/status/988196156697169920?s=20</span></a
      >), but more about the ease of enabling HTTP/2 in each of these servers-or lack thereof.
    </p>
    <h2 id="http2-impact-of-http2"><a href="#http2-impact-of-http2" class="anchor-link">Impact of HTTP/2</a></h2>
    <p>The impact of HTTP/2 is much more difficult to measure, especially using the HTTP Archive <a href="#methodology">methodology</a>. Ideally, sites should be crawled with both HTTP/1.1 and HTTP/2 and the difference measured, but that is not possible with the statistics we are investigating here. Additionally, measuring whether the average HTTP/2 site is faster than the average HTTP/1.1 site introduces too many other variables that require a more exhaustive study than we can cover here.</p>
    <p>One impact that can be measured is in the changing use of HTTP now that we are in an HTTP/2 world. Multiple connections were a workaround with HTTP/1.1 to allow a limited form of parallelization, but this is in fact the opposite of what usually works best with HTTP/2. A single connection reduces the overhead of TCP setup, TCP slow start, and HTTPS negotiation, and it also allows the potential of cross-request prioritization.</p>
    <figure id="http2-fig-9">
      <a href="https://almanac.httparchive.org/static/images/2019/http2/ch20_fig9_num_tcp_connections_trend_over_years.png">
        <img alt="Figure 9. TCP connections per page." aria-labelledby="http2-fig9-caption" aria-describedby="http2-fig9-description" src="/static/images/2019/http2/ch20_fig9_num_tcp_connections_trend_over_years.png" width="600" height="320" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig9-description" data-show-text="{{ show_description(9) }}" data-hide-text="{{ hide_description(9) }}">{{ show_description(9) }}</button>
      <div id="http2-fig9-description" class="visually-hidden">Timeseries chart of the number of TCP connections per page, with the median desktop page having 14 connections and the median mobile page having 16 connections as of July 2019.</div>
      <figcaption id="http2-fig9-caption">
        <a href="#http2-fig-9" class="anchor-link">Figure 9.</a> TCP connections per page. (Source: <a href="https://httparchive.org/reports/state-of-the-web#tcp">HTTP Archive<span class="fn">https://httparchive.org/reports/state-of-the-web#tcp</span></a
        >)
      </figcaption>
    </figure>
    <p>HTTP Archive measures the number of TCP connections per page, and that is dropping steadily as more sites support HTTP/2 and use its single connection instead of six separate connections.</p>
    <figure id="http2-fig-10">
      <a href="https://almanac.httparchive.org/static/images/2019/http2/ch20_fig10_total_requests_per_page_trend_over_years.png">
        <img alt="Figure 10. Total requests per page." aria-labelledby="http2-fig10-caption" aria-describedby="http2-fig10-description" src="/static/images/2019/http2/ch20_fig10_total_requests_per_page_trend_over_years.png" width="600" height="320" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig10-description" data-show-text="{{ show_description(10) }}" data-hide-text="{{ hide_description(10) }}">{{ show_description(10) }}</button>
      <div id="http2-fig10-description" class="visually-hidden">Timeseries chart of the number of requests per page, with the median desktop page having 74 requests and the median mobile page having 69 requests as of July 2019. The trend is relatively flat.</div>
      <figcaption id="http2-fig10-caption">
        <a href="#http2-fig-10" class="anchor-link">Figure 10.</a> Total requests per page. (Source: <a href="https://httparchive.org/reports/state-of-the-web#reqTotal">HTTP Archive<span class="fn">https://httparchive.org/reports/state-of-the-web#reqTotal</span></a
        >)
      </figcaption>
    </figure>
    <p>
      Bundling assets to obtain fewer requests was another HTTP/1.1 workaround that went by many names: bundling, concatenation, packaging, spriting, etc. This is less necessary when using HTTP/2 as there is less overhead with requests, but it should be noted that requests are not free in HTTP/2, and <a href="https://engineering.khanacademy.org/posts/js-packaging-http2.htm">those that experimented with removing bundling completely have noticed a loss in performance<span class="fn">https://engineering.khanacademy.org/posts/js-packaging-http2.htm</span></a
      >. Looking at the number of requests loaded per page over time, we do see a slight decrease in requests, rather than the expected increase.
    </p>
    <p>This low rate of change can perhaps be attributed to the aforementioned observations that bundling cannot be removed (at least, not completely) without a negative performance impact and that many build tools currently bundle for historical reasons based on HTTP/1.1 recommendations. It is also likely that many sites may not be willing to penalize HTTP/1.1 users by undoing their HTTP/1.1 performance hacks just yet, or at least that they do not have the confidence (or time!) to feel that this is worthwhile.</p>
    <p>The fact that the number of requests is staying roughly static is interesting, given the ever-increasing <a href="#page-weight">page weight</a>, though perhaps this is not entirely related to HTTP/2.</p>
    <h2 id="http2-http2-push"><a href="#http2-http2-push" class="anchor-link">HTTP/2 Push</a></h2>
    <p>HTTP/2 push has a mixed history despite being a much-hyped new feature of HTTP/2. The other features were basically performance improvements under the hood, but push was a brand new concept that completely broke the single request to single response nature of HTTP. It allowed extra responses to be returned; when you asked for the web page, the server could respond with the HTML page as usual, but then also send you the critical CSS and JavaScript, thus avoiding any additional round trips for certain resources. It would, in theory, allow us to stop inlining CSS and JavaScript into our HTML, and still get the same performance gains of doing so. After solving that, it could potentially lead to all sorts of new and interesting use cases.</p>
    <p>
      The reality has been, well, a bit disappointing. HTTP/2 push has proved much harder to use effectively than originally envisaged. Some of this has been due to <a href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/">the complexity of how HTTP/2 push works<span class="fn">https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/</span></a
      >, and the implementation issues due to that.
    </p>
    <p>A bigger concern is that push can quite easily cause, rather than solve, performance issues. Over-pushing is a real risk. Often the browser is in the best place to decide <em>what</em> to request, and just as crucially <em>when</em> to request it but HTTP/2 push puts that responsibility on the server. Pushing resources that a browser already has in its cache, is a waste of bandwidth (though in my opinion so is inlining CSS but that gets must less of a hard time about that than HTTP/2 push!).</p>
    <p>
      <a href="https://lists.w3.org/Archives/Public/ietf-http-wg/2019JanMar/0033.html">Proposals to inform the server about the status of the browser cache have stalled<span class="fn">https://lists.w3.org/Archives/Public/ietf-http-wg/2019JanMar/0033.html</span></a> especially on privacy concerns. Even without that problem, there are other potential issues if push is not used correctly. For example, pushing large images and therefore holding up the sending of critical CSS and JavaScript will lead to slower websites than if you'd not pushed at all!
    </p>
    <p>There has also been very little evidence to date that push, even when implemented correctly, results in the performance increase it promised. This is an area that, again, the HTTP Archive is not best placed to answer, due to the nature of how it runs (a crawl of popular sites using Chrome in one state), so we won't delve into it too much here. However, suffice to say that the performance gains are far from clear-cut and the potential problems are real.</p>
    <p>Putting that aside let's look at the usage of HTTP/2 push.</p>
    <figure id="http2-fig-11">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Client</th>
                <th>Sites Using HTTP/2 Push</th>
                <th>Sites Using HTTP/2 Push (%)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Desktop</td>
                <td>22,581</td>
                <td>0.52%</td>
              </tr>
              <tr>
                <td>Mobile</td>
                <td>31,452</td>
                <td>0.59%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-11" class="anchor-link">Figure 11.</a> Sites using HTTP/2 push.</figcaption>
    </figure>
    <figure id="http2-fig-12">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>Client</th>
                <th>Avg Pushed Requests</th>
                <th>Avg KB Pushed</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Desktop</td>
                <td>7.86</td>
                <td>162.38</td>
              </tr>
              <tr>
                <td>Mobile</td>
                <td>6.35</td>
                <td>122.78</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-12" class="anchor-link">Figure 12.</a> How much is pushed when it is used.</figcaption>
    </figure>
    <p>These stats show that the uptake of HTTP/2 push is very low, most likely because of the issues described previously. However, when sites do use push, they tend to use it a lot rather than for one or two assets as shown in Figure 12.</p>
    <p>
      This is a concern as previous advice has been to be conservative with push and to <a href="https://docs.google.com/document/d/1K0NykTXBbbbTlv60t5MyJvXjqKGsCVNYHyLEXIxYMv0/edit">"push just enough resources to fill idle network time, and no more"<span class="fn">https://docs.google.com/document/d/1K0NykTXBbbbTlv60t5MyJvXjqKGsCVNYHyLEXIxYMv0/edit</span></a
      >. The above statistics suggest many resources of a significant combined size are pushed.
    </p>
    <figure id="http2-fig-13">
      <a href="https://almanac.httparchive.org/static/images/2019/http2/ch20_fig13_what_push_is_used_for.png">
        <img src="/static/images/2019/http2/ch20_fig13_what_push_is_used_for.png" aria-labelledby="http2-fig13-caption" alt="Figure 13. What asset types is push used for?" aria-describedby="http2-fig13-description" width="600" height="371" data-width="600" data-height="371" data-seamless="" data-frameborder="0" data-scrolling="no" data-iframe="https://docs.google.com/spreadsheets/d/e/2PACX-1vQLxLA5Nojw28P7ceisqti3oTmNSM-HIRIR0bDb2icJS5TzONvRhdqxQcooh_45TmK97XVpot4kEQA0/pubchart?oid=466353517&amp;format=interactive" />
      </a>
      <button hidden="" class="fig-description-button" aria-expanded="false" aria-controls="fig13-description" data-show-text="{{ show_description(13) }}" data-hide-text="{{ hide_description(13) }}">{{ show_description(13) }}</button>
      <div id="http2-fig13-description" class="visually-hidden">Pie chart breaking down the percent of asset types that are pushed. JavaScript makes up almost half of the assets, then CSS with about a quarter, images about an eighth, and various text-based types making up the rest.</div>
      <figcaption id="http2-fig13-caption"><a href="#http2-fig-13" class="anchor-link">Figure 13.</a> What asset types is push used for?</figcaption>
    </figure>
    <p>Figure 13 shows us which assets are most commonly pushed. JavaScript and CSS are the overwhelming majority of pushed items, both by volume and by bytes. After this, there is a ragtag assortment of images, fonts, and data. At the tail end we see around 100 sites pushing video, which may be intentional, or it may be a sign of over-pushing the wrong types of assets!</p>
    <p>One concern raised by some is that HTTP/2 implementations have repurposed the <code>preload</code> HTTP <code>link</code> header as a signal to push. One of the most popular uses of the <code>preload</code> resource hint is to inform the browser of late-discovered resources, like fonts and images, that the browser will not see until the CSS has been requested, downloaded, and parsed. If these are now pushed based on that header, there was a concern that reusing this may result in a lot of unintended pushes.</p>
    <p>However, the relatively low usage of fonts and images may mean that risk is not being seen as much as was feared. <code>&lt;link rel="preload" ... &gt;</code> tags are often used in the HTML rather than HTTP <code>link</code> headers and the meta tags are not a signal to push. Statistics in the <a href="#resource-hints">Resource Hints</a> chapter show that fewer than 1% of sites use the preload HTTP <code>link</code> header, and about the same amount use preconnect which has no meaning in HTTP/2, so this would suggest this is not so much of an issue. Though there are a number of fonts and other assets being pushed, which may be a signal of this.</p>
    <p>As a counter argument to those complaints, if an asset is important enough to preload, then it could be argued these assets should be pushed if possible as browsers treat a preload hint as very high priority requests anyway. Any performance concern is therefore (again arguably) at the overuse of preload, rather than the resulting HTTP/2 push that happens because of this.</p>
    <p>To get around this unintended push, you can provide the <code>nopush</code> attribute in your preload header:</p>
    <pre><code>link: &lt;/assets/jquery.js&gt;; rel=preload; as=script; nopush</code></pre>
    <p>5% of preload HTTP headers do make use of this attribute, which is higher than I would have expected as I would have considered this a niche optimization. Then again, so is the use of preload HTTP headers and/or HTTP/2 push itself!</p>
    <h2 id="http2-http2-issues"><a href="#http2-http2-issues" class="anchor-link">HTTP/2 Issues</a></h2>
    <p>HTTP/2 is mostly a seamless upgrade that, once your server supports it, you can switch on with no need to change your website or application. You can optimize for HTTP/2 or stop using HTTP/1.1 workarounds as much, but in general, a site will usually work without needing any changesit will just be faster. There are a couple of gotchas to be aware of, however, that can impact any upgrade, and some sites have found these out the hard way.</p>
    <p>
      One cause of issues in HTTP/2 is the poor support of HTTP/2 prioritization. This feature allows multiple requests in progress to make the appropriate use of the connection. This is especially important since HTTP/2 has massively increased the number of requests that can be running on the same connection. 100 or 128 parallel request limits are common in server implementations. Previously, the browser had a max of six connections per domain, and so used its skill and judgement to decide how best to use those connections. Now, it rarely needs to queue and can send all requests as soon as it knows about them. This can then lead to the bandwidth being "wasted" on lower priority requests while critical requests are delayed (and incidentally <a href="https://www.lucidchart.com/techblog/2019/04/10/why-turning-on-http2-was-a-mistake/">can also lead to swamping your backend server with more requests than it is used to!<span class="fn">https://www.lucidchart.com/techblog/2019/04/10/why-turning-on-http2-was-a-mistake/</span></a
      >).
    </p>
    <p>HTTP/2 has a complex prioritization model (too complex many say - hence why it is being reconsidered for HTTP/3!) but few servers honor that properly. This can be because their HTTP/2 implementations are not up to scratch, or because of so-called <em>bufferbloat</em>, where the responses are already en route before the server realizes there is a higher priority request. Due to the varying nature of servers, TCP stacks, and locations, it is difficult to measure this for most sites, but with CDNs this should be more consistent.</p>
    <p>
      <a href="https://twitter.com/patmeenan">Patrick Meenan<span class="fn">https://twitter.com/patmeenan</span></a> created <a href="https://github.com/pmeenan/http2priorities/tree/master/stand-alone">an example test page<span class="fn">https://github.com/pmeenan/http2priorities/tree/master/stand-alone</span></a
      >, which deliberately tries to download a load of low priority, off-screen images, before requesting some high priority on-screen images. A good HTTP/2 server should be able to recognize this and send the high priority images shortly after requested, at the expense of the lower priority images. A poor HTTP/2 server will just respond in the request order and ignore any priority signals. <a href="#contributors-andydavies">Andy Davies</a> has <a href="https://github.com/andydavies/http2-prioritization-issues">a page tracking the status of various CDNs for Patrick's test<span class="fn">https://github.com/andydavies/http2-prioritization-issues</span></a
      >. The HTTP Archive identifies when a CDN is used as part of its crawl, and merging these two datasets can tell us the percent of pages using a passing or failing CDN.
    </p>
    <figure id="http2-fig-14">
      <div class="table-wrap">
        <div class="table-wrap-container">
          <table>
            <thead>
              <tr>
                <th>CDN</th>
                <th>Prioritizes Correctly?</th>
                <th>Desktop</th>
                <th>Mobile</th>
                <th>Both</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Not using CDN</td>
                <td>Unknown</td>
                <td>57.81%</td>
                <td>60.41%</td>
                <td>59.21%</td>
              </tr>
              <tr>
                <td>Cloudflare</td>
                <td>Pass</td>
                <td>23.15%</td>
                <td>21.77%</td>
                <td>22.40%</td>
              </tr>
              <tr>
                <td>Google</td>
                <td>Fail</td>
                <td>6.67%</td>
                <td>7.11%</td>
                <td>6.90%</td>
              </tr>
              <tr>
                <td>Amazon CloudFront</td>
                <td>Fail</td>
                <td>2.83%</td>
                <td>2.38%</td>
                <td>2.59%</td>
              </tr>
              <tr>
                <td>Fastly</td>
                <td>Pass</td>
                <td>2.40%</td>
                <td>1.77%</td>
                <td>2.06%</td>
              </tr>
              <tr>
                <td>Akamai</td>
                <td>Pass</td>
                <td>1.79%</td>
                <td>1.50%</td>
                <td>1.64%</td>
              </tr>
              <tr>
                <td></td>
                <td>Unknown</td>
                <td>1.32%</td>
                <td>1.58%</td>
                <td>1.46%</td>
              </tr>
              <tr>
                <td>WordPress</td>
                <td>Pass</td>
                <td>1.12%</td>
                <td>0.99%</td>
                <td>1.05%</td>
              </tr>
              <tr>
                <td>Sucuri Firewall</td>
                <td>Fail</td>
                <td>0.88%</td>
                <td>0.75%</td>
                <td>0.81%</td>
              </tr>
              <tr>
                <td>Incapsula</td>
                <td>Fail</td>
                <td>0.39%</td>
                <td>0.34%</td>
                <td>0.36%</td>
              </tr>
              <tr>
                <td>Netlify</td>
                <td>Fail</td>
                <td>0.23%</td>
                <td>0.15%</td>
                <td>0.19%</td>
              </tr>
              <tr>
                <td>OVH CDN</td>
                <td>Unknown</td>
                <td>0.19%</td>
                <td>0.18%</td>
                <td>0.18%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <figcaption><a href="#http2-fig-14" class="anchor-link">Figure 14.</a> HTTP/2 prioritization support in common CDNs.</figcaption>
    </figure>
    <p>Figure 14 shows that a fairly significant portion of traffic is subject to the identified issue, totaling 26.82% on desktop and 27.83% on mobile. How much of a problem this is depends on exactly how the page loads and whether high priority resources are discovered late or not for the sites affected.</p>
    <figure id="http2-fig-15">
      <div class="big-number">27.83%</div>
      <figcaption><a href="#http2-fig-15" class="anchor-link">Figure 15.</a> The percent of mobile requests with sub-optimal HTTP/2 prioritization.</figcaption>
    </figure>
    <p>Another issue is with the <code>upgrade</code> HTTP header being used incorrectly. Web servers can respond to requests with an <code>upgrade</code> HTTP header suggesting that it supports a better protocol that the client might wish to use (e.g. advertise HTTP/2 to a client only using HTTP/1.1). You might think this would be useful as a way of informing the browser a server supports HTTP/2, but since browsers only support HTTP/2 over HTTPS and since use of HTTP/2 can be negotiated through the HTTPS handshake, the use of this <code>upgrade</code> header for advertising HTTP/2 is pretty limited (for browsers at least).</p>
    <p>Worse than that, is when a server sends an <code>upgrade</code> header in error. This could be because a backend server supporting HTTP/2 is sending the header and then an HTTP/1.1-only edge server is blindly forwarding it to the client. Apache emits the <code>upgrade</code> header when <code>mod_http2</code> is enabled but HTTP/2 is not being used, and an nginx instance sitting in front of such an Apache instance happily forwards this header even when nginx does not support HTTP/2. This false advertising then leads to clients trying (and failing!) to use HTTP/2 as they are advised to.</p>
    <p>108 sites use HTTP/2 while they also suggest upgrading to HTTP/2 in the <code>upgrade</code> header. A further 12,767 sites on desktop (15,235 on mobile) suggest upgrading an HTTP/1.1 connection delivered over HTTPS to HTTP/2 when it's clear this was not available, or it would have been used already. These are a small minority of the 4.3 million sites crawled on desktop and 5.3 million sites crawled on mobile, but it shows that this is still an issue affecting a number of sites out there. Browsers handle this inconsistently, with Safari in particular attempting to upgrade and then getting itself in a mess and refusing to display the site at all.</p>
    <p>All of this is before we get into the few sites that recommend upgrading to <code>http1.0</code>, <code>http://1.1</code>, or even <code>-all,+TLSv1.3,+TLSv1.2</code>. There are clearly some typos in web server configurations going on here!</p>
    <p>
      There are further implementation issues we could look at. For example, HTTP/2 is much stricter about HTTP header names, rejecting the whole request if you respond with spaces, colons, or other invalid HTTP header names. The header names are also converted to lowercase, which catches some by surprise if their application assumes a certain capitalization. This was never guaranteed previously, as HTTP/1.1 specifically states the <a href="https://tools.ietf.org/html/rfc7230#section-3.2">header names are case insensitive<span class="fn">https://tools.ietf.org/html/rfc7230#section-3.2</span></a
      >, but still some have depended on this. The HTTP Archive could potentially be used to identify these issues as well, though some of them will not be apparent on the home page, but we did not delve into that this year.
    </p>
    <h2 id="http2-http3"><a href="#http2-http3" class="anchor-link">HTTP/3</a></h2>
    <p>
      The world does not stand still, and despite HTTP/2 not having even reached its fifth birthday, people are already seeing it as old news and getting more excited about its successor, <a href="https://tools.ietf.org/html/draft-ietf-quic-http">HTTP/3<span class="fn">https://tools.ietf.org/html/draft-ietf-quic-http</span></a
      >. HTTP/3 builds on the concepts of HTTP/2, but moves from working over TCP connections that HTTP has always used, to a UDP-based protocol called <a href="https://datatracker.ietf.org/wg/quic/about/">QUIC<span class="fn">https://datatracker.ietf.org/wg/quic/about/</span></a
      >. This allows us to fix one case where HTTP/2 is slower then HTTP/1.1, when there is high packet loss and the guaranteed nature of TCP holds up all streams and throttles back all streams. It also allows us to address some TCP and HTTPS inefficiencies, such as consolidating in one handshake for both, and supporting many ideas for TCP that have proven hard to implement in real life (TCP fast open, 0-RTT, etc.).
    </p>
    <p>HTTP/3 also cleans up some overlap between TCP and HTTP/2 (e.g. flow control being implemented in both layers) but conceptually it is very similar to HTTP/2. Web developers who understand and have optimized for HTTP/2 should have to make no further changes for HTTP/3. Server operators will have more work to do, however, as the differences between TCP and QUIC are much more groundbreaking. They will make implementation harder so the rollout of HTTP/3 may take considerably longer than HTTP/2, and initially be limited to those with certain expertise in the field like CDNs.</p>
    <p>
      QUIC has been implemented by Google for a number of years and it is now undergoing a similar standardization process that SPDY did on its way to HTTP/2. QUIC has ambitions beyond just HTTP, but for the moment it is the use case being worked on currently. Just as this chapter was being written, <a href="https://blog.cloudflare.com/http3-the-past-present-and-future/">Cloudflare, Chrome, and Firefox all announced HTTP/3 support<span class="fn">https://blog.cloudflare.com/http3-the-past-present-and-future/</span></a
      >, despite the fact that HTTP/3 is still not formally complete or approved as a standard yet. This is welcome as QUIC support has been somewhat lacking outside of Google until recently, and definitely lags behind SPDY and HTTP/2 support from a similar stage of standardization.
    </p>
    <p>Because HTTP/3 uses QUIC over UDP rather than TCP, it makes the discovery of HTTP/3 support a bigger challenge than HTTP/2 discovery. With HTTP/2 we can mostly use the HTTPS handshake, but as HTTP/3 is on a completely different connection, that is not an option here. HTTP/2 also used the <code>upgrade</code> HTTP header to inform the browser of HTTP/2 support, and although that was not that useful for HTTP/2, a similar mechanism has been put in place for QUIC that is more useful. The <em>alternative services</em> HTTP header (<code>alt-svc</code>) advertises alternative protocols that can be used on completely different connections, as opposed to alternative protocols that can be used on this connection, which is what the <code>upgrade</code> HTTP header is used for.</p>
    <figure id="http2-fig-16">
      <div class="big-number">8.38%</div>
      <figcaption><a href="#http2-fig-16" class="anchor-link">Figure 16.</a> The percent of mobile sites which support QUIC.</figcaption>
    </figure>
    <p>Analysis of this header shows that 7.67% of desktop sites and 8.38% of mobile sites already support QUIC, which roughly represents Google's percentage of traffic, unsurprisingly enough, as it has been using this for a while. And 0.04% are already supporting HTTP/3. I would imagine by next year's Web Almanac, this number will have increased significantly.</p>
    <h2 id="http2-conclusion"><a href="#http2-conclusion" class="anchor-link">Conclusion</a></h2>
    <p>This analysis of the available statistics in the HTTP Archive project has shown what many of us in the HTTP community were already aware of: HTTP/2 is here and proving to be very popular. It is already the dominant protocol in terms of number of requests, but has not quite overtaken HTTP/1.1 in terms of number of sites that support it. The long tail of the internet means that it often takes an exponentially longer time to make noticeable gains on the less well-maintained sites than on the high profile, high volume sites.</p>
    <p>We've also talked about how it is (still!) not easy to get HTTP/2 support in some installations. Server developers, operating system distributors, and end customers all have a part to play in pushing to make that easier. Tying software to operating systems always lengthens deployment time. In fact, one of the very reasons for QUIC is to break a similar barrier with deploying TCP changes. In many instances, there is no real reason to tie web server versions to operating systems. Apache (to use one of the more popular examples) will run with HTTP/2 support in older operating systems, but getting an up-to-date version on to the server should not require the expertise or risk it currently does. Nginx does very well here, hosting repositories for the common Linux flavors to make installation easier, and if the Apache team (or the Linux distribution vendors) do not offer something similar, then I can only see Apache's usage continuing to shrink as it struggles to hold relevance and shake its reputation as old and slow (based on older installs) even though up-to-date versions have one of the best HTTP/2 implementations. I see that as less of an issue for IIS, since it is usually the preferred web server on the Windows side.</p>
    <p>
      Other than that, HTTP/2 has been a relatively easy upgrade path, which is why it has had the strong uptake it has already seen. For the most part, it is a painless switch-on and, therefore, for most, it has turned out to be a hassle-free performance increase that requires little thought once your server supports it. The devil is in the details though (as always), and small differences between server implementations can result in better or worse HTTP/2 usage and, ultimately, end user experience. There has also been a number of bugs and even <a href="https://github.com/Netflix/security-bulletins/blob/master/advisories/third-party/2019-002.md">security issues<span class="fn">https://github.com/Netflix/security-bulletins/blob/master/advisories/third-party/2019-002.md</span></a
      >, as is to be expected with any new protocol.
    </p>
    <p>Ensuring you are using a strong, up-to-date, well-maintained implementation of any newish protocol like HTTP/2 will ensure you stay on top of these issues. However, that can take expertise and managing. The roll out of QUIC and HTTP/3 will likely be even more complicated and require more expertise. Perhaps this is best left to third-party service providers like CDNs who have this expertise and can give your site easy access to these features? However, even when left to the experts, this is not a sure thing (as the prioritization statistics show), but if you choose your server provider wisely and engage with them on what your priorities are, then it should be an easier implementation.</p>
    <p>On that note it would be great if the CDNs prioritized these issues (pun definitely intended!), though I suspect with the advent of a new prioritization method in HTTP/3, many will hold tight. The next year will prove yet more interesting times in the HTTP world.</p>
  </div>

  <div class="authors">
    {% for author in metadata.get('authors') %} {% if loop.index == 1 %}
    <h2 id="{{ metadata.get('chapter') }}-authors">
      <a href="#{{ metadata.get('chapter') }}-authors" class="anchor-link">
        {% if loop.length == 1 %}{{ self.author() }}{% endif -%} {% if loop.length > 1 and loop.index == 1 %}{{ self.authors() }}{% endif %}
      </a>
    </h2>
    <ul>
      {% endif %} {% set authordata = config.contributors[author] if author in config.contributors else None %}
      <li>
        <a href="#contributors-{{ author }}"><img class="avatar" alt="{{ authordata.name }} avatar" src="{{ authordata.avatar_url }}" height="200" width="200" /></a>
        <div class="info">
          <a href="#contributors-{{ author }}"><span class="name">{{ authordata.name }}</span></a>
          {% if authordata.twitter or authordata.github %}
          <span class="social">
            {% if authordata.twitter %}
            <a class="twitter" href="https://twitter.com/{{ authordata.twitter }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-twitter">{{ onTwitter(authordata.twitter) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#twitter"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.github %}
            <a class="github" href="https://github.com/{{ authordata.github }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-github">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-github">{{ onGitHub(authordata.github) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#github"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.linkedin %}
            <a class="linkedin" href="https://www.linkedin.com/in/{{ authordata.linkedin }}/" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-linkedin">{{ onLinkedIn(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#linkedin"></use>
              </svg>
            </a>
            {% endif %} {% if authordata.website %}
            <a class="website" href="{{ authordata.website }}" aria-labelledby="{{ metadata.get('chapter') }}-author-{{ author }}-website">
              <svg role="img">
                <title id="{{ metadata.get('chapter') }}-author-{{ author }}-website">{{ website(authordata.name) }}</title>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#globe"></use>
              </svg>
            </a>
            {% endif %}
          </span>
          {% endif %} {% if authordata.tagline %}
          <div class="tagline">
            {{ authordata.tagline }}
          </div>
          {% endif %}
          <div class="bio">
            {{ add_footnote_links(localizedContributors[author] if localizedContributors[author]|length) | safe }}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% endblock %}
